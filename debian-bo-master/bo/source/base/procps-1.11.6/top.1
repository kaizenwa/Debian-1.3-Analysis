.\" This file Copyright 1992 Robert J. Nation 
.\" (nation@rocket.sanders.lockheed.com)
.\" It may be distributed under the GNU Public License, version 2, or
.\" any higher version.  See section COPYING of the GNU Public license
.\" for conditions under which this file may be redistributed.
.\"
.\" Modified 1994/04/25 Michael Shields <mjshield@nyx.cs.du.edu>
.\" Cleaned up, and my changes documented.  New `.It' macro.  Edited.
.\" modified 1996/10/03 Helmut Geyer to match my changes.
.
.de It
.TP 0.5i
.B "\\$1 "
..
.TH TOP 1 "Feb 1 1993" "Linux" "Linux Programmer's Manual"
.SH NAME
top \- display top CPU processes
.SH SYNOPSIS
.B top
.BR \- [ "aqxsSbei" ]
.RB [ "\-d"
.IR delay ]
.RB [ "\-t"
.IR tty ]
.RB [ "\-u"
.IR username/uid ]
.RB [ "\-U"
.IR username/uid ]
.SH DESCRIPTION
.B top
provides an ongoing look at processor activity in real time.  It
displays a listing of the most CPU-intensive tasks on the system, and
can provide an interactive interface for manipulating processes.
It can sort the tasks by CPU usage, memory usage and runtime.
.N top
can be better configured than the old top.orig from the procps suite.
Most features can either be selected by an interactive command or by 
specifying the feature in the personal or system-wide configuration
file. See below for more information. Top can run in a window of
arbitrary size, but it likes to have at least 80 characters and 16
lines to display the help and configuration screens correctly.
.PP
.SH "COMMAND\-LINE OPTIONS"
.It a
Use an alternative format to display time intervals. The default
behaviour is determined at compile-time. The interactive 
.It a
command does the same.
.It d
Specifies the delay between screen updates.  You can change this with
the
.B s
interactive command.
.It q
This causes
.B top
to refresh without any delay. If the caller has superuser privileges,
top runs with very high priority.
.It S
Specifies cumulative mode, where each process is listed with the CPU
time that it
.I as well as its dead children
has spent.  This is like the
.B -S
flag to
.BR ps (1).
See the discussion below of the
.B S
interactive command.
.It s
Tells
.B top
to run in secure mode.  This disables the potentially dangerous of the
interactive commands (see below).  A secure
.B top
is a nifty thing to leave running on a spare terminal.
.It b 
Toggle use of bold and reverse terminal modes. This is available as
interactive command 
.I b
as well. The standard setting is read from the configuration file, by
default bold and reverse modes are used to distinguish header and
body lines.  
.It e
Toggle support for colorisation of processes. See below for some information.
Not yet very well documented as it probably will change until the
final release. 
 
You can toggle colorisation using the interactive 
.I e
command as well.
.It i
Start
.B top
ignoring any idle or zombie processes. See the interactive command
.B i
below.
.It t
Display only processes with controling terminal 
.IR tty .
This flag can be given up to ten times. This option is neither
available interactively nor can it be put into the configuration file. 
.It u 
Display only processes belonging to the user corresponding to 
.I username
or 
.IR uid .
This flag can be given up to ten times. This option is neither
available interactively nor can it be put into the configuration file. 
.It U 
Don't display processes belonging to the user corresponding to 
.I username
or
.IR uid .
This flag can be given up to ten times. This option is neither
available interactively nor can it be put into the configuration file. 
.It c
toggle display of command line instead of command name only. The 
standard setting is read from the personal configuration file, by
default only the command name is displayed.
.
.SH "FIELD DESCRIPTIONS"
.B top
displays a variety of information about the processor state.  The
display is updated every 5 seconds by default, but you can change that
with the
.B d
command-line option or the
.B s
interactive command.
.It "uptime"
This line displays the time the system has been up, and the three load
averages for the system.  The load averages are the average number of
process ready to run during the last 1, 5 and 15 minutes.  This line is
just like the output of
.BR uptime (1).
The uptime display may be toggled by the interactive 
.B l
command.
.It processes
The total number of processes running at the time of the last update.
This is also broken down into the number of tasks which are running,
sleeping, stopped, or undead. The processes and states display may be
toggled by the 
.B t
interactive command.
.It "CPU states"
Shows the percentage of CPU time in user mode, system mode, niced tasks,
and idle.  (Niced tasks are only those whose nice value is negative.)
Time spent in niced tasks will also be counted in system and user time,
so the total will be more than 100%.  The processes and states display
may be
toggled by the
.B t
interactive command.
.It Mem
Statistics on memory usage, including total available memory, free
memory, used memory, shared memory, and memory used for buffers. The
display of memory information may be toggled by the
.B m
interactive command.
.It Swap
Statistics on swap space, including total swap space, available swap
space, and used swap space.  This and
.B Mem
are just like the output of
.BR free (1).
.so man7/ps_fields.7
.
.SH "INTERACTIVE COMMANDS"
Several single-key commands are recognized while
.B top
is running.  Some are disabled if the
.B s
option has been given on the command line.
.It a
Use alternate time format for time intervals.
.It ^L
Erases and redraws the screen.
.It "h\fR or \fB?"
Displays a help screen giving a brief summary of commands, and the
status of secure and cumulative modes.
.It k
Kill a process.  You will be prompted for the PID of the task, and the
signal to send to it.  For a normal kill, send signal 15.  For a sure,
but rather abrupt, kill, send signal 9.  The default signal, as with
.BR kill (1),
is 15,
.BR SIGTERM .
This command is not available in secure mode.
.It i
Ignore idle and zombie processes.  This is a toggle switch.
.It "n\fR or \fB#"
Change the number of processes to show.  You will be prompted to enter
the number.  This overrides automatic determination of the number of
processes to show, which is based on window size measurement.  If 0 is
specified, then top will show as many processes as will fit on the
screen; this is the default.
.It q
Quit.
.It b 
toggle use of reverse and bold terminal modes.
.It r
Re-nice a process.  You will be prompted for the PID of the task, and
the value to nice it to.  Entering a positve value will cause a process
to be niced to negative values, and lose priority.  If root is running
.BR top ,
a negative value can be entered, causing a process to get a higher than
normal priority.  The default renice value is 10.  This command is not
available in secure mode.
.It S
This toggles cumulative mode, the equivalent of
.BR "ps -S" ,
i.e., that CPU times will include a process's defunct children.  For
some programs, such as compilers, which work by forking into many
seperate tasks, normal mode will make them appear less demanding than
they actually are.  For others, however, such as shells and
.BR init ,
this behavior is correct.  In any case, try cumulative mode for an
alternative view of CPU use.
.It s
Change the delay between updates.  You will be prompted to enter the
delay time, in seconds, between updates.  Fractional values are
recognized down to microseconds.  Entering 0 causes continuous updates.
The default value is 5 seconds.  Note that low values cause nearly
unreadably fast displays, and greatly raise the load.  This command is
not available in secure mode.
.It "f\fR or \fBF"
Add fields to display, change field order or remove fields from the 
display. See below for more information.
.It l
toggle display of load average and uptime information.
.It m
toggle display of memory information.
.It t
toggle display of processes and CPU states information.
.It c
toggle display of command name or full command line.
.It M
sort tasks by resident memory usage.
.It P
sort tasks by CPU usage (default).
.It T
sort tasks by time / cumulative time.
.It W
Write current setup to 
.IR ~/.toprc .
This is the recommended way to write a top configuration file.
.
.SH The Field and Order Screen
After pressing 
.B f 
or
.B F
you will be shown a screen specifying the field order on the top lines
and tags of up to 52 fields. See above for the exact meaning of those
tags.
The field order string
uses the same syntax as the format string used by the 
.B --format
command line option.
 
Tags of selected fields are marked by a leading asterisk. As there
are more tags/fields available than usually fit on a single screen,
you may switch to the next resp. previous screen by pressing 
.B + 
resp. 
.BR - .
 
A field is selected for an action by pressing the letter (note case
is important) associated to the tag. 
.B <return>
toggles the display of a field, by pressing 
.B =
you can specify a width for this field. The order of a field on the
display is modified using 
.B <
(or 
.BR <Left> )
and
.B >
(or
.BR <Right> ).
 Using 
.B <Up>
and 
.B <Down>
you can step through the fields, once you have selected one.
.
.SH Configuration Files
Top reads it's default configuration from two files,
.I /etc/toprc
and
.IR ~/.toprc .
The global configuration file may be used to restrict the usage of top
to the secure mode for non-priviledged users. If this is desired, the
file should contain a 's' to specify secure mode and a digit d (2<=d<=9)
for the default delay (in seconds) on a single line.
.
The personal configuration file contains two lines. The first line
contains lower and upper letters to specify which fields in what
order are to be displayed. The letters correspond to the letters in the
Fields or Order screens from top. As this is not very instructive, it is
recommended to select fields and order in a running top process and to
save this using the 
.I W
interactive command. 
.
The second line is more interesting (and important). It contains
information on the other options. Most important, if you have saved a
configuration in secure mode, you will not get an insecure top without
removing the lower 's' from the second line of your 
.IR ~/.toprc .
A digit specifies the delay time between updates, a capital 'S'
cumulative mode, a lower 'i' no-idle mode. As in interactive mode, a
lower 'm', 'l', and 't' suppresses the display of memory, uptime resp.
process and CPU state information.
Currently changing the default sorting order (by CPU usage) is not 
supported.
.so man7/ps_color.7
.
.SH NOTES
This
.BR proc -based
.B top
works by reading the files in the
.B proc
filesystem,
mounted on
.IR /proc .
If
.I /proc
is not mounted,
.B top
will not work.
.PP
.B %CPU
shows the cputime/realtime percentage in the period of time between 
updates.  For the first update, a short delay is used, and
.B top
itself dominates the CPU usage.  After that,
.B top
will drop back, and a more reliable estimate of CPU usage is available.
.PP
The
.B SIZE
and
.B RSS fields don't count the page tables and the
.B task_struct
of a process; this is at least 12K of memory that is always resident.
.B SIZE
is the virtual size of the process (code+data+stack).
.PP
Keep in mind that a process must die for its time to be recorded on its
parent by cumulative mode.  Perhaps more useful behavior would be to
follow each process upwards, adding time, but that would be more
expensive, possibly prohibitively so.  In any case, that would make
.BR top 's
behavior incompatible with
.BR ps .
.
.SH FILES
.I /etc/toprc 
The global configuration file. 
.I ~/.toprc
The personal configuration file.
.
.SH "SEE ALSO"
.BR ps (1),
.BR free (1),
.BR uptime (1),
.BR kill (1),
.BR renice (1).
.
.SH
BUGS
If the window is less than about 80x16,
.B top
will not format the help screens correctly.
 Many fields still have problems with ELF processes.
.
.SH AUTHOR
.B top
was originally written by Roger Binns, based on Branko Lankester's
(lankeste@fwi.uva.nl) ps program.
Robert Nation (nation@rocket.sanders.lockheed.com) re-wrote it
significantly to use the proc filesystem, based on Michael K Johnson's
(johnsonm@sunsite.unc.edu) proc-based ps program.
Many changes were made, including secure and cumulative modes and a
general cleanup, by Michael Shields (mjshield@nyx.cs.du.edu).

Heavily changed to include support for configurable fields and other
new options. Further cleanup and use of the new readproc interface.
by Helmut Geyer (Helmut.Geyer@iwr.uni-heidelberg.de).
