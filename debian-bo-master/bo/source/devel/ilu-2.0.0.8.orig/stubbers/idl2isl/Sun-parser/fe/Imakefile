# $Id: Imakefile,v 2.3 1994/09/07 21:20:10 janssen Exp $
#
# Copyright (c) 1994 Xerox Corporation.  All Rights Reserved.  
#
# Unlimited use, reproduction, and distribution of this software is
# permitted.  Any copy of this software must include both the above
# copyright notice of Xerox Corporation and this paragraph.  Any
# distribution of this software must comply with all applicable United
# States export control laws.  This software is made available AS IS,
# and XEROX CORPORATION DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED,
# INCLUDING WITHOUT LIMITATION THE IMPLIED WARRANTIES OF MERCHANTABILITY
# AND FITNESS FOR A PARTICULAR PURPOSE, AND NOTWITHSTANDING ANY OTHER
# PROVISION CONTAINED HEREIN, ANY LIABILITY FOR DAMAGES RESULTING FROM
# THE SOFTWARE OR ITS USE IS EXPRESSLY DISCLAIMED, WHETHER ARISING IN
# CONTRACT, TORT (INCLUDING NEGLIGENCE) OR STRICT LIABILITY, EVEN IF
# XEROX CORPORATION IS ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.

# The following macros are needed only to regenerate lex.yy.cc from idl.ll and
# y.tab.cc and y.tab.hh from idl.yy.
TOOLBIN	= /project/sc2.0.1/lang
YACC	= $(TOOLBIN)/yacc
LEX	= $(TOOLBIN)/lex

LOCALINCLUDES = -I../include -D$(IDL_CFE_OSV)

LIB	= libfe.a

SRCS	= \
	lex.yy.cc \
	y.tab.cc \
	fe_declarator.cc \
	fe_extern.cc \
	fe_init.cc \
	fe_interface_header.cc \
	fe_private.cc

OBJS	= $(SRCS:.cc=.o)

libs	: $(LIB)

NormalObjectRule()
LibraryTarget($(LIB), $(OBJS))

#ifdef ILU_DEVELOPMENT

# Create the parser and lexer
dist:: y.tab.hh y.tab.cc lex.yy.cc

y.tab.hh y.tab.cc: idl.yy
	$(RM) -f $@
	$(YACC) -t -d idl.yy
	mv -f y.tab.c y.tab.cc
	mv -f y.tab.h y.tab.hh

lex.yy.cc: idl.ll
	@$(RM) -f $@
	$(LEX) -t idl.ll > lex.out
	mv -f lex.out $@

#endif /* ILU_DEVELOPMENT */

lex.yy.o: y.tab.hh
