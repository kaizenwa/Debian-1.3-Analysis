. ../config/system
. ../config/site

cat <<HERE
#!/bin/sh

# Dynamic loading is not supported on this platform.  This shell script
# just combines several .o files into a single .o file.
#
# Arguments are the output file and one or more object files and libraries.

if [ \$# -lt 2 ]; then
    echo Usage: "\$0: output-file object-files [libraries]"
    exit 1
fi

output=\$1
shift

if [ \$# != 1 -o _\$1 != _\$output ]; then
    $ld -r $obj_ldflags $xflag \$*
    mv a.out \$output
    chmod 644 \$output
fi
HERE
