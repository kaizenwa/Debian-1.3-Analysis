***************
*** 97,102 ****
  !	siglongjmp() will return to this place and supply a return value
  	ENTRY(sigsetjmp)
  	save	%sp,-SA(MINFRAME),%sp	! Get a new window
  	st	%fp,[%i0+jmp_sp]	! Save stack pointer of previous frame
  	set	NAME(pthread_kern),%l2	! Get kernel address
  	st	%i1,[%i0+jmp_svmask]	! env[JB_SVMASK] = TRUE;
--- 97,103 ----
  !	siglongjmp() will return to this place and supply a return value
  	ENTRY(sigsetjmp)
  	save	%sp,-SA(MINFRAME),%sp	! Get a new window
+ 	ta	ST_FLUSH_WINDOWS	! Make sure the registers are saved
  	st	%fp,[%i0+jmp_sp]	! Save stack pointer of previous frame
  	set	NAME(pthread_kern),%l2	! Get kernel address
  	st	%i1,[%i0+jmp_svmask]	! env[JB_SVMASK] = TRUE;
