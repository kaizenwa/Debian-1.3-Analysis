srcdir = @srcdir@
VPATH = @srcdir@
top_srcdir = @top_srcdir@
INSTALL = @INSTALL@

include ../include/Defines

.PHONY: $(DEFAULT_TARGETS) install.man

override CPPFLAGS := $(DEFS) -I../include -I$(top_srcdir) -I$(srcdir) -I- \
		     $(CPPFLAGS)

LOCDIR := $(bindir)
MANDIR := $(man1dir)

all: gencat 

gencat: gencat.o genlib.o
	$(CC) $(LDFLAGS) -o $@ gencat.o genlib.o

install: all install.man
	$(MKINSTALLDIRS) $(LOCDIR)
	$(INSTALL_PROGRAM) gencat $(LOCDIR)/gencat

install.man:
	$(MKINSTALLDIRS) $(MANDIR)
	$(INSTALL_DATA) gencat.1 $(MANDIR)/gencat$(man1ext)

uninstall:
	/bin/rm -f $(LOCDIR)/gencat
	/bin/rm -f $(MANDIR)/gencat$(man1ext)

mostlyclean clean:
	rm -f *.o gencat core *~ 

distclean: clean
	rm -f Makefile

realclean: distclean
	rm -f tags
	
TAGS:
	$(MKTAGS) $(srcdir)/*.[ch]
