<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Draft//EN">
<HTML>
<HEAD>
<TITLE> Linux from DOS to Linux HOWTO : Floppy, hard disk, e cos&igrave; via </TITLE>
</HEAD>
<BODY>
<A HREF="DOStoLinux-HOWTO-3.html">Precedente</A>
<A HREF="DOStoLinux-HOWTO-5.html">Successivo</A>
<A HREF="DOStoLinux-HOWTO.html#toc4">Indice</A>
<HR>
<H2><A NAME="Floppies"></A> <A NAME="s4">4. Floppy, hard disk, e cos&igrave; via </A></H2>

<P>
<P>
<H2><A NAME="ss4.1">4.1 Gestire i dispositivi</A></H2>

<P>
<P>Forse non ci avete mai pensato, ma il comando DOS <CODE>FORMAT A:</CODE> fa molte
pi&ugrave; cose di quanto sembri. Infatti, quando date il comando <CODE>FORMAT</CODE> 
quello 1) formatta fisicamente il disco; 2) crea la directory A:\ 
(crea un filesystem); 3) rende il disco accessibile all'utente (= fa il
cosiddetto ``mount'').
<P>Questi tre passaggi si fanno separatamente con Linux. Si possono usare
floppy formattati da DOS, ma ci sono altri formati che di solito &egrave; meglio
usare (il filesistem DOS non consente di usare i nomi lunghi per i file.)
<P>Ecco come si prepara un floppy (bisogna essere root):
<P>
<UL>
<LI> per formattare un floppy standard da 1.44: (A:):
<BLOCKQUOTE><CODE>
<PRE>
# fdformat /dev/fd0H1440
</PRE>
</CODE></BLOCKQUOTE>

</LI>
<LI> per creare un filesystem:
<BLOCKQUOTE><CODE>
<PRE>
# mkfs -t ext2 -c /dev/fd0H1440
</PRE>
</CODE></BLOCKQUOTE>

oppure
<BLOCKQUOTE><CODE>
<PRE>
# mformat a:
</PRE>
</CODE></BLOCKQUOTE>

per creare un filesystem MS-DOS. Prima di usare il disco, bisogna
``montarlo''. 
</LI>
<LI> per montare il floppy:
<BLOCKQUOTE><CODE>
<PRE>
# mount -t ext2 /dev/fd0 /mnt
</PRE>
</CODE></BLOCKQUOTE>

oppure
<BLOCKQUOTE><CODE>
<PRE>
# mount -t msdos /dev/fd0 /mnt
</PRE>
</CODE></BLOCKQUOTE>


Ora si pu&ograve; accedere ai file del floppy. Quando si ha finito, prima di
estrarre il floppy <EM>bisogna</EM> ``smontarlo''.
</LI>
<LI> per smontare il floppy:
<BLOCKQUOTE><CODE>
<PRE>
# umount /mnt
</PRE>
</CODE></BLOCKQUOTE>

</LI>
</UL>
<P>Ora potete estrarre il disco. Ovviamente, eseguire <CODE>fdformat</CODE> e <CODE>mkfs</CODE>
solo per floppy nuovi, non per quelli gi&agrave; preparati. Se volete usare il
floppy B:, basta sostituire <CODE>fd1H1440</CODE> e <CODE>fd1</CODE> al posto di
<CODE>fd0H1440</CODE> e <CODE>fd0</CODE> negli esempi visti sopra.
<P>Tutto quello che facevate con A: o B: si fa ora usando <CODE>/mnt</CODE>.
Esempi:
<P>
<BLOCKQUOTE><CODE>
<PRE>

DOS                                     Linux
---------------------------------------------------------------------

C:\GUIDO&gt;dir a:                         $ ls /mnt
C:\GUIDO&gt;copy a:*.*                     $ cp /mnt/* /docs/temp
C:\GUIDO&gt;copy *.zip a:                  $ cp *.zip /mnt/zip
C:\GUIDO&gt;a:                             $ cd /mnt
A:&gt;_                                    /mnt/$ _
</PRE>
</CODE></BLOCKQUOTE>
<P>Inutile dire che quanto visto per i floppy vale anche per altri dispositivi; per
esempio, si possono montare un altro disco fisso o un lettore di CD-ROM.
Ecco come si monta il CD-ROM:
<P>
<BLOCKQUOTE><CODE>
<PRE>
# mount -t iso9660 /dev/cdrom /mnt
</PRE>
</CODE></BLOCKQUOTE>
<P>Questa era la maniera ``ufficiale'' di montare i dischi, ma c'&egrave; un
trucchetto. Dover essere root per usare un floppy &egrave; una scocciatura, quindi
per consentire ad ogni utente di accedervi si pu&ograve; fare cos&igrave;:
<P>
<UL>
<LI> come root, creare le directory <CODE>/mnt/a</CODE>, 
<CODE>/mnt/a:</CODE> e <CODE>/mnt/cdrom</CODE>
</LI>
<LI> aggiungere in <CODE>/etc/fstab</CODE> le linee seguenti:
<BLOCKQUOTE><CODE>
<PRE>
/dev/cdrom      /mnt/cdrom  iso9660 ro,user,noauto          0       0
/dev/fd0        /mnt/a:     msdos   user,noauto             0       0
/dev/fd0        /mnt/a      ext2    user,noauto             0       0
</PRE>
</CODE></BLOCKQUOTE>

</LI>
</UL>
<P>Ora per montare un floppy DOS, uno in formato ext2 e un CD-ROM si fa
semplicemente:
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ mount /mnt/a:
$ mount /mnt/a
$ mount /mnt/cdrom
</PRE>
</CODE></BLOCKQUOTE>
<P><CODE>/mnt/a</CODE>, <CODE>/mnt/a:</CODE> e <CODE>/mnt/cdrom</CODE> sono accessibili da
tutti. Mi sono accorto che per scrivere file su <CODE>/mnt/a</CODE> senza
essere root, subito dopo aver formattato e scritto il filesistem sul floppy
bisogna fare:
<P>
<BLOCKQUOTE><CODE>
<PRE>
# mount /mnt/a
# chmod 777 /mnt/a
# umount /mnt/a
</PRE>
</CODE></BLOCKQUOTE>
<P>Ricordate che consentire a tutti di montare dischi in questo modo &egrave; un
grosso problema di sicurezza, se la cosa vi pu&ograve; interessare.
<P>

<H2><A NAME="Backing Up"></A> <A NAME="ss4.2">4.2 Fare il backup </A></H2>

<P>
<P>Ora che sapete come gestire i dispositivi, due righe per vedere come si fa il
backup. Ci sono molti progammi per questo scopo, ma il minimo necessario che
si pu&ograve; fare per un backup multivolume su floppy &egrave; quanto segue (diventate
root):
<P>
<BLOCKQUOTE><CODE>
<PRE>
# tar -M -cvf /dev/fd0H1440 /dir_to_backup
</PRE>
</CODE></BLOCKQUOTE>
<P>Assicuratevi di avere un floppy formattato nel drive, e altri pronti a
disposizione. Per fare il restore, inserite il primo floppy nel drive e
immettete:
<P>
<BLOCKQUOTE><CODE>
<PRE>
# tar -M -xpvf /dev/fd0H1440
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P>

<HR>
<A HREF="DOStoLinux-HOWTO-3.html">Precedente</A>
<A HREF="DOStoLinux-HOWTO-5.html">Successivo</A>
<A HREF="DOStoLinux-HOWTO.html#toc4">Indice</A>
</BODY>
</HTML>
