.\" Hey Emacs! This file is -*- nroff -*- source.
.\"
.\" Copyright (c) 1993 Michael Haardt
.\" (u31b3hs@pool.informatik.rwth-aachen.de),
.\" Fri Apr  2 11:32:09 MET DST 1993
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139,
.\" USA.
.\"
.\" Modified Fri Jul 23 23:47:18 1993 by Rik Faith (faith@cs.unc.edu)
.\"
.\" Traduction 12/10/1996 par Christophe Blaess (ccb@club-internet.fr)
.\"
.TH PTRACE 2 "12 Octobre 1996 " "Linux 0.99.11" "Manuel du programmeur Linux"
.SH NOM
ptrace \- Suivre un processus.
.SH SYNOPSIS
.B #include <sys/ptrace.h>
.sp
.BI "int ptrace(int " request ", int " pid ", int " addr ", int " data );
.SH DESCRIPTION
.B Ptrace
fournit au processus parent un moyen de controler l'execution d'un enfant,
et d'editer son image memoire.
L'utilisation primordiale de cette fonction est l'implementation de points
d'arret pour le debugging.

Un processus suivi se deroule jusqu'a l'arrivee d'un signal. Ensuite il 
s'interrompt et son parent sera averti grace a la fonction
.BR wait (2).

Quand le processus se trouve arrete (stop), sa memoire peut etre
lue et ecrite.
Le parent peut egalement faire continuer l'execution de son fils, avec
une option pour ignorer le signal ayant declenche l'arret.
.LP
La valeur de l'argument \fIrequest\fP indique precisement l'action a entreprendre.
.TP
PTRACE_TRACEME
Le processus en cours va etre suivi par son pere. Le parent doit etre en attente
de suivi du fils.
.TP
PTRACE_PEEKTEXT, PTRACE_PEEKDATA
Lire un mot a l'adresse
.IR addr .
.TP
PTRACE_PEEKUSR
Lire un mot a l'adresse
.I addr
dans l'espace
.B USER.
.TP
PTRACE_POKETEXT, PTRACE_POKEDATA
Ecrire un mot a l'adresse
.IR addr .
.TP
PTRACE_POKEUSR
Ecrire un mot a l'adresse
.I addr
dans l'espace
.B USER.
.TP
PTRACE_SYSCALL, PTRACE_CONT
Redemarrer apres un signal
.TP
PTRACE_KILL
Envoyer au fils un signal
.B SIGKILL
pour le terminer.
.TP
PTRACE_SINGLESTEP
Positionner un drapeau d'execution pas-a-pas.
.TP
PTRACE_ATTACH
Attacher le processus numero
.IR pid .
.TP
PTRACE_DETACH
Detacher un processus precedemment attache.
.SH NOTES
.BR init ,
le processus numero 1, ne peut pas utiliser cette fonction.
.SH "VALEUR RENVOYEE"
.BR ptrace
renvoie 0 s'il reussit, ou \-1 s'il echoue, auquel cas
.I errno
contient le code d'erreur.
.SH ERREURS
.TP 0.8i
.B EPERM
Le processus  (par exemple
.BR init ),
ne peut pas etre suivi ou est deja suivi.
.TP
.B ESRCH
Le processus indique n'existe pas.
.TP
.B EIO
.I Request
n'est pas valide.
.SH "CONFORME A"
SVID EXT, AT&T, X/OPEN, BSD 4.3
.SH "VOIR AUSSI"
.BR gdb "(1), " exec "(2), " signal "(2), " wait (2)
