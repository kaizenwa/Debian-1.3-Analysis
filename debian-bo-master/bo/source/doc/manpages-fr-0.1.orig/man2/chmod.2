.\" Hey Emacs! This file is -*- nroff -*- source.
.\"
.\" Copyright (c) 1992 Drew Eckhardt (drew@cs.colorado.edu), March 28, 1992
.\"
.\" Permission is granted to make and distribute verbatim copies of this
.\" manual provided the copyright notice and this permission notice are
.\" preserved on all copies.
.\"
.\" Permission is granted to copy and distribute modified versions of this
.\" manual under the conditions for verbatim copying, provided that the
.\" entire resulting derived work is distributed under the terms of a
.\" permission notice identical to this one
.\" 
.\" Since the Linux kernel and libraries are constantly changing, this
.\" manual page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from
.\" the use of the information contained herein.  The author(s) may not
.\" have taken the same level of care in the production of this manual,
.\" which is licensed free of charge, as they might when working
.\" professionally.
.\" 
.\" Formatted or processed versions of this manual, if unaccompanied by
.\" the source, must acknowledge the copyright and authors of this work.
.\"
.\" Modified by Michael Haardt (u31b3hs@pool.informatik.rwth-aachen.de)
.\" Modified Wed Jul 21 20:18:11 1993 by Rik Faith (faith@cs.unc.edu)
.\"
.\" Traduction 9/10/1996 par Christophe Blaess (ccb@club-internet.fr)
.\"
.TH CHMOD 2 "9 Octobre 1996" "Linux 0.99.11" "Manuel du programmeur Linux"
.SH NOM 
chmod, fchmod \- Modifier les permissions d'acces a un fichier
.SH SYNOPSIS
.B #include <sys/types.h>
.br
.B #include <sys/stat.h>
.sp
.BI "int chmod(const char *" pathname ", mode_t " mode );
.br
.BI "int fchmod(int " fildes ", mode_t " mode );
.SH DESCRIPTION
.B chmod
change le mode d'acces du fichier
.I pathname.
.br
.B fchmod
change le mode d'acces du fichier associe au descripteur
.I filedes.

Le mode est specifie par un
.IR OU 
binaire
( | ) entre les elements suivants (les nombres sont en octal) :
.RS
.sp
.TP 1.0i
S_ISUID 04000
modification du numero d'utilisateur (UID) a l'execution.
.TP
S_ISGID 02000
modification du numero de groupe (GID) a l'execution.
.TP
S_ISVTX 01000
positionner le sticky bit pour conserver le code
du programme en memoire apres execution.
.TP
S_IRUSR (S_IREAD) 00400 
acces en lecture pour le proprietaire
.TP
S_IWUSR (S_IWRITE) 00200 
acces en ecriture pour le proprietaire
.TP
S_IXUSR (S_IEXEC) 00100 
acces en execution/parcours par le proprietaire
.TP
S_IRGRP 00040 
acces en lecture pour le groupe
.TP
S_IWGRP 00020 
acces en ecriture pour le groupe
.TP
S_IXGRP 00010 
acces en execution/parcours pour le groupe
.TP
S_IROTH 00004 
acces en lecture pour les autres
.TP
S_IWOTH 00002 
acces en ecriture pour les autres
.TP
S_IXOTH 00001 
acces en execution/parcours pour les autres
.sp
.RE

L'UID effectif du processus doit etre nul (root) ou doit correspondre a celui  
du proprietaire du fichier.

Les UID et GID effectifs doivent etre appropries pour positionner les bits 
d'execution/parcours.

Suivant le type de systeme de fichiers, les bits Set\-UID et Set\-GID peuvent
etre effaces si un fichier est ecrit. Sur certains systeme de fichiers,
seul le Super\-User peut positionner le Sticky\-Bit, lequel peut avoir une
signification specifique (par ex: pour un repertoire, un fichier ne pourra
y etre efface que par le proprietaire ou le Super\-User).

.SH "VALEUR RENVOYEE"
.BR chmod " et " fchmod
renvoient 0 s'ils reussissent, ou \-1 en cas d'echec, auquel cas
.I errno
contient le code d'erreur.
.SH ERREURS
Suivant le type de systeme de fichiers, differentes erreurs peuvent
etre renvoyees. Les plus courantes pour
.B chmod
sont :

.TP 0.8i
.B EPERM
L'UID effectif ne correspond pas au proprietaire du fichier, et n'est pas nul.
.TP
.B EROFS
Le fichier se trouve sur un systeme de fichiers en lecture seule.
.TP
.B EFAULTR
.I pathname
pointe en dehors de l'espace d'adressage accessible.
.TP
.B ENAMETOOLONG
.I pathname
est trop long.
.TP
.B ENOENT
Le fichier n'existe pas.
.TP
.B ENOMEM
Pas assez de memoire pour le noyau.      
.TP
.B ENOTDIR
Un element du chemin d'acces n'est pas un repertoire.
.TP
.B EACCES
Le parcours d'un element du chemin de recherche est interdit.
.TP
.B ELOOP
.I pathname
contient une reference circulaire (a travers un lien symbolique)
.PP
Les erreurs les plus courantes pour
.B fchmod
sont :
.TP 0.8i
.B EBADF
Le descripteur de fichier est invalide.
.TP
.B ENOENT
Le fichier n'existe pas.
.TP
.B EPERM
L'UID effectif ne correspond pas au proprietaire du fichier, et n'est pas nul.
.TP
.B EROFS
Le fichier se trouve sur un systeme de fichiers en lecture seule.
.TP
.B ENOMEM
Pas assez de memoire pour le noyau.      
.SH "VOIR AUSSI"
.BR open "(2), " chown "(2), " stat "(2) "
