.\" Hey Emacs! This file is -*- nroff -*- source.
.\"
.\" This manpage is Copyright (C) 1992 Drew Eckhardt;
.\"                               1993 Michael Haardt, Ian Jackson.
.\"
.\" Permission is granted to make and distribute verbatim copies of this
.\" manual provided the copyright notice and this permission notice are
.\" preserved on all copies.
.\"
.\" Permission is granted to copy and distribute modified versions of this
.\" manual under the conditions for verbatim copying, provided that the
.\" entire resulting derived work is distributed under the terms of a
.\" permission notice identical to this one
.\" 
.\" Since the Linux kernel and libraries are constantly changing, this
.\" manual page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from
.\" the use of the information contained herein.  The author(s) may not
.\" have taken the same level of care in the production of this manual,
.\" which is licensed free of charge, as they might when working
.\" professionally.
.\" 
.\" Formatted or processed versions of this manual, if unaccompanied by
.\" the source, must acknowledge the copyright and authors of this work.
.\"
.\" Modified Fri Jul 23 22:01:51 1993 Rik Faith (faith@cs.unc.edu)
.\" Modified Sun Aug 21 18:18:14 1994: Michael Haardt's NFS diffs were
.\"          applied by hand (faith@cs.unc.edu)
.\"
.\" 
.\" Traduction  10/10/1996 Christophe BLAESS (ccb@club-internet.fr)
.\" 
.TH LINK 2 "10 Octobre 1996" Linux "Manuel du programmeur Linux"
.SH NOM
link \- Cree un nouveau nom pour un fichier.
.SH SYNOPSIS
.B #include <unistd.h>
.sp
.BI "int link(const char *" oldpath ", const char *" newpath );
.SH DESCRIPTION
.B link
cree un nouveau lien (aussi appele lien materiel ou hard link) sur
un fichier existant.

Si
.I newpath
existe il ne sera
.I pas
ecrase.

Ce nouveau nom pourra etre utilise exactement comme l'ancien quelque
soit l'operation. Les deux noms se referent au meme fichier (et ont
donc les memes permissions et proprietaire) et il est impossible de
determiner quel nom etait l'original.
.SH "VALEUR RENVOYEE"
En cas de reussite 0 est renvoye, en cas d'echec \-1 est renvoye,
et
.I errno
contient le code d'erreur.
.SH ERREURS
.TP 0.8i
.B EXDEV
.IR oldpath " et " newpath
ne resident pas sur le meme systeme de fichiers.
.TP
.B EPERM
Le systeme de fichier contenant
.IR oldpath " et " newpath
ne permet pas la creation de liens materiels.
.TP
.B EFAULT
.IR oldpath " ou " newpath " pointent en dehors de l'espace d'adressage accessible."
.TP
.B EACCES
L'ecriture dans le repertoire contenant
.I newpath
n'est pas autorise pour l'UID effectif du processus, ou l'un des
repertoires de
.IR oldpath " ou " newpath
ne permet pas le parcours (execution).
.TP
.B ENAMETOOLONG
.IR oldpath " ou " newpath " sont trop longs."
.TP
.B ENOENT
Un repertoire contenu dans
.I oldpath " ou " newpath
n'existe pas, ou est un lien symbolique pointant nulle part.
.TP
.B ENOTDIR
Un element du chemin d'acces
.IR oldpath " ou " newpath
n'est pas reellement un repertoire.
.TP
.B ENOMEM
pas assez de memoire pour le noyau
.TP
.B EROFS
Le fichier se trouve sur un systeme de fichier en lecture seule
.TP
.B EEXIST
.I newpath
existe deja.
.TP
.B EMLINK
Le fichier reference par
.I oldpath
possede deja le nombre maximal de liens.
.TP
.B ELOOP
.IR oldpath " ou " newpath
contiennent une reference circlaire (a travers un lien symbolique).
.TP
.B ENOSPC
Le support du systeme de fichier ne dispose pas d'assez de place
pour un nouveau point d'entree dans le repertoire.
.TP
.B EPERM
.I oldpath
est le point d'entree
.B . " ou " ..
d'un repertoire.
.SH NOTES
Les liens materiels crees par
.BR link ,
ne peuvent pas s'etendre sur plusieurs systemes de fichiers.
On peut utiliser plutot
.B symlink
si ceci est necessaire.
.SH "CONFORME A"
SVID, AT&T, POSIX, BSD 4.3
.SH BUGS
Sur les systemes de fichier NFS, le code de retour peut etre faux,
si le serveur NFS a cree correctement le lien mais s'est arrete
avant de donner le code de retour.  Utiliser dans ce cas
.IR stat(2)
pour verifier si le lien a ete effectivement cree
.SH "VOIR AUSSI"
.BR symlink "(2), " unlink "(2), " rename "(2), " open (2),
.BR stat "(2), " ln "(1), " link (8).
