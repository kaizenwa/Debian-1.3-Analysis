.\" Hey Emacs! This file is -*- nroff -*- source.
.\"
.\" Copyright 1993 Rickard E. Faith (faith@cs.unc.edu)
.\" Copyright 1994 Andries E. Brouwer (aeb@cwi.nl)
.\"
.\" Permission is granted to make and distribute verbatim copies of this
.\" manual provided the copyright notice and this permission notice are
.\" preserved on all copies.
.\"
.\" Permission is granted to copy and distribute modified versions of this
.\" manual under the conditions for verbatim copying, provided that the
.\" entire resulting derived work is distributed under the terms of a
.\" permission notice identical to this one
.\" 
.\" Since the Linux kernel and libraries are constantly changing, this
.\" manual page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from
.\" the use of the information contained herein.  The author(s) may not
.\" have taken the same level of care in the production of this manual,
.\" which is licensed free of charge, as they might when working
.\" professionally.
.\" 
.\" Formatted or processed versions of this manual, if unaccompanied by
.\" the source, must acknowledge the copyright and authors of this work.
.\" "
.\" 
.\" Traduction  10/10/1996 Christophe BLAESS (ccb@club-internet.fr)
.\" 
.TH MOUNT 2 "10 Octobre 1996" "Linux 1.1.67" "Manuel du programmeur Linux"
.SH NOM
mount, umount \- Monter et demonter des systemes de fichiers.
.SH SYNOPSIS
.B #include <sys/mount.h>
.br
.B #include <linux/fs.h>
.sp
.BI "int mount(const char *" specialfile ", const char * " dir
.BI ", const char * " filesystemtype ", unsigned long " rwflag
.BI ", const void * " data );
.sp
.BI "int umount(const char *" specialfile );
.sp
.BI "int umount(const char *" dir );
.SH DESCRIPTION
.B mount
attache le systeme de fichiers specifie par 
.I specialfile
(qui est generalement un nom de peripherique) au
repertoire indique par
.IR dir .

.B umount
supprime l'attachement du systeme de fichiers
.IR specialfile
ou du repertoire
.IR dir .

Seul le Super\-User peut monter ou demonter des systemes de fichiers.

L'argument
.IR filesystemtype
prend une des valeurs listees dans /proc/filesystems
(par exemple "ext2", "minix", "msdos", "proc", "nfs", "iso9660" etc...).

L'argument
.IR rwflag
doit avoir le nombre magique 0xC0ED dans ses 16 bits de poids
forts, et certains attributs de montage (defini dans <linux/fs.h>)
comme bits de poids faibles :
.nf
#define MS_RDONLY    1 /* lecture seule                              */
#define MS_NOSUID    2 /* ignorer les bits Set\-UID et Set\-GID        */
#define MS_NODEV     4 /* interdire l'acces aux fichiers speciaux    */
#define MS_NOEXEC    8 /* interdire l'execution de programmes        */
#define MS_SYNC     16 /* synchroniser les ecritures                 */
#define MS_REMOUNT  32 /* modifier attributs d'un systeme deja monte */
#define MS_MGC_VAL 0xC0ED0000
.fi
Si le nombre magique n'est pas present, les attributs de montage sont ignores.

L'argument
.IR data
est interprete differement suivant le type de systeme de fichiers.

.SH "VALEUR RENVOYEE"
.BR mount et umount
renvoient 0 s'ils reussissent, ou \-1 s'ils echouent, auquel cas
.I errno
contient le code d'erreur.  
.SH ERREURS
Les erreurs detaillees ici sont independantes du type de systeme de
fichiers. Chaque type de systeme peut avoir des codes d'erreurs
specifiques, et un comportement particulier. Voir les sources du
noyau pour plus de details...

.TP 0.8i
.B EPERM
L'utilisateur n'est pas le Super\-User
.TP
.B ENODEV
.I Filesystemtype
n'est pas configure dans le noyau
.TP
.B ENOTBLK
.I Specialfile
n'est pas un fichier special en mode bloc.
.TP
.B EBUSY
.I Specialfile
est deja monte, ou ne peut pas etre remonte en lecture seule
car il y a des fichiers ouverts en ecriture, ou ne peut
pas etre monte sur
.I dir
car
.I dir
est occupe (c'est le repertoire de travail d'un processus,
le point de montage d'un autre peripherique, des fichiers
y sont ouverts, etc...)
.TP
.B EINVAL
.I Specialfile
a un superbloc invalide, ou on tente un remontage alors que
.I specialfile
n'etait pas encore monte sur
.IR dir .
Ou un demontage est demande sur
.I dir
qui n'est pas un point de montage.
.TP
.B EFAULT
L'un des arguments pointe en\-dehors de l'espace d'adressage accessible.
.TP
.B ENOMEM
Pas assez de memoire pour le noyau.
.TP
.B ENAMETOOLONG
Un des arguments est trop long
.TP
.B ENOENT
Un repertoire des arguments n'existe pas ou est un lien symbolique pointant nulle part.
.TP
.B ENOTDIR
Le point de montage, ou l'un des elements du chemin d'acces au peripherique
n'est pas un repertoire
.TP
.B EACCES
Un element de chemin d'acces n'est pas consultable,
.br
ou on tente de monter un systeme de fichier en lecture seule sans
preciser l'attribut MS_RDONLY,
.br
ou le fichier peripherique 
.I Specialfile
est sur un systeme de fichiers monte avec l'attribut MS_NODEV.
.TP
.B ENXIO
Le nombre majeur du peripherique
.I specialfile
est invalide.
.TP
.B EMFILE
Table de montage pleine.
.SH "CONFORME A"
Ces fonctions sont plutot specifiques a Linux
.SH "VOIR AUSSI"
.BR mount "(8), " umount (8)
