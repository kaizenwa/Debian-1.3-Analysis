'\" t
.\" Copyright (c) 1993 Michael Haardt (michael@cantor.informatik.rwth-aachen.de)
.\" and 1994,1995 Alain Knaff (Alain.Knaff@imag.fr)
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139,
.\" USA.
.\"
.\" Modified, Sun Feb 26 15:00:02 1995, faith@cs.unc.edu
.\"
.\"
.\" Traduction 18/10/1996 par Christophe Blaess (ccb@club-internet.fr)
.\"
.TH FD 4 "18 Octobre 1996" Linux "Manuel du programmeur Linux"
.SH NOM
fd \- Lecteurs de disquettes
.SH CONFIGURATION
Les lecteurs de disquettes sont des peripheriques bloc ayant un numero
majeur 2. Typiquement ils sont la propriete de root.floppy et ont la
permission d'acces 0660 (acces par le groupe) ou 0666 (acces pour tous).

Pour ces peripheriques \fIn\fP est le numero de lecteur, 0 pour le premier lecteur,
1 pour le second, et ainsi de suite. Pour obtenir le numero mineur d'un
lecteur connecte sur le premier controleur, ajouter \fIn\fP au numero
mineur de base. Pour un lecteur connecte sur le second controleur,
ajouter \fIn\fP+128 au nombre mineur de base.

\fBAttention : Si vous utilisez un format disposant d'un nombre plus eleve
de pistes que celles effectivement gerees par votre lecteur, vous pouvez
l'endommager mecaniquement.\fP  

Essayer une seule fois de voir si le lecteur supporte plus que les 40/80 pistes
habituelles ne devrait pas l'endommager, mais aucune garantie n'en est fournie.
Ne creez pas de fichiers speciaux de peripheriques pour ces formats
si vous n'etes pas surs de vous.
.PP
Fichier de peripherique independant du lecteur, detectant automatiquement
le format et la capacite :
.PP
.TS
l l.
Nom	Num base mineure
_
\fBfd\fP\fIn\fP	0
.TE
.PP
Fichiers de peripherique 5.25" double densite :
.PP
.TS
lw(1i) l l l l l.
Nom	Capac.	Cyl.	Sect.	Tetes	Num mineur base
_
\fBfd\fP\fIn\fP\fBd360\fP	360K	40	9	2	4
.TE
.PP
Fichiers de peripheriques 5.25" haute densite :
.PP
.TS
lw(1i) l l l l l.
Nom	Capac.	Cyl.	Sect.	Tetes	Num mineur base
_
\fBfd\fP\fIn\fP\fBh360\fP	360K	40	9	2	20
\fBfd\fP\fIn\fP\fBh410\fP	410K	41	10	2	48
\fBfd\fP\fIn\fP\fBh420\fP	420K	42	10	2	64
\fBfd\fP\fIn\fP\fBh720\fP	720K	80	9	2	24
\fBfd\fP\fIn\fP\fBh880\fP	880K	80	11	2	80
\fBfd\fP\fIn\fP\fBh1200\fP	1200K	80	15	2	8
\fBfd\fP\fIn\fP\fBh1440\fP	1440K	80	18	2	40
\fBfd\fP\fIn\fP\fBh1476\fP	1476K	82	18	2	56
\fBfd\fP\fIn\fP\fBh1494\fP	1494K	83	18	2	72
\fBfd\fP\fIn\fP\fBh1600\fP	1600K	80	20	2	92
.TE
.PP
Fichiers de peripheriques 3.5" double densite :
.PP
.TS
lw(1i) l l l l l.
Nom	Capac.	Cyl.	Sect.	Tetes	Num mineur base
_
\fBfd\fP\fIn\fP\fBD360\fP	360K	80	9	1	12
\fBfd\fP\fIn\fP\fBD720\fP	720K	80	9	2	16
\fBfd\fP\fIn\fP\fBD800\fP	800K	80	10	2	120
\fBfd\fP\fIn\fP\fBD1040\fP	1040K	80	13	2	84
\fBfd\fP\fIn\fP\fBD1120\fP	1120K	80	14	2	88
.TE
.PP
Fichiers de peripheriques 3.5" haute densite :
.PP
.TS
lw(1i) l l l l l.
Nom	Capac.	Cyl.	Sect.	Tetes	Num mineur base
_
\fBfd\fP\fIn\fP\fBH360\fP	360K	40	9	2	12
\fBfd\fP\fIn\fP\fBH720\fP	720K	80	9	2	16
\fBfd\fP\fIn\fP\fBH820\fP	820K	82	10	2	52
\fBfd\fP\fIn\fP\fBH830\fP	830K	83	10	2	68
\fBfd\fP\fIn\fP\fBH1440\fP	1440K	80	18	2	28
\fBfd\fP\fIn\fP\fBH1600\fP	1600K	80	20	2	124
\fBfd\fP\fIn\fP\fBH1680\fP	1680K	80	21	2	44
\fBfd\fP\fIn\fP\fBH1722\fP	1722K	82	21	2	60
\fBfd\fP\fIn\fP\fBH1743\fP	1743K	83	21	2	76
\fBfd\fP\fIn\fP\fBH1760\fP	1760K	80	22	2	96
\fBfd\fP\fIn\fP\fBH1840\fP	1840K	80	23	2	116
\fBfd\fP\fIn\fP\fBH1920\fP	1920K	80	24	2	100
.TE
.PP
Fichiers de peripheriques 3.5" extra densite
.PP
.TS
lw(1i) l l l l l.
Nom	Capac.	Cyl.	Sect.	Tetes	Num mineur base
_
\fBfd\fP\fIn\fP\fBE2880\fP	2880K	80	36	2	32
\fBfd\fP\fIn\fP\fBCompaQ\fP	2880K	80	36	2	36
\fBfd\fP\fIn\fP\fBE3200\fP	3200K	80	40	2	104
\fBfd\fP\fIn\fP\fBE3520\fP	3520K	80	44	2	108
\fBfd\fP\fIn\fP\fBE3840\fP	3840K	80	48	2	112
.TE
.SH DESCRIPTION
Les fichiers \fBfd\fP accedent aux disquettes en mode direct.
Les appels
.IR ioctl (2)
suivants sont supportes par les peripheriques \fBfd\fP :
.IP \fBFDCLRPRM\fP
efface les informations sur le media (la geometrie du disque dans le lecteur).
.IP \fBFDSETPRM\fP
fixe les informations sur le media (la geometrie du disque dans le lecteur).
Ces informations seront perdues au changement de disquette.
.IP \fBFDDEFPRM\fP
fixe les informations sur le media (la geometrie du disque dans le lecteur).
Ces informations seront conservees lors du changement de disquette. Cela
desactive l'auto\-detection. Pour la reactiver, il faut effectuer 
un appel \fBFDCLRPRM\fP .
.IP \fBFDGETDRVTYP\fP
renvoie le type de lecteur (nom). Pour les formats qui fonctionnent
avec plusieurs types de lecteurs, \fBFDGETDRVTYP\fP renverrra le
nom du plus ancien type de lecteur supportant le format.
.IP \fBFDFLUSH\fP
desactiver le buffer cache pour le lecteur.
.IP \fBFDSETMAXERRS\fP
fixe le seuil d'erreur pour les rapports d'erreurs, les abandons,
le recalibrage, la reinitialisation, et la lecture secteur par
secteur.
.IP \fBFDSETMAXERRS\fP
recupere le seuil d'erreur actuel.
.IP \fBFDGETDRVTYP\fP
recupere le nom interne du lecteur.
.IP \fBFDWERRORCLR\fP
efface les statistiques sur les erreurs d'ecriture.
.IP \fBFDWERRORGET\fP
recupere les statistiques sur les erreurs d'ecriture. Celles-ci 
incluent le nombre total d'erreurs d'ecriture, l'emplacement
et le disque de la premiere erreur, et l'emplacement et le disque
de la derniere. Les disques sont identifies par un numero qui
augmente a (presque) chaque changement de disquette.
.IP \fBFDTWADDLE\fP
eteint pendant quelques micro-secondes le moteur du lecteur. Ceci
peut etre necessaire pour acceder a un disque dont les secteurs
sont trop rapproches.
.IP \fBFDSETDRVPRM\fP
fixe plusieurs parametres du lecteur.
.IP \fBFDGETDRVPRM\fP
recupere ces memes parametres.
.IP \fBFDGETDRVSTAT\fP
recupere l'etat cache du lecteur (disque change, protection ecriture,..) 
.IP \fBFDPOLLDRVSTAT\fP
recupere l'etat reel du lecteur (disque change, protection ecriture,..) 
.IP \fBFDGETFDCSTAT\fP
recupere l'etat du controleur.
.IP \fBFDRESET\fP
reinitialise le controleur sous certaines conditions.
.IP \fBFDRAWCMD\fP
envoie une commande directe au controleur.
.PP
Pour plus d'informations, consulter aussi les fichier d'en\-tete
<linux/fd.h> et <linux/fdreg.h> ainsi que
.BR floppycontrol (1).
.SH NOTES
Les divers formats permettent la lecture et l'ecriture sur de nombreux disques.
Neanmoins si le disque est formatte avec un espace entre secteurs trop petit,
les performances peuvent diminuer, necessitant plusieurs secondes pour acceder
a une piste entiere.
Pour eviter ceci, utiliser des formats entrelaces.

Il n'est pas possible de lire des disquettes formattees en GCR (group code recording),
utilisees par l'Apple ][ et les MacIntosh (disquettes 800 Ko).

La lecture des disques avec sectorisation materielle (un trou par secteur, avec un
trou d'index legerement decalle) n'est par supportee. Ceci etait surtout utilise
avec les vieilles disquettes 8".
.SH FICHIERS
/dev/fd*
.SH AUTEURS
Alain Knaff (Alain.Knaff@imag.fr), David Niemi
(niemidc@clark.net), Bill Broadhurst (bbroad@netcom.com).
.SH "VOIR AUSSI"
.BR floppycontrol (1),
.BR mknod (1),
.BR chown (1),
.BR getfdprm (1),
.BR superformat (1),
.BR mount (8),
.BR setfdprm (8)
