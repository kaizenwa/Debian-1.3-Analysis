.\" Hey Emacs! This file is -*- nroff -*- source.
.\"
.\" Copyright (c) 1992 Drew Eckhardt (drew@cs.colorado.edu), March 28, 1992
.\" May be distributed under the GNU General Public License.
.\" Modified by Michael Haardt (u31b3hs@pool.informatik.rwth-aachen.de)
.\" Modified Sat Jul 24 13:22:07 1993 by Rik Faith (faith@cs.unc.edu)
.\" Modified 21 Aug 1994 by Michael Chastain (mec@shell.portal.com):
.\"   New man page (copied from 'fork.2').
.\" Modified 10 June 1995 by Andries Brouwer (aeb@cwi.nl)
.\" Translated 20 Dec 1995 Miguel A. Sepulveda (miguel@typhoon.harvard.edu)
.\" Modified 1 Jul 1996 Miguel A. Sepulveda (angel@vivaldi.princeton.edu)
.TH CLONE 2 "20 Diciembre 1995" "Linux 1.2.9" "Manual del Programador"
.SH NOMBRE
clone \- crea un descendiente del proceso
.SH SINOPSIS
.B #include <linux/sched.h>
.br
.B #include <linux/unistd.h>
.sp
.BI "pid_t clone(void *" "sp" ", unsigned long " "flags" ")"
.SH DESCRIPCIÓN
.B clone
es un interfase alternativo a
.BR fork ,
con más opciones. 
.B fork
es equivalente a
.BR "clone(0, SIGCLD|COPYVM)" "."

Si
.I sp
no es cero, el proceso descendiente usa
.I sp
como su puntero pila inicial (initial stack pointer).


El byte bajo de 
.I flags
contiene la señal enviada al ascendiente cuando el descendiente muere.
.I flags
también puede estar or-operado (bitwise or)  con   
.B COPYVM
ó/y
.BR COPYFD .

Si
.B COPYVM
está asignado, las páginas del descendiente son imágenes copias-en-escritura
de las páginas del ascendiente.          
Si 
.B COPYVM
no está asignado, el proceso descendiente comparte las mismas páginas con
su ascendiente, y ambos pueden escribir en el mismo dato.

Si
.B COPYFD
está asignado, los descriptores de fichero del descendiente son
copia de los relativos a su ancestor. 
Si
.B COPYFD
no está asignado, los descriptores de ficheros del descendiente y
ascendiente se comparten. 
.BR
.SH "VALOR REGRESADO"
En caso de éxito, el PID  del descendiente regresa en el
hilo de ejecución del ascendiente, y un 0 vuelve en el
hilo de ejecución del descendiente. En caso de fallo, un \-1 
será vuelto en el contexto del 
ascendiente, no se creará ningún proceso descendiente, y la variable 
.I errno
será asignada apropiadamente.
.SH ERRORES
.TP
.B ENOSYS
.B clone
siempre regresará este error a menos que su kernel halla sido compilado
con
.B CLONE_ACTUALLY_WORKS_OK
definido.
.TP
.B EAGAIN
.B fork
no puede distribuir suficiente memoria para copiar las tablas de páginas
del ascendiente y asignar una estructura de tarea (task structure) para
el descendiente.
.SH BUGS
Normalmente
.B CLONE_ACTUALLY_WORKS_OK
no está definido.
.br
No hay una entrada para
.B clone
en
.BR /lib/libc.so.4.5.26 .
.br
Comentarios en el kernel (hasta 1.1.46) indican que
este no sabe tratar el caso en el que
.B COPYVM
no está definido.
.SH "VÉASE"
.BR fork (2)
