'\" t
.\" Note: this must be run through tbl before nroff.
.\" The magic cookie on the first line triggers this under some man program
.\"
.\" Traduzione in Italiano di Giovanni Bortolozzo <borto@dei.unipd.it>
.\" Agosto 1996
.\"
.\" " for hilit19
.TH MFORMAT 1 local
.SH NOME
mformat \- aggiunge un filesystem MSDOS ad un floppy formattato a basso livello
.SH SINTASSI
.B mformat
[
.B -t
tracce ] [
.B -h
testine ] [
.B -s
settori ] [
.B -l
etichetta ] [
.B -S
sizecode ] [
.B -2
settori sulla traccia 0 ] [
.B -M
dimensione dei settori software ] [
.B -a
] [
.B -X
] [
.B -C
] [
.B -H
settori nascosti ] drive:
.SH DESCRIZIONE
.I Mformat
aggiunge un filesystem MSDOS minimale (boot sector, FAT, e root directory) a
un dischetto precedentemente formattato con una utility Unix di formattazione 
a basso livello.
.PP
Sono supportate le seguenti opzioni: (Le opzioni S, 2, 1 e M potrebbero
non esistere se la propria copia degli Mtools è stata compilata senza l'opzione
USE_2M)
.TP
.B t
Numero delle tracce (non dei cilindri).
.TP
.B h
Numero delle testine (lati).
.TP
.B s
Numero di settori per traccia. Se è stata data l'opzione 2m, è il numero
di settori da 512-byte equivalenti su una traccia generica (non nella 
traccia 0). Se non è stata data l'opzione 2m, è il numero di settori fisici
per traccia (i quali potrebbero essere più grandi di 512 byte).
.TP
.B l
Eventuale etichetta del floppy.
.TP
.B S
sizecode. La dimensione del settore è 2 ^ (sizecode + 7).
.TP
.B 2
formattazione 2m. Il parametro di questa opzione indica il numero di settori 
nella traccia 0. L'uso è raccomandato per settori più grandi del normale.
.TP
.B 1
non usa la formattazione 2m, anche se l'attuale geometria del disco è
una geometria 2m.
.TP
.B M
dimensione dei settori software. Questo parametro indica la dimensione in byte
del settore usato dal filesystem MSDOS. Di default è la dimensione fisica del
settore.
.TP
.B a
Se è data questa opzione, è generato un numero di serie in stile Atari.
Gli Atari salvano il loro numero di serie nell'etichetta OEM.
.TP
.B X
formatta il disco come un disco Xdf, I dischi Xdf sono usati da OS/2. Questo
formato può contenere 1756k, ed è veloce quanto la formattazione 2m equivalente.
Il disco deve essere precedentemente formattato a basso livello usando 
l'utility xdfcopy inclusa nel pacchetto fdutils.
.TP
.B C
crea un file immagine del disco per intallarvi il filesystem MSDOS. Ovviamente,
questa opzione è inutile per dispositivi fisici come floppy e partizioni su
dischi fissi.
.TP
.B H
numero dei settori nascosti. Questo parametro è utile per formattare 
partizioni su dischi fissi, che non sono allineate sui limiti di traccia 
(cioè la prima testina della prima traccia non inizia la partizione, ma 
contiene partition table). In tal caso il numero di settori nascosti è in 
generale il numero di settori per cilindro. Non è testato.
.TP
.B n
numero di serie.
.B 
.PP
Per formattare un dischetto con una densità diversa da quella di default,
si devono fornire nella linea di comando (al meno) i parametri diversi da
quelli di default.
.PP
.I Mformat
restituisce 0 in caso di successo o 1 in caso di errore.
.SH VEDERE ANCHE
mlabel(1)
.SH PROBLEMI
Richiede una utility Unix di formattazione a basso livello.
.PP
Non rileva (o registra) le informazioni sui bad block.
