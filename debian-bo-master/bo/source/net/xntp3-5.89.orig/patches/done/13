Date: Thu, 29 Aug 1996 19:07:15 +0100
From: Jon Peatfield <J.S.Peatfield@damtp.cam.ac.uk>
To: mills@udel.edu
cc: jp107@damtp.cam.ac.uk
Subject: xntp3-5.85
Message-Id: <m0uwBUq-00024qC%kro.amtp.cam.ac.uk@damtp.cam.ac.uk>
Content-Length: 1063
X-Digest: [Jon Peatfield:  xntp3-5.85]
X-Mailer: exmh version 1.5.1 12/2/94
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"

I just picked up xntp3-5.85 and tried to compile it on one of our random Linux 
boxes.  So far I've found 2 possible configure errors.

In xntpd/ntp_io.h it includes <stropts.h> even though configure worked out 
that the system didn't have it.  I'm assuming that a wrapping round with
#ifdef STREAM will stop the inclusion, but presumably something from this was 
wanted.   [HMS: Fixed]

More worryingly in xntpd/ntp_loopfilter.c in local_clock() there is code 
#ifdef'd on KERNEL_PLL (which Linux has as true), but the code calls 
ntp_adjtime() which Linux doesn't have -- and configure correctly determined 
it didn't have.  This is harder to try to juggle with without knowing what 
this function is actually for...

are any more recent versions or patches available?

I'm sticking with an old 3.4 which has done sterling service for now, but I'd 
like to update xntp on all our systems if possible...

 -- Jon Peatfield

Jon Peatfield, Computer Officer, the DAMTP, University of Cambridge
Telephone: +44 1223  3 37852    Mail: J.S.Peatfield@damtp.cam.ac.uk


