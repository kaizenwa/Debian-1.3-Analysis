Received: from snow-white.ee.udel.edu by whimsy.udel.edu id aa16318;
          11 Oct 96 0:05 EDT
Received: from netbsd4me.jpl.nasa.gov (localhost [127.0.0.1]) by netbsd4me.jpl.nasa.gov (8.7.5/8.7.3) with ESMTP id VAA04190; Thu, 10 Oct 1996 21:05:10 -0700 (PDT)
Message-Id: <199610110405.VAA04190@netbsd4me.jpl.nasa.gov>
X-Mailer: exmh version 1.5.3 12/28/94
To: stenn@whimsy.udel.edu
cc: mills@udel.edu, leres@ee.lbl.gov, dundas@salt.jpl.nasa.gov, 
    earle@netbsd4me.jpl.nasa.gov
Subject: Re: xntp3 5.86 "configure" incorrectly guesses sys_errlist[] on 
 NetBSD 1.2
In-reply-to: Your message of "Thu, 10 Oct 1996 22:43:53 EDT."
             <9610102243.aa14130@whimsy.udel.edu> 
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Date: Thu, 10 Oct 1996 21:05:09 -0700
From: Greg Earle <earle@netbsd4me.jpl.nasa.gov>

> Would you please see if <stdio.h> eventually #includes <errno.h>?

It doesn't.

> The test for the sys_errlist[] declaration is around line 155 of
> configure.in, and I know the test worked the last time I checked under
> FreeBSD.

NetBSD has changed in this regard, and recently.

> The best fix for the syscall problem is to remove the declaration.  I've
> just commented out the declaration in the master sources.

I just added "#define SYS_NETBSD 1" to the end of config.h and it works fine,
albeit not the "right" solution.

> The code (at least) and the TODO list say that the SYS_* stuff is
> obsolete.  No current ports except Windows/NT should use code fragments
> identified with the SYS_ stuff.  These fragments have been left in the
> code to help with the conversion process.  I expect the non-WINNT SYS_
> stuff will be completely removed when xntpd3-6.0 is released.

OK, thanks for clarifying that.

> For whatever it's worth, Solaris, HPUX, Linux, SunOS4, and DECOSF1 are
> running as well or better than before.

So far so good on NetBSD/SPARC 1.2 and NetBSD/mac68k 1.2 ...

	- Greg


