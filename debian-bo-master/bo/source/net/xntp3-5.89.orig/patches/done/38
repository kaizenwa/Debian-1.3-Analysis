Received: from snow-white.ee.udel.edu by whimsy.udel.edu id aa24511;
          15 Nov 96 5:36 GMT
Received: from sverige (pas-ca23-36.ix.netcom.com [207.92.191.100]) by dfw-ix3.ix.netcom.com (8.6.13/8.6.12) with SMTP id VAA06564; Thu, 14 Nov 1996 21:35:58 -0800
Message-ID: <328C00E3.7871@ix.netcom.com>
Date: Thu, 14 Nov 1996 21:34:27 -0800
From: Greg Schueman <schueman@ix.netcom.com>
Reply-To: schueman@ix.netcom.com
X-Mailer: Mozilla 3.0Gold (Win95; U)
MIME-Version: 1.0
To: stenn@whimsy.udel.edu
CC: mills@udel.edu
Subject: [Fwd: further XNTP for NT mod]
Content-Type: multipart/mixed; boundary="------------38A742F95B38"

This is a multi-part message in MIME format.

--------------38A742F95B38
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Here's one file that has not been updated for 3.5.86.10 test
version.

--------------38A742F95B38
Content-Type: message/rfc822
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Message-ID: <327D150C.15EB@ix.netcom.com>
Date: Sun, 03 Nov 1996 13:56:28 -0800
From: Greg Schueman <schueman@ix.netcom.com>
Reply-To: schueman@ix.netcom.com
X-Mailer: Mozilla 3.0Gold (Win95; U)
MIME-Version: 1.0
To: stenn@whimsy.udel.edu
CC: mills@udel.edu
Subject: further XNTP for NT mod
Content-Type: multipart/mixed; boundary="------------781450A9689C"

This is a multi-part message in MIME format.

--------------781450A9689C
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Harlan,
  I just realized that the scripts/mkversion script changed.
The NT version, mkver.bat, also needed to be modified.

I've made the change, tested it, and am attaching the whole file.
Please replace the existing version with this one.

-Greg

--------------781450A9689C
Content-Type: text/plain; charset=us-ascii; name="mkver.bat"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline; filename="mkver.bat"

@rem = '--*-Perl-*--';
@rem = '
@echo off
perl -S %0.bat %1 %2 %3 %4 %5 %6 %7 %8 %9
goto endofperl
@rem ';
######################################################################
#
# Revision: mkver.bat
# Author:   Greg Schueman
# Date:     05/03/1996 
# Purpose:  Provide a perl script for NT to replace the
#           mkversion shell script.
#           
#
#
# Subroutines:
#     print_help
#     
#
#
######################################################################

use English;
use Getopt::Long;

#********************************************************************* 
#  Program Dependency Requirements
#*********************************************************************

#********************************************************************* 
#  Set Environment
#*********************************************************************
$PROGRAM = $0;
$USAGE   = "Usage: ${PROGRAM} [ -P <Program Name> -H ]\n";


#********************************************************************* 
#  Subroutine Print Help 
#*********************************************************************

sub print_help 
{
   print STDERR $USAGE;
   print STDERR " -P --Program Name      Database Name\n";
   print STDERR " -H --Help         Help on options\n";
   print STDERR "\n";
} # print_help end



#********************************************************************* 
#  Main program
#*********************************************************************

#
# Process runtime options
#
$result = GetOptions('help|H', 'prog|P=s'); 

if ($opt_help == 1)
{ 
   print_help(); 
   exit();
};


if (length($opt_prog) > 0)
   { $GENERATED_PROGRAM=$opt_prog; } 
else 
   { die "Program Name parameter required."; }

#
# Program logic
#

$DATE =  localtime;
chomp $DATE;
$RUN = "0"; # Not working yet

open( INPUT, '<..\configure.in' );
open( OUTPUT, '>version.c' );

while ($_ = <INPUT> )
{
#   if (/^[0-9a-zA-Z_]*=/) 
   if (/^VERSION=/) 
   {
      $FLAGS = $POSTMATCH;
   }
}
chomp $FLAGS;

print OUTPUT "char * Version = \"$GENERATED_PROGRAM $FLAGS $DATE ($RUN)\" ;";

close( OUTPUT );
close( INPUT );

__END__
:endofperl

--------------781450A9689C--


--------------38A742F95B38--

