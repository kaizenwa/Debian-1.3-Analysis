Replied: Wed, 15 Jan 1997 23:19:54 -0500
Replied: "Mitchell Blank Jr <mitch@earth.execpc.com> "
Received: from snow-white.ee.udel.edu by whimsy.udel.edu id aa20906;
          16 Jan 97 3:37 GMT
Received: from explorer2.clark.net (harlan@explorer2.clark.net [168.143.0.5]) by mail.clark.net (8.7.3/8.6.5) with ESMTP id WAA12077 for <stenn@whimsy.udel.edu>; Wed, 15 Jan 1997 22:35:57 -0500 (EST)
Received: (from harlan@localhost) by explorer2.clark.net (8.8.4/8.7.1) id WAA24887 for stenn@whimsy.udel.edu; Wed, 15 Jan 1997 22:36:43 -0500 (EST)
Message-Id: <199701160336.WAA24887@explorer2.clark.net>
From: Mitchell Blank Jr <mitch@earth.execpc.com>
Subject: Re: xntp3-5.88 on Linux/redhat
Newsgroups: comp.protocols.time.ntp
Date: 13 Jan 1997 14:08:16 -0600
Organization: Exec-PC
Content-Type: text

Bill Broadley <bill@proto.math.ucdavis.edu> wrote:
>Anyone compiled xntp3-5.88 under linux?  I get the following error,
>and figured why duplicate the port if someone else has done it:

Yes, I got it to compile.  I had to make two edits in ntptime.c.  They
seem to both be typos.  I'll describe them instead of providing a diff
because they're both so simple:

1) Around line 41, note the lines:

    #  ifdef HAVE___ADJTIMEX
    #   define ntp_adjtime(t)  __adjtimed((t))
    #  endif

   Replace the middle line with

    #   define ntp_adjtime(t)  __adjtimex((t))

					^--- NOTE THE 1 CHAR DIFFERENCE

2) Around line 309, you'll see the function "pll_trap".  Enclose the whole
   function in "#ifdef SIGSYS/#endif"  This function is not used if SIGSYS
   is not defined, and it refers to the global variable 'env' which won't
   be defined if SIGSYS is undefined.

With those two changes I was able to compile the whole package on a RedHat
box.  I can't guarauntee if it works - I've only actually tested 3-5.88 on
a Sparc Solaris 2.5.1 box.

Good luck. 

-Mitchell Blank Jr
 mitch@execpc.com
 Exec-PC, Systems Administration

