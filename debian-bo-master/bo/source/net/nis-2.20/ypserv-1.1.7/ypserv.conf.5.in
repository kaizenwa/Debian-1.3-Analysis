.\" -*- nroff -*-
.\" $Id: ypserv.conf.5.in,v 1.3 1997/04/08 21:15:28 kukuk Exp $
.\" Copyright (c) 1996, 1997 Thorsten Kukuk kukuk@uni-paderborn.de
.\"
.TH ypserv.conf 5 "April 1997" "NYS YP Server" "NIS Server Reference Manual"
.SH NAME
ypserv.conf - configuration file for ypserv and rpc.ypxfrd
.SH DESCRIPTION
.B ypserv.conf
is an ASCII file which contains some options for ypserv. It also
contains a list of rules for special host and map access for ypserv
and rpc.ypxfrd. This file will be read from ypserv and rpc.ypxfrd by
startup, or by arriving a SIGHUP signal.

There is one entry per line. If the line is a option line,
the format is:
.IP
option: [yes|no]
.LP
The line for a access rule has the format:
.IP
host:map:security:mangle[:field]
.LP
All rules are tried one by one. If no match is found, access to a
map is allowed.

Following
.I options
exist:
.TP
.B dns
the NIS server will query the nameserver for hostnames, which are
not found in the hosts.* maps. The default is "no". You could
overwrite it with the "-dns" commandline option. A "no" will not
overwrite the "-dns" option.
.TP
.B sunos_kludge
This is just to make
.B ypserv
reply to YP version 1 calls which SunOS 4's  ypbind seems to insist
on finding. If someone \fIreally\fP tries to use this then they will
probably be bitten \fIhard\fP, since the XDR calls for YP version 1 are
not implemented. The Domain_NoNack call seems to be compatible.
The default is "yes".
.TP
.B tryresolve
If
.B ypserv
is linked with a gethostbyaddr function, which query's the
nameserver directly and do not use the NIS service,
.B ypserv
will print the FQDN in the error messages and not the IP number.
The default is "no".
.TP
.B xfr_check_port
With this option enabled, the NIS master server have to run on a
port < 1024. The default is "yes" (enabled).
.LP
The field descriptions for the access rule lines are:
.TP
.B host
IP address. Wildcards are allowed.
.br
Examples:
.br
131.234. = 131.234.0.0/255.255.0.0
.br
131.234.214.0/255.255.254.0
.TP
.B map
name of the map, or asterisk for all maps.
.TP
.B security
one of none, port, deny, des:
.TP
.I none
always allow access. Mangle the passwd field if so configured,
default is not.
.TP
.I port
allow access if from port < 1024. Otherwise if mangle are not set,
 do not allow access. If mangle is set to "yes", allow access, but
mangle the passwd field.
.TP
.I deny
deny access to this map.
.TP
.I des
requires DES authentication. Not supported by most libc's in the moment.
You could mangle the passwd field if so configured, default is not.
.TP
.B mangle
possible values are "yes" or "no". If "yes", the
.I field
entry will be mangled.
Mangling means that the field is replaced by 'x' if
the port check reveals the request originated from somebody unpriviliged.
.TP
.B field
Which field should be mangled. The default is the 2nd field.
.LP
.SH FILES
@CONFDIR@/ypserv.conf
.SH "SEE ALSO"
.BR ypserv (8),
.BR rpc.ypxfrd (8)
.SH WARNINGS
The access rules for special maps are no real improvement in security,
but it makes the life a little bit harder for potential hacker.
.SH AUTHOR
Thorsten Kukuk <kukuk@uni-paderborn.de>
