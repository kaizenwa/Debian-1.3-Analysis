# include/Makefile.in
# all rights reserved
# written by matthew green.
# copyright (c) 1993, 1995.
# adapted by scott reynolds, 04-sep-95
# @(#)$Id: Makefile.in,v 1.2 1995/11/12 12:43:04 mrg Exp $

CC	= @CC@
LDFLAGS	= @LDFLAGS@
LEX	= @LEX@
LEXLIB	= @LEXLIB@
RM	= @RM@

default: headers

# .h files generated from .proto files

count: count.c
	$(CC) $(LDFLAGS) -o count -O count.c $(LEXLIB)

count.c: count.l
	rm -f count.c
	$(LEX) count.l
	mv -f lex.yy.c count.c

clena: clean

clean::
	$(RM) count count.c lex.yy.c

vars.h: vars.h.proto count
	-$(RM) $@
	./count < $@.proto > $@

hook.h: hook.h.proto count
	-$(RM) $@
	./count < $@.proto > $@

keys.h: keys.h.proto count
	-$(RM) $@
	./count < $@.proto > $@

headers: vars.h hook.h keys.h
