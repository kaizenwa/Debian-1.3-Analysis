###
# Shamelessly modded for xwindows interface with BitchX and sCZ!tE,
# by the BarK0de.
# Change these as you wish, but hopefully they are okay :) 'cept for czs
###

on ^dcc_chat * {
	echo ${C5}=${C7}$0${C5}=${C7} $stripansi($1-)
	$addtabkey(\=$0)
}
on ^send_dcc_chat * {
	echo > ${C5}=${C15}$0${C5}=${C7} $stripansi($1-)
	^$addtabkey(\=$0)
}

on ^msg * {
	if ([$msgdisplay]==[on])
	   {
		echo ${C2}[${C10}$0${C2}]${C7} $stripansi($1-) ${C3}\<${C11}\[$$
	   }{
		echo ${C3}[${C6}$0${C3}]${C7} $stripansi($1-)
	   }
	^$addtabkey($0)
}
on ^send_msg * {
	xecho -level crap > ${C1}[${C7}$0${C1}]${C7} $stripansi($1-)
	@LastMsgTMP = [$1-]
	@LastMsgSON = [$0]
	^$addtabkey($0)
}

on ^notice * {echo ${C5}-${C7}$0${C5}-${C7} $stripansi($1-)}
on ^send_notice * {
	xecho -level crap > ${C4}-${C15}$0${C4}-${C7} $stripansi($1-)
	@LastNoticeTMP = [$1-]
	@LastNoticeSON = [$0]
}

alias doarsetup
{
	on ^public "% % $ARTrigger*" {
		echo ${C11}\<${C6}$0${C11}\>${C7} $stripansi($2-)
		$addtabkey($0 AUTOREPLY)
	}
	on ^public_other "% % $ARTrigger*" {
		echo ${C3}\<${C7}$0${C1}/$1${C3}\>${C7} $stripansi($2-)
		$addtabkey($0 AUTOREPLY)
	}
}

on ^public * echo ${C3}\<${C7}$0${C3}\>${C7} $stripansi($2-)
on ^public_other * {echo ${C3}\<${C7}$0${C1}/$1${C3}\>${C7} $stripansi($2-)}
on ^send_public * {echo ${C11}\<${C7}${N}${C11}\>${C7} $stripansi($1-)}
on ^send_public "% %: *" echo ${C9}\<${C7}${N}${C9}\>${C7} $stripansi($1-);$addtabkey($strip(: $1) AUTOREPLY)

eval assign cz ${C5}[${C1}BX${C5}]${C7}
eval assign czs *${C7}

doarsetup

on ^dcc_statf1 * {
  @num = [$0]
  if (num >= 90) {@bar = [${C1}XXX${C9}XXX${C3}XXX${15}X${C7}]}
  if (num < 90 && num >= 80) {@bar = [${C1}XXX${C9}XXX${C3}XXx${C7}x]}
  if (num < 80 && num >= 70) {@bar = [${C1}XXX${C9}XXX${C3}Xx${C7}..]}
  if (num < 70 && num >= 60) {@bar = [${C1}XXX${C9}XXX${C3}x${C7}...]}
  if (num < 60 && num >= 50) {@bar = [${C1}XXX${C9}XXx${C7}....]}
  if (num < 50 && num >= 40) {@bar = [${C1}XXX${C9}Xx${C7}.....]}
  if (num < 40 && num >= 30) {@bar = [${C1}XXX${C9}x${C7}......]}
  if (num < 30 && num >= 20) {@bar = [${C1}Xx.${C7}.......]}
  if (num < 20 && num >= 10) {@bar = [${C1}x.${C7}........]}
  if (num < 10) {@bar = [${C1}.${C7}.........]}
  @mins = [$3]
  @secs = [$4]
  @size = [$2]
  @size/=1024
  if (mins > 0) {@eta = [${mins}m ]}
  if (secs > 0) {@eta = [$eta]##[${secs}s]}
  echo $dccline $bar $[-5]num% $[-5]{size}kb $[8]eta ${C7}°
  ^assign -num;^assign -mins;^assign -secs;^assign -eta;^assign -dccline;^assign -bar
}

on ^353 * {
 eecho [${C11}$2${C7}] user list :
 fe ($3-) dn[1] dn[2] dn[3] dn[4] dn[5]
    {
     foreach dn ii
     {
      switch ($[1]dn[$ii])
       {
       (+) {@dnn = mid(1 $strlen($dn[$ii]) $dn[$ii]);@dispstr = [${C5}[${C3}+${C1}$[9]dnn${C5}] $dispstr]}
       (@) {@dnn = mid(1 $strlen($dn[$ii]) $dn[$ii]);@dispstr = [${C5}[${C3}@${C1}$[9]dnn${C5}] $dispstr]}
       (*) {@dispstr = [${C5}[${C3} ${C1}$[9]dn[$ii]${C5}] $dispstr]}
       }
     }
     eecho $dispstr
     @dispstr = []
    } 
}

on ^wholeft_header * eecho ${C1}[${C7}  nick   ${C1}] [${C7} channel ${C1}] [${C7}           mask           ${C1}] [${C7}       server      ${C1}]
on ^wholeft * eecho ${C1}[${C7}$[9]0${C1}] [${C7}$[9]2${C1}] [${C7}$[26]1${C1}] [${C7}$[19]4${C1}]

on ^bans_header * eecho ## ${C1}[${C7} channel${C7}  ${C1}] [${C7}          ban${C7}            ${C1}]${C7} ${C1}[${C7}    setby${C7}    ${C1}]${C7} ${C1}[${C7}    when${C7}    ${C1}]${C7}
on ^bans * eecho ^_#^_$0 ${C1}[${C7}$[10]1${C1}]${C7} ${C1}[${C7}$[25]2${C1}]${C7} ${C1}[${C7}$[13]3${C1}]${C7} ${C1}[${C7}$fixdate($4)${C1}]${C7}
on ^savefile * eecho ${C9}[${C7}$[9]tolower($0)${C9}] [${C7}$[6]1${C9}]
on ^savefilepre * eecho ${C1}[${C7}component${C1}] [${C7}number${C1}]

on ^users_header * echo ${C1}[${C7} channel  ${C1}] [${C7}   nick${C1}   ] [             ${C7}user@host${C1}                  ] [ ${C7}level${C1} ]
