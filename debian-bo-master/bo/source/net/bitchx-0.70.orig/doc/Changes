
Seems some bugs cropped up right away... /window set and status.c window
pointer was being changed on status_notify which caused me some trouble with
seemingly random segfaults. $mircansi() had a bug with ^C1,243324324 and
^C234723875 large numbers. Weird problem with /ftp /telnet possibly fixed...
for some reason calloc() isn't returning a 0'd memory location. Fix for
/parsekey type_text blah instituted. This affected both epic and BitchX,
Ctoolz, Scrollz and ALL other ircii clients including 2.9roof. /cdcc offer
was displaying the wrong pack number for a note. fixed. small bug that can't
happen very often found in built-in alias's. curr_scr_win->server has a
possible -1 value. screw() was screwed on certain length host names.
Various other small fixes here and there. ChanWallop does 8 nicks at a time
now. This gets around the lame server protection that some servers have
implemented. Notice small buglet in /addbanword where * was not recognized
as a valid channel. /kb and /ban will now check the whowas list for a 
matching nick and ban it if all else fails. Hacked around in decifer_mode().
Added some new botnet commands. /ctoggle and .xlink. with /ctoggle on,
someone can send a .xlink command where command is any valid ircii command.
so please to be careful with this. If you set a BOT_PASSWD then anyone
knowing this password can auto-chat as well as bot-link with you. xlink
commands default to off. and I will modify this highly to only recognize
certain commands. DLL loading for linux implemented. What this does is allow
someone to write a function/command in c and give it to people. They can
then dynamic load the function/command which then becomes a regular client
command. No source for the module need be distributed. This same method is
used in libtcl and I assume perl as well. All internal client functions are
available to the module IF we add -rdynamic to the client link stage.
Otherwise they are not available. Although untested, tcl functions should
also be available in TCL compiled clients. I modified the client to look for
dll commands and then commands, alias's etc. I also re-implemented the
Tcl_Eval portion of the command loop. It's one of the last things checked.
/loaddll function implemented for dynamic loading of functions, ctcp's and
commands. These lists are checked before all others so that authors can
replace internal's of the same name. /bk and /ban will now check the whowas
list for matching nicks and ban it when the nick is not on the channel or
has signed off. erase_display() had a off by one error. /reset was lame. and
screwed up the display. all fixed. $banonchannel(chan ban) added by request.
Checks to see if ban is on the internal banlist for the channel. Well
someone nicked goat found the alt char set ansi set would switch the console
into this mode. It looked like a flash, but wasn't. Required some rethinking
in FixColorAnsi(). NovaX found a bug with not checking the channel match for
bans on perm bans. Also found a bug with multiple windows and channels where
the away mesg was being displayed twice. FORMAT_SEND_AWAY added by request
from shade. /tignore added. it works like /tban. After some prodding I
modified the cdcc sends/resends to work with multiple numbers. "*" is also
recognized for send all. After removing the /me from /away found that the
away message doesn't display to the screen. /back doesn't prompt to delete
the away file if /set msglog is off. $winrefs() returns all window refnums.
shade and all his color changes on the status bar found a nasty little
problem with static buffers. so we increased the buffer sizes by a factor of
2. Fixed /do say $repeat(5000 blah) to only return upto 2048 chars. Fixed a
few windowing bugs shade pointed out. Apatrix pointed out a couple of
deficiencies in /set bitch on. Maybe we cleaned it up. BarK0de pointed out a
little inconsistancy with /addword and /banword(s). $gethost(nick) returns
the hostname for the nick as stored internally. nick has to be on one of our
current servers channels and the first match is returned. local variable
support added from epic. BEEP_WHEN_AWAY fixed so it doesnt beep you when
your away for Flick^. some changes required in p_privmsg().
menus, history file support, translation and digraphs have all been removed
from the client for various reasons. Some buffer sizes have been reduced to
decrease memory footprint. This should make some admins happier. Cleaned up
vars.c by removing some old variables no longer used. removed nkill and
nhost commands as they require a hacked server to support them. Removed
WANT_ANSI from all source files. This cleaned up the source considerably.
/mode channel b wasn't displaying the modes for a channel. /set ov on/off
wasn't working properly. /window split on/off changed. /set double_status is
no longer required. fixed whoreply() to show up in the correct window.
Added new function variable %` for the uptime of the client.
destroy_call_stack was failing for whatever reason. Some more places where I
wasn't clearing the FD_SET() for writes found. /set nick_completion_type 0 1
2  are valid. 0 nick is first word. 1 nick is somewhere in the string. 2 we
do match'g on the string. /set auto_response modified to allow more than one
word to trigger nick completion. wildcards are allowed. /finger now doesn't
block on connect. This one accomplished by adding a socket callback list.
Other functions could accomplish the same thing. maybe a rewrite of the link
looker is in order. /scani for scanning a channel for ircops added. Needed
some error checking for window->server in $MYCHANNELS(). added -max patch
for lastlog command from sheik. added support for colorization of /help (any
takers?). Found bug this introduced in malloc_strcpy(). Added dll_variable
support now as well. Jeremy has done some major changes to EPIC3 and made
EPIC4. We've tried to follow along. term.c needed to be left the same but
support for some decrepatated systems has been removed ie ESIX. Changes to
configure have been made and make configuring tcl alot easier. Changes to
do_flood(). /ig /igh modified to accept a type as well as multiple nicks.
Nick completion changed, partial matching of a nickname is possible.
/ig /igh /unig /unigh will use whowas buffer if the nick can't be found.
/tignore was not working quite right. Someone pointed out that /dcc bot
worked without a passwd.  /sc bug fixed. Nick completion modified in
behaviour. Pattern matching of the nick will take place. ^R bound to
nick_completion() which takes the word behind the cursor and attempts to
match it with a nick on the current channel. So typing the following
will/should do the following.
	/msg pana<tab>     if nick is in tabarray then fill it in
	/msg pana<tab>	   if nick is not in tabarray, check current channel
	pana^]		   if nick in autoreply buffer fill it in.
	pana^]		   if nick not in autoreply buffer but on current
			   channel, fill it in.
	this is to pana^R  if nick is on current channel fill in the nick.
	^R		   cycle through current channel nicks
	<tab>		   cycle through tabarray.
	^]		   cycle through current channel nicks

For some reason not found yet (ie bug or feature) once one of these
functions is accessed in some cases we need to press the key again to bring
up the next nick. Depending on how annoying I find this, will determine how
long this takes to get fixed. /cdcc offer updated to take multiple file
specs on the line. ie  /cdcc offer *.c *.h Makefile  will create a package
with all those files in it. /SetAR -|d|pat's command added. Added $getvar()
function which will get an alias and return it. Protection was broked. Some
people are having trouble with the new term.c. Might possibly be termcap
related. topic bug found by shadz on newnet. buffer overflow problem.


BitchX 69 released. 12/28/96
Fixed dcc.c update_transfer_buffer() for the second time. not sure what
happened in the first time I patched this file. Fixed cdcc load to get the
right number of files. A problem with /m . fixed. /relw and /relsw fixed.
Changed format of FORMAT_BWALL slightly. Added CtoolZ CWallop to notice.c.
Fixed bug in free_display() and erase_display(). Added triple status bar, as
well as /window split on/off. window split is far from perfect though.
Changes to switch_channels() which make the channels that a window owns
bound to that window. Pressing Ctrl-X to switch will not switch to a channel
that was not joined from the window. Active dcc check on exit changed. Now
we only check active dcc gets and regets. send_to_server() modified so that
network errors will make the client cycle on a server. Fixed /reli. Fixed
pgup and pgdn to display proper number of lines in window. Added %- as a
status bar symbol for displaying current topic. hook channel_switch added
for script writers to tell when a channel switch has been made. Added /rels
for server messages. We keep the last 10 msgs. Changes from epic 3.002 and
3.003 merged. extended status_user functions added thanks to sheik. %!11
through %!19 are available now. %= displays voice on the status bar. /set
beep_always on/off. /input_char and /pause x added. WARNING major
incompatibility but new functionality. most of the /set status's are now
moved into /window set. Fixed /input and /input_char so more than one char
can be set in /input. Added /orignick which will try and take back a nick
every 20/30 seconds. format_ctcp $3 and $4 are reversed just to make more
sense. /addlamenick and /unlamenick implemented. $stripmirc() will strip the
lame mIRC ^C from the input string. ex. 
/set format_public %b<%n$1%b>%n $stripmirc($3-)
Found and fixed a bug in /remlog. which was causing some grief. All
format_ctcp's are now changed to use $4- and $3 instead of $3 and $4-. much
easier on the client. Added /lamenicklist to show nick list.
New tcl bind type. Now we have a type for input. This is called just before
the command is sent to the irc interpreter. Input is then passed onto the
ircii interpreter. Removed NAMES_ON_JOIN in favor of SHOW_CHANNEL_NAMES.
Corrected the workings of this command. tcl command userhost added. Accepts
any number of nicknames. When the server responds, it sets userhost and
un-userhost with the appropriate responses. Added tcl getchanmode #channel.
Added new tcl bind input (Thanks robocod). It is checked just before the
line of input is sent to the interpreter. MAjor dessync problem found and
fixed. /quote JOIN #channel where you are already on #channel and channel
mode is +i would cause the client to remove the channel. The server actually
thought you were on the channel. Small buglet in new parse server notices
code, tended to core the client for some reason. Forgot to sync the userlist
with the channel nicklist when we did a chglevel/chgaop/chgprot/chgchan
operation. /set show_numerics on/off now works, but not in the same way that
it used to. The last current numeric is displayed. /set -show_numerics_str
now doesn't crash the client. /bki for boot kick ignore added. /fk added as
a command alias'd to /masskick ie filter kick. DCC sends have been speeded
up by a order of magnitude of 3-6 times. status updating on dcc sends and
recieves has been slowed down to occur on every 10th packet or so. Testing
was done using ircii ircii-hyper Scrollz eggdrop and a modified ComBot with
dcc file capabilies. A 19meg file was transferred repeatly over the course
of several days. It was done using localhost connect for highest possible
transfer speeds. ncftp was 3.8Mb/s. Scrollz was between 450kb/s-1017kb/s. 
ircii-hyper was around 650kb/s-1073kb/s (also had trouble with the eof 
even between two clients irc-hyper). BitchX to eggdrop 460kb/s. 
BitchX to combot was 806kb/s-1073Kb/s. BitchX 68e was a dismal
275kb/s-490KB/s. BitchX to ircii-epic 3.003 was 450-700Kb/s. Ctoolz with 
DCC_BLOCK_SIZE of 2048 was 1100Kb/s and with 4096 was 1475Kb/s.
ircii 2.8.2 with DCC_BLOCK_SIZE of 4096 hit 1050Kb/s and with 2048 got
1200Kb/s. And finally BitchX 68f to BitchX 68f was variable (*grin*) 
between 890kb/s and 2150kb/s. Reasons for variance was /set DCC_BLOCKSIZE 
was changed from 2048 to 4096 between runs and dcc status indicator was
turned off as well. (100mhz pent 64m ram. 6 shells open. basic Redhat running 
with irc server and 2-4 irc clients ide drives). Cpu Usage is down as well. 
The file used is an actual tar.gz file with data in it. All of dcc.c was 
colorized. 

       ÕÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ[dcc transfer stats]ÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¸
       ³                                                                 ³
       ³ÖÄ[xferd in]ÄÖ-[xferd out]Ä·Ä[total files]ÄÖÄ[active]Ä·Ä[limit]Ä·³
       ³º      241Mb º       627Mb º            52 º        0 º       6 º³
       ³ÓÄÄÄÄÄÄÄÄÄÄÄÄ½ÄÄÄÄÄÄÄÄÄÄÄÄÄÓÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ½ÄÄÄÄÄÄÄÄÄÄÓÄÄÄÄÄÄÄÄÄ½³
       ³                                                                 ³
       ÖÄÄÄÄ[in stats]ÄÄÄÖÄÄÄ[out stats]ÄÄÄ·ÄÄÄÄÄÄÄÄÄÄ[toggles]ÄÄÄÄÄÄÄÄÄÄ·
       º max: 1755.8kb/s º max: 1755.8kb/s º   autoget:  On   paths: Off º
       º min: 236.44kb/s º min:  36.00kb/s º overwrite: Off   quiet: Off º
       ÓÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ½ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÓÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ½

/set lastlog_ansi on/off for display of ansi in your lastlog file.
/set dcc_fast on/off to change fast dcc sends on the fly.
more binds for /window swap.. added 8 9 and 10. Added access to a internal
function called stripansicodes() which will strip all color from a string.
Chatted with some newnet oper-admins about there server software. Merged in
SOCKS support. Made configure understand some options about tcl,
non-blocking, socks, and default-server. Use configure --help to find them.
Url grabber. /set http_grab on/off. this will grab any http: string and
place in the file $CTOOLZ_DIR/BitchX.http. string can be a public or a msg.
As well /lastlog will also match grab any previously said url's. Small bug
with input prompt and NULL being inserted into the string (fyi all clients
suffer the same problem). ie "null char some text"  and press enter. /dc now
accepts a list of nicks to chat with. We also use the userhost queue to find
the nicks on irc before starting a chat with them. Added more register usage
to possibly speed up the client. modified p_mode to update the structures
first and then print out stats. This will increase the speed as well.
convert_output_format() takes some cpu to perform it's color parse. Small
bug fixed in addlamenick. check_mode_list_join() was getting a null and
crashing on a recycle in some cases. /window swap now set's the channel to
the bound channel or the current window channel. perm bans were broked.
/fkline was modified to use a differant method of scanning k-lines. Need new
match() routine that will handle wildcards on either side. Thanks ananda for
the mirc->ansi converter which I modified tobe a function. $mircansi() takes
a string of text and converts the mirc color codes to ansi. Added /ostat for
operators and cleaned up operator messages considerably. Alot of format's
for operator messages added and defaults for efnet are given.

Changes for 68e
Added command matching. ie /m<tabkey> returns all commands starting with m
etc. Linking of clients now made easier with /clink command. Several other
commands like /cwho /cwhom /csay have been added. Things said over dcc chat
are progated across the link. Some changes in window handling which look
like they solve the windowing problems BitchX was having. Added 2 new user
auto-op levels for giving voice to someone. 3 is delay voice and 4 is
instant voice. other minor fixes. Removed my command matching in favor of
the internal command_completion routine. more changes to tabkey routine. 
/m roo  will return the nick that matches roo, /m root will cycle between
nicks. small change to tcl ircii command, so information is returned
cleaner. ie we can now do  /tcl set ircii-set [ircii set] so all
available ircii set's will be in the tcl variable ircii-set. Ansi stripping
is not done. This does have limitations however. Fixed passing 0 to tcl's
random(). Changed the party line. We now need to enter .chat to enter the
party line. Various other commands are available from the partyline.
including .help . /Wall from other BitchX users will now not display as a
wall. /set format_bwall can be used to modify the output. /dcx and /dcg
added. dcx kills chat request from nick. dcg kills all gets/regets of files
from nick. /lwk remove the current window. Note you cannot remove the very
last window. added .echo on/off or toggle to /msg =nick on the chat line.
Added /cdcc echo toggle cdcc output to yourself on/off. /cdcc type toggles
between notify and privmsg. Fixed dcc chat .boot to it informs the
partyline of the boot as well as the user that got booted. Wangel
contributed /rel to list msgs you have recieved. few other minor nitpicks
fixed here and there :) Mathe noticed that /remlog doesn't reset the away
msg count. Thanks to CyberD0g kicking me in the head, the status update
doesn't occur nearly as often as it was. This increases the speed of dcc
considerably on localhost transfers... ie I went from 89KB/s to 213KB/s over
127.0.0.1. ctcp nick op #channel changed so that userlevel's > 49 can op
themselves, userlevels > 29 < 50 will voice themselves. Idea from mathe.
When away and send_away_msg is on, we will send back our away msg to the
person msg'g us. The format of this will more than likely change
considerably. The dcc status bar % is differant now. it will display upto 10
file dcc percentages. Might solve alot of problems people have been having
with dcc's and status bar updates.


Changes for 68
Changed some fundemental functions around a little after a chat with Sheik.
Added a new function for setting up channel params. This reduces code size,
because for just about any function() that operates on a channel we need
to do this. Added a new FORMAT_TOPIC_UNSET and a /untopic command. Changed
the /topic command around. We now no longer need to have a channel
specified. We use the default channel if none is specified. Changes to the
userlist started. Fixed major lossage from a /ctcp message. Emergency
release. Incompatible change with scripts on FORMAT_TOPIC_SETBY. use stime
instead of tdiff(). /relm and /reln now save the last 10 msg/notice's which
can be changed with a compile time #define MAX_LAST_MSG. FORMAT_RELM
FORMAT_RELN are used to format the output of these. So /rel[m-n] >[channel]
[number]> <-l>. /cset aop for channel specific auto-op. the meaning of the
/set aop has now changed because of this. Added ^W? key bind. fixed /4op and
/topic. Creation of a simple minded Bitch mode. /cset bitch  mode will
reverse certain modes placed by someone not on your botlist or your
userlist. Fixed core dump with /links command. Added portnum capability to
/dcc chat and /dcc bot(tcl) /dcc send and resend. Added a ascii from
acidjazz. Thanks. fixed /away sending ansi out to the server. was causing
havoc with non-ansi clients :). Replaced some occurance of nickinuser() with
a routine from Sheik. Modified slightly to fit in with BitchX's userlist
scheme. Mikh suggested a change for doing fast modes.
Implemented and tested. Fixed check_prot() so it actually protects users on
the userlist. /userlist will now take several optional arguements. A channel
and/or a userhost mask will display only user's matching a certain type.
/botlist is also setup the same way. /notify will display the userhost of
those on your notify list if present. idle kick won't kick voice'd users or
ops if KICK_OPS is off. on channel join we check both the userlist and the
botlist and display using FORMAT_FRIEND_JOIN. (68c-T4).  Fixed mode #channel
so it displays the mode of a channel without having opz on the channel.
Modified /back so if /set -format_back is done it won't prompt for reading
the away file. Also won't give you your away time. Possible fix for not
displaying ansi with DISPLAY_ANSI off. Possible input prompt fix for ansi
input. Some fixes/suggestions from FLiER concerning status update, and
.bitchrc (w)SAVEA. nick and join floods now work as advertised. nick floods
should be quicker to catch as well. /randomnick now takes upto two optional
parameters, count and prefix to use. /window new channel #linux and window
swapping were not updating the input prompt at all. Channel joins were not
always announced. Still a bug with the nick->userlist in p_channel() not
being updated on the first announce of a join. $cparse() added for script
color parsing. mathe suggested $getreason(nick). It uses the color parser
so $0 and $1 are defined as nick and mynick. output is ansi-stripped. 
Replace BitchX.reasons quickly. level 5 userlist protection should work as
well. /jnw #channel  added. Ansi is allowed in dcc chat's if and only if
/set dcc_ansi is set on. Input prompt is now properly cleared. Sergs_ fixed
a little problem with check_auto(). Also fixed up a few other things in the
check_auto() check_prot() areas ie sent code. Added code to read BitchX.quit
which is a file of quit messages. It's passed through color parser so it has
$0 defined as well as any other $functions and variables. Lotsa other small
fixes added as well. Merged new epic changes in. This added $chmod()
$twiddle() and $uniq(). Also added /call to display the script call stack.
Added /set cdcc_prompt. Fixed /relm and /reln formats, as well as fixed the
send of /relm to a nick. Changed the output of whois to display the channels
if the nick is on any of the internal lists. /j added in as an alias for
/join again. Fixed /readlog. Modified  userlist once again. What happens is
this. If a nick is in the Botlist we ignore the userlist. A botlist entry is
an exact nick!user@host entry. If not in the botlist then we check the
userlist using *!user@host. We also check the shitlist entries even if they
are found in either of the two lists. Ctcp op/invite/unban work the same way
now as well. Fixed a problem in /ctcp op and /ctcp invite noticed by
immortal. Added a new FixColorAnsi() from Flier which saves some work and
makes the screen output snappier. stripansicodes() was actually rather slow
because we stripped ansi everywhere. stripansicodes() is still used but in a
much more limited fashion. Setup home page www.sasknet.com/~pionh. Added
some debugging functions. /call will display a call stack for an alias. hmmm
maybe we should implement the saving of /relsw /relw /relt /relst *grin*. 
Added a new shitlist level 5 which perm ignores the *!*user@host of someone.
$uhost(nick) will return the userhost of someone on your channels. Multiple
returns can be expected. /set REVERSE_STATUS_LINE renamed to STATUS_REVERSE.
This allows us to be more compatible with scrollz as well as making much
more sense. I've also defaulted this to off. As on reverses the meaning of
the ansi from /set format_status*'s. Fixed $isuser() to not segfault on
shit'd users. 


Changes for 67 Released 090896

/away now converts the output format so we can do nicer things with it.
idle time on /wi was screwed up somewhat. ctcp.c has been revamped. Thanks
to FLiER of Scrollz fame for sending me a patch for a color input prompt.
Changes were minimal to incorparate this into BitchX/epic. %! displays
channel counts for ops/nonops/voice/ircops for the current channel. Fixed a
problem with the input prompt not updating properly on channel change when a
$T is in the input_prompt. Changes in status.c. Added color status bar
capabilities. Also added color backgrounds. %0 - %7 are background colors.
%8 is reverse and %9 is bold. Fixed some problems with new send_text() and
dcc support. Found a couple of memory leaks in dcc. But I don't think I
found the main one. Fixed /ftp and friends seg fault problems. Passwords can
now be used on the userlist and the botlist. This affects /ctcp's but not
auto-op stuff. Fixed a major memory leak that's been around from version
64. A few new format's added for some numeric responses. Fixed ^L seen on
the status line. Changed parse_args() to read the file IDENT_HACK for the
username.

Changes for 65-66 released sunday Aug 25
Fixed to compile on SunOS and other systems. Solaris has a broken va_args()
function. This sucks. %c is taken as a int instead and de-promoted to a
char. forgot a set_non_blocking call in dcc.c. Some window commands were a
little screwy. ie /window new hide channel #warez the ^Wl command didn't
display properly. /whois while switched to this window would goto the
previous window and the current window. so we made whois display to the
current window. netsplit detection while we are on a channel works. netjoin
detection seems to work. Netsplit hacking remains to be checked. We should
no longer de-op people who had ops on the channel when the server re-joins,
within a certain length of time. After that time is up, then we will (or
should de-op that person). We are using a modified whowas routine to store
split nicks and check that against the person joining the channel.
Dakota pointed out that ctcp_reply wasn't being done properly. As well
Ctrl-K for invite's was a little problem. Ctr-T and Ctrl-E have the same
problem but until a solution hits me in the head :) will remain the way they
are. Color can now be used within the BitchX.help file. Topics can't be
colored yet, and we still need a couple of indentation spaces before we can
start the material for a topic. We now don't kick ourselves on floods and
stuff. FORMAT_ACTION* and FORMAT_NOTICE* and FORMAT_MSG and FORMAT_PUBLIC*
had a parameter removed. IT was a lame one, that I'd added to remain
compatible, but caused more problems that it solved. FORMAT_MODE now should
properly handle the case of a server mode. /list will now prompt you yes/no
before doing a /list * . FORMAT_VERSION is setup along with a /sv command.
Requested by IceBreak. /whokill /tracekill and /traceserv are re-added by
request of myc. get_reason() is used for getting random kick reasons from
BitchX.reasons. We now can use $ variables in here. $0 is the nick and $1 is
our nick. /encrypt will not segfault when we send/recieve a encrypted msg.
Enabled the FORMAT_ENCRYPTED_NOTICE/MSG vars as well. Due to popular request
FORMAT_NICK_AUTO, FORMAT_NICK_COMP and FORMAT_NICK_MSG were added. Because
of this we also added NICK_COMPLETION_TYPE. 0 nick has tobe the first word
on the line. 1 the nick can be anywhere on the line. Added /nochat and /chat
commands ala Icebreak. /p and /ping now do the right thing and ping a
channel if no arguement's given. /ver will version a channel or a person. 
/back is now separated from /away. /away will still do the same things as
previous. ie /away will still set you back /away message will set you away,
but /back will only put you back. We also give the option of reading and
deleting the log that might be created. /more will display a file of your
choice. New send_text() routine makes life easier. But is has one
consequence. I had to modify FORMAT_SEND_MSG and FORMAT_SEND_NOTICE to take
one other variable. The sender's nick is $2. It was either modify these two
or another two.... Damn it. fixed small bug in dcc_message_transmit().
Changed FORMAT_SEND_PUBLIC and FORMAT_SEND_PUBLIC_OTHER damn it.
$channicks(channel) returns a comma separated list of nicks on a channel.
Useful for those mass messaging types. /on nslookup just for BlackJac.
format_topic_change_header for BarK0de. Pent suggested format_names_banner, 
format_name_voicecolor and format_whowas_header. /msay will say something on
all your channels at once. Cdcc channels will now accept a * for All
channels and it takes all current channels and adds them to the list. Fixed
exec -o to actually tell us what it's doing again. Fixed a ignore returning
too soon on notice's. Fixed a problem with dcc stats giving wrong numbers.
Drastic suggested a /fprot on/off command. This is a simple toggle which
either turns on or off full flood protection. /offers command and a /c
command added. /c is for channel/user mode changes. /offers is for xdcc
list'g a channel, useful in something like #sexpics.

081396 -------Changes for BitchX 64--------------- (Major Upgrade)
Lotza changes in tooo many places to even begin to list. Most have todo with
the ansification of the client. Most msg's output from the client can now be
completely user defined using /set FORMAT type variables. Thanks hellshock
for the wonderful idea. renamed /dirlm /dirln to /reln and /relm added /relsm
and /relsn commands. Fixed term reset todo the proper thing. clear the
screen and then reset. Some changes to dcc were made. dcc sends should now
be alot faster. Added new keybindings. Added Toggles for Cloak and
OperView. Added %K for status bar display of operkills/nick collisions.
Added MdVoice and Devoice commands. Same parameters as  deop and mdop. I was
asked to remove the cluster() from /addbot for security reasons. Bot's are
now matched on exact userhost's + any special server chars "+~-".
/scano /scanv /scann /scan will scan a channel for various types of users on
a channel. /toggle will display a a screen of toggles which a user can then
/toggle <command> to turn on/off. %K will display operkills on status var.
uses STATUS_OPER_KILL for the format. Ctrl-E Ctrl-K Ctrl-F Ctrl-X Insert and
Delete, F1-F5 and Esc-1 to Esc7 all have internal bindings. They can of
course be changed to whatever you like. /rel* functions made alot more
stable (ie they don't dump core.) Modified alias_special_char,
TruncateAndQuote and strformat() functions. We can now do $[30.]0 and
$[-30.]0 to pad a string with a certain character. fixed a small bug with
/window double on. When sending a msg/notice we now add that nick to the
internal tabkey list. Added ^W bindings for grow window, shrink window,
window kill, window hide, window balance, window list, window move, window
next and window prev. Added more FORMAT_* vars'. FORMAT_AWAY and FORMAT_BACK
FORMAT_NICKNAME_OTHER and quite a few others. Added some changes from new
EPIC beta. Fixed Away and back and others. Changed meaning of /set
SEND_AWAY_MSG to if on we send a msg to our channels. If off we don't.
Forgot to reset /set AUTO_RESPONSE to our new nick on nick changes.
FORMAT_TOPIC_SETBY should now be working. put_it() will not output a blank
line. This allows me to get rid of the ERROR MESSAGE and allows the user to
set any FORMAT variable to NULL. /eval echo %Pthis is purple%w white%K and
bright black  now works. Ban times should now be stored correctly within the
client. /on clone_read now works. /set NICK_COMPLETION on/off turns nick
completion on or off. Undefined FAST_DCC_SENDS within the config.h file. If
you are on a ppp/slip site and require fast dcc sends and are prepared to
use some CPU (ie aprox 30%) then define this option. Otherwise leave this
alone, as your ISP will more than likely ban you :). Also you can now define
a DEFAULT_USERMODE. Because of the way things work within BitchX you need to
either define this to change your initial connect or /reconnect in order to
set your initial usermode. you can also export IRCUMODE=+iw to change your
usermode for the initial connect. /rel* and friends now will take a nick or
channel arguement. /set AUTO_AWAY on/off and /set AUTO_AWAY_TIME added. We
now will auto-setaway after auto-away_time. only 0 or 10+ minutes allowed.
Anything less than 10 is made to be 10. you can also specify this in
seconds. /env autoaway will set the default autoaway message. Numbers of
minutes the timer is set to is automatically added. hmmm until more can be
figured out with /echo we won't be using convert_color_format() in echo's.
It allows someone to $eval(rm -rf /*) your system. NOT good.






--------------- BitchX client -----------------
01/09/96

Fixed small buglet in the size of a alias allowed.. was crashing irc when
the alias hit a certain size. just increased size of buffers by double for
now.. look further for the rest of the solution later

01/10/96
Added couple of new commands. readlog() and remlog() to deal with msglog's.
started adding /adduser  for storing info like a combot would.
fixed couple of bugs in /dcc dealing with ~ in filenames.
started looking for a way to deal with dcc_num field. also for dealing with
dcc_limits. have some ideas, but not implemented yet. Fixed a couple of 
memory leaks in names.c dealing with new fields added to NickList structure
and list_shit structures in pluto.c

01/14/96
Started adding /cdcc and CDCC commands and on ctcp. Added AutoCtcpkick var
for kicking on /ctcp * send N :) Removed some duplicate code.

01/16/96
Added /msg nick xdcc command sets. works with xdcc bdcc and cdcc.
fixed a strcmp in ctcp.c do_ctcp  so it actually does a my_stricmp.
When sending large numbers of files all at once on local system, a bus
error will occur.. Need to find this. Also new 2.9b6 server fucks up and
don't send a proper response to a nick collision. numeric codes 433 and 437
I combined into one number to make it work. Added 251-255 responses from
server /lusers works again :)

01/21/96
fixed a couple of small bugs in cdcc handling of private and public msg's.
Due to a baby being born, no changes to the queue handling code has been
done. So do NOT /set dcc_send_limit. you have been warned.

01/22/96
added auto join channel on invite toggle   /set auto_join on/off default on

01/24/96
nothing new.. couple of bug fixes. crashed irc client on ig/nig combo.
also /friends /shit etc were fuxed up
fixed auto_join to only join channels when the user doing the invite is
on the bot list and authorized for that channel.

01/25/96
well we fuxed with the user_list shit_list stuff.. maybe now they'll be
working properly. /userlist will display user's on the user list. need to 
expand that info at some point in time. /add_user should check the current
channel for the nick being added and reinit the info if found. not done yet
though. Some other functions may well be broken now though :) anything using
cluster will need some reworking as we now store the userhost together
instead of separately like before. Fixed some fuckup that either plutonium
or comstud created.. you never ever ever ever malloc some memory and then
started ++ the pointer to it. This really fux's up the memory manager :)
This fix by itself fixed most SIGSEV trouble we were having. user/host fixes
maybe put back in if it proves that this would be more advantegous. Release
this version to Lifendel and BuddhaX possibly Jondalar to get a couple
possible operating versions. Couple of small fixes to the bot list. Save bot
list done on /savelist. Auto join channel on invite is setup to only join
on invite from recognized bots on the bot_list and the authorized channel 
for that bot. Should solve most problems with joining 50 channels like
#spank_the_monkey_all_night_long type of deals :)

01/26/96
well modified a shitload of source to get more compatible with EPIC. Comstud
is a idiot. May as well of started from scratch than use any of his source
in this client. Plutonium ain't much better though for using it. Anyways,
because of the wholesale changes in the client, some bugs may be present..
/notify nick  is working sorta... it don't notify you unless you ask whether
someone is online. gotta fix that. status functions changed to use static
variables instead of malloc'g em everytime you update. This increases the 
speed of the update considerably. added a %D for dcc stats on current
transfer. added a function ltoa and a dcc_active function. Replaced whole
file output.c with EPIC version as I accidently deleted mine :)

01/28/96
ripped out the /aop /shit /friend /beepmsg .. code wasn't working on solaris
so fuck it. I'll rewrite so it's better, faster cleaner. we have da
technology :). /adduser does the /aop stuff anyways. and other than the
/shit the others were of limited value.

01/29/96
ripped out da old irc_io and key binding routines. replaced em with the
ones from EPIC beta6. it looks alot cleaner and seems faster. Fixed a small
buglet with the double_status line and creating windows.. when the window
was marked hidden we had a problem with deleting the window. Fixed the
vars.h and keys.h to use enums like epic.. this gets rid of a problem I had
when I added a variable and forgot to type make in the include dir. Added
bonus is the client is now smaller. Almost 20k smaller now. Fixed little
buglet with static declared variables.. I though they were always set to
zero on declaration. obviously not. Status line was hit with this little
buglet. 

01/30/96
oh why oh why did I not start with EPIC.. :) ahh well. I've replaced the
brain dead routine for opening a file now.. This version searches the path
for the file you want to load. It checks for .gz and .Z extensions and
uncompresses the file if needed. It slices it dices it... it... much better
than before with 10 copies of the same routine in the code.
 
02/05/96
So many changes and I haven't documented them :)  EPIC7 and BitchX are
sharing there alias's file and a bunch of other stuff. Fixed quite a few
bugs I introduced as a result of this. which means there are bugs lurking.
ie. /alias save and then PageUp through the screen will core..  Probably
something to do with the size of that particular cz.irc alias. Changed
UserList a little and what it does. Delayed Auto-op is now working.
Userlevel for autoop has to be >= 50 in order for it to work. /adduser -nick
will now delete the user from the list. /bot -nick will delete the nick from
the internal bot list.  Rewrote a couple Comstud crap routines for masskicks
and stuff. they would be too slow on a large channel. Now they should be
alot quicker. I need to re-rewrite them to share alot of the code that is
common between masskicks/mass-deops/massbans etc... they almost do the exact
same thing, only differance is the semantics of the operation. Now have an
idea of how to do /dcc queue sends, so I guess that'll be next on the list
of things to-do. Also removed dead-code all over the client. Fixed a couple
of small EPIC7 bugs in the process as well. Hope they appreciate the effort.

02/05/96
fixed bug with alias save from cz.irc.. Seems the line was being split a few
too many times for the liking of ircii.. Increased the number of times a
line can be split and problem is solved until the next time.. 80 * 80 should
be enough for now. Scrollback and ansi don't mix well at this point in time
although ansi can be turned off.. it does however not make for a pretty
sight.

020796
due to popular request I've started re-implementing shitlist's.
Modified the way auto-op delay is done... using a callback timer function
now.. Maybe this will be easier?

020896
Modified get_reason to accept a nick which is then used to help form
automated reasons like in kicks and stuff. This file is called reasons and
should be installed in the ~/.BitchX directory.  A %s placed in the string
will be replaced with the nickname. fixed reasons on the shitlist, was fuxed
up.  started looking for a good place to place the check_auto routine which
does Aop and shitlist's. Made the client to a automatic who on join to aid
in setting the userlist access. This needs to be done cleaner. Fixed /dirln
to display the last notice instead of the last msg.. stupid me.. EPIC don't
expand_twiddle filenames at all... so therefore we do. especially when we do
a rename on a file using ~/

020996
automatic WHO <channel> is not a brite idea on large channels.. So we needed
to add some special logix to whoreply and numeric 315 to fix it. We still to
a WHO on join, but we turn off the display an pick up the nicks anyway. This
allows the userlist to get synced with the channel on join. Otherwise we'd
need to type /w in order to sync it when we join. Six of one, half dozen of
the other.  Fixed up link looking we think. Should be compatible with 
Ctoolz now and is done alot cleaner than what I had previously. LLOOK will 
display all servers in the list. /set llook on/off turns this feature 
on/off. LINKS (standard command) might have differant effects depending 
on the setting of the variable llook. little problem with the channel mode 
indicator fixed. we were not blanking it properly on channel switch.. 
This caused the mode indicator to seem to lock on the previous channel. 
Small change made to names.c:remove_channel concerning removing the current 
channel from the list. Limited nethack protection built in.. Defaults to
off. /set HACKING 0/1/2/3 will turn this on. users not on the userlist or the
internal botlist will be de-op'd. Users on the shitlist are whatever you 
set it too :). So this should all work fine. Yeah right... One result of
this change is that we needed to change the args to check-auto in names.c to
pass the current channel according to get_channel_by_refnum

021096
Fixed problem with being klined from a server and core dumping. Numeric 465
was the problem and the lousy code contained therein.  Also changed the way
we handle adding users to the userlist. If the nick to adduser is given as 
with ! and @ in it we do not annouce to the user what has happened. This
fixes a little problem when reloading the userlist on startup, we don't
really want to announce it every time we reload.

021196
another buglet fixed when connecting to a server you don't have
authorization for. We now successfully try a couple of times and then prompt
user to give us another server name, just like it's supposed to. Remember to
check your BitchX.sav file if something is not working properly. I've been
bitten by this several times now. Small bug concerning on exec -name
processes coredumping. Thanks Driz for sending me that TiME.irc script.

021496
finally fixed server changes and modes once and for all. Channels rejoins 
will be attempted on server change. Channel modes on server change are
found. So no more lost modes and channels crashes.

021596
Lifendel noticed a strange problem with the msglog. This might be fixed..
Looks like a old EPIC/ircii bug as well though.. limit checking should have
been implemented in both... passing the address of a char to a function
that's expecting a char * is not good... Mailed to ircii mailing list.
Lameness in /cdcc send is now fixed up.. This should now work instead of
core dumping.. Just needed to do some error checking. /cdcc notice now shows
you what it sent to the channel instead of just sending without showing the
user.. Added /ls and /ps commands. Could add others if needed. Fixed /j to
not require a leading # on channel. This doesn't fix the problem with
scripts but helps when not using a script. 

021696
Added a call to delay-check_auto in numbers.c numeric 315 which allows us to
do auto-ops and autokicks on channel join. The actual work is done on a
timer of 3 seconds which fixes the problem where you join a channel but
don't have ops yet but try to do a bunch of kicks and bans. I just scan the
list of users and shit's to find and if they are on either then add a timer
call to check_auto. Seems to work well in limited testing.

022496
Added a function called $flash() which returns a nasty flash sequence. /eval
/send $flash() will flash a channel :) .. Due to popular request /set cloak
on now cloaks /ctcp userinfo, finger, time and some others from users.

022596 
protected users are now working so be careful in the use of this feature.
Re-ops/Deops/Kicks/KickBans are all implemented. Had another look at /ub and
bans these might be working properly again.

022696
ctcp invite has been implemented. user has to have >24 level and you have to
have op's and be on the that channel. delay opz now does more checking than
before. it won't do anything unless the user is on the channel and not-opped.
Fixed Makefile.in and possibly configure. We'll see what solaris thinks
about the changes to term.c. A new function called $repeat() has been added
from EPIC8 source. repeat(2 test file)  produces "test file test file" as
it's output. Might be handy for greeting someone :)

022796
Fixed Flooding.. It was never finding a user in the userlist. Added /ctcp
whoami command. Fixed /unuser command to actually delete the proper user.
Fixed terminal support. I had upgraded the configure script and some defines
in the defs.h.in was forgotten. Caused some strangeness of sorts 

022796
I removed the fake files list. This allowed phoenix with fluff to work.
Modified parse_command to allow //^ type commands. Added AJOIN command. 
Added a bunch of Ctoolz scripts I found to the package. cz-pent, lithium
chaos and druid scripts are now included. Added a new status line function.
It returns the number of times you have been msg'd while away. %^ on the
status line returns the count. Fixed a core dump on msg flood problem.
Made a new /set called MSGCOUNT to store the count of recieved msg's while
away. This was done for any scripts that might want to use it. kludge'd
around ^M's on display screen by checking if the eol is ^M nul it, in
add_to_screen. Added bitchsay to start replacing the use of say. Added a new
function called $isnum() returns 1 if the input is a number else 0. accepts
numbers, - and # as a number. Fluff modz compat function.

022896
Flashes and ansi shit should be much more stable now. Only valid ansi
sequence we accept starts with esc. All other sequences are done like normal
irc ie bold em and make em printable. Had to make a special case in screen.c
just to handle this case. Epic suffers from this as well. ^N ^X and some
other chars are deadly to a vt100 screen. We still suffer if someone sets
for example a topic with a ansi bomb in it. Fixed Channel sync for those
scripts that like to hook who reply's just moved a check I use in parse.c
whoreply so the hook never happens..

030196
Working on whois queue's and ison notification. Added hard Userhost
Signon's. /set HARD_UH_NOTIFY on/off  to enable or disable this. A new hook
for it as added as well. Command line parser from Epic was added. Have to
remove the server_list notification routines that are from epic.. too
fucking slow on startup. 23 servers and 20 NOTIFY's and look at the lag
indicator :) Although i did improve the speed somewhat by using just the
connected to servers it's still not enough. 

030296
You can now specify a string for BOLD/UNDERLINE/REVERSE of /ignore and
other commands. Why?? you ask, well we can now use ansi escape's for those
strings. This saves us from having to use a script /on numeric which speeds
up the client. /dcc now shows the chat connections and then a graphical list
of /dcc file connections if there are any.

030496
Added some statistics for a channel. New command is CHSTATS [channel].
This displays things that have been seen on a channel from join. Fixed up
sync_user_list. And created a new function check_sync. We now do a mode
#channel b, a mode #channel and a who  #channel on join. I think NOTIFY
needs to be put on a timer though, so when we first logon notify is put on a
10 second timer. each time after though the results are immediate. New
commands AddIdle/UnIdle/ShowIdle have been added. AddIdle <#channel>
[seconds] to start idle checking on a channel. Every two minutes we check
the channel for new idlers. Unidle <#channel> removes idlechecking and 
showidle [#channel] show idle users on a channel. Structures for nicks and
channels have changes thanks to some advice I received from Sheik. Fixed a
small bug in .25 when I changed a structure. Changed new command chstats to
accept -all as a parameter. Idle kicks need to be modified a little to slow
em down :)

030696
Added new functionality :)  changed parameters to $open to also accept a
mode so we now have $open(filename R B) for reading binary and
$open(filename W B) for writing binary. without the B writing is done in
append mode with the B files can be overwritten. This change was made for
compatibility with Ctoolz. Also added was a function called $bcopy() it takes
two parameters both file descriptors which must be opened using $open. What
does this all mean?? Well we can now play a .snd on events such as receiving
a message and quitting the program. The following alias shows how.. This was
ripped from Cubic Zirconium.
Alias playf {
if ([$Voice]==[ON]) {
@ rf = open(~/.CZSounds/$0 R B)
@ wf = open(/dev/audio W B)
@ bcopy($rf $wf)
@ close($rf)
@ close($wf)
}}
One word of warning though. The copying blocks, ie until the copy is
finished we can do nothing. So make your event sounds short or else you'll
be waiting for awhile until the copy is done. Added two new
functions  $epic() returns 1, $bitchx() returns 1 and a $winsize()  which
returns the size of the specified window or the current window if nothing
passed in. 

030796
Added more on hooks server_notice_local_kill server_notice_foreign_kill
server_notice_fakes server_notice_fakes_mychannel
server_notice_server_kill.. if you want to know what these are about take
a look at notice.c parse_notice() function. 

030996
Fixed a bug in notify add_to_userhost_queue . This may have caused seg's on
SunOS 5 and definitely caused a small slowdown in joining a channel when we
first started the client actually about 40 secs of slowdown. I might have
broken hard_uh_notify though. Added command /Addbot to replace /bot .. It
makes more sense with /adduser and /unuser and /Addbot and /UnBot. Channel
will default to * if left out. This may also fix AIX compiles.

031096
Added Bhelp command. Ctoolz.help must be renamed to BitchX.help and placed
in your .BitchX directory in order to work. Complaining does help and it was
actually a fairly simple command to add, we are using builtin array building
commands. In my small tests of this function it seems to work almost exactly
as Ctoolz chelp does. Started adding /dcc resend and reget functions. I may
have broken dcc in this case though. Sure hope not, dcc.c is a mess. Added
new script from Zircon. It includes a new help file with functions from sCZ.

031196
Added new Ctoolz functions $addtabkey() and $gettabkey() support. These 
functions take single parameters. addtabkey takes a nickname and adds it to
the head of a list. gettabkey takes a number either 1 or -1 which is then
used to search either forwards or backwards through the list. The most
recent nickname on the list is returned first, and then added to the end of
the list. Really fixed HARD_UH_NOTIFY. I was only using it on the first
server. If you went to another server normal ison functions were used and
the userhost was not. //^ functions should now work and SWITCH command from 
EPIC was added to the client. 

031296
Sheik made a good suggestion to add a dcc stats command so I did :)
/dcc stats gives statistics on dcc's this client has done such as Min and
Max rates for both incoming and outgoing files. Bytes in and Bytes out as
well as a total file count received and sent.  Added /usage command which
gives CPU statistics. Fixed /uptime and /chanst to look a little better as
well as give some memory statistics. EPIC script directory is included. This
is version .29 already. Enabled NON_BLOCKING CONNECTS. Had to make a couple
of fixes here and there, but it looks like it's working. Re-visited idle
kicks and we now mode +b then kick the user. one minute later we remove the
ban. Added more to /chanst command. Fixed linux kernel for getrusage() :)
and sent the patch to Linus. Maybe it'll make it into kernel 1.3.73. Fixed
/dcc stats command to correctly display bytes sent/recieved. Fixed $1- bug
that has plagued EPIC/Ctoolz/SCROLLZ/BitchX clients. Sometimes though a line
of output seems to be lost with fluff mods xdcc commands. Don't ever take a
negative index on a "" string. You can get odd results. NON-BLOCKING is
working for /dcc but logins seem to have a problem. Hard to fix though as
gdb gets sig-pipes all the time. Added /RELOAD command which reloads your
BitchX.sav file. Had another look at check_auto and friends. It worked, so
wonders never cease. We now use a wildcard in the nick so we match on the
*!*user@*.sasknet.ca if this causes trouble we may have to take alook at it
again. A variable was added called IDLE_CHECK, it's the time in seconds
between idle checks. MAX_IDLEKICKS sets the maximum number of idle kicks
performed at one time. MSGCOUNT is something I added awhile back. A user
should never have to set this. As it the number of recieved msgs while 
away. 

031396
Changed some things around. Created a structure to hold channel stats in.
When we join a channel and its not in the list it's added to the list. When
we leave the channel it is not deleted. if we then rejoin a channel on this
list the stats from before are copied over. Complicated, yes. But it solves
a problem with the BitchX.sav list and the information stored there.
Eventually a lot more info may get stored in it. Such as the banlist. The
current channel's bans are already stored in the server_list channel list
structure for each channel. I want to rewrite the /unban /ban routines to
use this information.

031496
busy working on non-blocking /dcc resend and reget's.. they should be
working now that I fixed the error of my ways. /dcc glist is now looking
alot better. 

031696
Changed /ctcp user invite channel  to be a little more aggresive in it's
check for validation. So if the user is found on the userlist, and the
userlevel is greater than 24 and that user is allowed on that channel, then
we allow the invite, announcing to you that we are inviting someone.
Otherwise access is denied. Finally got a chance to try /dcc resend and 
reget in operation. It works so far. It's compatible with Ctoolz and prob 
Scrollz as well.

031796 BitchX .32
Added new command /cset. To start with some sets are put into
a default channel list set. This default is copied to the new channel as you
join it. These channel sets then become specific for the channel. The
default channel options can be changed by modifying include/config.h. They
can be changed while running using /set. Userlist and shitlist are fixed up.
Seems that we were being a little redundant. Also make sure that we use
wild_match on both sides of a string. a New command /reload to reload you
BitchX.sav file into the client. The default kick reasons file has been
renamed to BitchX.reasons instead of reasons. I seen the new Ctoolz /dcc
glist but after some careful though decided that I don't wanna tie the
client into the script. Nick Kills and collides should be identified
properly in oper mode. Operator kills local and foreign are differianted.
I've removed the /msg user -invite channel  stuff. Use /ctcp instead. This
only allowed people on the userlist to invite themselves, but I didn't see a
reason to have two differant methods.

031896
Link looking is fixed once again. Forgot about hooks and what happens when
someone hooks a numeric on me. Started working on various other flood types,
such as nick, deop, pub and kick floods. What a weird bunch of stuff.

031996
kick on deop flood, kick on kick flood, kick on pub flood and kick on nick
change floods are now implemented within the client. They can be setup
channel specifically or globally for all channels. /ctcp ops channel and
/ctcp unban channel are implemented. Also the user list can be turned off
for specific channels as can the shitlist. Doesn't sound like i've changed
much, but some major changes internally to support all this. Renamed a
command called /nig to /unig put back in /unigh as well. (These are unignore
commands). Added /dcc path on/off to remove the path from /dcc'd files on
display. 

032096
/dcc was a little bit broken, nothing too serious. Fixed I think. /dcc has
alot of commands the "standard" clients do not. Such as stats, paths, quiet,
auto, status line update, glist, resend, reget and active. /dcc stats
returns a status indicator of various things seen while on irc. paths turns
off display of the download path of the files in list. quiet toggles quiet
mode for dcc transfers. Auto is a toggle for /set dcc_autoget. status line
updates are meant for script writers. glist is a graphical display of active
dcc's. resend and reget are for aborted transfers, and active displays the
limits and bounds of various set's involving the number of active dcc's and
the limit on the number of active dcc's allowed. Also /dcc ? returns a help
screen. Added /Qk for quote kicks. BitchX.reason is used from the .BitchX
directory. 


032196
Hmmm discovered that I was hooking numeric 365 end of links number and not
doing my end of links routine, therefore link looking for only partially
working depending on what script you were using. Fixed /dcc chat #channel.
Problem was that we can cancel /dcc transfers by number now and of course we
use a # to denote this. Well this causes a problem with anyone dumb enough
to try and chat a channel. So we are now a little more paraniod about what
we'll accept as a dcc number. We also couldn't close that particular kind of
chat as we thought it was a number and treated it as such. We now reset the
timers and counts when we toggle a /cset on a channel. Otherwise some
strange things can happen. Right Jondalar :) Fixed a problem with mode
changes. I was incrementing the deop count for both +o and -o cases. Added a
new /user parameter. /user -stats returns the internal counts for deops,
kicks, publics and nicks changes. /user -ops -stats shows stats for only the
ops and /user -nonops -stats show stats for the nonops. Non-Blocking /dcc
connects work great. Non-blocking servers connects are working well. Only
problem seems to be that the Non-Blocking /dcc never time out. Have to have
a look at that. Anyone have any ideas on what a reasonable time-out would
be?  Corrected channel statistics to better reflect what is actually
happening on a channel. Had a couple of mistakes here and there. Channel
splits might disturb these statistics though.

032396  BitchX .35
Lotza bug fixes. hooking the 251-255 numerics now. /dcc send *.zip was broke
due to some stupidity on my part. gettabkey and addtabkey now take an
optional second parameter AUTOREPLY. This second parameter defines what list
the is nick taken from. The default is the tabkey array. Two new functions
added to retrieve the last message and the last notice were created.
$lastnotice() and $lastmessage(). Added a sort function. So $sort( one two
three)  returns one three two in sorted order :) poor example. Merged EPIC 3
changes for alias.c,dcc.c, ctcp.c and others which fixes several functions.
dcc.c fixed for files of size 0. These files are automatically announced but
not autoget'd. If you do get the file, then it is rejected. All /dcc rejects
are also sent to the offending user as a notice. Last msg was fixed to
include the userhost of the user and the time the message was sent. Created
diff files for irc.c, dcc.c and server.c for EPIC development to have a look
at. Fixed WallMsg to check for arguments. If none then print usage message
and return. /dirlm and /dirln can take a optional second argument to specify
the channel to send to. May have fixed the problem with being set away on
server join. We now auto-join all previous channels on server change. 
This solution is more elegant than what was previously implemented. 
Added /UnAjoin to remove a channel from your autojoin list. Channel has to
have been added to this list with /AJoin otherwise nothing happens. Added
some changes from EPIC 3-patch3. Still won't add the broken part though.
Horrible kludge done to /dcc glist. I actually set errno to zero. This fixes
a divide by zero error I haven't been able to find anywhere. The actual
divide by zero isn't happening within dcc_glist, but somewhere else in the
code. I added memmove() from inn distro for those systems that don't have
memmove(). I needed a feature of memmove so it now included. It only gets
compiled if HAVE_MEMMOVE is defined 0 in def.h. the source is in ircaux.c.
Please let me know if anyone has trouble compiling this.


032596
fuked up on /savelist if you have /AJOIN's defined it'll lock. Arrggh
everyone was wondering what the new flag +r meant on the usermode.. Misread
a patch was the problem.. you couldn't unset it period because it did mean
you were logg'ed into a server., but it should never have been displayed.
Changed behavior of /dump. Be very cautious with this. It removes all
aliases or ons or vars or binds or everything loaded. But first everything 
is saved to BitchX.alias. Changed p_privmsg. First we check if the user is 
ignored then we check we do ctcp and stuff. Changed keys.c and config.h.
EMACS_BINDS is defined now and ALLOW_STOP_IRC define was removed so we can
always stop irc. Added /DF for disk free command. Added /banstat to show
channel bans optional parameters are channel and/or nick. I'm now using the
internal banlist which makes channel unbans reasonably fast :) It sounds
like i've done alot here, but most of this was already implemented.. Just
needed some "glue" functions.

032696
Chasing some bug in /dcc with AIX systems. Fixed a bug with /msg nick cdcc
and nothing else on command line. Fixed /dcc glist. now we can send files of
0-length but cannot receive em. /dcc glist doesn't crash if we are sending
one. Trying to find a fix for a memory problem involving too many m_strdup's
and not enough new_free's. Fixed a problem Frisbee found with not being able
to display bans on a channel when you're not in it. Nice thing is EPIC has
the same bug :). Lifendel says that with more than 12 dcc's he crashes. Not
sure yet what this is about. Fizzle_B says that his client tends to "lockup"
for about 10 secs. I think this has to do with hard_uh_notify and the amount
of notify's we're getting back. I started using USERHOST which is better
than ISON. ISON does tend to do this as we have to send individual requests
for each nick. USERHOST we can send 5 at a time. BlackJac mentioned that
phoenix runs fine with BitchX.. This has actually been working for awhile
now. Looked at Hellshocks dcc.c and whois.c but I don't think I'll add em
into the client. His modifications involve sending ansi codes directly from
the client. Personally I feel this should be the responsibility of the
script itself. Sheik agrees with me on this. /ignore works a little
differantly than expected. You need to specify the full nick!name@host where
nick, name or host can have a wildcard.  we can now ignore _Elfoo_'s lame
attempts of getting BitchX. Everyone should add /ignore
*Elfoo*!*@*.central.com ALL into their .ircrc file. Changed cdcc doffer. We
now don't need to use #1 we can use 1. Changed xdcc send to accept either #1
or 1 as the pack number. A queued message is sent to the user if our
active dcc count is greater than DCC_SEND_LIMIT. dcc queues are implemented
but not very well tested.

032896 .37 released
Changed /dump. has a new parameter FILE which dumps to a file. It dumps
everything to a file called BitchX.dump in your $HOME directory. Also had
forgotten to dump keys for ALL parameter. Added changes from e3000s5 as
well. /fe has been changed and a couple of bugs in alias.c as well. Fixed a
overzealous m_strdup problem in BitchX/EPIC alias's. Fixed nslookup to work
on nicknames as well as hosts. Zircon sure finds them bugs :).
As much as I don't like it $unlink() and $rmdir() now are doing
expand_twiddle so stuff like $unlink(~/file.zip) expands to your $HOME
directory. Please be cautious with this. One nice thing is that low-level
functions like unlink don't accept wildcards at all. It has to be an exact
filename. loaded scripts and shit on numeric 001 and 004. Not quite sure how
well this will work, but what the hey. This has the benefit of us loosing
the Welcome to the irc network nickname crap, because we can hook it.

032996
Fixed IRCUMODE so it works for all servers. You may get a mode msg twice
though. Replaced dcc.c with one from EPIC, with my mods. We'll see if this
fixes the problem of AIX crashing the sender. I'm thinking that maybe a
misplaced FD_SET is the problem or a FD_CLR. One benefit of loading scripts
before anything else is that the client is snappier on startup.. Not much
left for almost complete Ctoolz compatibility. Guess we'd better open the
file before seeking to the end on resend's. Fixed dcc_dldir problems when i
replaced dcc.c with one from epic with bitchx mods. /Channel was broke. If
there were no channel modes a NULL was passed to the output. fixed dcc paths
problem in dcc.c, I might however have been overzealous in my use of it. dcc
numbers are reset back to one on /dcc close function. Have to wait and see
what happens when an error occurs. Fixed another couple of epic bugs. One
with revw. It should never return a NULL and another in the MatchingBracket
routine for $revw( without the closing bracket. Also ran epic regression to
a successful completion after fixing a couple of bitchx errors in
function_rpattern and function_rfilter.

040396
Added changes from Epic3-6. Added nethack prot of a sort. 3 levels are
provided. 1 gives no warning but deops the splitter. 2 gives a warning and
deops the splitter. 3 gives a warning only. /cset hacking sets a channel and
/set hacking sets global changes. The user has to be on the userlist or your
botlist in order for them not to be de-op'd on a split. Added four new 
commands /chglevel, /chgprot, /chgchan and /chgautoop to change user stats 
on the fly. /chglevel nick number will change that users stats. This change 
is not permaneantly saved until you /savelist. The others are the same 
format. They should work, but if there are any problems let me know.
CAUTION. with this nethack prot turned on you could possibly really fuck a
channel badly.
Fixed a problem with PUBFLOOD. I wasn't checking to see if WE had ops on the
channel we were protecting. I never knew there were so many script writers
out there :) 
Fixed a small long-standing problem, not a bug with the userlist. If we
added a user to the userlist we had to do a WHO command to setup the user
display properly. Not anymore. It's updated for every server and all
channels on add or on modify.

040496
Fixed a problem with auto_rejoin. Fixed the /clear being missing.
NHprot is now a little more conservative about what it considers to be a
nethack. /Adduser will now take a list of channels instead of just a single
channel. Wildcards are allowed still. Someone pointed out that wildcards
/cdcc's are not great at the moment. If we happen to create a file while
offering of a type the matches the wildcard, it is sent out as well. I'll
have to make a list instead. Added 5 new hooks USERS, BANS and DCC.
USERS displays information from the userlist and the shitlist. BANS is for
the channel bans. DCC_STAT, DCC_STATF and DCC_STATF1 is for the /dcc glist
information. DCC_STAT returns info on chats, raw etc. DCC_STATF returns info
on files and DCC_STATF1 returns info on percentage, sizes etc for the
current file. Maybe hellshock will realize that this is better than just
adding ansi to the client.

040896 .41 released
Added some more hooks for script writers. DCC_HEADER, CDCC_QUEUE,
CDCC_QUEUEH, CDCC_HEADER, CDCC_PACK and BOTLIST.  We now strip ansi on ALL
says, puts etc. What does this mean? Well thanks to Sheik, we can no longer
be ansi bombed. Fixed some problems with /server connects to K-lined servers
that caused core to be dumped.

040996
Fixed chelp to allow blank lines instead of locking the client. Otiluke is
working on a bitchx help file. Was asking about ansi codes :). Took hooks
out of /dcc list  they were breaking things I don't want to break. Reconnect
is kinda fixed. Too many reconnect's quickly will confuse the client. This
is an effect of non-blocking connects. May have fixed the core on instant op
on join problem. Added voice to internal structures. /lk won't kick someone
with voice now. Replaced all occurances of gettimeofday except in ircaux.c
with call to get_time(). Fixed a bunch of warnings with this. Fixed several
other warnings. Fixed the negative time on channel synch by using time_diff
instead of trying to calculate the time diff by subtracting. Made changes to
notice.c parse_server_notice so it actually uses the /set SHOW_*'s in
vars.c.  Made numbers.c USERS send all info that is required to the server,
this might fix the problem some are having with some servers. Someone was
asking about showing connections to a server.. I think this is actually a
server function. We should see them now if we're allowed to. Changed
check_channel_match so it's more generic. We can then use it for
PROTECT_CHANNELS var. so PROTECT_CHANNELS can now be a comma separated list
of channels to protect. If the CTOOLZ_DIR doesn't exist, it is created.

041196 .42 was released.
Problem someone had with USER not enough params was caused by bad
permissions on /etc/passwd. So i may restore the old behaviour of cheating
:). Found a little problem with the new hooks in /dcc glist. forgot to
continue before the hook. fixed a little bug in process_incoming_listen.
Seems to not like a -1 passed to FD_CLR. previous problem was actaully in
function_listen.. it should have required a port number. Fixed finger nick
to actually finger someone. fixed CDCC_PACK hook so description is at the
end of the hook'd data instead of in the middle. Added new command /statsk
what it hopefully does is a grep for server bans matching a certain 
nick!user@host. Worked on /dcc glist some more. Changed some hooks in cdcc.c
CDCC_PREPACK from CDCC_HEADER. CDCC_POSTPACK added. Has the same info as the
PREPACK. Patch from epic e3000s7 added. SAVEFILE_LIST and SAVEFILEPOST_LIST
and SAVEFILEPRE_LIST hooks added. Modified Makefile's to create BitchX
client instead of irc client. modified /fuck to do a /addshit nick channel 3
as well.. Just like a hackbot. For a synopis of what was changed in the EPIC
patch read the doc/UPDATES file.. Several new commands were added, some
restrictions removed from some others, some useless code was removed.

041396 .43 released
Thanks to piraeus for adding color to the main BitchX ascii. I made a couple
of changes for those that have terminals that cannot display ansi. /set
display_ansi determines whether or not the screen is displayed in color or
not. Some major internal modifications have been made. These are related to
the way that userlist entries are looked up on the internal userlist. The
lookup's don't happen all the time. instead we store pointers to the
userlist on the channel nicklist. this should speed things up quite abit.
Have to thank sheik for pointing this method to me. Modified some
structures, and hooks quite alot as well. Things like the botlist now have a
aop and prot value so the bot doesn't have to be on the userlist and the
botlist at the same time. Several hooks have changed the number of params
being passed. Added parts of whowas.c sheik donated to me :).. Has the
effect of speeding up re-joins because the info is actually stored
differently. Course this will be buggy until i figure out exactly how to use
it. What it does is on parts' it save the user info into a list, on join it
check's the list and if found uses that info. Otherwise it just creates the
info again. Saves somes lookups on join an other stuff.. names.c uses most of
the calls for this function in case your interested.

041496 .44alpha :P
So many changes made in things internal, and not documented :) Most of the
changes were nitpicking things. But we found some lameness in the code as
well. ex. On join a entry is made on the channel nicklist. On /who these
entries are recreated again after being removed from the list. Duh. User
stats are now kept and a new command added. /Nwhois nick shows stats for a
user and this was the cause of most of the fixes. /chanst should be working
much nicer now. I put the whowas nicks on an expire timer as well. Some
changes from ircii-2.8.15 were made to the code. One noticable one is that
/window double now sets the double status bar. /set DOUBLE was removed as a
result of this change. New commands are UNTIL and UNLESS to complement IF
and WHILE commands. Some changes made to the non-blocking code from
ircii-2.8.15 as well.  

041796 .44magnum released :)
Little bug in the new windowing discovered and fixed. Had to do with tog
opervision (hidden window) and then switching back and forth. you'd loose a
line of display when you did this. /cdcc timer would core. /cdcc save
[filename] command added to save your offer list. /cdcc load [filename] to
reload the offer list. You can reload this file offer list several times.
/cdcc secure will only allow people on the userlist to get files from you.
It is a toggle command. defaults to off

042396 .45 release
Added new cdcc.c from ananda. Modified for BitchX hooks. I like it because
it's simple and elegant. 

042496
Fixed a problem with /redirect help. Made DISPLAY_ANSI on/off mean exactly
that. If off all ansi strings are removed from output. We can define the
default behaviour of this in the Makefile. May have fixed a problem with
redirect, where garbage is displayed to the redirect. Changed /k to have a
reason if none given. /tban for interactive delete of bans added. /bantype
started. Should allow me to get rid of a bunch of useless almost duplicate
functions. strtoul is missing on some systems. We now check during configure
and supply a version if necessary. Same with memmove. Changes so that
.bitchxrc is loaded instead of .ircrc if found. else .ircrc is used.
Fixed /bk of a non-existant user. /nwhowas to show the whowas queue. Fixed
/fuck of a user not on the channel to work properly. Lamerz beware. Removed
sitekickban and siteban commands in preparation of using /banstat.

050196
Haven't updated this with all the fixes. /fuck should really work now.
/banstat is implemented.  /dcc glist now displays reget's and resends.
Offered and waiting are also possible. /dcc glist what a pain in the ass.
/bantype is implemented. A Screw ban is the same as a screw ban in phoenix
and many other scripts. It was also a pain to implement. /bantype takes 4
differant types of bans. dcc of small files or fairly large files over a
fast link could cause a floating point exception in some cases. Fixed a
small bug in /cdcc load ... the /n was confusing the client. Added
flood_checking. We will flood_check if FLOOD_PROTECTION is on. If the
userlevel is < 90 we will kick user from the channel if FLOOD_KICK is set.
And finally we will do a timed auto-ignore of the user for 10 minutes.
Several new hooks added at the request of Zircon. USERS, USERS_HEADER, STAT
and STAT_HEADER. Fixed a screw-up I had with glob. Forgot to include the
source for glob.c and glob.h :) If you need this you'll still have to edit
config.h to define NEED_GLOB if you want to include this functionality.

050696
Due to some stupidity some types of floods were not being set properly. In
some cases we were double incrementing variables. Fixed /unig to actually
un-ignore a nick!. Fixed LameKick's to do a actual kick. Seems some changes
made previously to speed up access to the userlist has broken a couple of
functions here and there. We were forgetting to resync the channel userlist
after removing a user from the userlist. This could cause a crash. Shitlist
was not working. Fixed. shitlist & userlist were not updating the channel
nicklist properly. sync'd the botlist and the channel userlist better. Added
a new function $userver(nick) which returns the nicks server which we happen
to be storing in the the channel nicklist. Added a new command /sk to
perform a server kick :). Server can be wildcarded and a optional channel
can be specified otherwise the current channel is used. Turned FLOOD_PROT
off by default. Increased default FLOOD_RATE and FLOOD_USERS and
FLOOD_AFTER's. Memory is cheap :) Changed Screw bans to use a * for the
nickname. NetSplit hacking is being worked on. 

051096  .49 released on net
Merged changes from EPIC 3001 beta. $mkdir(), $umask() and /hostname for
dynamic IP hosts were added. Not sure exactly what /hostname is needed for
though. Need to look at local_ip and re-add that to the client if possible.
server info for user was not quite right. /ping hopefully fixed up. Files
and chat's can now be encrypt'd when starting the transfer. /dcc send
panasync file.zip -encrypt mypasswd will enable this "feature". Removed some
lamege from EPIC beta involving malloc. Fixed up flood prot even more. A
separate /set CDCC_FLOOD_RATE and /set CDCC_FLOOD_AFTER is implemented. Do
we need a separate CDCC_FLOOD_KICK as well? FLOOD_KICK var is a global var.
Fixed a long standing bug with channel creation. Seems that we were not
getting the value of the proper variable. Added a new set NAMES_ON_JOIN
SHOWIDLE and SHOWIDLE_HEADER hooks provided by request. SHOWIDLE returns
nick, host, userlevel in the userlist and number of seconds idle.

052096 .50 released (aprox date)
Been busy at a new job, so not much done recently. I found a silly stupid
bug in check_flooding. Fixed /unig to work once again. I think I need a new
wild_match routine, that checks both params for a wildcard. Added /cdcc
ptimer command. Added a set for the default dcc timeout value. A notice is
sent to the other end saying we closed the dcc. _CDCC_CLOSE_IDLE_TIME is the
set for this. Added /findports command.

052996 Released .52
course flooding seems to be a little more difficult than I thought. Some
things have been put on hold due to this problem. I have fixed /kb and
friends to do a proper screw ban. Fixed /dcc timeouts. We now default to 35
seconds for a chat/raw etc and 3 * 35 for file sends/resends/regets etc.
Fixed a small flooding problem in the timer as well. wildcard sends are now
implemented a little better but I'm still not happy with it. Fixed the Hyper
DCC lamage with dcc multi sends. Fixed /dcc list to not core dump..
dcc_time() was a problem here. /set autokick_on_Version on/off for those
versioning fools. /set mircs on/off for something EFudd wanted. Think it has
todo with /ctcp sound. More work on cdcc stuff. /set cdcc_security is a
numeric variable which can be set to the userlevel required to get any cdcc
response from you. This effectively cut's out the cdcc flood problem if set
to anything greater than 0. Course then nobody can get a cdcc list other
than a user on the userlist. Also cdcc requests are ignored if there is
nothing offered. Flooders beware.

053196
Changed CDCC_PREPACK to include some dcc_stats by request. dcc_max_rate_out,
dcc_bytes_out, dcc_max_rate_in, dcc_bytes_in are added to this hook. Changed
behaviour of CDCC_QUEUE_LIMIT a little. If it's set to 0 then in effect
there is no queue limit. fixed dcc stats command. Fixed a problem with cdcc
and nothing on the offer list. Just pass through the mesg. /ctcp is a little
harder todo though. Modified /JOIN to check for a # if it's not there then
we add it. Otherwise we just pass the command. Don't forget about the /set
SEND_IGNORE_MSG. Also new is a cdcc.irc that can be modified to change the 
output sent to a channel. It's basically an example of what to do. it'll
only work currently with scz-te.irc but this could be changed at your
convience. Changed behavior /cdcc offer to now accept a single filename on
the command prompt. So instead of prompting for a filename/description we
can then skip ahead to getting the description. Before you ask if we can
have multiple filenames on the prompt, I don't think this is possible from
the quick look I had at the code. Quickly implemented /cdcc minspeed
checking. It is in KB/s. So 5 would be 5KB/s. You can enter fractional Kb/s
as in 1.5KB/s as well. /cdcc timer was changed so it takes a number which is
then converted to minutes. We were just using seconds before.

060396 .53 Released
Fixed some lameness in cdcc again. involving DCC_SENDS_LIMIT and
DCC_QUEUE_LIMIT. Forget to check for a equal to 0 value which should
effectively disable both of these items. Changed config.h to have a default
value for DCC_SEND_LIMIT of 5. Changed CDCC_PREPACK once again added one
more parameter for a total of 13 output. We now output the minspeed as sent
by you. Changed CDCC_POSTPACK to retrieve same info as the CDCC_PREPACK.
Fixed dcc_check_idle to check for a 0 value on _CDCC_MINSPEED_TIME which
nullifies the speed checking. Do we want to have differant speeds for
differant packs? If the AUTO_REJOIN for a channel is set to any thing other
than 0 some wonderful things can happen. If you have a hacked identd client
installed, you can change your username as well. There are several examples
of type of identd client. cidentd-1.0.tgz is available from sunsite.unc.edu
somewhere but the source in pluto.c will need to be changed to support the
$(HOME)/.authlie instead of the $HOME/.noidentd file currently used. The
routine to make this all happen is called do_newuser() in pluto.c. Fixed
/boot so it don't segfault with no args. Fixed compilation on SunOS 4.1.4. 
/cdcc doffer will now accept any number of arguements on either the command
line or the interactive prompt. /cdcc list will accept a pack number to
display. It then displays the files in a pack. /cdcc load and save functions
will take a optional filename argument. Default is to cdcc.save. File is
always relative to your home directory. Minor cosmetic changes to input's
in cdcc. /cdcc send and resend will now accept a filename. course we may
have a problem if the name of the file is a a number. A pack will be sent
matching the number first if possible before we check for a filename. Files
are taken from the current directory. /cdcc plist will take an optional
channel arguement. If given then that's the channel the plist is sent to.
Minimal checking is done on whether this is a valid channel or not. A comma
separated list of channels is allowed. A sample script is provided for
script writers in order to provide some directions as to the use of the
hooks in cdcc. Added save of banwords command to savefile. Documented many
on hooks for script writers perusal. A couple of new hooks implemented.
CHANNEL_STAT for the /chanst command output. (32 parameters to this one).
USAGE hook for the usage of internal commands. Over the next couple of
versions of BitchX I expand the list of commands which can make use of this
particular hook. New Documentation and a modified BitchX.help file provided.

061096 .54 released
Ping fixed we think. ping is still in the CTCP_REPLY list though. if you
hook CTCP_REPLY be prepared to handle ping responses. Took another look at
other floods. Fixed /repeat with a off by one error. Took time to make
usage mesg's use the new hook and function. Ping is fixed. added rest of
command for BanWords. UnBanWords/UnWordKick and ShowWord commands.
DCC_TRANSFER_STAT was broke. Forgot to remove a couple of parameters from
hook.c. Added a new function $help() which takes a filename and a subject.
It uses the filename the same way that /chelp does. It searches the list for
the subject in the same way as well. Information from the help file is only
loaded once.

061296 .55 Released
Added a new command /whereis for looking up people that join and then leave
a channel and change nicks. Works well as long as they don't change servers
or there isn't more than one of them online at the same time or there
username doesn't change. Fixed up /statsk which is a command for grepping
those pesky server bans. Changed chelp and $help(). Sorry script writers but
I decided to place the filename last as the parameter to $help(). This way
we can initialize it once and then forget it about passing the filename
altogether. chelp was changed to actually load the file on BitchX startup.
Reasons are that the help from the $help() function will overwrite the ones
that are loaded by chelp. So we preload the help, if they are overwritten
well not much we can do then except restart irc. $help() returns a long
string containing all information about a topic including the usage message.
I guess a hook for this might be nice as well. /cdcc minspeed's were a
little borked. Added a server sync routine. Fixed Channel keys being saved
after a part and a rejoin.

061496
Fixed /whereis if the user is still on the channel. Stupidity here. $help()
changed once again. $help returns info differant from /chelp. It is upto the
script writer to format the information returned. A hook is also provided
which applies to both /chelp and $help(). Write the proper on hook and never
have to worry about it again. Added SCRIPT_HELP_FILE. This is a full
pathname/filename. Default is CTOOLZ_DIR/BitchX.help. $help() needs to be
called the first time with a filename. It is expanded to a full pathname
automatically. DESYNC_MESSAGE hook provided. See README.hooks for info.
IDENT_HACK can be set to the name of the file to use for your hacked ident
to hide the username. Default is ".noident". This files needs to reside in
your $HOME directory, so ~/ is prepended and expanded automatically. 
If JOIN is hooked AUTO_NSLOOKUP wasn't happening. So we now do the lookup if
AUTO_NSLOOKUP is ON and pass that to the hook. You can no longer just "quit"
irc with active dcc's. A second prompt appears asking for verification.
Renamed command STATSK to /FKLINE. Integrated changes from ircii2.9base. 
Fixed a dumb problem in remove_channel(). Forgot to add the nicks to the
whowas buffer when we left a channel. This would cause some ghost problems
if we then left a channel, and some time later rejoined it. Created a save
BitchX variables routine. Only saves the specific BitchX variables to
BitchX.sav file. Linux glob functions don't seem to work properly. So I've
now enabled the included glob function by default. Added a WHOLEFT hook. We
are saving the info from a netsplit currently. type //wholeft sometime.
We'll have to see whether this information is correct before implementing
more of it. Server ops/deops bans/unbans are now incremented when they
occur. Affected changes to decifer_mode and update_stats. Added /cleartab
which will clear the tabkey array and /clearauto for clearing the
autoreply table. Started adding has_ops to whowas info. This is for netsplit
stuff. Eventually if a user splits away with opz, on rejoin we won't de-op
them. Sounds simple, but it's not. We'll have todo a little more work before
this can be a reality.

0617  .56 released for comsumption.
Changed /set Log on to strip ansi escapes out of the output. Changed
behavior of /ban. we check the list of nicks to match the supplied ban. If
their is no match then we will either do one of two things. if a ! and a @
is in the ban spec then we just do a mode +b otherwise we search out the
match using whois and doing the ban that way. All nicks on the channel are
matched against the ban. Otherwise some could slip through the cracks.
Oops. .bitchxrc file was not being loaded properly due to a missing / .
Changed behaviour of /tban and /unban to follow the variable NUM_BANMODES
for the number of unbans todo in one shot. We now unban multiple bans in one
shot. Thanks to  BlackJac for the start of a great INSTALLATION file. It was
the first time he had compiled the client and made some notes for other
beginners and some not so beginners to follow. Found the little bug with
.BitchX no being created with u+x permissions. Added BITCHX_HELP var. This
is the complete path/filename of the default BitchX.help file. Default is
~/.BitchX/BitchX.help. Changed $help() to look at the SCRIPT_HELP var if no
filename is passed to it. This Allows us to set SCRIPT_HELP to a dir/helpfile
and then just call $help(some_topic). Notice the lack of filename. Default
is ~/.BitchX/BitchX.help still. Fixed small annoyance in /notify that could
possibly save a blank notify to the notify list. This caused the notify list
to display on startup. nasty bug in status.c fixed. Added a isuser()
function that returns info on a nick that is in your userlist,botlist or
shitlist. $isuser(nick userhost channel) is the syntax of this
useful little function. Channel can be left off in which case a * is
returned. The type of the list is returned as either USER|BOT|SHIT along with 
the relavent information to that particular type of list, thanks Jordy.
Jordy also sent code!! for a new function called $pad(). It accepts a number
that is either +/- and the string to pad. If negative it pads to the right,
else it pads to the left. Fixed /set LOGFILE to expand the path of the
filename passed to it. /Window double no args would core the client. Fixed.
Without DCC_* hooks /dcc quiet really means quiet. /lastlog now strips out
all ansi codes period. Some hooks were being used that echo'd the lastlog
info to the screen. Ansi - chr 27 looks really ugly displayed this way.
Increased default timeout on dcc chats to 55 seconds, files is 3 *  this
number.

0624 .57 released
immediately BigHead noticed a bug with the /user command. Fixed a bug
icebreak reported with $cluster(). Fixed dban so if we do a *.me the count
is more correct. 3 new functions. $isban(channel nick) returns 1 or 0 if the
person is on the internal ban list. $isop(channel nick) returns 1 or 0 if
the person has ops on the channel on the internal userlist. 
ischanop(nick channel) is already implemented isvoice(channel nick) return 1 
or 0 if the person has voice on the channel.

0626 .58 released
Fixed ctcp flooding I think. Had the wrong order of events necessary in
order to auto-ignore floods. Created a CTCP_DELAY variable. This is the
amount of time that is supposed to pass before we will accept another ctcp.
/ctcp nick xdcc list has a separate flood characteristic than normal ctcp.
These can be set using /set CDCC_FLOOD_AFTER and CDCC_FLOOD_RATE. Please do
understand what these represent before changing the default values. Also we
have CTCP_FLOOD_PROTECTION which can turn this on/off. Fixed a problem I
created with some color experimentation. Seems Bold was getting translated
into the color red. Changed output from dcc_transfer_struct. packet counts
were not exactly correct, due to differant buffering sizes between clients.
Changed status_msgcount to display a 0 for no away messages. Changed
flood_ignore to make the code a little more sensible. Anyone over 90 in the
userlist or the botlist can ctcp flood you without being kicked or ignored.
Due to some complaints on $help() formatting, we have now modified $help to
directly output the information to the user. A typical alias looks something
like the following   
alias shelp {@htopic = [$0]?[$0]:[index] ;$help($htopic) }

062796 .59 Released
ctcp flood protection. If the current incoming ctcp is within CTCP_DELAY
seconds we drop the request. 3 works well for most situations. Someone
offering files may want to make this value 2 which is the default for
ircII2.9. Value is saved in the BitchX.sav file. Fixed a couple of other
nits with the wholeft command. Seems op kills were being interpreted as a
server split. Someone suggested using "))" as the fix. Seems to work. When
"we" left a channel it was being intrepreted as a server split as well. This
was in remove_channel(). /window double 1 on will create a double status on
window 1, /window double 2 on will create a double status on window 2 if it
exists else it does nothing. /mload now expand and searches paths for the
menu you'd like to load. /cdcc notice will now also accept a channel to
display the offerlist to. Added new ansi from reefa. Changed output of ctcp
version a little. Found a small bug in server.c where it was possible to
crash the client if we couldn't connect to a server. Found this while adding
/set NEXT_SERVER_ON_LOCAL_KILL to the client. Modified server_read_file to
check for a file called .ircservers in the $HOME directory. If found it is
parsed as a extra list of servers to be included after
/usr/local/lib/irc/ircII.servers. This behaviour might be modified later to
use one or the other and not both. Modified bans, kb etc to use one function
to create the ban string. Call it a code clean up. Fixed /ban to work
properly. Added User /bantype by request. Flooding once again. This time it
just might work. (if anyone ever asks you to add flood checking, tell em to
go f**k themselves). Added a new cset for PUBFLOOD_IGNORE_TIME. This is the
amount of time in minutes we will default ignore someone. if FLOOD_KICK is
off we don't kick someone that is pubflooding. We ignore them :). Whole
bunch of other minor details.

070196 .60 released.
Fixed .ircservers usage to not require it to be in the users home directory.
Probably solved most segfaults due to server's not being found etc. Might
have also fixed some misc segs' on linux systems with this as well. 
Replaced two key bindings. TAB and ^] are setup as auto msg and auto
response by default within the client. Basically we can get rid of the
tabkey stuff from scripts. Changed $gettabkey and $addtabkey functions
around a little. Made /ClearAuto work as advertised. Moved clear_auto and
friend to a differant file (misc.c). Started adding /tlock and /modelock
functions. Cleaned up some code and some output fixes as suggested by
BarK0de who's creating a new helpfile for us. Added a new function called
$randomnick() which returns a string that could be useful as a nickname.
Also a command /randomnick will actually change your nick to some random
nickname. Patched in changes from new EPIC beta. /redirect might even work
now. minor speedups were involved here as well.

070796  .61 Released
well BJ finds a bug due to some lameness on my part. fixed irc.c. Also fixed
configure for Ultrix systems. Need to fix for AIX -lld. Removed more ComStud
lameness. Fixed some of my own lameness on the init of the auto reply
string, which should be automatically set to your nickname. It wasn't
occurring properly. Found and fixed a problem with $read(). Lines with no
carriage return were screwed up (Thanks Flier). BlackJac noticed a problem
with the status bar channel modes not being properly updated. ChaosLord sent
in a small patch for modifying argv to hide BitchX from admins. edit
config.h and #define CLOAKED "emacs" or whatever and recompile. BitchX now
looks like it's emacs and not irc client. Sheik suggested something that
sounded pretty good. The ability to /ignore a whole channel or just certain
things on a channel. Well we can now do this. /ignore #bitchx public  will
ignore all publics from the channel bitchx. The channel ignore is checked
after the regular ignore, so we can modify the behaviour of channel ignore
using dont_ignore for a nickname etc. Some types of ignores don't translate
well into channel ignore, so IGNORE_CRAP may not ignore everything you
normally would be used to on a channel wide basis. (And Sheik this was easy
to add :P). Added another var called SHOW_NUMERICS_STR. It's default at the
moment is the string from scz-te numerics. Basically you can now change this
on the fly, and add ansi in places you didn't think were possible. (Some
server responses for example). The default will change back to "***" after
awhile, but I want to leave it like this for a short time to make people
aware of it. Calculation of dcc rates on /dcc stats was corrected. Added
AR_REPLY hook which is called when user presses ^]. Nothing is added to the
input it's up to the script writer at this point to do something with this.
Added two new hooks AR_PUBLIC and AR_PUBLIC_OTHER. This makes some scripts
work a little strangely until the script writers catch on. :) Provided
better keybindings for pgup/pgdn/end. Modified do_screens to accomadate this
change. Found bug with /bind meta1 which would segfault the second time you
ran this command. Changed /w command just a little to default to something a
little better ie it now does a /w $C instead of a whois nickname by default.
Someone had pointed out that shitlist bans were not working. Added /tlock
command for locking the channel topic. Renamed a couple of variables to be
more consistant. So we now have MSGLOG_FILE and KILLLOG_FILE. Fixed some
more inconsistancies in various commands. Fixed /eval echo $f[e][  bug we
share with ePIC. stripansicodes used on /redirect output. /Tlock was not
quite right in the implementation of it. Fixed. 

071896 62 released.
Added a new match() routine. we'll see how this works out. Routine is
wildmat routine from Rick Saltz and is almost a standard. Added a new
optional parameter to /unbot, /unuser and /unshit. -All will remove all
entries from the respective list. We also sync the channel nick list at the 
same time which effectively completely removes all traces of that list.
Changed some internals around to make auto-op/deop more effective after a
chat with Sheik. SEND_IGNORE_MSG is used more often in the source ie whois.c
Also SEND_AWAY_MSG is now used as well. Added /back to compliment /away
command. It's an alias. /sping <server> and internal lag indicator. %L will
display lag on the status bar. -b switch added to load the script -before-
we connect to the server. Changes to bans for 2.9 servers. Also have to make
sure that user@host bans strip ~ as well. Documented -n switch. Added -r
switch for reading a specified list of servers other than the default
.ircservers. This file is relative to ~ or your home directory. Added four
new functions which are basically untested. $opensocket(name port) returns a
socket number. $closesocket(socket_number) closes a open socket.
$readsocket(socket_number) returns 0, -1 or number of chars read and the
string. $writesocket(socket_number string) writes to open socket and returns
either -1 or the number of chars written to the socket. If your writing to a
irc server make sure and append \n to the output. STATUS_LAG can be used to
setup what the lag indicator looks like. /mvoice and /voice added.


-panasync    edwac@sk.sympatico.ca

Greetz to : 
===========
Stumble, BlackJac, Lifendel, Hob, Jondalar, Sheik (CtoolZ), BuddhaX (my bro), 
Zircon, Fr|sbee, BarK0de, otiluke, bbb, BigHead, Suicide, Fury, EFuDD,
BrickMan, Jordy(Circ & ftp), icebreak, reefa, FLiEr (ScrollZ), JVaughn,
Masonry, |MaRe|, Hob, Wangel, Ananda, Hybrid, Trench(BitchX name), 
HappyCrappy, BlackRage, digriz, Capsta, MHacker, Dakota, Jackal_, Pent, 
mikh, insanity, path, Fury, Drastic, MadB0mber MO^ and BarK0de. 
As well as any other's I may have forgotten over time.

Thanks for all the bug reports from those who run this client, you're
helping tremendously. And no Fizzle_B there are no backdoorz in this client
that i know of. 
================

And finally death to the code rippers.


