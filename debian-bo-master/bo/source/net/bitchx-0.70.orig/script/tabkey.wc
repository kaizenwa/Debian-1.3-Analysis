bind ^I parse_command ^getmsg 1
bind ^R parse_command ^getmsg -1

alias addmsg {
  if (rmatch($0 $lst.tab)) {
    @ lst.tab= remw($0 $lst.tab)
    unshift lst.tab $0
  }{
    if (#lst.tab==5) {
      pop lst.tab
    }
    unshift lst.tab $0
  }
  @ cnt.tab= 0
}

alias getmsg {
  @ words= #lst.tab - 1
  if ( cnt.tab > words ) {
    @ cnt.tab= 0
  }
  if ( cnt.tab < 0 ) {
    @ cnt.tab= words
  }
  type $(K)msg $^^word($cnt.tab $lst.tab) 
  @ words= []
  @ cnt.tab= cnt.tab + [$0]
}
#wc'96
