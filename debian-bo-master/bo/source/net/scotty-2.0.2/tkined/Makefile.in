
# Default top-level directories in which to install architecture-
# specific files (exec_prefix) and machine-independent files such
# as scripts (prefix).  The values specified here may be overridden
# at configure-time with the --exec-prefix and --prefix options
# to the "configure" script.

prefix =	@prefix@
exec_prefix =	@exec_prefix@

# Directory containing library files:
LIB_DIR =       $(exec_prefix)/lib

# Directory which contains the library of tkined files.
TKINED_DIR =	$(LIB_DIR)/tkined

# Directory which is used to hold tkined applications.
APPS_DIR =	$(TKINED_DIR)/apps

# Directory in which holds the program scotty:
BIN_DIR =	$(exec_prefix)/bin

# Some versions of make, like SGI's, use the following variable to
# determine which shell to use for executing commands:
SHELL =		/bin/sh

#----------------------------------------------------------------
# The information below is modified by the configure script when
# Makefile is generated from Makefile.in.  You shouldn't normally
# modify any of this stuff by hand.
#----------------------------------------------------------------

INSTALL =		@INSTALL@
INSTALL_PROGRAM =	@INSTALL_PROGRAM@
INSTALL_DATA =		@INSTALL_DATA@
SRC_DIR =		@srcdir@
VPATH =			@srcdir@

#----------------------------------------------------------------
# The information below should be usable as is.  The configure
# script won't modify it and you shouldn't need to modify it
# either.
#----------------------------------------------------------------

SRCS =	manager.tcl event.tcl movie.tcl bones.tcl \
	ip_trouble.tcl ip_monitor.tcl ip_layout.tcl ip_discover.tcl \
	ip_world.tcl \
	snmp_trouble.tcl snmp_monitor.tcl snmp_browser.tcl \
	snmp_host.tcl \
	snmp_cisco.tcl snmp_hp.tcl snmp_tubs.tcl \
	cmip_trouble.tcl clock.tcl game.tcl

all: tclIndex

$(SRC_DIR)/tclIndex: ../scotty $(SRC_DIR)/library.tcl
	../scotty -nc "cd $(SRC_DIR); auto_mkindex . library.tcl; exit"

install: $(SRC_DIR)/tclIndex
	@if [ ! -d $(APPS_DIR) ] ; then \
		mkdir -p $(APPS_DIR); \
	else true; \
	fi
	for f in $(SRCS) ; do \
		mv -f $(SRC_DIR)/$$f $$f.bak; \
		echo "#! $(BIN_DIR)/scotty -inf" > $$f; \
		sed -e "1d" < $$f.bak >> $$f; \
		chmod +x $$f; \
		$(INSTALL_DATA) $$f $(APPS_DIR); \
		mv -f $$f.bak $(SRC_DIR)/$$f; \
	done
	$(INSTALL_DATA) $(SRC_DIR)/mibtree $(APPS_DIR)
	$(INSTALL_DATA) $(SRC_DIR)/library.tcl $(APPS_DIR)
	$(INSTALL_DATA) $(SRC_DIR)/tclIndex $(APPS_DIR)
	$(INSTALL_DATA) $(SRC_DIR)/world-map.xbm $(APPS_DIR)
	$(INSTALL_DATA) $(SRC_DIR)/usa-map.xbm $(APPS_DIR)
	$(INSTALL_DATA) $(SRC_DIR)/germany-map.xbm $(APPS_DIR)
	$(INSTALL_DATA) $(SRC_DIR)/locations $(APPS_DIR)
	$(INSTALL_DATA) $(SRC_DIR)/README $(APPS_DIR)

clean:
	@rm -f tclIndex core *~

distclean: clean
	@rm -f Makefile TAGS *.bak lmake.???

