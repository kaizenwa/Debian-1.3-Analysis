Dies ist die Schnellinstallationshilfe fuer sendfile.

Sendfile erlaubt es, Files asynchron zu verschicken, die dann im
Empfaengersystem im sendfile-spool abgelegt werden. Im Gegensatz zu ftp
muss man sich auf Empfaengerseite nicht einloggen. Es funktioniert also so
aehnlich wie mail. Nur eben mit Files.

Sendfile benutzt das SAFT-Protokoll: Simple Asynchronous File Transfer
(Ist in RFC Vorbereitung).

Eine etwas ausfuehrlichere Beschreibung zu sendfile befindet sich in
LIESMICH.auch, eine 30-seitige Komplettbeschreibung von sendfile und SAFT
ist in doku.ps.


Das sendfile Paket umfasst 4 Hauptprogramme:

        sendfiled	- der sendfile daemon, der vom inetd gestartet wird
	sendfile	- der sendfile Client, die die Files verschickt
	sendmsg		- der send-message Client, der einzeilige Text-messages
	                  verschickt
	receive		- der receive Client, mit dem man empfangene Files
                          abholen kann

sendfile, sendmsg und receive laufen als normale User Programme, sendfiled
muss von root installiert werden.


1) Pfade anpassen:

   Bei Bedarf koennen in config.h (und NUR da!) Default-Werte fuer
   bestimmte Pfade geaendert werden.


2) Laufzeit-Konfiguration anpassen:
   
   Der sendfiled wertet zur Laufzeit das File sendfile.cf aus (wird
   normalerweise nach /usr/local/etc/ kopiert). Dies kann entweder
   jetzt oder zu jedem spaeteren Zeitpunkt geaendert werden, falls Bedarf
   besteht.


3) alles compilieren: 

     $ make all

   Es duerfen keine Fehlermeldungen auftreten. Auf manchen Systemen mit
   fehlerhaften System-Include-Files kann es zu Warnings kommen, die aber
   ignoriert werden koennen. Sendfile wurde bisher getestet unter AIX,
   BSDI, Convex-OS, Digital Unix, FreeBSD, HP-UX, IRIX, Linux,
   NeXTstep/Mach, OSF/1, SunOS 4, SunOS 5 (Solaris 2) und Ultrix mit gcc
   2.5.8.
   
   Ultrix-ACHTUNG!  Bei Ultrix muss vor "make all" noch "sh5 genmake" 
                    eingegeben werden (weil Ultrix-sh buggy ist)!


4) alles automatisch installieren (muss root machen!):

     $ make install
   
   ODER von Hand installieren:
   
     - korrekte Fileprotection einstellen:
          $ umask 022
	
     - sendfiled hinkopieren, wo es Sinn macht, zB /usr/local/sbin, /usr/etc :
          $ cp sendfiled /usr/local/sbin/

     - Spool-Verzeichnisse anlegen (wie in config.h angegeben!):
	  $ mkdir /var/spool/sendfile
	  $ mkdir /var/spool/sendfile/LOG
	  $ mkdir /var/spool/sendfile/OUTGOING
	  $ chmod 700  /var/spool/sendfile/LOG
	  $ chmod 1777 /var/spool/sendfile/OUTGOING

       Mit "df /var/spool/sendfile" ueberpruefen, ob genug Platz in der
       Spool Partition ist. Der minimale freie Platz wird mit der Option
       minfree in sendfile.cf definiert.

     - Eintragung in /etc/services (bzw mit "niload services ." bei NeXT):
       	  saft	487/tcp		# simple asynchronous file transfer
	  
     - Eintragung in /etc/inetd.conf:
     	  saft stream tcp nowait root /wo/auch/immer/sendfiled sendfiled

       oder wenn der tcpd installiert ist (default bei Linux):
     	  saft stream tcp nowait root /usr/sbin/tcpd /wo/auch/immer/sendfiled
	  
     - Eintragung in /etc/inetd.sec (nur wenn dieses File vorhanden!!):
          saft allow

     - inetd neu starten:
     	  $ kill <pid des inetd>
	  $ /usr/sbin/inetd 	# (oder wo auch immer der inetd liegt)

       ( Ein "kill -HUP <pid des inetd>" funktioniert zumindest bei IRIX
         und OSF/1 nicht. )

     - Userbeschraenkung aktivieren:
     	  $ cp nosendfile /usr/local/etc/

     - Konfigurationsfile installieren (Inhalt ist selbsterklaerend):
     	  $ cp sendfile.cf /usr/local/etc/

     - man-pages installieren:
	  $ cp sendmsg.1 sendfile.1 receive.1 /usr/local/man/man1

       (eventuell makewhatis neu aufrufen)

     - notify-script installieren:
          $ cp check_sendfile /usr/local/bin

       /usr/local/bin/check_sendfile in /etc/profile aufnehmen

     - Clients installieren:
          $ cp sendfile sendmsg receive utf7encode /usr/local/bin
	  $ ( cd /usr/local/bin/; ln -s utf7encode utf7decode )
	  
   

5) testen:

	$ sendfile LIESMICH `whoami`
	$ receive
	$ receive -n 1


6) Ich bin sehr an Kommentaren und Bugreports interessiert.
   Geschenke via Post schicken. :-)


7) Wer mir die Adresse seines neu installierten SAFT-Servers mitteilt,
   bekommt zur Belohnung ein schoenes gif zugeschickt. :-)


8) Es gibt eine Mailingliste, die ich von Hand fuehre und in der
   Ankuendigungen zu updates und bugfixes geposted werden. Wer da 
   aufgenommen werden moechte, sende mail an mich.
   

-- 
\ Ulli 'Framstag' Horlacher \ Information Services at Computer Centre RUS \
 \ Universitaet Stuttgart  \ Allmandring 30  \ 70550 Stuttgart  \  Germany \
  \ framstag@rus.uni-stuttgart.de   \   psi%0262450502601::main01::ccc_horl \ 
   \ S=horlacher;OU=rus;P=uni-stuttgart;A=d400;C=de\ccc_horl@dulruu51.bitnet \
    \ "Unix scripts are fun to write but unfortunately write only."  M. Lemke \
