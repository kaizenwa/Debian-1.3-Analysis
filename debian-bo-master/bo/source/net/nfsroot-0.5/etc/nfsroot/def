
#this file contains some defines for the nfsroot package.
#I tried to set it up so that it doesn't need editing, but
#I may well have gotten something wrong. (maybe mail me if you
#find something I done wrong?)


#this is the ip numer of the server. If this magic command goes wrong, 
#just replace it with something decent like "SERVERIP=132.229.1.33"
SERVERIP=`/sbin/ifconfig|grep  eth0 -1 | sed -n  -e 's/ *Bcast.*//' -e 's/ *inet addr://p'`

#the $IPNET var is only used for the next line:
IPNET=`echo $SERVERIP|sed -e 's/\.[0-9]*$//'`

#This are the ranges of IP numbers nrprobenet will probe for, and store in
#/etc/bootpdtab, and make dirs for in /tftpboot
#If it fails, just replace it with something like
# IPRANGE=132.229.1.14-132.229.1.123
#if you want more ranges, try IPRANGE="1.1.1.1-1.1.1.4 -r 1.1.1.10-1.1.1.20"
IPRANGE="$IPNET.1-$IPNET.254"


#The stuff below here only needs editing if you like to
#have things configured differently than me (and you probably are right).

#in this directory the real binaries are stored:
STORE_BIN=/tftpboot/store

#thise files/devs have to be present on /tftpboot/$IP at boottime
#OK, if I used ksh in stead of bash, I don't need this many libs.
#  But please remember, they are all only going to be copyied _once_
#  on /tftpboot/source, no matter how many client dirs you create.

NEED_BINS="/bin/sh /bin/bash /bin/rm /bin/mount\
          /sbin/init \
	  /lib/ld-linux.so.1 \
	  /lib/libreadline.so.* /lib/libncurses.so.* /lib/libc.so.5* \
	  /lib/libdl.so.* \
	  /etc/ld.so.cache"
NEED_DEVS="/dev/tty1 /dev/tty0 /dev/console"       #0:linux/init/main.c:970
                                    #1:init

#if "y", mknfsroot will overwrite old /tftpboot/$IP dirs
FORCE=y

#this file is used by "nrmkboot" as the image to copy to the bootflop:
#(this is an example only):
NFSROOTKERNEL=/usr/lib/nfsroot/vmlinuz-2.0.28-nfsroot

#this directory is used by the scripts for temporary storage
#(it is cleaned afterwards)
TMPDIR=/tmp/nfsroot
