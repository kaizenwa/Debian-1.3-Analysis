.\" Hey, Emacs!  This is an -*- nroff -*- source file.
.TH NRPROBENET 8 "31 Jan 1997"  "Debian GNU/Linux" "DEBIAN"
.SH NAME
nrprobenet \- probe local net for hw/IP pairs
.SH SYNOPSIS
.B update-menus [\-v] [\-s] [\-i time] [\-nodir] [\-p port] \
[\-c count] [\-u time]  \-r IP-IP [\-r IP-IP ...]

.SH DESCRIPTION
Nrprobenet pings host on the (usually local) network, and collects
data from /proc/net/arp, building tables to map ethernet numbers into
IP adresses. Whenever the tables change, (optionally) writes a
/etc/bootptab file to reflect the changes, and (optionally) 
creates tftpboot directories for new hosts found.

It can also log changes that normally shouldn't happen to syslog
(i.e., an ethernet card that changes IP number, or
a IP number that suddenly uses a different ethernet card).
.SH OPTIONS
.IP "-v"
Verbose output. Shows whatever host it's pinging, or not pinging, and
for what reason.
.IP "-r x.x.x.x-y.y.y.y"
Ping sequentially IP numbers x.x.x.x through y.y.y.y
(the -r option may be given any non-zero number of times)
.IP "-u time"
If time is non-zero, nrprobenet will write the /etc/bootptab file
every time seconds (if anything changed in it, that is). Also, unless
you give the 
.BR -nodir
option, it will execute mknfsroot for each new host.
.IP "-i time"
Wait time seconds between each ping (default: 1)
.IP "-c count"
Stop after count rounds though all the IP ranges (see 
.BR -r
)
(default: -1=dont't stop)
.IP "-p portnr"
Use port p (default: 7=echo)
.IP "-nodir"
Do not make the /tftpboot directories. If you specify the -u option,
the /tftpboot/$IP directories are usually created using the 
.BR mknfsroot
script, unless you give the
.BR -nodir
option.
.IP "-s"
Log "suspicious" IP/hw changes to syslog (i.e. an ethernet
card that suddenly changes IP number, or 
a IP number that uses a different ethernet card)
.SH NEEDED
An nslookup that accepts one parameter (the hostname/IPnumber to
lookup). The debian bind package does contain such a nslookup script.
.SH USAGE
Usually, when you install the nfsroot package, everything is
setup correctly, except for the "probenet=0" line in
/etc/init.d/nrprobenet. Change that to "probenet=1" and you're set
(start the programme with "/etc/init.d/nrprobenet start").
Before you do that, however, you should make sure there is enough
diskspace on the directory that /tftpboot lives on (about 3--10M). 
If there isn't, it's usually the easiest to create a symlink from 
/tftpboot to /mnt/bigdisk/tftpboot. And, you may want to check whether
the default network range is OK (type "source /etc/nfsroot/def; echo
$IPRANGE" to find out)
.SH FILES
.TP
.I /etc/nfsroot/ignorehosts
What hosts to ignore (don't ping them). This file contains regular
expressions; any hostname that matches any regular expression in this
file will be ignored. 
.TP
.I /etc/bootptab
The file to write the bootptab stuff to, only if
.BR "-u"
option is given
.TP
.I /etc/nfsroot/bootptab
The /et/bootptab file is created by first copying this file, and then
appending the data obtained. This way, you can specify bootpd stuff
for the clients. 
.TP
.I /var/lib/nfsroot/arplist
List of all IP/hw numbers found. This is read in on startup, and
written whenever new hosts are found.
.TP
.I /proc/net/arp
The kernel-supplied file with recent ARP data in it.
.TP
.I /var/run/bootpd.pid
Whenever the /etc/bootptab data changed, nrprobenet tries to SIGHUP
the bootpd, to make it re-read the config data. The pid of bootpd is
taken from this file.
.SH BUGS
Does not know what to do with hosts with more than one IP number (ip
forwarding).
.SH DISTRIBUTION
Distribution is subject to the GNU public license.
.SH AUTHOR 
Joost Witteveen <joostje@debian.org>, <joostje@cistron.nl>
.SH "SEE ALSO"
.BR mknfsroot
.\".BR nrmkboot
.\".BR nrclientboot
.\".BR nr2etc
