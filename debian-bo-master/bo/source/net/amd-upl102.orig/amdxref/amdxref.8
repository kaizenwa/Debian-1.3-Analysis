.\" @(#)amdxref.8 1.00 93/01/26 TAMUSCC;
.TH AMDXREF 8 "January 26, 1993" "Local" "Administrator Commands"
.SH NAME
amdxref \- perform cross referencing checks on AMD map files
.SH SYNONPSIS
.B amdxref autodir mapname [autodir mapname [...]]
.LP
.SH DESCRIPTION
.LP
The
.B amdxref
command is used to locate conflicting entries in the maps used by
the BSD 4.4 automounter AMD.  It currently only does checks on NFS
mounts.  There are three types of problems that
.B amdxref
currently checks for.  Any entries which mount the same file system,
but with very different mount options (i.e. read-write vs. read-only);
any entries which mount different file systems at the same point; and
any entries which would cause one file system to be mounted over
another filesystem.  For example, if one entry mounts (real mount
point) at
.B /a/myhost/fs1/subdir
and another entry mounts at
.B /a/myhost/fs1
then
.B amdxref
will flag this.
Note that these show up in the AMD logfile as warnings about not being
able to unmount a particular filesystem (it is hidden under the
other filesystem).

.B amdxref
cross references each entry with every other entry in all specified
maps.  Thus, conflicts can be found internal to a map, as well
as between maps.

If no problems are found,
.B amdxref
will exit with a return code of zero (0).  If any syntax errors are found
in the map,
.B amdxref
will exit with a return code of minus one (-1).  If any conflicts
were found, then
.B amdxref
will exit with a return code of one (1).
.SS PARAMETERS
The parameters are specified in pairs.  The
.I autodir
is the automounter directory that AMD is controlling.  The
.I mapname
is the map AMD is using with the previous
.I autodir.
.I mapname
can either be a disk resident file or
an NIS map.
.SH SEE ALSO
.PD 0
amd(8), The BSD 4.4 Automounter \- AMD
.SH BUGS
The output is voluminous.

Should handle more than just NFS mounts.

Not all of the variable expansion stuff is supported yet.

The program should try to go in and do some more analysis and give
hints on how to fix the problem.  At the very least, there should
be information on how to correct the problems that are reported.
