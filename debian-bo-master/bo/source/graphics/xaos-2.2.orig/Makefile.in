CC     = @CC@
CFLAGS = @CFLAGS@
LIBS   = @LIBS@ -lm
LFLAGS = @LDFLAGS@

INCL = xlib.h \
       complex.h \
       zoom.h \
       config.h \
       autopilot.h \
       ui.h \
       palette.h \
       gif.h \
       plane.h \
       param.h \
       xlib.h \
       timers.h \
       julia.h
 
SRCS = formulas.c \
       zoom.c \
       autopilot.c \
       ui.c \
       gif.c \
       gifcompr.c \
       palette.c \
       ui_x11.c \
       ui_svga.c \
       ui_curses.c \
       plane.c \
       mktable.c \
       param.c \
       drivers.c \
       xlib.c \
       julia.c \
       timers.c \
       stereogram.c \
       ctrl87.c

OBJS = $(SRCS:.c=.o)


all:	xaos

config.h:
	cp config.autoconf config.h

xaos:   config.h $(OBJS)
	$(CC) $(CFLAGS) $(LFLAGS) -o xaos $(OBJS) $(LIBS)


ctrl87.o:
	$(CC) ctrl87.c -c



clean:
	rm -f xaos
	rm -f core `find . -name '*.[oas]' -print`
	rm -f core `find . -name '*~' -print`
	rm -f core `find . -type f -name 'core' -print`
	rm -f config.h

distclean:clean
	rm aconfig.h config.log config.status config.cache Makefile

#dep:
#	rm -f .depend
#	make .depend
#
#.depend:
#	echo '# Program dependencies' >.depend
#	gcc -I svgalib $(DEFINES) -MM $(patsubst %.o,%.c,$(OBJS)) >>.depend
#
#include .depend
