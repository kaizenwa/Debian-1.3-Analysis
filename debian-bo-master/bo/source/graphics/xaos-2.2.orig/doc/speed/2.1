Speed comparation(1280x1024 mode,256 colors,170 iterations,pentium 100 at 120Mhz,L2 cache..)

type                                    XaoS    fractint195 for dos (time is in sec)

mandelbrot                               3         3
mandelbrot+zmag+decomposition            13        35  
               (imposible symetries and inset detection)
madel4                                   7         5   
               (missing inset detection)
madel+zmag                               12        39  
               (inset detection imposible)

Note that I have no clock so this is result of "counting" but should be accurate
enought for comparation(if some number is almost twice bigger..it will be bigger)

Results shows that "raw calculation speed" of XaoS is better than fractint.
Fractint results better when its detection of points inside set is possible.
At the other hand XaoS is better where this is impossible.

Statistic of 320x200 autopilot run

Statistics: frames 9337
mkrealloctable: added 22167, symetry 613
calculate loop: tocalculate 5241302 avoided 3186884 mirrored 0
calculate:calculated 2054418 inside 300456

This means:
Aprox number of calculated pixels for every frame:220 (0.34%)
14% (1/6) of calculated pixels lies inside set
Aprox number of new lines/columns for every frame:2.37
Optimizations:
Aproximation :  99.49% of calculations
Symetry saved:  02.76% of remaining
Solid guessing: 60.80% of remaining
mirroring2:     0%     (no efective from mset. Slows down when active. Will be disabled)

Statistic of 640x480 autopilot run

Statistics: frames 2433
mkrealloctable: added 47405, symetry 1173
calculate loop: tocalculate 24968722 avoided 16780447 mirrored 0
calculate:calculated 8188275 inside 1122047

This means:
Aprox number of calculated pixels for every frame:3364 (01.09%)
13% (1/6) of calculated pixels lies inside set
Aprox number of new lines/columns for every frame:19.48
Optimizations:
Aproximation :  98.46% of calculations  (framerate is lower, step bigger..
                                         so this is normal)
Symetry saved:  02.47% of remaining
Solid guessing: 67.20% of remaining
mirroring2:     0%     (no efective from mset)

This shows that XaoS's optimization seems to perform well on most cases.
Solid guessing also perform as well as normally boundary detection (during
tests I did in xmand..)
Number of calculated points inside set seems to be low(1/6)
so I did following test:

Number of calculations spent inside/outside:
inside: 165858075
outside:46113860
3.5 times more inside than outside

This shows that some detection of points inside set will be helpfull..
It shoud slow down loop more than 2 times in case it will be sucessfull..


320x200 autopilot run profiles:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total           
 time   seconds   seconds    calls  ms/call  ms/call  name    
 51.58    261.31   261.31  5084736     0.05     0.05  mand_calc	 
            calculation loop still takes most of time
 39.96    463.79   202.48    45338     4.47     4.47  mkrealloc_table
            This function is not big problem since it takes too
	    much time just when called too often(framerate is high)
  3.87    483.42    19.63    22669     0.87    12.40  calculatenew
            Solid guesing if prety fast
  1.15    489.24     5.82    22669     0.26     0.26  moveoldpoints
            All this functions are not interesting for optimizing
  1.14    495.01     5.77    22669     0.25    21.87  do_fractal
  1.13    500.75     5.74    11018     0.52     0.52  do_autopilot
  0.80    504.78     4.03                             mcount
  0.07    505.12     0.34    22671     0.01    22.16  ui_mouse
  0.06    505.40     0.28   255525     0.00     0.00  tl_process_group
  0.05    505.65     0.25   210183     0.00     0.00  ui_waitfunc
  0.05    505.88     0.23   278190     0.00     0.00  tl_lookup_timer
  0.04    506.09     0.21    22669     0.01     0.02  updatestatus
  0.02    506.21     0.12    22669     0.01    21.90  ui_do_fractal
  0.02    506.32     0.11    22672     0.00     0.00  x11_processevents
  0.02    506.41     0.09    22673     0.00     0.00  recalculate_view
  0.02    506.50     0.09    22670     0.00     0.00  draw_screen
  0.01    506.54     0.04    22673     0.00     0.01  set_view
  0.01    506.58     0.04    22670     0.00     0.00  xflip_buffers
  0.01    506.61     0.03    22669     0.00     0.01  x11_display
            Displaying function...
  0.01    506.64     0.03        1    30.00 502598.10  main_loop
  0.00    506.65     0.01    22669     0.00     0.00  x11_flip_buffers
  0.00    506.65     0.00    23582     0.00     0.00  tl_reset_timer
  0.00    506.65     0.00      475     0.00     0.00  ui_tbreak
  0.00    506.65     0.00      128     0.00     0.00  x11_set_color
  0.00    506.65     0.00      128     0.00     0.00  xalloc_color
  0.00    506.65     0.00       55     0.00     0.00  x11_print
  0.00    506.65     0.00       55     0.00     0.00  xmoveto
  0.00    506.65     0.00       55     0.00     0.00  xouttext
  0.00    506.65     0.00        5     0.00     0.00  ui_status
  0.00    506.65     0.00        4     0.00     0.00  init_tables
  0.00    506.65     0.00        4     0.00     0.00  ui_changed
  0.00    506.65     0.00        3     0.00     0.00  xupdate_size
  0.00    506.65     0.00        2     0.00     0.00  ui_key
  0.00    506.65     0.00        2     0.00     0.00  xfree_colors
  0.00    506.65     0.00        1     0.00     0.00  alloc_image
  0.00    506.65     0.00        1     0.00     0.00  alloc_shm_image
  0.00    506.65     0.00        1     0.00     0.00  alloc_tables
  0.00    506.65     0.00        1     0.00     0.00  clean_autopilot
  0.00    506.65     0.00        1     0.00     0.00  free_image
  0.00    506.65     0.00        1     0.00 502620.00  main
  0.00    506.65     0.00        1     0.00     0.00  make_context
  0.00    506.65     0.00        1     0.00     0.00  mkdefaultpalette
  0.00    506.65     0.00        1     0.00     0.00  mksmooth
  0.00    506.65     0.00        1     0.00     0.00  params_parser
  0.00    506.65     0.00        1     0.00     0.00  set_formula
  0.00    506.65     0.00        1     0.00     0.00  svga_init
  0.00    506.65     0.00        1     0.00     0.00  tl_create_timer
  0.00    506.65     0.00        1     0.00     0.00  x11_alloc_buffers
  0.00    506.65     0.00        1     0.00     0.00  x11_free_buffers
  0.00    506.65     0.00        1     0.00     0.00  x11_getsize
  0.00    506.65     0.00        1     0.00     0.00  x11_init
  0.00    506.65     0.00        1     0.00     0.00  x11_uninitialise
  0.00    506.65     0.00        1     0.00     0.00  xalloc_display
  0.00    506.65     0.00        1     0.00     0.00  xfree_display
  0.00    506.65     0.00        1     0.00     0.00  xsetfont

Tests how much spent by calling mand_calc function....
  %   cumulative   self              self     total           
 time   seconds   seconds    calls  us/call  us/call  name    
 72.22      2.34     2.34                             mcount
 18.83      2.95     0.61        1 610000.00 900000.00  main
  8.95      3.24     0.29  5000000     0.06     0.06  test

  %   cumulative   self              self     total           
 time   seconds   seconds    calls  ms/call  ms/call  name    
 40.76      2.14     2.14                             mcount
 40.57      4.27     2.13  5000000     0.00     0.00  test
 18.67      5.25     0.98        1   980.00  3110.00  main

not more than 5 second of 280 (01.78%) This shows that I don't have to
optimize loop by integrating calculation loops..so I can keep clean
functions for calculating..

Calculating of new screen 320x200

Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total           
 time   seconds   seconds    calls  us/call  us/call  name    
 60.87      0.14     0.14    20221     6.92     6.92  mand_calc
 34.78      0.22     0.08        1 80000.00 220000.00  calculatenew
 	Solid guessing is slow here, because of all optimizations
	done for zooming. Thats why XaoS is not very effective for
	calculating of new images. Maybe some special solid guessing
	loop should be done.
  4.35      0.23     0.01        2  5000.00  5000.00  mkrealloc_table
  0.00      0.23     0.00      434     0.00     0.00  tl_process_group
  0.00      0.23     0.00      432     0.00     0.00  tl_lookup_timer
  0.00      0.23     0.00      429     0.00     0.00  ui_waitfunc
  0.00      0.23     0.00      128     0.00     0.00  x11_set_color
  0.00      0.23     0.00      128     0.00     0.00  xalloc_color
  0.00      0.23     0.00       11     0.00     0.00  x11_print
  0.00      0.23     0.00       11     0.00     0.00  xmoveto
  0.00      0.23     0.00       11     0.00     0.00  xouttext
  0.00      0.23     0.00        3     0.00     0.00  tl_reset_timer
  0.00      0.23     0.00        3     0.00     0.00  x11_processevents
  0.00      0.23     0.00        3     0.00     0.00  xupdate_size
  0.00      0.23     0.00        2     0.00     0.00  draw_screen
  0.00      0.23     0.00        2     0.00     0.00  ui_mouse
  0.00      0.23     0.00        2     0.00     0.00  xflip_buffers
  0.00      0.23     0.00        2     0.00     0.00  xfree_colors
  0.00      0.23     0.00        1     0.00     0.00  alloc_image
  0.00      0.23     0.00        1     0.00     0.00  alloc_shm_image
  0.00      0.23     0.00        1     0.00     0.00  alloc_tables
  0.00      0.23     0.00        1     0.00 230000.00  do_fractal
  0.00      0.23     0.00        1     0.00     0.00  free_image
  0.00      0.23     0.00        1     0.00 230000.00  main
  0.00      0.23     0.00        1     0.00     0.00  main_loop
  0.00      0.23     0.00        1     0.00     0.00  make_context
  0.00      0.23     0.00        1     0.00     0.00  mkdefaultpalette
  0.00      0.23     0.00        1     0.00     0.00  mksmooth
  0.00      0.23     0.00        1     0.00     0.00  moveoldpoints
  0.00      0.23     0.00        1     0.00     0.00  params_parser
  0.00      0.23     0.00        1     0.00     0.00  recalculate_view
  0.00      0.23     0.00        1     0.00     0.00  set_formula
  0.00      0.23     0.00        1     0.00     0.00  set_view
  0.00      0.23     0.00        1     0.00     0.00  svga_init
  0.00      0.23     0.00        1     0.00     0.00  tl_create_timer
  0.00      0.23     0.00        1     0.00 230000.00  ui_do_fractal
  0.00      0.23     0.00        1     0.00     0.00  ui_key
  0.00      0.23     0.00        1     0.00     0.00  ui_status
  0.00      0.23     0.00        1     0.00     0.00  ui_tbreak
  0.00      0.23     0.00        1     0.00     0.00  updatestatus
  0.00      0.23     0.00        1     0.00     0.00  x11_alloc_buffers
  0.00      0.23     0.00        1     0.00     0.00  x11_display
  0.00      0.23     0.00        1     0.00     0.00  x11_flip_buffers
  0.00      0.23     0.00        1     0.00     0.00  x11_free_buffers
  0.00      0.23     0.00        1     0.00     0.00  x11_getsize
  0.00      0.23     0.00        1     0.00     0.00  x11_init
  0.00      0.23     0.00        1     0.00     0.00  x11_uninitialise
  0.00      0.23     0.00        1     0.00     0.00  xalloc_display
  0.00      0.23     0.00        1     0.00     0.00  xfree_display
  0.00      0.23     0.00        1     0.00     0.00  xsetfont

640x480 autopilot run


Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total           
 time   seconds   seconds    calls  ms/call  ms/call  name    
 83.05    427.86   427.86  8480091     0.05     0.05  mand_calc
 	Framerate is lower, step is higher so calculation takes
	more time..
  8.72    472.78    44.92     4480    10.03    10.03  mkrealloc_table
  	As I said..does not take significant amount of time..because framerate
	is lower..
  6.11    504.24    31.46     2240    14.04   205.11  calculatenew
  	also this went up..
  0.83    508.53     4.29                             mcount
  0.58    511.51     2.98     5319     0.56     0.56  do_autopilot
  0.40    513.58     2.07     2240     0.92     0.92  moveoldpoints
  0.24    514.84     1.26     2240     0.56   226.67  do_fractal
  0.02    514.93     0.09    62109     0.00     0.00  tl_process_group
  0.01    514.98     0.05    64346     0.00     0.00  tl_lookup_timer
  0.01    515.02     0.04    57626     0.00     0.00  ui_waitfunc
  0.01    515.05     0.03     2241     0.01     0.01  draw_screen
  0.01    515.08     0.03     2241     0.01     0.01  recalculate_view
  0.01    515.11     0.03     2240     0.01   226.74  ui_do_fractal
  0.00    515.13     0.02     2241     0.01   227.88  ui_mouse
  0.00    515.15     0.02     2240     0.01     0.03  updatestatus
  0.00    515.16     0.01     2681     0.00     0.00  tl_reset_timer
  0.00    515.17     0.01     2241     0.00     0.02  set_view
  0.00    515.18     0.01     2241     0.00     0.00  xflip_buffers
  0.00    515.19     0.01     2240     0.00     0.02  x11_display
  0.00    515.20     0.01        1    10.00 510683.25  main_loop
  0.00    515.20     0.00     2480     0.00     0.00  x11_processevents
  0.00    515.20     0.00     2240     0.00     0.00  x11_flip_buffers
  0.00    515.20     0.00      260     0.00     0.00  x11_print
  0.00    515.20     0.00      260     0.00     0.00  xmoveto
  0.00    515.20     0.00      260     0.00     0.00  xouttext
  0.00    515.20     0.00      236     0.00     0.00  ui_tbreak
  0.00    515.20     0.00      128     0.00     0.00  x11_set_color
  0.00    515.20     0.00      128     0.00     0.00  xalloc_color
  0.00    515.20     0.00        3     0.00     0.00  xupdate_size
  0.00    515.20     0.00        2     0.00     0.00  ui_key
  0.00    515.20     0.00        2     0.00     0.00  ui_status
  0.00    515.20     0.00        2     0.00     0.00  xfree_colors
  0.00    515.20     0.00        1     0.00     0.00  alloc_image
  0.00    515.20     0.00        1     0.00     0.00  alloc_shm_image
  0.00    515.20     0.00        1     0.00     0.00  alloc_tables
  0.00    515.20     0.00        1     0.00     0.00  clean_autopilot
  0.00    515.20     0.00        1     0.00     0.00  free_image
  0.00    515.20     0.00        1     0.00     0.00  init_tables
  0.00    515.20     0.00        1     0.00 510910.00  main
  0.00    515.20     0.00        1     0.00     0.00  make_context
  0.00    515.20     0.00        1     0.00     0.00  mkdefaultpalette
  0.00    515.20     0.00        1     0.00     0.00  mksmooth
  0.00    515.20     0.00        1     0.00     0.00  params_parser
  0.00    515.20     0.00        1     0.00     0.00  set_formula
  0.00    515.20     0.00        1     0.00     0.00  svga_init
  0.00    515.20     0.00        1     0.00     0.00  tl_create_timer
  0.00    515.20     0.00        1     0.00     0.00  ui_changed
  0.00    515.20     0.00        1     0.00     0.00  x11_alloc_buffers
  0.00    515.20     0.00        1     0.00     0.00  x11_free_buffers
  0.00    515.20     0.00        1     0.00     0.00  x11_getsize
  0.00    515.20     0.00        1     0.00     0.00  x11_init
  0.00    515.20     0.00        1     0.00     0.00  x11_uninitialise
  0.00    515.20     0.00        1     0.00     0.00  xalloc_display
  0.00    515.20     0.00        1     0.00     0.00  xfree_display
  0.00    515.20     0.00        1     0.00     0.00  xsetfont

640x480 start:

Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total           
 time   seconds   seconds    calls  ms/call  ms/call  name    
 71.43      0.75     0.75    90444     0.01     0.01  mand_calc
 24.76      1.01     0.26        1   260.00  1010.00  calculatenew
 	very similiar to 320x200 sample
  2.86      1.04     0.03                             mcount
  0.95      1.05     0.01        2     5.00     5.00  mkrealloc_table
  0.00      1.05     0.00      893     0.00     0.00  tl_process_group
  0.00      1.05     0.00      892     0.00     0.00  tl_lookup_timer
  0.00      1.05     0.00      889     0.00     0.00  ui_waitfunc
  0.00      1.05     0.00      128     0.00     0.00  x11_set_color
  0.00      1.05     0.00      128     0.00     0.00  xalloc_color
  0.00      1.05     0.00       14     0.00     0.00  x11_print
  0.00      1.05     0.00       14     0.00     0.00  xmoveto
  0.00      1.05     0.00       14     0.00     0.00  xouttext
  0.00      1.05     0.00        5     0.00     0.00  x11_processevents
  0.00      1.05     0.00        3     0.00     0.00  tl_reset_timer
  0.00      1.05     0.00        3     0.00     0.00  xupdate_size
  0.00      1.05     0.00        2     0.00     0.00  draw_screen
  0.00      1.05     0.00        2     0.00     0.00  xflip_buffers
  0.00      1.05     0.00        2     0.00     0.00  xfree_colors
  0.00      1.05     0.00        1     0.00     0.00  alloc_image
  0.00      1.05     0.00        1     0.00     0.00  alloc_shm_image
  0.00      1.05     0.00        1     0.00     0.00  alloc_tables
  0.00      1.05     0.00        1     0.00  1020.00  do_fractal
  0.00      1.05     0.00        1     0.00     0.00  free_image
  0.00      1.05     0.00        1     0.00  1020.00  main
  0.00      1.05     0.00        1     0.00     0.00  main_loop
  0.00      1.05     0.00        1     0.00     0.00  make_context
  0.00      1.05     0.00        1     0.00     0.00  mkdefaultpalette
  0.00      1.05     0.00        1     0.00     0.00  mksmooth
  0.00      1.05     0.00        1     0.00     0.00  moveoldpoints
  0.00      1.05     0.00        1     0.00     0.00  params_parser
  0.00      1.05     0.00        1     0.00     0.00  recalculate_view
  0.00      1.05     0.00        1     0.00     0.00  set_formula
  0.00      1.05     0.00        1     0.00     0.00  set_view
  0.00      1.05     0.00        1     0.00     0.00  svga_init
  0.00      1.05     0.00        1     0.00     0.00  tl_create_timer
  0.00      1.05     0.00        1     0.00  1020.00  ui_do_fractal
  0.00      1.05     0.00        1     0.00     0.00  ui_key
  0.00      1.05     0.00        1     0.00     0.00  ui_mouse
  0.00      1.05     0.00        1     0.00     0.00  ui_status
  0.00      1.05     0.00        1     0.00     0.00  ui_tbreak
  0.00      1.05     0.00        1     0.00     0.00  updatestatus
  0.00      1.05     0.00        1     0.00     0.00  x11_alloc_buffers
  0.00      1.05     0.00        1     0.00     0.00  x11_display
  0.00      1.05     0.00        1     0.00     0.00  x11_flip_buffers
  0.00      1.05     0.00        1     0.00     0.00  x11_free_buffers
  0.00      1.05     0.00        1     0.00     0.00  x11_getsize
  0.00      1.05     0.00        1     0.00     0.00  x11_init
  0.00      1.05     0.00        1     0.00     0.00  x11_uninitialise
  0.00      1.05     0.00        1     0.00     0.00  xalloc_display
  0.00      1.05     0.00        1     0.00     0.00  xfree_display
  0.00      1.05     0.00        1     0.00     0.00  xsetfont

What to optimize?
Mainly main calculation loop and point inside set detection...also solid guessing
and mkrealloc_table should be optimized (maximally 80% speedup, real max IMO 30%)

Later some special function for calculating new image should be done..
boundary detection? (0% during zooming, great speedup during new image)

Improve aproximation algorithm yet more (maximally 5% speedup)

Results shows that XaoS probably probably can not be faster than 130% of current speed..
with current algorithm..and I have no idea about better one..
Some other genial tricks?
