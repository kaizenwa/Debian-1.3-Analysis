#ident "@(#) routers,v 1.2 1990/10/24 05:20:44 tron Exp"

# See smail(5) for a complete description of the contents of this
# file.

# The paths files referred to in the routers below are built by the
# makefile in the maps subdirectory.  Note that with the large number
# of files used for routing, it is important to close them after use
# and to reopen them when they are needed again.

# match-inet-addrs - match literal Internet-family addresses
#
# This director will match hostnames such as [192.2.12.200], which are
# literal addresses on a TCP/IP network.  This form should only be
# used when the actual hostname cannot be found in the network
# databases, or to get around a "forces" file that reroutes mail to a
# host listed in the databases for the TCP/IP network.
match-inet-addrs:
        driver=gethostbyaddr,           # match inet domain literal addrs
        transport=smtp;                 # delivery is over smtp/tcp
        fail_if_error,                  # non-inet literals are errors
        check_for_local                 # check for local host

# forces - force certain paths
#
# This database exists as a means of hardcoding the paths to various
# machines or domains.  It is for use in creating temporary tweaks to
# the other routint databases.  To change the database, edit the file
# maps/force.path and type "make" in the maps/ subdirectory.
forces:
	driver = pathalias,		# router to search paths file
	method = table;			# transports are in this file
	file = maps/force.path,		# file containing force path info
	proto = bsearch,		# use the sorted path file
	domain = uucp,			# strip trailing .uucp before lookup
	reopen				# close when not being used

# match-inet-hosts - match hosts in the TCP/IP network database
#
# Typically, this matches hostnames that are in the local machine's
# /etc/hosts file.  The /etc/hosts file is assumed to be for hosts in
# the local subdomain only.
match-inet-hosts:
        driver=gethostbyname,		# match hosts on network
        transport=smtp;			# delivery is over smtp/tcp
	domain = bar.foo.com		# strip trailing domain before lookup

# domain - the organization of our domain
#
# This is currently in a paths file, which is built by the Makefile in
# the maps/ subdirectory.  It contains path information about the
# hosts in the BAR.FOO.COM subdomain that are not accessed via the
# TCP/IP network.  It also maps out the FOO.COM domain.
domain:
	driver = pathalias,
	method = table;
	file = maps/domain.path,
	proto = bsearch,		# a sorted file
	domain = bar.foo.com,		# strip trailing .bar.foo.com
	reopen				# don't keep the file open

# world  - look in the path database produced from the USENET map
#	   database, distributed in the newsgroup comp.mail.maps
#
# NOTE:  UTS has ndbm(3), which allows it to use multiple dbm files.
#	 sites which have only dbm(3X) cannot have both a dbm-based
#	 alias file and a dbm-based paths file.
world:
	driver = pathalias,
	method = table;
	file = maps/world,		# dbm database containing path info
	proto = dbm,			# use dbm
	domain = uucp,			# strip trailing .uucp before lookup
	reopen				# close when not in used

# uuname - cache the output of uuname in a file
#
# This is a catchall feature for neighbors that just don't happen to
# appear in any other paths file.  The file is produced by the
# Makefile in the maps/ directory from the output of the uuname
# command, which lists the outpt of the uuname command.
uuname:
	driver = pathalias,
	method = table;
	file = maps/uuname.path,
	proto = bsearch, reopen,
