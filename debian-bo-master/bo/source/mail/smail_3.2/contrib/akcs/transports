# @(#) transports,v 1.2 1990/10/24 05:17:16 tron Exp

# This file defines the configuration of the transport subsystem as
# compiled into the smail binary.  By modifying the source files
# conf/EDITME, src/config.h or src/default.c the actual internal
# configuration can be changed.  Thus, this should be matched up
# against these files before assuming this is completely correct.

#
# akcs - deliver mail to AKCS users using the appendfile driver
# 	 MAKE SURE YOU EDIT the "file" specification below to reflect
#	 the directory and group you have installed AKCS under!
#
akcs:	driver = appendfile,		# Append to an AKCS mailbox
	local,				# Local forms
	from,				# Make sure it has an envelope
	unix_from_hack;			# Hack other "from" lines to be ok
						
	file = /pub/bbs/.users/${lc:user}/mbox, # This is locally defined!
	group = bbs,			# As is this field -- check this!
	mode = 0660,			# _ALWAYS_ for AKCS mail
	suffix = "\n"			# Be nice and separate things

# local - deliver mail to local users
#
# By default, smail will append directly to user mailbox files.
local:	driver = appendfile,		# append message to a file
	local,				# use local forms for delivery
	from,				# supply a From_ envelope line
	unix_from_hack;			# insert > before From in body

	file = /usr/spool/mail/${lc:user},	# location of mailbox files
#	file = /usr/mail/${lc:user},	# use this location for System V
#	group = mail,			# group to own file for System V
	mode = 0600,			# only owner can read and write file
#	mode = 0660,			# under System V, group mail can access
	suffix = "\n"			# append an extra newline

# pipe - deliver mail to shell commands
#
# This is used implicitly when smail encounters addresses which begin with
# a vertical bar character, such as "|/usr/lib/news/recnews talk.bizarre".
# The vertical bar is removed from the address before being given to the
# transport.
pipe:	driver = pipe,			# pipe message to another program
	return_path, local, from, unix_from_hack;

	cmd = "/bin/sh -c $user",	# send address to the Bourne Shell
	parent_env,			# environment info from parent addr
	pipe_as_user,			# use user-id associated with address
	umask = 0022,			# umask for child process
	-log_output			# do not log stdout/stderr

# file - deliver mail to files
#
# This is used implicitly when smail encounters addresses which begin with
# a slash or squiggle character, such as "/usr/info/list_messages" or
# perhaps "~/Mail/inbox".
file:	driver = appendfile,
	return_path, local, from, unix_from_hack;

	file = $user,			# file is taken from address
	append_as_user,			# use user-id associated with address
	expand_user,			# expand ~ and $ within address
	suffix = "\n",
	mode = 0644

# uux - deliver to the rmail program on a remote UUCP site
uux:	driver = pipe,
	uucp,				# use UUCP-style addressing forms
	from,				# supply a From_ envelope line
	max_addrs = 5,			# at most 5 addresses per invocation
	max_chars = 200;		# at most 200 chars of addresses

	# the -r flag prevents immediate delivery, parentheses around the
	# $user variable prevent special interpretation by uux.
	cmd = "/usr/bin/uux - -r $host!rmail $(($user)$)",
	umask = 0022,
	pipe_as_sender

# demand - deliver to a remote rmail program, polling on demand
demand:	driver = pipe,
	uucp, from, max_addrs = 5, max_chars = 200;

	# with no -r flag, try to contact remote site immediately
	cmd = "/usr/bin/uux - $host!rmail $(($user)$)",
	umask = 0022,
	pipe_as_sender
