#ident	"@(#)smail/conf/os:RELEASE-3_2:linux,v 1.4 1996/06/14 18:49:53 woods Exp"
#
# linux - describe characteristics of Linux
#
# Original by Ian Jackson <iwj10@cus.cam.ac.uk> for Debian GNU/Linux

. $ROOT/conf/os/posix

# lie through our teeth....
OSNAMES=LINUX:UNIX:$OSNAMES

# ARCH_TYPE - this is likely true except for the DEC Alpha port...
ARCH_TYPE=32bit

LOCKING_PROTOCOL="\
#include <unistd.h>
#include <sys/file.h>
#define lock_fd(fd)	      (flock((fd), LOCK_EX|LOCK_NB) < 0? FAIL: SUCCEED)
#define lock_fd_wait(fd)	(flock((fd), LOCK_EX) < 0? FAIL: SUCCEED)
#define unlock_fd(fd)		((void) flock((fd), LOCK_UN))
#define unlock_fd_wait(fd)	((void) flock((fd), LOCK_UN))
#define lock_fd_rd_wait(fd)	(flock((fd), LOCK_SH) < 0? FAIL: SUCCEED)
"

#LOCK_BY_NAME=TRUE
#FLOCK_MAILBOX=TRUE

MAILBOX_DIR=/var/spool/mail

OSLIBS=-ldbm

DRIVER_CONFIGURATION=arpa-network		# includes BIND/DNS router

RANLIB=ranlib				# Behavior compatible with BSD

# OS_HAVE - name the capabilities of this operating system
HAVE=BIND:BSD_NETWORKING:COMSAT:FSYNC:FTRUNCATE\
:GETHOSTNAME:HASH_BANG:NDBM:RENAME:RLIMIT\
:SETGROUPS:SYSEXITS:ULIMIT:MEMMOVE:HDB_UUCP:$HAVE

# NOTE:  Linux systems seem to have a <regexp.h> that's compatible
# with the old SysV stuff, so the user might want to add USE_REGEXP_H
# to the MISC_DEFINES in their EDITME.  Some Linux systems also seem
# to have a P1003.2 <regex.h> too, and this should be used if it
# works, and will be tried since none of the UNIX_SYS5* are on (nor
# should be on) by default.

MISC_DEFINES=INET_NTOA_USE_STRUCT

: MISC_C_DEFINES='
#define DATA_RLIMIT	(8192 * 1024)	/* limit to 8Mb of data space */
#define STACK_RLIMIT	(1024 * 1024)	/* limit to 1Mb of stack space */
'

: SOCKET_INCLUDES='
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h>
#ifdef HAVE_BIND
# undef NOERROR		/* remove conflict in SVR4 header files */
# include <arpa/nameser.h>
# include <resolv.h>
#endif
'

NOBODY=nobody		# BSD and SunOS-like systems
SECURE_PATH=/bin:/usr/bin:/sbin:/usr/sbin

COMPRESS=gzip
COMP_FLAG=-9f
DOT_Z=.gz
UNCOMPRESS=gunzip
ZCAT=zcat
