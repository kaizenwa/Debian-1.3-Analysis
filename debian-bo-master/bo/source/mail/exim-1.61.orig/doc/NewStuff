New Features in Exim
--------------------

This file contains descriptions of new features that have been added to Exim,
but have not yet made it into the main manual (which is most conveniently
updated when there is a relatively large batch of changes). The ChangeLog file
contains a brief listing of *all* changes, including bug fixes.

When the manual is up-to-date with the code and there have been a lot of recent
changes, the more important ones may be listed here for convenient reference.
Otherwise this file will contain just these two introductory paragraphs.


Version 1.60
------------

Documentation updated. A large number of changes from 1.59. Major new features
listed here; consult the manual for full details, and see sections with change
bars for all changes.

. Much extended eximstats script.

. Log_level option.

. Option to call gethostbyaddr() for certain networks to get correct host
  names.

. A substring consisting of just the character "@" in a domain list matches
  the primary name of the host.

. More flexibility in handling the key portion of retry rules.

. Added the -brt option for testing retry rule lookups.

. When looking for a retry rule for a remote delivery, each line in the retry
  configuration is first tested against the remote host name, and then against
  the address's domain name.

. Added the -brw option for testing rewrite rules.

. Rewrite rules revamped for more flexibility:

  . $local_part and $domain can be used in the replacement string to refer
    the the address that is being rewritten.

  . key can be (a) regexp, (b) *x@*y, (c) *x@<lookup>, (d) <lookup>; in the
    fourth case the lookup works as for an address-list - the domain is first
    looked up, possibly partially, and if that fails, the whole address is
    looked up (not partially).

. Addition of connect_timeout to the smtp transport.

. Support for negative uids and gids, for AIX.

. The max_rcpt option on the smtp transport can be used to limit the maximum
  number of RCPT TO commands per SMTP connection.

. The "verify" and "fail_verify" generic router and director options have
  been split into separate sender and receiver options, called verify_sender,
  verify_receiver, fail_verify_sender, and fail_verify_receiver. These can be
  used to apply different criteria to the verification of sender and receiver
  addresses. The existing options can still be used; they set both sender and
  receiver options to the same value.

. The routers and directors now have a new generic option called
  "verify_only", which restricts a driver's use to verifying. It can be further
  restricted to verifying senders or recipients by means of verify_sender and
  verify_recipient.

. The log_subject option (default off) causes a message's subject to be
  included in the arrival log line, in the form T="subject text". T stands for
  "topic" (can't use S as it is already used for "size").

. The log_smtp_confirmation option (default off) causes the response to the
  final "." in the SMTP dialog to be added to delivery log lines. A number of
  MTAs (including Exim from this release) return an identifying string in this
  reponse, so logging this information allows for messages to be tracked more
  easily.

. The aliasfile and forwardfile directors now have a boolean option "rewrite"
  (default true). If turned off, addresses generated by the director are not
  subject to address rewriting. Otherwise, they are treated like new addresses.

. The pipe transport now has new options for handling generated output:
  return_fail_output returns the output to the user only on failure; on success
  or deferral, the output is discarded. The log_output and log_fail_output
  options cause the first line of any output to be written to the log always or
  in failure cases, respectively.

. The appendfile transport now has a "quota" option which imposes a limit on
  the size of the file to which it is appending.

. Expansion strings: added the substr_m_n operator, for extracting fixed
  substrings, e.g.  ${substr_3_10:$local_part}. Synonym "s" (cf "l", which now
  becomes a special case. Also added the "match" condition.

. The expansion variable message_precedence contains the text of the
  Precedence: header, if one exists in the message.

. There's a new flag, 'w', on the rewriting rules. If set on a rule that
  causes an address in a header to be rewritten, the entire address is replaced,
  not just the route-addr part. A valid RFC 822 address must be generated,
  including the <> if necessary.

. Some new options for controlling queue runs: -qf forces a delivery attempt
  on each message, -ql does directing and local deliveries only, -qfl does the
  same, but with forcing. All may be followed by a time or message ids. Note
  that -ql cannot detect apparently remote addresses that actually turn out to
  be local.

. Separation of home directory and current directory for local deliveries.

. Addition of simple macros to the configuration file.

. Added skip_syntax_errors to aliasfile & forward file. If an address in one
  of these files causes a parsing error, it is just skipped and logged. Not
  recommended for user .forwards, but may be useful for mailing lists that are
  automatically managed.

. If recipients_max is set greater than zero, it specifies the maximum number
  of recipients for a message.

. Added local_interfaces, a colon-separated list of IP addresses. Specifies
  those interfaces to be considered as local when sending SMTP and which
  interfaces to listen on when running the daemon.

. Added serialise_{hosts,nets} to smtp transport. This restricts the number
  of calls to specific hosts or networks, on a hints basis.

. Domainlist: can specify a transport as an option on each item.

. Queryprogram can now return an arbitrary string to pass as a parameter to a
  transport.

. Added "batch" option to appendfile and pipe, and the pseudo expansion
  $pipe_addresses to pipe, in order to set up the addresses as separate
  arguments without hassle over spaces or shell metacharacters.

. Added "expand" option to aliasfile.

. Added ETRN command (RFC 1985), controlled by smtp_etrn_{hosts,nets}.

. Added receiver_verify_except_{hosts,nets}.

End
