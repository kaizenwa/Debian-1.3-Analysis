From: Chip Salzenberg <chip@count.tct.com>
Subject:  v01i009:  deliver - (Ver. 2.1.06) flexible E-Mail delivery, Part00/05
Newsgroups: comp.sources.reviewed
Approved: csr@calvin.doc.ca

Submitted-by: Chip Salzenberg <chip@count.tct.com>
Posting-number: Volume 1, Issue 9
Archive-name: deliver/part00

Environment: UNIX, Xenix, AIX, Coherent

Tested Environments:
	SCO UNIX System V version 3.2.2, GNU C compiler version 1.39
	SCO UNIX 3.2.2b
	MIPS RISC/os 4.52
	BSD 4.3
	Ultrix 4.1
	Dynix V3.0.17.9 (Sequent) [will not compile]
	AT&T 3b1, 3.5.1.4 O/S
	Sun4 running SunOS 4.0.3
	SunOS 4.1.1
	Sun 4/370 and Sun 4/490 w/SunOS 4.1.1
	ESIX System 5.3.2, Rev D, GNU gcc version 1.39
	80486/33 PC, ISA bus,ESIX SVR4.0.3 REV. A, /usr/bin/cc
	UNIX PC 3B1 3.51 
	IBM RT running AIX v2.x
	IBM RS/6000 Model 320 w/AIX 3.1.?
	NeXT running NeXT OS release 2.1
	SGI Personal Iris running IRIX v3.3.1
 

Dates:
	Submission Received: 21 June 1991
	Reviews Returned: 1 August 1991
	Revised Submission Received: 8 August 1991
	Accepted: 15 August 1991
	
	
Author's Summary:
-----------------

Deliver allows any user to write a shell script that processes all
incoming mail messages for that user.  The system administrator may
also install scripts that process all messages.
 
The output of a script is a list of mail addresses, files and programs
that should receive the message.  It has access to each message as it
is processed, so the action can be content dependent.  The script may
also generate automatic replies, like the "vacation" program, or pass
along a modified version of the original message.
 
Deliver can be used to construct mail-based services (e.g. automatic
mailing list maintenance).  It can also be used to filter mail
automatically in prearranged ways (e.g. encryption and decryption,
tossing junk mail, or vacation notices).
 
Although deliver works best when installed set-user-id root, it can
perform many of its functions even when installed in the private bin
directory of a regular user.
 
                          HOW PORTABLE IS IT?
 

Deliver runs under SCO UNIX 3.2, SCO Xenix/286 and Xenix/386 2.x and
3.x, AIX 3.1, SunOS 3.x and 4.x, generic UNIX System V, 4.3 BSD, V7
(!) and Coherent (!!).



             HOW DOES DELIVER FIT INTO YOUR MAIL SYSTEM?


Deliver can fit into your E-Mail system in three ways, depending on
the mail transport software you currently use:

  1.  Smail 2.x.
  2.  Either Sendmail or Smail 3.x.
  3.  The SCO Xenix mail system.

Deliver does not support MMDF.  However, I think that the changes
required for such support would be minor.  If you would like Deliver
to work with MMDF and are willing to test some experimental changes,
drop me a line.


Reviewers' Comments:
--------------------

Deliver allows a user to write a shell script to process all of his or
her incoming mail.  The output of the script is a list of mail
addresses, files and programs that should receive the message.  The
script may also generate automatic replies, like the "vacation"
program.  It has access to each message as it is processed, so the
action can be content dependent, and it may modify the message before
passing it on.

Deliver could be useful to construct mail-based services (e.g.
automatic mailing list maintenance), or to construct an encrypted
mail system in which incoming messages are automatically decrypted.

----------------------------------------------------------------------

Other than the fact that this cannot be used on systems using MMDF
this package is quite complete and very usable.  
...
Deliver is an extremely useful, extensible, and flexible system.  Since it
invokes programs to do the job, anyone can configure deliver to their own
liking.  The documentation is well written and definite care is taken to
warn the potential installer that deliver requires special priviledges, 
along with WHY it requires special priviledges, and what pitfalls to look
out for when it is installed.

The author did an excellent job on this package.

----------------------------------------------------------------------

This is a neat package.   It allows both users and administrators quite
flexible control over delivering messages.  Plus, another advantage is that
one writes the files that control delivery in shell scripts.  (One can also
write Perl or awk or csh delivery files if one so chooses.)

There are only two problems I can see people having with this package.  The
first is not chosing the correct configuration file.  However, the example
configuration files are a useful guide if you're dealing with a bizarro
system.  (Personally, the only problem I had was getting some compiler
warnings on a NeXT with the generic BSD configuration.  Taking the Sun
configuration, and removing the putenv definition, and recompiling I had
narry a peep from the compiler.)

The other problem one *could* have is with misformed .deliver files.
However, even if there is a problem with a .deliver file, instead of
dropping the messages they are put in an Undel.mail file in the user's home
directory.  (Similar things happen for global delivery files.)  So one is
protected from oneself...

One of the most difficult thing I had with this package is deciding how
exactly I wanted to have my mail delivered.  (This will be invaluable to me
as I get a fairly large amount of mail.)  The possibilities are quite open
ended...

All in all, I'd give this package two thumbs up.  Good documentation, easy
compilation, plus you don't have to read the documentation too carefully as
there are several good samples included.

Good show, Chip!

P.S.  I'm currently using it to sort out my incoming mail.  It works very
nicely indeed.

------------------------------------------------------------------------------

Deliver is a stable, well-written program which performs a quite
useful function.  For people who lack a working mail delivery
program, or who want one in source, this package is close to ideal.

------------------------------------------------------------------------------

Basically, the program gives the postmaster on non-SCO UNIX systems
and the users on both the 3b1 and SCO UNIX a great deal of control
over how the mail is handled.  This is done with easy to construct
shell scripts to cover most eventualities.

This is a program worth having on most systems.
...
Deliver2.1 is a nice addition to any mailing system.  It seems to be
limited in the SCO UNIX environment because of its need to run SUID
which SCO UNIX does not permit.

------------------------------------------------------------------------------

Good package.  I've installed it here for all users to use.
 
------------------------------------------------------------------------------

In general, the documentation and code quality are excellent.  The real
problem in evaluating a package this flexible is that there are too many
different ways it interacts with the system.  Without installing this for all
my users to bash at, some of the potential problems may be missed.
