Return-Path: majordom@sunlabs 
Return-Path: <majordom@sunlabs>
Received: from sunlabs.eng.sun.com by sage.Eng.Sun.COM (5.x/SMI-SVR4)
	id AA14172; Tue, 4 Jun 1996 08:45:05 -0700
Received: filtered by sunlabs.eng.sun.com (SunLabs-1.2)
	id AA24337; Tue, 4 Jun 1996 08:43:51 -0700
Received: from Eng.Sun.COM (engmail1.Eng.Sun.COM) by sunlabs.eng.sun.com (SunLabs-1.2)
	id AA24331; Tue, 4 Jun 1996 08:43:48 -0700
Received: from mercury.Sun.COM (mercury.EBay.Sun.COM) by Eng.Sun.COM (5.x/SMI-5.3)
	id AA12717; Tue, 4 Jun 1996 08:44:01 -0700
Received: by mercury.Sun.COM (Sun.COM)
	id IAA08441; Tue, 4 Jun 1996 08:43:58 -0700
Received: from linkoping.trab.se (vega.linkoping.trab.se [131.115.46.5]) by malmo.trab.se (8.7.3/TRAB-primary-1) with ESMTP id RAA08135; Tue, 4 Jun 1996 17:43:52 +0200 (MET DST)
Received: from localhost (alfa.linkoping.trab.se [131.115.46.83]) by linkoping.trab.se (8.7.5/TRAB-secondary-1) with ESMTP id RAA28024; Tue, 4 Jun 1996 17:43:49 +0200 (MET DST)
Message-Id: <199606041543.RAA28024@linkoping.trab.se>
X-Mailer: exmh version 1.6.7 5/3/96
To: Hein Meling <hein@hsr.no>
Cc: Nils-Henner Krueger <nhk@WHU-Koblenz.de>, exmh-users@sunlabs.Eng.Sun.COM,
        Ola.S.Stromfors@telia.se
Subject: Re: char's in header lines 
In-Reply-To: Your message of "Sat, 25 May 1996 16:13:11 +0200."
             <199605251413.QAA21523@broremann.hsr.no> 
Mime-Version: 1.0
	boundary="===_0_Tue_Jun__4_17:38:24_MET_DST_1996"
Date: Tue, 04 Jun 1996 17:43:49 +0200
From: Ola Stromfors <Ola.S.Stromfors@telia.se>
Sender: owner-exmh-users@sunlabs.Eng.Sun.COM
Precedence: bulk
Content-Type: multipart/mixed ;
	boundary="===_0_Tue_Jun__4_17:38:24_MET_DST_1996"
Content-Length: 14908

This is a multipart MIME message.

--===_0_Tue_Jun__4_17:38:24_MET_DST_1996
Content-Type: text/plain; charset=us-ascii


hein@hsr.no said:
> I have compiled mh-6.8.4 with the scan.patch which was included with 
> exmh, but without any success. It still gives me the crappy 
> iso-string...

> Anyone have any expirence with this?

> Do I still have to recompile with the unsigned option? If so, do I 
> really have to compile the whole distribution? 

I do not think it's a good idea to recompile the whole mh with
"-funsigned-char".  Some parts of the code assumes that characters
are signed, as these warnings from gcc indicates.

burst.c:231: warning: comparison is always 0 due to limited range of data type
post.c:1447: warning: comparison is always 0 due to limited range of data type
post.c:1448: warning: comparison is always 0 due to limited range of data type
post.c:1557: warning: comparison is always 0 due to limited range of data type
post.c:1558: warning: comparison is always 0 due to limited range of data type
post.c:1862: warning: comparison is always 0 due to limited range of data type
post.c:1888: warning: comparison is always 0 due to limited range of data type

Instead I did the following (with mh-6.8.4 on Solaris 2.4):

  1. Added "options LOCALE" in the MH config file.
     This will enable a setlocale call in several programs (which will modify
     the toupper, isspace, iscntrl, etc. ).
     Also check the you have added "options RFC1342".

  2. Modified formatsbr.c to mask high order bits in calls of isXXXX macros.
     This way they can be called with signed (or unsigned) chars.

     I also added one more call to maybe_decode_rfc1342 in formatsbr.c 
     to decode ISO-8859-1 chars in the note field of a mail address
     (the name within parentheses).

  3. I also added some code to the rfc1342.c file in the scan.patch to
	- Also allow us-ascii when MM_CHARSET is iso-8859-1 (since
          us-ascii is a subset).
        - Skip quoted null character which otherwise would terminate the
          string prematurely.  (A mail gateway near us inserts this garbage.)
        - Handle base64 coded header words.

  4. When running exmh (or mh) you should set MM_CHARSET and LC_CTYPE, e.g.

	setenv MM_CHARSET iso-8859-1
	setenv LC_CTYPE iso_8859_1

Hope this helps!

	Ola
  
-- 
Ola Stromfors                   Email:  Ola.S.Stromfors@telia.se 
Telia Engineering AB            Tel:    +46 13 235530
Teknikringen 2                  Fax:    +46 13 213635
S-583 30 Linkoping, Sweden


--===_0_Tue_Jun__4_17:38:24_MET_DST_1996
Content-Type: text/plain; charset=us-ascii
Content-Description: formatsbr.diff
Content-Transfer-Encoding: base64

KioqIGZvcm1hdHNici5jCVRodSBNYXkgMjMgMTg6MDU6NDcgMTk5NgotLS0gZm9ybWF0c2Jy
LmMufjF+CU1vbiBNYXkgMjAgMTg6MTQ6MTcgMTk5NgoqKioqKioqKioqKioqKioKKioqIDEx
NSwxMTkgKioqKgogIAogIHN0YXRpYyBpbnQgbWF0Y2ggKHN0ciwgc3ViKQohIHJlZ2lzdGVy
IHVuc2lnbmVkIGNoYXIgICpzdHIsCiAgICAgICAgICAgICAgICAgKnN1YjsKICB7Ci0tLSAx
MTUsMTE5IC0tLS0KICAKICBzdGF0aWMgaW50IG1hdGNoIChzdHIsIHN1YikKISByZWdpc3Rl
ciBjaGFyICAqc3RyLAogICAgICAgICAgICAgICAgICpzdWI7CiAgewoqKioqKioqKioqKioq
KioKKioqIDEyMCwxMjUgKioqKgogICAgICByZWdpc3RlciBpbnQgICAgYzE7CiAgICAgIHJl
Z2lzdGVyIGludCAgICBjMjsKISAgICAgcmVnaXN0ZXIgdW5zaWduZWQgY2hhciAgICpzMTsK
ISAgICAgcmVnaXN0ZXIgdW5zaWduZWQgY2hhciAgICpzMjsKICAKICAjaWZkZWYgTE9DQUxF
Ci0tLSAxMjAsMTI1IC0tLS0KICAgICAgcmVnaXN0ZXIgaW50ICAgIGMxOwogICAgICByZWdp
c3RlciBpbnQgICAgYzI7CiEgICAgIHJlZ2lzdGVyIGNoYXIgICAqczE7CiEgICAgIHJlZ2lz
dGVyIGNoYXIgICAqczI7CiAgCiAgI2lmZGVmIExPQ0FMRQoqKioqKioqKioqKioqKioKKioq
IDIwNCwyMTUgKioqKgogIAkJCQl9XAogIAkJCX0gZWxzZSB7XAohIAkJCSAgICB3aGlsZSAo
KGMgPSAqc3ApICYmIChpc2NudHJsKChjICYgMHhGRikpIHx8IGlzc3BhY2UoKGMgJiAweEZG
KSkpKVwKICAJCQkJc3ArKztcCiAgCQkJfVwKICAJCQl3aGlsZSAoKGMgPSAqc3ArKykgJiYg
LS1pID49IDAgJiYgY3AgPCBlcClcCiEgCQkJCWlmIChpc2dyYXBoKChjICYgMHhGRikpKSBc
CiAgCQkJCSAgICAqY3ArKyA9IGM7XAogIAkJCQllbHNlIHtcCiEgCQkJCQl3aGlsZSAoKGMg
PSAqc3ApICYmIChpc2NudHJsKChjICYgMHhGRikpIHx8IGlzc3BhY2UoKGMgJiAweEZGKSkp
KVwKICAJCQkJCQlzcCsrO1wKICAJCQkJCSAgICAqY3ArKyA9ICcgJztcCi0tLSAyMDQsMjE1
IC0tLS0KICAJCQkJfVwKICAJCQl9IGVsc2Uge1wKISAJCQkgICAgd2hpbGUgKChjID0gKnNw
KSAmJiAoaXNjbnRybChjKSB8fCBpc3NwYWNlKGMpKSlcCiAgCQkJCXNwKys7XAogIAkJCX1c
CiAgCQkJd2hpbGUgKChjID0gKnNwKyspICYmIC0taSA+PSAwICYmIGNwIDwgZXApXAohIAkJ
CQlpZiAoaXNncmFwaChjKSkgXAogIAkJCQkgICAgKmNwKysgPSBjO1wKICAJCQkJZWxzZSB7
XAohIAkJCQkJd2hpbGUgKChjID0gKnNwKSAmJiAoaXNjbnRybChjKSB8fCBpc3NwYWNlKGMp
KSlcCiAgCQkJCQkJc3ArKztcCiAgCQkJCQkgICAgKmNwKysgPSAnICc7XAoqKioqKioqKioq
KioqKioKKioqIDIyMiwyMzIgKioqKgogICNkZWZpbmUgUFVUUyhjcCwgc3RyKSB7XAogIAkJ
aWYgKHNwID0gKHN0cikpIHtcCiEgCQkgICAgd2hpbGUgKChjID0gKnNwKSAmJiAoaXNjbnRy
bCgoYyAmIDB4RkYpKSB8fCBpc3NwYWNlKChjICYgMHhGRikpKSlcCiAgCQkJc3ArKztcCiAg
CQkgICAgd2hpbGUoKGMgPSAqc3ArKykgJiYgY3AgPCBlcClcCiEgCQkJaWYgKGlzZ3JhcGgo
KGMgJiAweEZGKSkpIFwKICAJCQkgICAgKmNwKysgPSBjO1wKICAJCQllbHNlIHtcCiEgCQkJ
ICAgIHdoaWxlICgoYyA9ICpzcCkgJiYgKGlzY250cmwoKGMgJiAweEZGKSkgfHwgaXNzcGFj
ZSgoYyAmIDB4RkYpKSkpXAogIAkJCQlzcCsrO1wKICAJCQkgICAgKmNwKysgPSAnICc7XAot
LS0gMjIyLDIzMiAtLS0tCiAgI2RlZmluZSBQVVRTKGNwLCBzdHIpIHtcCiAgCQlpZiAoc3Ag
PSAoc3RyKSkge1wKISAJCSAgICB3aGlsZSAoKGMgPSAqc3ApICYmIChpc2NudHJsKGMpIHx8
IGlzc3BhY2UoYykpKVwKICAJCQlzcCsrO1wKICAJCSAgICB3aGlsZSgoYyA9ICpzcCsrKSAm
JiBjcCA8IGVwKVwKISAJCQlpZiAoaXNncmFwaChjKSkgXAogIAkJCSAgICAqY3ArKyA9IGM7
XAogIAkJCWVsc2Uge1wKISAJCQkgICAgd2hpbGUgKChjID0gKnNwKSAmJiAoaXNjbnRybChj
KSB8fCBpc3NwYWNlKGMpKSlcCiAgCQkJCXNwKys7XAogIAkJCSAgICAqY3ArKyA9ICcgJztc
CioqKioqKioqKioqKioqKgoqKiogMzY2LDM3MCAqKioqCiAgCWNhc2UgRlRfQ09NUDoKICAj
aWZkZWYgUkZDMTM0MgohIAkgICAgc3RyID0gZm10LT5mX2NvbXAtPmNfdGV4dDsKICAJICAg
IGlmIChtYXliZV9kZWNvZGVfcmZjMTM0MiAoc3RyLCBidWZmZXIpKQogIAkJc3RyID0gYnVm
ZmVyOwotLS0gMzY2LDM3MCAtLS0tCiAgCWNhc2UgRlRfQ09NUDoKICAjaWZkZWYgUkZDMTM0
MgohIAkgICAgc3RyID0gKHVuc2lnbmVkIGNoYXIgKilmbXQtPmZfY29tcC0+Y190ZXh0Owog
IAkgICAgaWYgKG1heWJlX2RlY29kZV9yZmMxMzQyIChzdHIsIGJ1ZmZlcikpCiAgCQlzdHIg
PSBidWZmZXI7CioqKioqKioqKioqKioqKgoqKiogMzc2LDM4MCAqKioqCiAgCWNhc2UgRlRf
Q09NUEY6CiAgI2lmZGVmIFJGQzEzNDIKISAJICAgIHN0ciA9IGZtdC0+Zl9jb21wLT5jX3Rl
eHQ7CiAgCSAgICBpZiAobWF5YmVfZGVjb2RlX3JmYzEzNDIgKHN0ciwgYnVmZmVyKSkKICAJ
CXN0ciA9IGJ1ZmZlcjsKLS0tIDM3NiwzODAgLS0tLQogIAljYXNlIEZUX0NPTVBGOgogICNp
ZmRlZiBSRkMxMzQyCiEgCSAgICBzdHIgPSAodW5zaWduZWQgY2hhciAqKWZtdC0+Zl9jb21w
LT5jX3RleHQ7CiAgCSAgICBpZiAobWF5YmVfZGVjb2RlX3JmYzEzNDIgKHN0ciwgYnVmZmVy
KSkKICAJCXN0ciA9IGJ1ZmZlcjsKKioqKioqKioqKioqKioqCioqKiA1MzgsNTQyICoqKioK
ICAJCSAgICAodm9pZCkgc3RyY3B5KGJ1ZmZlciwgc3RyKTsKICAJCSAgICBzdHIgPSBidWZm
ZXI7CiEgCQkgICAgd2hpbGUgKGlzc3BhY2UoKCpzdHIgJiAweEZGKSkpCiAgCQkJICAgIHN0
cisrOwogIAkJICAgIGxqdXN0ID0gMDsKLS0tIDUzOCw1NDIgLS0tLQogIAkJICAgICh2b2lk
KSBzdHJjcHkoYnVmZmVyLCBzdHIpOwogIAkJICAgIHN0ciA9IGJ1ZmZlcjsKISAJCSAgICB3
aGlsZSAoaXNzcGFjZSgqc3RyKSkKICAJCQkgICAgc3RyKys7CiAgCQkgICAgbGp1c3QgPSAw
OwoqKioqKioqKioqKioqKioKKioqIDU1MCw1NTQgKioqKgogIAkJICAgIHhwID0gc3RyOwog
IAkJICAgIHhwICs9IHN0cmxlbihzdHIpIC0gMTsKISAJCSAgICB3aGlsZSAoeHAgPiBzdHIg
JiYgaXNzcGFjZSgoKnhwICYgMHhGRikpKQogIAkJCSAgICAqeHAtLSA9ICdcMCc7CiAgCQkg
ICAgaWYgKGxqdXN0ICYmIGkgPiAwICYmIHN0cmxlbihzdHIpID4gaSkKLS0tIDU1MCw1NTQg
LS0tLQogIAkJICAgIHhwID0gc3RyOwogIAkJICAgIHhwICs9IHN0cmxlbihzdHIpIC0gMTsK
ISAJCSAgICB3aGlsZSAoeHAgPiBzdHIgJiYgaXNzcGFjZSgqeHApKQogIAkJCSAgICAqeHAt
LSA9ICdcMCc7CiAgCQkgICAgaWYgKGxqdXN0ICYmIGkgPiAwICYmIHN0cmxlbihzdHIpID4g
aSkKKioqKioqKioqKioqKioqCioqKiA3NDIsNzQ5ICoqKioKICAJCQkJYnJlYWs7CiAgCQkg
ICAgfQotICNpZmRlZiBSRkMxMzQyCi0gCQkgICAgaWYgKG1heWJlX2RlY29kZV9yZmMxMzQy
IChzdHIsIHdvcmtidWZmKSkKLSAJCSAgICAgIHN0ciA9IHdvcmtidWZmOwotICNlbmRpZiAv
KiBSRkMxMzQyICovCiAgCQkgICAgaWYgKCpzdHIpCiAgCQkJYnJlYWs7Ci0tLSA3NDIsNzQ1
IC0tLS0KKioqKioqKioqKioqKioqCioqKiA3NjgsNzc1ICoqKioKICAJCX0KICAJICAgIH0K
LSAjaWZkZWYgUkZDMTM0MgotIAkgICAgaWYgKG1heWJlX2RlY29kZV9yZmMxMzQyIChzdHIs
IHdvcmtidWZmKSkKLSAJCXN0ciA9IHdvcmtidWZmOwotICNlbmRpZiAvKiBSRkMxMzQyICov
CiAgI2VuZGlmCS8qIEJFUksgKi8KICAJICAgIGJyZWFrOwotLS0gNzY0LDc2NyAtLS0tCioq
KioqKioqKioqKioqKgoqKiogODMyLDgzNiAqKioqCiAgCQlsYXN0YiA9IDA7IHNwID0gbHAg
KyB3aWQ7CiAgCQl3aGlsZSAoc3AgPiBscCAmJiAoYyA9ICotLXNwKSAhPSAnLCcpIHsKISAJ
CSAgICBpZiAoISBsYXN0YiAmJiBpc3NwYWNlKChjICYgMHhGRikpKQogIAkJCWxhc3RiID0g
c3AgLSAxOwogIAkJfQotLS0gODI0LDgyOCAtLS0tCiAgCQlsYXN0YiA9IDA7IHNwID0gbHAg
KyB3aWQ7CiAgCQl3aGlsZSAoc3AgPiBscCAmJiAoYyA9ICotLXNwKSAhPSAnLCcpIHsKISAJ
CSAgICBpZiAoISBsYXN0YiAmJiBpc3NwYWNlKGMpKQogIAkJCWxhc3RiID0gc3AgLSAxOwog
IAkJfQoqKioqKioqKioqKioqKioKKioqIDg0NCw4NDggKioqKgogIAkJZm9yIChpPWluZGVu
dDsgY3AgPCBlcCAmJiBpID4gMDsgaS0tKQogIAkJICAgICpjcCsrID0gJyAnOwohIAkJd2hp
bGUgKGlzc3BhY2UoKCpscCAmIDB4RkYpKSkKICAJCSAgICBscCsrLCBsZW4tLTsKICAJICAg
IH0KLS0tIDgzNiw4NDAgLS0tLQogIAkJZm9yIChpPWluZGVudDsgY3AgPCBlcCAmJiBpID4g
MDsgaS0tKQogIAkJICAgICpjcCsrID0gJyAnOwohIAkJd2hpbGUgKGlzc3BhY2UoKmxwKSkK
ICAJCSAgICBscCsrLCBsZW4tLTsKICAJICAgIH0K

--===_0_Tue_Jun__4_17:38:24_MET_DST_1996
Content-Type: text/plain; charset=us-ascii
Content-Description: rfc1342.c
Content-Transfer-Encoding: base64

LyogcmZjMTM0Mi5jICovIAovKgogKiBEZWNvZGUgUkZDMTM0MiBoZWFkZXIgZm9ybWF0IAog
Ki8KCiNpZmRlZiBSRkMxMzQyCnN0YXRpYyBjaGFyIGhleGluZGV4W10gPSB7CiAgICAtMSwt
MSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwKICAgIC0xLC0x
LC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLAogICAgLTEsLTEs
LTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsCiAgICAgMCwgMSwg
MiwgMywgNCwgNSwgNiwgNywgOCwgOSwtMSwtMSwtMSwtMSwtMSwtMSwKICAgIC0xLDEwLDEx
LDEyLDEzLDE0LDE1LC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLAogICAgLTEsLTEsLTEs
LTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsCiAgICAtMSwxMCwxMSwx
MiwxMywxNCwxNSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwKICAgIC0xLC0xLC0xLC0x
LC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xCn07CgpzdGF0aWMgY2hhciBp
bmRleF82NFsxMjhdID0gewogICAgLTEsLTEsLTEsLTEsIC0xLC0xLC0xLC0xLCAtMSwtMSwt
MSwtMSwgLTEsLTEsLTEsLTEsCiAgICAtMSwtMSwtMSwtMSwgLTEsLTEsLTEsLTEsIC0xLC0x
LC0xLC0xLCAtMSwtMSwtMSwtMSwKICAgIC0xLC0xLC0xLC0xLCAtMSwtMSwtMSwtMSwgLTEs
LTEsLTEsNjIsIC0xLC0xLC0xLDYzLAogICAgNTIsNTMsNTQsNTUsIDU2LDU3LDU4LDU5LCA2
MCw2MSwtMSwtMSwgLTEsLTEsLTEsLTEsCiAgICAtMSwgMCwgMSwgMiwgIDMsIDQsIDUsIDYs
ICA3LCA4LCA5LDEwLCAxMSwxMiwxMywxNCwKICAgIDE1LDE2LDE3LDE4LCAxOSwyMCwyMSwy
MiwgMjMsMjQsMjUsLTEsIC0xLC0xLC0xLC0xLAogICAgLTEsMjYsMjcsMjgsIDI5LDMwLDMx
LDMyLCAzMywzNCwzNSwzNiwgMzcsMzgsMzksNDAsCiAgICA0MSw0Miw0Myw0NCwgNDUsNDYs
NDcsNDgsIDQ5LDUwLDUxLC0xLCAtMSwtMSwtMSwtMQp9OwoKI2RlZmluZSBjaGFyNjQoYykg
ICgoKGMpIDwgMCB8fCAoYykgPiAxMjcpID8gLTEgOiBpbmRleF82NFsoYyldKQoKc3RhdGlj
IGludAp1bnFwIChieXRlMSwgYnl0ZTIpCgljaGFyIGJ5dGUxOwoJY2hhciBieXRlMjsKewog
IGlmIChoZXhpbmRleFtieXRlMV0gPT0gLTEgfHwgaGV4aW5kZXhbYnl0ZTJdID09IC0xKQog
ICAgcmV0dXJuIC0xOwogIHJldHVybiBoZXhpbmRleFtieXRlMV08PDQgfCBoZXhpbmRleFti
eXRlMl07Cn0KCmludAptYXliZV9kZWNvZGVfcmZjMTM0MiAoc3JjLCBkc3QpIAoJY2hhciAq
c3JjOwoJY2hhciAqZHN0Owp7CglzdGF0aWMgY2hhciAqbW1fY2hhcnNldCA9IDA7CglzdGF0
aWMgY2hhciAqYWx0X2NoYXJzZXQgPSAwOwoJZXh0ZXJuIGNoYXIgKmdldGVudigpOwoJY2hh
ciAqcDsKCWNoYXIgKnE7CgljaGFyICpwcDsKCWNoYXIgKnN0YXJ0b2ZtaW1lID0gMDsKCWNo
YXIgKmVuZG9mbWltZSA9IDA7CglpbnQgYzsKCWludCBxdW90ZWRfcHJpbnRhYmxlOwoKCWlm
ICghbW1fY2hhcnNldCkgewoJCW1tX2NoYXJzZXQgPSBnZXRlbnYgKCJNTV9DSEFSU0VUIik7
CgkJaWYgKHN0cmNhc2VjbXAobW1fY2hhcnNldCwgImlzby04ODU5LTEiKSA9PSAwKSB7CgkJ
ICBhbHRfY2hhcnNldCA9ICJ1cy1hc2NpaSI7IC8qIEFjY2VwdCBhIGNvbW1vbiBzdWJzZXQg
Ki8KCQl9Cgl9CglpZiAoIW1tX2NoYXJzZXQgfHwgc3JjID09IDApCgkJcmV0dXJuIDA7CgoJ
Zm9yIChwID0gc3JjLCBxID0gZHN0OyAqcDsgcCsrKSB7CgkJKnErKyA9ICpwOwoJCWlmICgq
cCA9PSAnPScgJiYgcFsxXSAmJiBwWzFdID09ICc/JyAmJiBwWzJdKSB7CgkJCS8qIEhhdmU6
ID0/ICovCgkJCXN0YXJ0b2ZtaW1lID0gcCArIDI7CgkJCWlmIChzdHJuY2FzZWNtcChzdGFy
dG9mbWltZSwgbW1fY2hhcnNldCwgCgkJCQkJc3RybGVuKG1tX2NoYXJzZXQpKSA9PSAwKSB7
CgkJCSAgc3RhcnRvZm1pbWUgKz0gc3RybGVuIChtbV9jaGFyc2V0KTsKCQkJfSBlbHNlIGlm
IChhbHRfY2hhcnNldCAmJgoJCQkJICAgKHN0cm5jYXNlY21wKHN0YXJ0b2ZtaW1lLCBhbHRf
Y2hhcnNldCwgCgkJCQkJCXN0cmxlbihhbHRfY2hhcnNldCkpID09IDApKSB7CgkJCSAgc3Rh
cnRvZm1pbWUgKz0gc3RybGVuIChhbHRfY2hhcnNldCk7CgkJCX0gZWxzZSB7CgkJCSAgY29u
dGludWU7CgkJCX0KCQkJLyogSGF2ZTogPT9jaGFyc2V0ICovCgkJCWlmIChzdGFydG9mbWlt
ZVswXSAhPSAnPycpCgkJCQljb250aW51ZTsKCQkJLyogSGF2ZTogPT9jaGFyc2V0PyAqLwoJ
CQlzdGFydG9mbWltZSsrOwoJCQlpZiAoKnN0YXJ0b2ZtaW1lICE9ICdCJyAmJgoJCQkgICAg
KnN0YXJ0b2ZtaW1lICE9ICdiJyAmJgoJCQkgICAgKnN0YXJ0b2ZtaW1lICE9ICdRJyAmJgoJ
CQkgICAgKnN0YXJ0b2ZtaW1lICE9ICdxJykKCQkJCWNvbnRpbnVlOwoJCQkvKiBIYXZlOiA9
P2NoYXJzZXQ/RSAqLwoJCQlxdW90ZWRfcHJpbnRhYmxlID0gKnN0YXJ0b2ZtaW1lID09ICdR
JyB8fAoJCQkJCSAgICpzdGFydG9mbWltZSA9PSAncSc7OwoJCQlzdGFydG9mbWltZSsrOwoJ
CQlpZiAoKnN0YXJ0b2ZtaW1lICE9ICc/JykKCQkJCWNvbnRpbnVlOwoJCQkvKiBIYXZlOiA9
P2NoYXJzZXQ/RT8gKi8KCQkJc3RhcnRvZm1pbWUrKzsKCQkJZm9yIChwcCA9IHN0YXJ0b2Zt
aW1lOyAqcHAgJiYgKihwcCsxKTsgcHArKykKCQkJCWlmICgqcHAgPT0gJz8nICYmIHBwWzFd
ID09ICc9JykgewoJCQkJCWVuZG9mbWltZSA9IHBwOwoJCQkJCWJyZWFrOwoJCQkJfQoJCQkv
KiBIYXZlOiA9P2NoYXJzZXQ/RT90ZXh0Pz0gKi8KCQkJaWYgKGVuZG9mbWltZSkgewoJCQkJ
cS0tOwoJCQkJaWYgKHF1b3RlZF9wcmludGFibGUpCgkJCQkJZm9yIChwcCA9IHN0YXJ0b2Zt
aW1lOyBwcCA8IGVuZG9mbWltZTsgcHArKykgewoJCQkJCQlpZiAoKnBwID09ICc9JykgewoJ
CQkJCQkJYyA9ICB1bnFwIChwcFsxXSwgcHBbMl0pOwoJCQkJCQkJaWYgKCBjID09IC0xKQoJ
CQkJCQkJCWNvbnRpbnVlOwoJCQkJCQkJaWYgKCBjICE9IDApCgkJCQkJCQkgICpxKysgPSBj
OwoJCQkJCQkJcHAgKz0gMjsKCQkJCQkJfSBlbHNlIGlmICgqcHAgPT0gJ18nKQoJCQkJCQkJ
KnErKyA9ICcgJzsKCQkJCQkJZWxzZQoJCQkJCQkJKnErKyA9ICpwcDsKCQkJCQl9CgkJCQll
bHNlIHsJLyogYmFzZTY0ICovCgkJCQkgIGludCBjMSwgYzIsIGMzLCBjNDsKCQkJCSAgcHAg
PSBzdGFydG9mbWltZTsKCQkJCSAgd2hpbGUgKHBwIDwgZW5kb2ZtaW1lKSB7CgkJCQkgICAg
LyogNiArIDIgYml0cyAqLwoJCQkJICAgIHdoaWxlICgocHAgPCBlbmRvZm1pbWUpICYmCgkJ
CQkJICAgKChjMSA9IGNoYXI2NCgqcHApKSA9PSAtMSkpIHsKCQkJCSAgICAgIHBwKys7CgkJ
CQkgICAgfQoJCQkJICAgIGlmIChwcCA8IGVuZG9mbWltZSkgewoJCQkJICAgICAgcHArKzsK
CQkJCSAgICB9CgkJCQkgICAgd2hpbGUgKChwcCA8IGVuZG9mbWltZSkgJiYKCQkJCQkgICAo
KGMyID0gY2hhcjY0KCpwcCkpID09IC0xKSkgewoJCQkJICAgICAgcHArKzsKCQkJCSAgICB9
CgkJCQkgICAgaWYgKHBwIDwgZW5kb2ZtaW1lICYmIGMxICE9IC0xICYmIGMyICE9IC0xKSB7
CgkJCQkgICAgICAqcSsrID0gKGMxIDw8IDIpIHwgKGMyID4+IDQpOwoJCQkJICAgICAgcHAr
KzsKCQkJCSAgICB9CgkJCQkgICAgLyogNCArIDQgYml0cyAqLwoJCQkJICAgIHdoaWxlICgo
cHAgPCBlbmRvZm1pbWUpICYmCgkJCQkJICAgKChjMyA9IGNoYXI2NCgqcHApKSA9PSAtMSkp
IHsKCQkJCSAgICAgIHBwKys7CgkJCQkgICAgfQoJCQkJICAgIGlmIChwcCA8IGVuZG9mbWlt
ZSAmJiBjMiAhPSAtMSAmJiBjMyAhPSAtMSkgewoJCQkJICAgICAgKnErKyA9ICgoYzIgJiAw
eEYpIDw8IDQpIHwgKGMzID4+IDIpOwoJCQkJICAgICAgcHArKzsKCQkJCSAgICB9CgkJCQkg
ICAgLyogMiArIDYgYml0cyAqLwoJCQkJICAgIHdoaWxlICgocHAgPCBlbmRvZm1pbWUpICYm
CgkJCQkJICAgKChjNCA9IGNoYXI2NCgqcHApKSA9PSAtMSkpIHsKCQkJCSAgICAgIHBwKys7
CgkJCQkgICAgfQoJCQkJICAgIGlmIChwcCA8IGVuZG9mbWltZSAmJiBjMyAhPSAtMSAmJiBj
NCAhPSAtMSkgewoJCQkJICAgICAgKnErKyA9ICgoYzMgJiAweDMpIDw8IDYpIHwgKGM0KTsK
CQkJCSAgICAgIHBwKys7CgkJCQkgICAgfQoJCQkJICB9CgkJCQl9CgkJCQlwID0gZW5kb2Zt
aW1lICsgMTsKCQkJCWlmICgqcCA9PSAnICcpCgkJCQkJcCsrOwoJCQl9CgkJfQoJfQoJKnEg
PSAwOwoJcmV0dXJuIGVuZG9mbWltZSAhPSAwOwp9CiNlbmRpZgoKI2lmZGVmIG5vdGRlZgkv
KiBGb3IgZGVidWdnaW5nICovCmludAptYWluKGFyZ2MsIGFyZ3YpCglpbnQgYXJnYzsKCWNo
YXIgKiphcmd2Owp7CgljaGFyIGJ1ZmZbMTAwXTsKCWlmIChtYXliZV9kZWNvZGVfcmZjMTM0
MiAoYXJndlsxXSwgYnVmZikpCgkJcHV0cyAoYnVmZik7CgllbHNlCgkJcHV0cyAoIk5FSSEi
KTsKfQojZW5kaWYK

--===_0_Tue_Jun__4_17:38:24_MET_DST_1996--


