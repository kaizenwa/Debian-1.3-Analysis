<HTML><HEAD><TITLE>Exmh 1.6.6 - EXMH (1)</TITLE></HEAD><BODY>

<H1><CENTER>EXMH USER GUIDE</CENTER></H1>

<H2><A NAME="CONTENTS">Contents</A></H2><UL>
<H4><A HREF="#NAME">NAME</A></H4>
<H4><A HREF="#INTRODUCTION">INTRODUCTION</A></H4>
<H4><A HREF="#OVERVIEW OF FEATURES">OVERVIEW OF FEATURES</A></H4>
<H4><A HREF="#GETTING STARTED">GETTING STARTED</A></H4>
<H4><A HREF="#KEYBOARD COMMANDS">KEYBOARD COMMANDS</A></H4>
<H4><A HREF="#THE EXMH DISPLAY">THE EXMH DISPLAY</A></H4>
<H4><A HREF="#FOLDER DISPLAY">FOLDER DISPLAY</A></H4>
<H4><A HREF="#FOLDER CACHE">FOLDER CACHE</A></H4>
<H4><A HREF="#FOLDER TABLE OF CONTENTS">FOLDER TABLE OF CONTENTS</A></H4>
<H4><A HREF="#MESSAGE DISPLAY">MESSAGE DISPLAY</A></H4>
<H4><A HREF="#MANAGING MESSAGES">MANAGING MESSAGES</A></H4>
<H4><A HREF="#SENDING MAIL">SENDING MAIL</A></H4>
<H4><A HREF="#THE BUILT-IN EDITOR">THE BUILT-IN EDITOR</A></H4>
<H4><A HREF="#MAIL FORMATTING">MAIL FORMATTING</A></H4>
<H4><A HREF="#MIME FORMATTING">MIME FORMATTING</A></H4>
<H4><A HREF="#8 BIT CHARACTERS">8 BIT CHARACTERS</A></H4>
<H4><A HREF="#USING ANOTHER EDITOR">USING ANOTHER EDITOR</A></H4>
<H4><A HREF="#FILTERING MAIL">FILTERING MAIL</A></H4>
<H4><A HREF="#FACES">FACES</A></H4>
<H4><A HREF="#SEARCHING IN EXMH">SEARCHING IN EXMH</A></H4>
<H4><A HREF="#TIPS">TIPS</A></H4>
<H4><A HREF="#INSTALLATION">INSTALLATION</A></H4>
<H4><A HREF="#UPGRADING WITH PATCHES">UPGRADING WITH PATCHES</A></H4>
<H4><A HREF="#TK SEND AND XAUTHORITY">TK SEND AND XAUTHORITY</A></H4>
<H4><A HREF="#MORE INFORMATION">MORE INFORMATION</A></H4>
<H4><A HREF="#FILES">FILES</A></H4>
<H4><A HREF="#SEE ALSO">SEE ALSO</A></H4>
<H4><A HREF="#AUTHOR">AUTHOR</A></H4>
<H4><A HREF="#THANKS">THANKS</A></H4>
</UL>
<H3><A NAME="NAME" HREF="#CONTENTS">NAME</A></H3>
exmh-use - A more advanced user guide to the exmh mail user interface.
<H3><A NAME="INTRODUCTION" HREF="#CONTENTS">INTRODUCTION</A></H3>
<P>This man page provides more detailed information
about using <I>exmh</I>,
such as managing nested folders,
filtering mail,
and using an external editor.
The <B><A HREF="exmh.n.html">exmh</A></B> man page is an introduction.
The <B><A HREF="exmh-custom.n.html">exmh-custom</A></B> man page describes customization of <I>exmh</I>,
and the <B><A HREF="exmh-ref.n.html">exmh-ref</A></B> man page describes all the buttons and
menus of <I>exmh</I>.
<P><I>Exmh</I> uses the
regular MH programs to manipulate your mail folders
and messages.
This means it is compatible with command-line use of MH programs,
and its actions should be familar if you are an experienced MH user.
If you are a new MH user, then the details of running MH programs
is hidden behind the graphical interface.
<P>This man page will occasionally make
references to advanced MH features like scan formats
and reply filters.  If you do not know about these you can
ignore the comments.  If you do know about them, however, you will
see that <I>exmh</I> can be affected by settings for these features
in your MH profile.
<H3><A NAME="OVERVIEW OF FEATURES" HREF="#CONTENTS">OVERVIEW OF FEATURES</A></H3>
<P>As well as providing basic MH functionality, <I>exmh</I>
has a number of other features:
<P><B>MIME support</B>.  <I>Exmh</I> can display
MIME (Multipurpose Internet Mail Extensions)
messages, either directly or with the
help of the <I>metamail</I> package.
The built-in editor lets you compose enriched text messages
and insert files as parts of a multipart message.
<P><B>Sun Attachments</B>.  These attachments are cooerced into
MIME format.  Special treatment is given to certain common
sun attachments like Calendar Appointments.  You cannot create
a Sun format attachment within <I>exmh</I>, hoever.
<P><B>Nested Folder Display</B>.
A display of your folders appears as a set of labels,
one for each folder.
This is similar to <I>xmh</I>, except that
the folder labels are highlighted to
indicate the current folder, the target folder for moves,
folders with unread mail in them,
and folders with nested folders under them.
<I>Exmh</I> supports arbitrarily nested folder structures, unlike <I>xmh</I>,
which only supports a single level of nesting.
<P><B>Scan Listing Highlights</B>.
The scan listing (folder table-of-contents)
is also highlighted to indicate the current message,
unread messages, and messages marked for move or delete.
Either color or monochrome highlighting is used, depending on your display.
<P><B>Facesaver bitmap display</B>.  If you have a facesaver database
on your system, <I>exmh</I> displays the bitmap face of the person
that sent the current message (or their organization).
<P><B>Background processing</B>.  You can set <I>exmh</I> to run
<I>inc</I> periodically,
check for new mesages arriving asynchronously in folders,
run the MH <I>msgchk</I> program,
or count up the messages in your mail spool file.
<P><B>Mail filtering</B>.  <I>Exmh</I> is designed to work with
external agents that filter arriving mail into different folders.
<P><B>Unseen folder display</B>.  If you use a system that delivers mail into
various folders, not just inbox, then you have the problem
of finding what folders have unseen messages in them.  <I>exmh</I>
provides feedback in the folder display so you can tell
which folders have new messages.
Also, the Next command will chain to the next folder with
unread messages if you are at the end of the current folder.
<P><B>Pick</B>.
An interface to MH <I>pick</I> lets you select messages by patterns in the
header fields, by date, or by sequence name.
The interface is similar, but not identical, to the <I>xmh</I> pick interface.
<P><B>Fast Search</B>.
Because <I>pick</I> can be slow, <I>exmh</I> also implements
fast searching over the current folder listing and current message body.
<P><B>Glimpse interface</B>.
Glimpse is a full text search tool from the University of Arizona.
It has a low overhead indexing scheme that costs about 10% to 12% of your
mail storage space.  It is quite useful to find messages in any of
your many folders.
<P><B>Editor interface</B>.  You can hook <I>exmh</I> to your favorite editor
using the <B>exmh-async</B> script.  Or, Tcl-based editors such
as <I>mxedit</I> can interact with <I>exmh</I> directly.
As the default, a simple built-in editor named <I>sedit</I> is provided.
<P><B>Keybinding User Interface</B>.  Bindings for common editting and cursor
motion commands are exposed in a UI that lets you choose keystroke
sequences to match your expectations.  You can also define key bindings for
Tcl commands that are part of the implementation.
<P><B>Aliases User Interface</B>.  A browser for your MH aliases lets you
define new aliases and insert aliases into mail messages.
<P><B>Pretty Good Privacy (PGP)</B>.  If you have PGP, you can use it from
<I>exmh</I> to digitally sign, encrypt, and decrypt messages.
<P><B>Preferences User Interface</B>.  There are many knobs and dials you
can adjust to control the behavior of <I>exmh</I>.
<P><B>URL Smarts</B>.  Exmh can scan for embedded URLs in your messages,
and it can look for X-URI: mail headers.  These are turned into
active text buttons.  Click on them and exmh asks your favorite
Web browser to display the URL.
<P><B>User Programming</B>.  If the preference settings are not enough for you,
you can program <I>exmh</I> more directly.  You can define new buttons
and menus and add new Tcl code to its implementation.
This is described in the <B><A HREF="exmh-custom.n.html">exmh-custom</A></B> man page.
<H3><A NAME="GETTING STARTED" HREF="#CONTENTS">GETTING STARTED</A></H3>
<P>Mostly likely you are already an MH user.  If not, go through
the tutorial in the basic <I>exmh</I> man page.
<P>If you previously used a mail reader like Elm or Sun's mailtool that
manages mail folders in mbox-like files, then you can use the
<I>Import mailbox folders</I> menu entry to copy your old folder contents
into the folders manage by MH and <I>exmh</I>.   This menu entry
is under the folder More... menu.
<P>There is an extensive Preferences system for <I>exmh</I>
that lets you tune it in many ways. 
Throughout the man page, references to Preference settings will be
made when there are tunable parameters associated with a feature.
A more complete description of the Preference facility is given
in the <B><A HREF="exmh-custom.n.html">exmh-custom</A></B> man page.
<H3><A NAME="KEYBOARD COMMANDS" HREF="#CONTENTS">KEYBOARD COMMANDS</A></H3>
<P>Several of the folder and message operations have keystroke bindings
so you can do much of your browsing with hands on the keyboard.
The default bindings are given
here using the Tk syntax that you'll need to use in the
Bind dialogs.  Capitalization is important.  For more information,
see the <B><A HREF="exmh-custom.n.html">exmh-custom</A></B> man page.
<BLOCKQUOTE><PRE>&lt;Control-Return&gt; - Commit
&lt;Key-i&gt; - Inc
&lt;Key-f&gt; - Forward
&lt;Key-r&gt; - Reply
&lt;Key-c&gt; - Compose
&lt;Key-p&gt; - Previous
&lt;Key-P&gt; - Previous message, but do not display it.
&lt;minus&gt; - Previous message, even if it is marked for delete or move.
&lt;Key-n&gt; - Next
&lt;Key-N&gt; - Next message, but do not display it.
&lt;Key-F&gt; - Change to next folder with unseen messages.
&lt;Key-U&gt; - Next unseen message, if any.
&lt;Key-s&gt; - Display the current message.
&lt;Key-d&gt; - Delete and advance
&lt;Key-D&gt; - Delete and advance, but do not display.
&lt;Key-m&gt; - Move and advance
&lt;Key-M&gt; - Move and advance, but do not display.
&lt;Key-u&gt; - Unmark a pending delete or refile from the current message(s).
&lt;Key-z&gt; - Highlight embedded URLs
&lt;Key-A&gt; - Added selected Sun Calendar Manager appointment to your calendar.
&lt;space&gt; - page forward the message display.
&lt;BackSpace&gt; - page back the message display.
&lt;dollar&gt; - '$' Go to last message, but do not display.
&lt;asciicircum&gt; - '^' Go to first message, but do not display.
&lt;question&gt; - '?' Bring up the Command binding dialog.
</PRE></BLOCKQUOTE>
You can browse, change, and define new command keystrokes via the
Bind user interfaces available under the Bindings menu.  There are
two dialogs: one for editing commands in the built-in editor, and another
for the command bindings described above.
<H3><A NAME="THE EXMH DISPLAY" HREF="#CONTENTS">THE EXMH DISPLAY</A></H3>
<P>At the top of the display is a subwindow
that has a label for each of your top-level folders.
In the middle there is a table of contents for the current folder.
At the bottom the current message is displayed.
Both the folder display and table of contents
have some highlights that are described below.
<P>The command buttons are grouped into three sets.
The buttons along the top apply to <I>exmh</I> itself, such
as Help, Preferences, and Quit.
The buttons above the scan listing are operations on folders, like
Inc and Commit.  There is a menu there labeled More... that has
several more folder-related operations like Pack and Sort.
The row of buttons above the message display are for operations on
messages, such as Send, Next, and Delete.  There is another menu here
labeled More... that has several more operations on messages, such
as Print, Edit, Burst Digest, and Edit Message.
<P>The version number of <I>exmh</I> is displayed next to the top row
of buttons.  The release cycle for <I>exmh</I> goes something like
1.5alpha, 1.5beta, 1.5gamma, ... 1.5, 1.6alpha, and so on.
The unqualified versions are deemed &quot;stable&quot; enough for naive
users.
<P>Summary information for the current folder appears next to the
folder buttons.  This indicates the current folder and how many
messages are in it.
Just below the scan listing is a status line that provides some
feedback about what <I>exmh</I> is doing.  When a new message is
displayed, the subject or Content-Description component is displayed there.
Just to the left of
this the folder and number of the current message is displayed.
<P>To the left of the message buttons the EXMH logo appears.
This is replaced with the facesaver image of the person, or their
organization, that sent the current message.
<P>The black diamond to the right of the status message area is a grip
that you use to change the boundaries between subwindows.
The resize unfortunately depends on heuristics based on the size of
text being displayed in the window, so you have to have a message
displayed before the resize will work.
<P>Press the first mouse button on the black diamond and a horizontal line appears.
As you drag the line up and down, the status message indicates
what boundary you are changing.
Initially you are adjusting the scan listing (middle subwindow).
If you drag the line off the top of the scan listing,
the mode changes and are now adjusting the folder cache
size, if it exists.
If you drag the line above the folder cache,
the mode changes again you are changing the main folder display area.
As you drag the line down, the mode changes again.  The main
drawback of the automatic mode sensing 
is that you cannot grow the main folder display area by
more than the size of the folder cache, if it exists.
<P>There are also preference settings for each of the subwindow sizes.
Look under Scan Listing, Folder Cache, and Folder Display preferences.
<H3><A NAME="FOLDER DISPLAY" HREF="#CONTENTS">FOLDER DISPLAY</A></H3>
<P>The top subwindow has a label for each of your MH folders.
The folder display is highlighted to reflect the state of folders.
The <I>Color Legend</I> menu item under the main Help menu will
display a key for the highlights.
<BLOCKQUOTE><PRE>black - the current folder.
bold outline - a folder with unseen messages.
stippled background - the target folder for move and link operations.
</PRE></BLOCKQUOTE>
<P>On color displays:
<BLOCKQUOTE><PRE>red - the current folder.
blue - a folder with unseen messages.
yellow - the target folder for move and link operations.
</PRE></BLOCKQUOTE>
Folders that have nested folders under them are
highlighted by a shadow box.
<P>The mouse bindings for the folders labels are:
<BLOCKQUOTE><PRE>Left - Change to folder.
Middle - View nested folders.
Right - Refile current messages to the folder.
Shift-Right - Link current messages to the folder.
Shift-Middle - Drag a folder label to some drop target.
Control-Right - Clear the current target folder.
</PRE></BLOCKQUOTE>
<P>Note that a right click does two things at once.
It selects the target folder for refile, and it
marks the currently selected message(s) for pending refile to that folder.
This might seem over-eager at first, but it is quite useful
once you get used to it.  The currently selected target
folder remains highlighted, and you can move a message to
this folder by clicking the Move button or typing 'm'.
<P>A middle click on the folder label displays a popup window with the
folder labels for nested folders,
and you can operate on these labels just like the top-level ones.
The popups work recursively for nested folders.
When the mouse leaves the pop-up it is withdrawn.
The Folder Display preferences lets you adjust how the
pop-up behaves.
<P><I>Hint:</I>  If you change the popup-related settings, 
you'll have to resize the <I>exmh</I> window a bit to force it
to redisplay the folder labels.  Only then will the new bindings
take effect.
<P>You can make the folder display into a separate top-level window
with a setting under the Folder Display Preferences.  This means you
can close the main window and still view the folder display to see what
folders have new mail in them.  When you click on a folder label the
main window will be opened automatically.
<H3><A NAME="FOLDER CACHE" HREF="#CONTENTS">FOLDER CACHE</A></H3>
<P>Below the main folder display is a cache line of recently visted folders.
If you have nested folders, their complete pathname is given in the cache
window.  Using the Folder Cache preferences settings you can choose how
many lines of folder cache.  You can also put some folders into the
cache permanently with the Sticky Folders preference item.
<P>If you don't have many folders, the folder cache line is really just
a waste of screen real estate.  In this case, set the number of folder cache
lines to 0 in the Folder Cache Preferences section
to eliminate this part of the display altogether.
<P>You can drag folders in and out of the folder cache.
Use &lt;Shift-Button-2&gt; to drag a folder label.
Drag a label from the main display into the cache to add it,
or from the cache to the main display to remove it from the cache.
<H3><A NAME="FOLDER TABLE OF CONTENTS" HREF="#CONTENTS">FOLDER TABLE OF CONTENTS</A></H3>
<P>The middle subwindow lists the messages in the current folder.
<P>The lines of the scan listing are highlighted to reflect the
state of each message.
On color displays:
<BLOCKQUOTE><PRE>    Red - the current message.
    Blue - unread messages.
    Grey background - messages marked for deletion.
    Yellow background - message marked for refile to another folder.
</PRE></BLOCKQUOTE>
<P>On monochrome displays:
<BLOCKQUOTE><PRE>    Reverse video - the current message.
    Underlined - unread messages.
    Cross-hatched background - messages marked for deletion.
    Stippled background - message marked for refile to another folder.
</PRE></BLOCKQUOTE>
<P>The mouse bindings for the scan listing are listed below.
&quot;Drag&quot; refers to holding the mouse button down while moving the mouse.
<BLOCKQUOTE><PRE>Left - select and display a message.
Left-Drag - select a range of messages.
Shift-Left - modify the selected range.
Middle-Drag - scroll the display.
Right - select but do not display the message.
Shift-Right - Drag folder/msgID to drop target.
</PRE></BLOCKQUOTE>
<P>Several of the operations on messages can be applied to a set
of selected messages.  You can create a discontinuous selection
by using the Shift-Left (and Shift-Left-Drag) mouse actions.
<P><I>Hint</I>:
The scan listing comes from <I>both</I> the MH <I>scan</I> and <I>inc</I>
programs, depending on circumstance.
If you define a custom scan format, set the same filter in your
profile for both <I>inc</I> and <I>scan</I>.
<H3><A NAME="MESSAGE DISPLAY" HREF="#CONTENTS">MESSAGE DISPLAY</A></H3>
<P>The current message, if any, is displayed in the bottom subwindow.
The uninteresting mail headers are scrolled off the top of this display
initially.  You can control this with the
Header-Display and Header-Suppress profile entries
as described in the <B><A HREF="exmh-custom.n.html">exmh-custom</A></B> man page.
That man page also describes how to colorize different mail headers.
<P>Pressing the space bar will page you through the message,
or take you to the next message if you are at the end of the current message.
Backspace will go back a page.  You can also scroll the message with
the mouse by using the scrollbar or drag-scrolling.
<P>MIME messages are indicated by displaying their content-description in the
status line.  The mouse cursor is changed to a watch while the
MIME message is parsed and displayed.
On a color display, a MIME message body is displayed in a slightly
darker background.  This shading is used to indicate the depth of
nesting in a multipart MIME structure.
<P>A popup menu is available to process MIME messages, such as saving
their contents or processing the contents with an external viewer.
Press the right mouse button in the message display area to obtain this menu.
Make sure you press the mouse button over the message body,
not the headers.
For multipart messages,
the menu changes depending on what part of the message you are
looking at.  See also the Preferences entry for MIME for some
parameters you can adjust.
<P>Every content type can be saved or printed, and other types can have
additional options depending on entries in your site's mailcap file.
The print function just prints the item as text using your
Print preferences command.
The print-with-mailcap entry, if available, uses the print command
as defined for the content-type in the mailcap file.
<P>You can display a message in a new top-level window in order to save
it around on your display.  Use the Clip operation under the message More...
menu.  This will display the current message in a new, larger window.
<P>Exmh can cooperate with a WWW browser to display web pages.
If you get a URL in a mail message, then use the 'z' keystroke to
highlight the URLs in the message.  (This is adhoc and not %100 accurate.)
The URLs are turned into active text buttons.
Click on one and exmh asks your web browser to display the page.
You can have exmh scan every message automatically for URLs, although
this can be slow.  Tune this with the settings under the WWW preferences.
<P>If exmh sees special X-URL (or X-URI) headers it will turn the
facesaver area into an active button.  It takes on a raised relief
and when you click on the face (or exmh logo) then the web browser is
asked to display the URL in the X-URL header.  More and more folks are
putting X-URL headers into their mail messages so you can find their
home page.

<H3><A NAME="MANAGING MESSAGES" HREF="#CONTENTS">MANAGING MESSAGES</A></H3>
<P>There are three basic actions you can take with a mail message:
leave it alone, delete it, or refile it to another folder.
You automatically advance to the next message after you delete or
refile the current message.  This makes it easy to go through
your mail messages, deleting and refiling as you go.
There are several settings under the Scan Listing preferences
section that control the behavior of <I>exmh</I> when reading mail,
and some of these will be mentioned below.
<P>Like <I>xmh</I>, <I>exmh</I> does deletes and refiles in two steps.
In the first step you <I>mark</I> a message as needing some action.
Later on you <I>commit</I> these changes by pressing the
Commit button, or by pressing &lt;Control-Return&gt;.
Unlike <I>xmh</I>, however, <I>exmh</I> requires that you commit
changes before you view a different folder.
Marked messages are highlighted in the scan listing,
as described above.  If you reselect a message marked for refile,
the destination folder for that message is shown in the Status line.
<P><B>Deleting Messages</B>.
To delete a message, use the Delete button or press 'd'.
Delete results in a call to <I>rmm</I>.  If you want deleted messages
to be refiled into a special folder (e.g. +wastebasket or +deleted),
you'll have to define a shell script and register that as your
rmmproc in your .mh_profile.
<P><I>Trick</I>: If you press 'D' to delete a message,
then you advance to the next message
without displaying it, so you can quickly go through a folder
to clean it up.
<P><B>Refiling Messages</B>.
To refile a message, right click on the destination folder.
This marks the current message(s) for refile to that folder,
and leaves the folder selected as the current target folder.
If the right target is already selected, then you can use the
Move button or type 'm' to refile the message
and advance to the next message.
<P><I>Trick</I>:
If you press 'M' to refile, you advance but do not display the next message.
<P><B>Undo</B>.
If you make a mistake, you can unmark a message
with the <I>Unmark (Undo)</I> message More... menu entry.  This operation
applies to the currently selected message(s), not necessarily to the
last message you marked for delete or refile.
If you want to change the disposition of a message, like refile
it instead of delete it, you do not need to unmark it first.
Just select it and take the new action.
<P><I>Trick</I>: use '-' (minus) to back up to a message you just marked,
and 'u' to unmark the message.
<P><B>Linking Messages</B>.
To link the current message(s) into a folder, hold the shift key down as
you right click the desination folder label.  If the right folder happens to
be selected as the target already, you can also use the Link button.
If you use Link frequently, you should adjust the Scan Listing
preferences item for <I>Advance after Link</I>.  If you turn this off,
then the current message remains selected after a Link, which makes it
easier to link a message into multiple folders.
<P><B>Auto Commit</B>.
The <I>Auto Commit</I> Scan Listing preferences item
will let <I>exmh</I> commit your changes
when you change folders, sort or pack a folder,
or quit the program.
Without auto commit, you will be propted to commit when
you try to take one of these actions
and have messages still marked for delete or refile.
In addition, auto commit will commit changes when you close
the main window.
<P><B>Implied Direction</B>.
The next message viewed after a Delete or Move is usually
the next message.  However, if you set the
<I>Implied Direction</I> preference item, then <I>exmh</I> will remember your
last Next or Prev action and move that direction after
a Delete or Move.  This means you can just as conveniently go
through a folder backwards as forwards, although it might catch
you by suprise.
<P><B>Skipping Marked Messages</B>.
The <I>skip marked msgs</I> preference item controls
whether Next and Prev take you to a message marked for delete or refile,
or whether you skip over these.  Remember the handy '-' key binding,
which takes you to the previous message even if it is marked.
<P><B>Changing Folders Automatically</B>.
When you are at the end of a folder, <I>exmh</I> will be ready to take
you to the next folder that has unseen messages in it.
You can just press Next, and it will automatically change folders
for you.  If you have marked messages, however, you will be reminded of
that.  At this point you can press the Commit button, or if you have auto-commit
enabled, then you can press the Next button again to trigger the commit and
folder change.  If you always want to be warned before an automatic
folder change, enable the <I>Next Guard</I> preference item.  With this
enabled you will have to click Next twice (or type 'n' twice) to
get the automatic folder change.  It will also tell you to which folder
it is about to change.
<P>The final twist on automatic folder changing is that,
by default, <I>exmh</I> will automatically
change back to your &quot;first&quot; folder if there are no more folders with
unseen messages in them.  
You can disable this feature with the 
<I>Cycle back to first</I> preference item.
The default Folder-Order profile component defines inbox to be the first folder,
so ordinarily you will change back there.
The Folder-Order profile component is described in the
<B><A HREF="exmh-custom.n.html">exmh-custom</A></B> man page.
<P><H3><A NAME="SENDING MAIL" HREF="#CONTENTS">SENDING MAIL</A></H3>
This section describes how to start a mail message.
The messages are created as templates in your drafts folder
and then your editor is opened on the draft.
The next two sections describe how to actually compose the message
when using the built-in editor or an external editor.
<P><B>Sending a New Message</B>.
Use the Send message button to create a new draft message.
This runs the MH <I>comp</I> command to set up the template for the
draft, so it is affected by your components file, if any,
and your comp profile entry, if any.
<P><B>Replying to a Message</B>.
The Reply... menu has two entries: <I>Reply to sender</I> and <I>Reply all</I>.
These use the MH <I>repl</I> command, so they are affected by your replcomps
file, if any, and your repl profile entry, if any.
The first entry uses <I>-nocc to -nocc cc</I>
so that the reply just goes to the sender and you,
while the other entry uses <I>-cc all</I> so that the reply goes to everyone
in the To and Cc headers of the original message.
There is also an entry that displays instructions for adding more
entries to the Reply... menu.  This is described in more detail
in the <B><A HREF="exmh-custom.n.html">exmh-custom</A></B> man page..
<P><B>Forwarding a Message</B>.
Use the Forward button to forward the current message, or messages.
This uses the MH <I>forw</I> command to set up the message, so it is affected
by your forwcomps file and your forw profile entry, if these exist.
<P><B>Using an Existing Message as a Template</B>.
You can use an existing message as a template for a new message by
using the <I>Use message as draft</I> menu entry under the message More...
menu.  In this case the message is copied into the draft folder first.
You will also use this menu entry if you have to go back into your
drafts folder to continue work on a message draft.
<H3><A NAME="THE BUILT-IN EDITOR" HREF="#CONTENTS">THE BUILT-IN EDITOR</A></H3>
<P>The built-in editor provides a handful of text editting commands
and several operations that affect the formatting of a mail message.
<P><B>Sending a Message</B>.
Usually all you need to do is fill in the
headers of your message, type in the message, and press the Send button.
When you start,
the cursor will be positioned at the end of the first empty header line,
or at the begining of the message body if, as with reply, all the headers
are already initialized.  When entering the headers, &lt;Tab&gt; will take
you to the next header line, and &lt;Double-Tab&gt; will position the cursor
at the start of the message body.
<P>The only important rule to remember about mail messages is that
the header and body are separated by a blank line.  In addition,
MH supports a header separator line of all dashes, ------.
<P><B>Saving a Draft</B>.
If you want to save a message draft and return to it later,
use the Save&amp;Quit button.
If you want to send a message but save it for use as another
draft, select the <I>Keep on Send</I> checkbox item under the
More... menu.  In this case, when you click Send the editor will
remain open and the message will remain in your drafts folder.
Otherwise the draft message is removed from the drafts folder
after it has been succesfully sent.
(Actually, it is renamed in the same fashion that <I>rmm</I>
renames deleted messages.)
If you quit <I>exmh</I> and you have drafts in progress, they
are automatically saved and remain in your drafts folder.
<P><I>Warning!</I> the Save button under the
More... just writes the editor's buffer to the file system.
It does not imply that the draft will remain after it is sent.
You probably want Save&amp;Quit or Keep on Send instead.
<P><B>Aborting a Draft</B>.
If you decide you do not want to send a message, you can delete it
by pressing the Abort button.  If you have not changed the initial
template it will be aborted immediately.  Otherwise it will
prompt you for confirmation.
<P><I>Trick</I>: a second click on the
Abort button is the same as clicking the OK button in the
confirmation dialog.
<P><B>Signatures</B>.
The editor supports signatures in two ways.  If you select Auto-sign
from the Simple Editor Preferences section, then your .signature
file will be appended to the message when you press the Send button.
Otherwise, you can use the Sign button to insert your .signature file
at the end of the message.
<P>If you have several files that match the pattern ~/.signature*,
then you will have a menu of signature options available under the
Sign... menu, which replaces the Sign button.
You can define the default choice with a Preference setting under
the Simple Editor section.
With auto-sign, the Sign... menu has a set of check box items that determine
which signature file will be used.  Otherwise, the menu simply selects
which signature you want to insert at the end of the message, and
the signature is inserted when you select the menu entry.
If you are composing a multipart MIME message, your signature is
added as another MIME part.
<P><I>Trick</I>: if your signature file has the execute permission set, then
exmh will try and execute it and use its output for the signature.
If you accidentally have the execute bit set, the error that occurs
may not be that clear.
<P><H3><A NAME="MAIL FORMATTING" HREF="#CONTENTS">MAIL FORMATTING</A></H3>
<B>Line Breaks</B>.
By default, you can just type in long lines and they will wrap at
word boundaries when the line gets too long.  This actually happens
twice, the first time by the Tk text widget when you enter text.
Unfortunately,  this doesn't actually insert newline characters, 
and it is done
based on the size of the window.  Therefore, the line breaking is done a second
time by <I>exmh</I> after you press the Send button.
The line length limit defaults
to 79, although you can change that in the Simple Edit Preferences section.
<P><I>Hint</I>:
If you change the line length,
you should also resize the editor window to match the
width (e.g. 72) so your message will look right as you type it in.
Set the following resource in your ~/.exmh-defaults
<BLOCKQUOTE><PRE>*Sedit*Text.width: 72
</PRE></BLOCKQUOTE>
<P><B>Changing Fonts</B>.
You can use the Text... menu to change the font of the selected text.
This promotes your message to a MIME content-type of text/enriched.
The encoding of these text looks is also done when you press the Send
button.  You may see the encoding after clicking Send
as a side-effect of the way this is implemented.
<P>The <I>Insert File...</I> menu entry is used to insert a file as-is,
with no MIME structure.  The file is inserted at the current insert point
in the editor.
<P>The <I>Insert @</I> button is used to insert the body of the message being
replied to.  This button is only enabled when you are replying to a message.
The body is formatted a little, just by prefixing each line of the message
body with a string.  The default is &quot;&gt; &quot;, and you can change this via
the Simple Editor Preferences section.
<P><I>Note</I>: it is apparently not
possible to define a repl prefix with leading spaces.  This is a side
effect of storing the prefix in the X resources database.
<P>The <I>Cite Selection</I> menu entry formats and inserts selected text.
It is assumed that the text is from the current message, and the
sender of that message is identified just before the inserted text.
You can use this feature to insert text from several different messages.
<P>The <B>PGP</B> menu provides access to the Pretty Good Privacy public
key system.  With this you can send messages with a digital signature that
certifies that you sent the message.  You can also encrypt and decrypt
messages with PGP.
A complete discussion of PGP is far beyond the scope of this
man page.  However, if you know PGP, you will find the PGP features of
<I>exmh</I> useful.
<P><I>Hint:</I>.  The <I>Insert PGP Keys</I> menu entry is hiding over in
the Sedit More... menu.  Use this to insert your public key or other
public keys into a mail message.  By default, only your keys are listed
in the key chooser.  Just type in part of the key ID of any key you want
to choose and matching keys are displayed.  Try '*' to list all keys.
<H3><A NAME="MIME FORMATTING" HREF="#CONTENTS">MIME FORMATTING</A></H3>
<P><I>Warning!</I>  The line-break formatting described above can
interact poorly with the formatting described next.
This is one of the roughest
spots in the <I>exmh</I> implementation.
For example, if
you include a file in your message that has important formatting,
like a Postscript file or some program code, you will want to disable
the line-break formatting.  You can do this by turning off
the <I>Format mail</I>
checkbox item under the More... menu.
<P>If you are familiar with MHN directives,
you can enter them into your
message.  In this case, you will want to select the 
<I>Attempt MHN</I> checkbox menu item under the More... menu.
Again, you will probably want to disable <I>Format mail</I> to make
sure that long MHN directives are not chopped into multiple lines
at the wrong place.
<P>You can create a multipart MIME message by using
the <I>Insert Part...</I> menu item.  This adds another part to your
message, promoting it to MIME content-type multipart/mixed if
necessary.
The first time you add a part,
you have the option of preserving the existing message
body or completely replacing it.
When the file is inserted you are asked to choose
its MIME content-type and content-transfer-encoding.
<P>The <I>Insert External...</I> menu entry is used to create a
MIME part of Content-Type message/external-body.  This is an indirect
reference to a file, which is either a local file or a file available
via anonymous FTP.  A dialog lets you
fill in the various parameters to the indirect reference.
For an anonymous FTP pointer, the <I>Site</I> is the internet host name
and the <I>Directory</I> and <I>File name</I> determine what file it is.
The <I>Transfer mode</I> is either &quot;text&quot; or &quot;image&quot;.
Use &quot;image&quot; to ensure that all 8 bits of each byte get transferred.
The <I>Description</I> is for the benefit of the reciever of the mail
message and should describe what the pointer references.
<P><I>Trick</I>: A file section dialog appears first, but this is not always
appropriate if you are making an external reference to a non-local FTP site.
Just hit cancel on the file selection dialog.  Then, when you enter the
file name, the content-type will be inferred from the name.  You can
always override the content-type if <I>exmh</I> guesses wrong.
<H3><A NAME="8 BIT CHARACTERS" HREF="#CONTENTS">8 BIT CHARACTERS</A></H3>
<P>The built-in editor supports 8-bit characters found in European
character sets.  Insert an 8-bit character by pressing the
Compose key and then two other keys to get the special character.
For example, Compose, then <B>e</B> and <B>'</B>
creates an accented e character.
All the vowels can be composed with ' ` and &quot; to get accents,
and there are several more bindings.
The complete table of compose key sequences is given by the
<I>Compose Key</I> entry in the Bindings... menu.
<P>When you compose a mail message that contains 8-bit characters you
need to be careful when sending it.  Some mail gateways do not
like 8-bit characters and will bounce the message or corrupt it.
The Quoted-Printable encoding will protect 8-bit characters.
The built-in editor will do this quoting for you if it detects
input of an 8-bit character.  The quoting is done when you press Send.
You can control whether or not this happens with a combination of the
Quote Printable menu entry (for per-message control) and the
Quoted Printable default preference item for the Simple Editor.
<P>The built-in editor handles the special coding required when
including 8-bit characters in mail headers.
<P>When you are replying to a message that contains 8-bit characters,
it may be encoded, too.
The Insert @ operation will first decode the message so that the
true 8-bit characters are inserted into the editor buffer.
This works better than the repl filters than include the message body.
If you use one of those, then you'll see the quoted-printable encoding
instead of the 8-bit character.
<H3><A NAME="USING ANOTHER EDITOR" HREF="#CONTENTS">USING ANOTHER EDITOR</A></H3>
<P>You can use your favorite editor with exmh by specifying an
<I>Editor command</I> in the Editor Support Preferences section.
This command has the complete pathname of the draft message
appended to it before it is executed.
Several examples of editor commands include:
<BLOCKQUOTE><PRE>sedit
mxedit
emacsclient &amp;
gnuclient &amp;
exmh-async emacs
exmh-async emacsclient
exmh-async gnuclient
exmh-async xterm -e vi
</PRE></BLOCKQUOTE>
The built-in editor is called <I>sedit</I>.
<I>Mxedit</I> and <I>tkvi</I> are Tcl-based editors that
know how to communicate with <I>exmh</I> about draft messages.
<I>emacsclient</I> is a program that is used to communicate with
a running <I>emacs</I> in order to get it to edit a specified file.
You will need the &quot;server.el&quot; package for emacs in order to set up
your emacs as a server for this arrangement.  There is more information
about this in the misc directory of the <I>exmh</I> distribution.
<I>emacsclient</I> can used in two ways.
If you can post the message directly from
emacs, then just use &quot;emacsclient &amp;&quot; and <I>exmh</I> forgets about the
draft and assumes <I>emacs</I> will take care of it.   Otherwise,
use the exmh-async wrapper that is described below.
<P>After the editor exits you are presented with a
<I>What Now</I> dialog that gives you several options:
Send, Abort, Save, Re-edit, and More...
Under the More.. menu you can apply MHN, run a spell checker,
or run the MH whom program to verify the addresses you have specified.
You can also invoke the built-in editor, <I>sedit</I>, in case you
want to use its MIME composition features.
<P>There is an &quot;Alternate Editor&quot; preference setting.
The built-in editor has a menu entry that saves the draft
and starts the alternate editor.  The What Now dialog also
has a menu entry to do this.
<P>In most cases you will use the <B>exmh-async</B> wrapper script
to run an external editor.  This is a short Tcl/Tk script that runs your
editor and then communicates with <I>exmh</I> when your editor exits.
This means the <I>exmh</I> user interface can remain active while you compose
your message.  You can even compose several messages at once.  You
will get a different <I>What Now</I> dialog for each message draft.
<P>The <B>exmh-async</B> wrapper tries to pass through all the arguments to
the editor command you specify.  However, a couple arguments are picked
up by the Tcl/Tk shell (wish).  Some tricks are played, however, so you can
protect arguments.  For example, the following works:
<BLOCKQUOTE><PRE>exmh-async xterm {-geo 80x40+0+0} -e vi {+c /: *$}
</PRE></BLOCKQUOTE>
This protects the -geo argument from exmh-async,
and it protects the complex format of the <I>vi</I> search command from
interpretation by the Tcl parser.
<P>As a final note, if you try to test exmh-async from the command line,
you need to execute it like this:
<BLOCKQUOTE><PRE>exmh-async exmh xterm -e vi &amp;
</PRE></BLOCKQUOTE>
The first argument is the name of the exmh application, which is needed
for the Tk-based communication between exmh-async and exmh.  This argument
does not appear when you define the command in Preferences.
<H3><A NAME="FILTERING MAIL" HREF="#CONTENTS">FILTERING MAIL</A></H3>
<P>One of the strong points for <I>exmh</I> is its support for mail filtering
systems that file messages into different folders as they are delivered.
The filtering is done by looking for patterns in the mail headers.
For example, you can put all the mail from your boss into one folder,
and all the mail from a mailing list or digets into another folder.
<I>Exmh</I> visually highlights the folders that have new mail.
This depends on the definition of
the Unseen-Sequence profile component, and the support of this
sequence by the mail filtering system.  Both the <I>slocal</I> and
<I>procmail</I> filtering systems use the <I>rcvstore</I> program
that takes care of these details.
The <I>inc</I> program also adds
messages to the unseen sequence, so even if you do not filter mail
the new messages in inbox will be highlighted by <I>exmh</I>.
<P>The standard filter used with MH is described in the mhook (or slocal)
man page.  Below is a quick summary of how it works.
You must maintain a file named ~/.maildelivery that has your
mail filter specifications.  The contents of the file are explained below.
If you can forward mail into programs at your site, then put this
into your .forward file to get filtering:
<BLOCKQUOTE><PRE>| /usr/local/mh/lib/slocal -user yourname
</PRE></BLOCKQUOTE>
<P>Alternatively, if you select the &quot;presort&quot; inc-style described below,
then exmh will run slocal for you each time you say Inc.
<P>If you use the <I>procmail</I> system, or perhaps supply your own,
use the MH rcvstore program to put messages into folders.
This program updates the unseen sequence so exmh can find the new mail.
Unfortunately, the rcvstore program is in the MH library, so you
must reference it with a long pathname, (e.g.,
/usr/local/mh/lib/rcvstore.)
<P>A sample .maildelivery filter file is shown below.
Note: this file is ignored if it has group or world write permission.
It uses the
<I>rcvstore</I> program to refile messages into different folders.
The first field is the header to match, and the second is
the value to look for.  This is a case-insensitive string.
The third column specifies an action.  In this case | says to
pipe the message into the program in the last column.
The fourth column provides limited decision making.  In this case
the ? means to try and match this filter if the message has not
already matched a previous filter.  The complete syntax of the
filters is given in the mhook man page.
<BLOCKQUOTE><PRE>subject exmh            |  ?  &quot;/usr/local/lib/mh/rcvstore +exmh&quot;
subject mxedit          |  ?  &quot;/usr/local/lib/mh/rcvstore +mxedit&quot;
subject book            |  ?  &quot;/usr/local/lib/mh/rcvstore +book&quot;
to      journalclub     |  ?  &quot;/usr/local/lib/mh/rcvstore +journal&quot;
from    footbag-digest&quot; |  ?  &quot;/usr/local/lib/mh/rcvstore +footlist&quot;
default -               |  ?  &quot;/usr/local/lib/mh/rcvstore +inbox&quot;
</PRE></BLOCKQUOTE>
<P><I>Warning!</I> If you use the .maildelivery file to filter messages,
you should always have a default action in the file that refiles the
messages into your inbox (or some catch-all folder).
Depending on your local configuration, there might not be
a good pre-default default action.
If there is no default action, mail that does not match a filter
will be discarded!
<P>A patch for the slocal program is distributed with exmh.
It adds an additional syntax to the maildelivery file that makes it
simpler to use rcvstore.  Use the + operation instead of | (pipe)
to specify a refile action.  The above example looks like this:
<BLOCKQUOTE><PRE>subject exmh            +  ?  &quot;exmh&quot;
subject mxedit          +  ?  &quot;mxedit&quot;
subject book            +  ?  &quot;book&quot;
to      journalclub     +  ?  &quot;journal&quot;
from    footbag-digest&quot; +  ?  &quot;footlist&quot;
default -               +  ?  &quot;inbox&quot;
</PRE></BLOCKQUOTE>
<P><B>Incorportating Mail</B>.
The filtering support affects the way you incorportate mail from
your system spool file.  <I>Exmh</I> supports several different styles:
<I>inbox</I>, <I>multidrop</I>, <I>presort</I>, <I>presortmulti</I> and <I>none</I>.
Use the <I>Incorporate Mail</I> preference section to choose one.
You may also want to enable periodic inc under the <I>Background Processing</I>
preferences section.
<DL>

<DT>
inbox
<DD>
Inc moves new messages into your inbox folder.  This is the default.
No filitering is done, but the inbox folder label will highlight when
new mail is incorporated into it, and unread messages will be
highlighted.

<DT>
none
<DD>
If you use your .forward file to process mail through an
external program in order to deliver messages into various folders,
then you don't need Inc in the user interface.  Selecting &quot;none&quot;
will eliminate the Inc button altogether and disable the internal
Inc procedure.
A background &quot;flist&quot; task is a nice complement to this setting so
that you can see what folders are getting mail.

<DT>
presort
<DD>
Inc moves new messages directly into various folders.
This is similar to what you may be doing already with
an external program.  This is built this into exmh in order
to elminate the need for an external program.
(I cannot use a .forward file at my site.)
The way presort works is to inc from your spool file
into a temporary folder (MyIncTmp).
Then, the MH filtering hook <I>slocal</I> is run
on each message.  In this mode, it is expected that
the filtering action is to put the message into
a folder.  You do this by specifying an action that
is to pipe the message into the MH <I>rcvstore</I> program.
See the MH man page for <I>mhook</I> for details.

<DT>
multidrop
<DD>
This assumes that you use POP or the 
MH maildelivery facilities (see <I>mhook</I>) to
put new messages into a set of dropboxes (inbox-like files).
You set up the correspondence between POP hosts and folders,
or between inbox files and folders with your ~/.xmhcheck file.
Inc moves messages from the POP server or dropboxes into folders.
The format of each line of ~/.xmhcheck file is shown below.
In the first case, the file name must be an absolute pathname
(i.e., has leading /).  In the second case (POP),
the third field is an optional user ID.

<DT>
presortmulti
<DD>
This is a combination of multidrop and presort.
Any dropbox that is associated with the MyIncTmp folder gets filtered
just as with presort.
</DL>
<P>The <B>.xmhcheck file.
The following shows the format
of the .xmhcheck file.  If the folder_name is MyIncTmp and you
use presortmulti inc style, then messages are filtered after they
are fetched from the dropbox.
<BLOCKQUOTE><PRE>folder_name   /filename/of/dropbox
or
folder_name   POP_hostname [POP_user_name]
</PRE></BLOCKQUOTE>
<H3><A NAME="FACES" HREF="#CONTENTS">FACES</A></H3>
<P>One of the more fun features of exmh is its ability to display the facesaver
bitmap of the person that sent you mail.
There are two sources of the bitmap images, either
the facesaver database or inline X-Face mail header fields.
These two sources can be used independently, but the main trick
is getting </B><I><A HREF="exmh.n.html">exmh</A></I> configured properly to use them.
<P><B>Facesaver Database</B>.
The exmh installer asks for two pieces of facesaver-related information:
the root directory of your faces installation and a search
path of faces directories.  This assumes that you have retrieved the
faces software and associated databases and installed them under
on directory, which is referred to as its root directory.
The default is /usr/local/faces.
Underneath this directory there is assumed to be one or more
directories that contain facesaver databases.
It is these directories that are named in the search path;
the names are relative to the root of the faces installation.
Typically there is facesaver, logos, and a local database,
which is called &quot;parc&quot; at my site.
The first two databases come from the facesaver.tar.Z and logos.tar.Z
files, respecitively.  The default values are:
<BLOCKQUOTE><PRE>Faces Root Directory /usr/local/faces
Faces Search Path    parc logos news facesaver
</PRE></BLOCKQUOTE>
<P>If you are setting up your own database, you need to understand how it
is organized.  It is easiest to demonstrate by example.  For myself,
welch@parc.xerox.com, my facesaver image is found as
com/xerox/parc/welch/face.xbm.
<I>Exmh</I> will look for this file under each of the directories named
by the faces search path.  The complete pathname might be
/usr/local/faces/parc/com/xerox/parc/welch/face.xbm.
If a bitmap is not found, then
the search algorithm trims off trailing components in an
effort to find a more general bitmap, typically a company or
organizational logo.  At your site, for example, you might only have
/usr/local/faces/logos/com/xerox/face.xbm, which contains the
Xerox corporate logo.
<P>If your <I>exmh</I> installation is not correct, or if you have a personal
faces database that the <I>exmh</I> maintainer doesn't know about,
then you can also override the install-time settings with the FACEPATH
environment variable.  This is a more traditional search path of
colon-separated directory names.
<P><B>X-Face headers</B>.
The X-Face header contains a compressed version of a facesaver bitmap,
which is a 48x48x1 (monochrome) bitmap.  The faces software comes with
some filters and scripts to generate these and decompress them.
The orignial purpose of the X-Face header is as a way of distributing
your facesaver image so that folks can update their database.
However, at the moment <I>exmh</I> just decompresses the bitmap and
displayes it.  It requires a Preference setting for the X-Face pipeline
for this to work.  If the pipeline is blank (the default), no processing
is done.  To decompress and display the header, use a pipeline setting
like this:
<BLOCKQUOTE><PRE>uncompface | ikon2xbm
</PRE></BLOCKQUOTE>
The uncompface program comes with the faces software.
It also has a version of <I>ikon2xbm</I>, but a faster version of this
program (a C program instead of some scripts) is distributed with
<I>exmh</I> in its misc directory.
Future versions of <I>exmh</I> will cache the results of decompressing
the X-Face line in a personal faces database, but in the current
version it just writes the file to /tmp/FACES.[pid].
If you are inspired you could add a Hook_MsgDisplay to stash this
file into a real facesaver database.
The <B><A HREF="exmh-custom.n.html">exmh-custom</A></B> man page describes hook procedures.
<H3><A NAME="SEARCHING IN EXMH" HREF="#CONTENTS">SEARCHING IN EXMH</A></H3>
There are several ways to search for things in exmh:
<DL>

<DT>
Find in message body
<DD>
Searching uses regular expression syntax, and case is ignored.

<DT>
Find in table of contents
<DD>
Searching uses regular expression syntax, and case is ignored.
This just searches over what you can see in the display.
If you select All, then all matching messages are selected.
<BR>
Hint: Use the &quot;List only selected messages&quot; folder More... menu entry
to get a listing that only contains the selected messages.

<DT>
Pick by attributes
<DD>
A general search (i.e, MH pick) over the messages in the folder.
This can run slowly because each message in the folder must be
processed.  You can match on various header fields by using the
&quot;Choose pick option&quot; menu in the Pick dialog.
If you choose more than one option, the messages must match all of them,
unless you use the Not and Or buttons to build up more complex criteria.
This interface is explained in more detail in the <I>exmh</I> man page.
<BR>
The &quot;Add to Sequence(s)&quot; option will add the matching messages to
an MH sequence.   Just pick a meaningful name for the sequence.
(Sequences are not supported well by exmh, yet.)
The &quot;Pick from Seq/msg(s)&quot; lets you narrow the search to a sequence
(e.g., &quot;unseen&quot; or something you defined yourself) or a set of messages
(e.g., last:100 for the last 100 messages in the folder).
<BR>
The &quot;All to Sel&quot; option determines if the matching messages are
added to the currently selected set, or if a new set is created.

<DT>
Glimpse full text
<DD>
Glimpse is a full text searching tool from the
University of Arizona.  Invoke the &quot;Glimpse full text&quot;
menu entry under the Search... menu
to bring up an interface to this tool.
You must first index your mail,
so to get started click &quot;index&quot; to build your indexes.
This process runs in the background, and the status of the
index process is displayed in the Glimpse log.
The storage overhead of the indexes is about 10% to 15%,
which is quite good for a full text index system.
<BR>
To search, enter a word in the search area and press &quot;Search&quot;.
The button changes to a &quot;Stop&quot; button, although the stop may
take a moment to take effect.  The search results are displayed in
the log.  Click on the message in the log and exmh will visit
that message.
<BR>
Glimpse supports approximate pattern matching, so under the Opts...
menu you can choose how many errors are allowed in a word match.
You can also control if the search is case sensitive or whole word.
<BR>
Exmh creates one glimpse index per mail folder.  These are stored
under the ~/Mail/.glimpse directory.  This lets you limit the
search to the current folder, or to the current folder and its
subfolders.
<BR>
To update the index, just press index again.  If a folder has not changed
then the index is not rebuilt.  While Glimpse has an incremental
reindex feature, exmh does not use it.  There appear to be bugs in it.
<BR>
For more information about Glimpse, see this URL:
http://glimpse.cs.arizona.edu:1994/
</DL>
<H3><A NAME="TIPS" HREF="#CONTENTS">TIPS</A></H3>
<P><B>Background Processing</B>.
You can set up <I>exmh</I> to periodically
incorporate mail (i.e., <I>inc</I>) for you.
If you already do this via an external agent, then you should
have <I>exmh</I> periodically  check for
new mail in your folders, which is the <I>flist</I> action.
The folder highlighting and icon feedback
work best with <I>inc</I> and <I>flist</I>.
You can also have it periodically
run <I>msgchk</I> or count messages in your spool file, but the
disadvantage of doing this is that
there is no audible or icon feedback when it sees mail waiting in
your spool file.  Instead, there is just a status message that you might
not notice.  Choose what background action is taken and how
frequently it is done with the Background Processing preferences section.
<P><B>Scan Caches</B>.
<I>Exmh</I> maintains a cache of the scan output for each folder.
If you run MH programs from the command line it can invalidate the
cache.  You can manually update the cache with the <I>Rescan Folder</I>
operation under the Folder More... menu.  There are also menu entries that
update scan caches for all your folders.  These run in the background
so the user interface can remain active.
The scan cache is compatible with <I>xmh</I>.
<P><B>Performance</B>.
If you want message display to go as fast as possible, do three things.
1) Disable the X-Face pipeline command so you do not try to decompress
X-Face headers.
2) Disable the facesaver database, which is distinct from the X-Face pipeline.
Actually, this is only slow on the first message you receive from 
a new email address.  The pathname of the bitmap image that corresponds
to that address is cached to avoid the expensive lookup the next time
you view a message from that address.
3) Disable the Graphic Separator in the MIME preferences.  That uses
a 3D line of text instead of a blank line, and it takes a bit longer
to display.
<P><I>exmh</I> does not like really big folders.  If you have more than
several hundred messages in a folder you will notice that folder
change times get pretty slow.  Take this as a nudge to reorganize
things into subfolders.  Every three months I move saved messages
into subfolders with names like 94Q2, 94Q3, etc.
I understand the performance problems involved, and plan to
overhaul some of the exmh internals to improve this situtation.
In the meantime...
<P>Really big folders with lots of messages in the unseen sequence are
really slow.  Use the &quot;Catch-up unseen&quot; folder More... operation to clear
the unseen sequence.  You probably want to do this when you import mail
from other systems mailboxes.
<P><B>More Keyboard Stuff</B>.
If you really like using the keyboard instead of the mouse,
you can change folders, set the target folder, and select messages
by number with keyboard commands.
When you
type plus ('+'), focus warps to the status line so you can
type in the name of a folder.  In this mode,
a plus cycles between choosing the target folder for moves or
a folder to change into.  &lt;space&gt; does folder name completion,
&lt;Return&gt; accepts the folder name, and &lt;Control-c&gt; cancels the folder
selection.  If you start by typing a number (not plus), that message
is selected, but it is not displayed until you press &lt;Return&gt;.
<H3><A NAME="INSTALLATION" HREF="#CONTENTS">INSTALLATION</A></H3>
Installation is done via the exmh.install script.  Invoke it as:
<BLOCKQUOTE><PRE>    wish -f ./exmh.install
</PRE></BLOCKQUOTE>
This puts up a dialog box that lets you patch various file system
specific pathnames and enable or disable features that your
system cannot support (e.g., facesaver, sound).
Read the info in the dialog box and enter the appropriate file system
pathnames.
Click <B>Patch</B> to sed the exmh.MASTER script and create
the main exmh file, then click <B>TclIndex</B> to generate the library index,
and click <B>Test</B> to try it out.
If you are satisfied,
click <B>Install</B> to copy the main script and the supporting
libraries into their destination directories.
<P>Note: the &quot;Script Library&quot; and the &quot;Install lib directory&quot;
are usually the same place.  The script library is the run-time value
of the library directory, while the install lib directory is the
install-time value.  During the Test run, the Script
library is automatically set to &quot;./lib&quot; so you can run without installing.
When you hit
the Patch button, some consistency checks are done and a relative
pathname will trigger a warning.  You can ignore this when you are
testing, but you should install a working copy that only references
absolute pathnames.
<P>NOTE: Currently you cannot leave the script library where it gets
unpacked.  The installation procedure really assumes that
the Install Directory is a different place than ./lib.
You'll get an error during the install, and in fact,
background.tcl will get removed as it tries to copy it
onto itself.
<P>The original motivation for install-directory vs script-directory was
AFS installations in which writeable volumes have different names than
their read-only, replicated volumes.  In this case you want to install
to the writeable volume, but run from the read-only replicas.
<P>If you get the Script library wrong, it will be manifest as
a Tcl error about an undefined procedure named Exmh.
<P>Upon startup, the install will look for ../*/.exmhinstall so you
can retrieve configuration information from previous versions
installed in peer directories.
You can also maintain configuration information via the &quot;Conf&quot; button,
which looks for ../*/.exmhinstall*.
<P>A patch to the MH <B>slocal</B> program is included as &quot;misc/slocal.patch&quot;.
The patch adds a &quot;+&quot; syntax to your .maildelivery file that
results in messages being filed into a folder by means
of the MH <B>rcvstore</B> library program.  You can keep your patched copy of
<B>slocal</B> distinct from the installed version because <I>exmh</I>
runs <B>slocal</B> directly.  The installation dialog lets you set
up the pathname for your custom copy.
<P>There is also a patch for the MH folder.c program.
The patch makes &quot;folders -recurse&quot; run much faster because
it avoids directories that do not have subfolders.
The patches apply to MH 6.7.
<H3><A NAME="UPGRADING WITH PATCHES" HREF="#CONTENTS">UPGRADING WITH PATCHES</A></H3>
<P>There are usually patch files to go between releases (e.g. from 1.6.4 to 1.6.5).
The best way to use these patches is to patch your 1.6.4
<B>source</B>directoryand then reinstall using the procedure described above.
This has the benefit of fixing the version number in the main script.
Finally, this is how the patches are generated, so if you apply them
to your installed directories they might not work properly.
<H3><A NAME="TK SEND AND XAUTHORITY" HREF="#CONTENTS">TK SEND AND XAUTHORITY</A></H3>
<P>The thing that causes the most trouble with new exmh users is the
Tk send facility and the Xauthority mechanism.  This matters if
you use the detached background process or the <B>exmh-async</B>
editor wrapper.
<P>The send facility is used for communication between Tk interpreters.
The most recent releases of Tk require that you have your X environment
set up to use Xauthority.  The details for doing this vary from
X server to X server.  The basic idea is that, <I>before</I>
you start the X server you create a file, ~/.Xauthority, that contains
a random bit string.  The file is only readable by your user account.
You pass the name of this file to the X server when you start it up.
Then, each time a window is created, the client programs read this
file and pass the random bit string to the server.  The idea is that
only programs run from your account can read the file to get the
right bit string.  For the details, read about the -auth or -xauth
argument to your server.
<P>Even if you get this right, you must also make sure that the old
<I>xhost</I> security system is not used.  That is, the xhost list must
be empty.  To do this, run the following command:
<BLOCKQUOTE><PRE>xhost -
</PRE></BLOCKQUOTE>
<P>With release 1.6.4 and later you can have exmh police your xhost list.
It can clear out any hosts that creep onto the list.  This typically
happens with wrapper scripts used to run other programs.  If you use
Xauthority properly, the additional use of xhost is completely bogus
and insecure.  Not to mention that it breaks Tk send.  Under
Background Processing preferences, select &quot;Keep xhost list clear&quot;.
<P>The other alternative is to recompile the Tk library with the
-DTK_NO_SECURITY compile flag.  This is appropriate if your X server
just cannot do the Xauthority protocol, or you think your environment
is safe enough.  That is, you don't have to worry about other users
popping up rogue windows on your display.
<H3><A NAME="MORE INFORMATION" HREF="#CONTENTS">MORE INFORMATION</A></H3>
You are welcome to send bug reports and comments about exmh
to the following email address: Brent.Welch@Sun.COM.
<P>Exmh is available via FTP on parcftp.xerox.com in the pub/exmh directory.
<P>MH is available as pub/mh/mh-6.8.tar.Z from ftp.ics.uci.edu
<P>Tcl and Tk are available in the ucb/tcl directory on ftp.cs.berkeley.edu
<P>Expect is available as pub/expect/expect.tar.Z from ftp.cme.nist.gov
<P>Metamail (for MIME support) is available in thumper.bellcore.com:pub/nsb
<P>Faces are available from cs.indiana.edu:/pub/faces.
The individual databases are located under /pub/faces/picons/db,
and they include .xbm, .xpm, and .gif representations.
I recommend gettings domains.tar.Z, misc.tar.Z, and unknown.tar.Z.
If you have room, also get usenix.tar.Z and users.tar.Z.
<BLOCKQUOTE><PRE>Database           Date            Bytes       Description
domains.tar.Z      95.12.06        1356923     Company, Country and Univ Logos
misc.tar.Z         95.11.12        58991       Things like root and postmaster
news.tar.Z         95.12.06        372765      For newsgroup (not mail)
unknown.tar.Z      95.11.12        19074       Default images
usenix.tar.Z       95.04.13        19472394    The USENIX database
users.tar.Z        95.12.08        2012905     Other personal faces
weather.tar.Z      95.11.12        146329      For weather (not mail)
</PRE></BLOCKQUOTE>
Glimpse is available from the University of Arizona:
http://glimpse.cs.arizona.edu:1994/
or ftp://cs.arizona.edu/glimpse
<P>To get PGP, send mail to pgp-bugs@mit.edu.
<H3><A NAME="FILES" HREF="#CONTENTS">FILES</A></H3>
<P>Your mail is collected under a directory usually called Mail.
If you are using another mail system that uses that directory,
set your Path MH profile entry to something else.
The current folder and other
information is stored in a file named &quot;context&quot; in your Mail directory.  
Your mail is stored as one message per file in directories that
correspond to your mail folders.  Nested folders are supported, up to
the maximum depth supported for directories in your file system.
Information about message sequences is kept in a file named .mh_sequences
in each mail folder directory.  The current message
is in the sequence named &quot;cur&quot;, for example.  New mail is in
the sequence named &quot;unseen&quot;.  You can define more sequences,
up to 10 per folder,
but exmh doesn't support them very well.
<P>Exmh adds a few more files for its own purposes.
It uses an alternate context stored in .exmhcontext so
that command line MH programs and exmh do not interfere
with each other.
The .folders file lists all the mail folders you have.
Each folder has a .xmhcache file that has a cache of
the scan output.

<H3><A NAME="SEE ALSO" HREF="#CONTENTS">SEE ALSO</A></H3>
<A HREF="exmh.n.html">exmh</A>, <A HREF="exmh-ref.n.html">exmh-ref</A>, <A HREF="exmh-custom.n.html">exmh-custom</A>, mh
<H3><A NAME="AUTHOR" HREF="#CONTENTS">AUTHOR</A></H3>
Brent.Welch@Sun.COM
<H3><A NAME="THANKS" HREF="#CONTENTS">THANKS</A></H3>
To Xerox PARC/CSL, for supporting this work initially,
to Sun Microsystems Laboratories for continuing the support,
and to all the <A HREF="exmh.n.html">exmh</A> users that contributed ideas and code.

<HR>
[ <A HREF="../exmh/contents.html">exmh</A> ]
</BODY></HTML>
