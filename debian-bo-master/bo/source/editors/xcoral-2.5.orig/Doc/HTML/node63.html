<!DOCTYPE HTML PUBLIC "-//W3O//DTD W3 HTML 2.0//EN">
<!- Converted with LaTeX2HTML 0.6.4 (Tues Aug 30 1994) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds ->
<P>
<HEAD>
<TITLE> C-C++ mode</TITLE>
<meta name="description" value=" C-C++ mode">
<meta name="keywords" value="xcoral">
<meta name="resource-type" value="document">
<meta name="distribution" value="global">
</HEAD>
<BODY><P>
 <BR> <HR><A NAME=tex2html1519 HREF="node64.html"><IMG ALIGN=BOTTOM ALT="next" SRC="./next_motif.gif"></A> <A NAME=tex2html1517 HREF="node62.html"><IMG ALIGN=BOTTOM ALT="up" SRC="./up_motif.gif"></A> <A NAME=tex2html1511 HREF="node62.html"><IMG ALIGN=BOTTOM ALT="previous" SRC="./previous_motif.gif"></A> <A NAME=tex2html1521 HREF="node1.html"><IMG ALIGN=BOTTOM ALT="contents" SRC="./contents_motif.gif"></A> <A NAME=tex2html1522 HREF="node126.html"><IMG ALIGN=BOTTOM ALT="index" SRC="./index_motif.gif"></A> <BR>
<B> Next:</B> <A NAME=tex2html1520 HREF="node64.html"> default mode</A>
<B>Up:</B> <A NAME=tex2html1518 HREF="node62.html"> mode.sc</A>
<B> Previous:</B> <A NAME=tex2html1512 HREF="node62.html"> mode.sc</A>
<BR> <HR> <P>
<H2><A NAME=SECTION030151000000000000000> C-C++ mode</A></H2>
<P>
	 In <i>C-mode</i> and <i>C++mode</i> the key bindings<A NAME=1022>&#160;</A> defined by <b>Smac</b> are:
<P>
	 <UL>	    <LI> <i>tab</i> to reindent the current line. Made by the 
	    <i>c<code>\_</code>indent<code>\_</code>line</i> function.
<P>
	    <LI> <i>return</i> to insert a <i>newline</i> and indents the
	    new line according to previous lines. Made by the  <i>c<code>\_</code>indent<code>\_</code>line</i> function. It may be necessary to type
	    <i>tab</i> after some characters modifying the line context (for
	    instance after <i>case</i>).
<P>
	    <LI> `}', `)' and `]' to insert the character, blink the
	    corresponding `{', `(' and `[', and last reindent the
	    current line. Made by the function named:
<P>
	    <i>c<code>\_</code>insert<code>\_</code>blink<code>\_</code>matched<code>\_</code>char<code>\_</code>and<code>\_</code>indent</i>.
<P>
	    <LI> `{' and `:' to insert the character and reindent the
	    current line. Made by the function <i>c<code>\_</code>indent<code>\_</code>line</i>.
<P>
	    <LI> <i>Esc a</i> to go to the beginning of the current or
	    previous definition. The beginning of a definition is
	    supposed to be a line whose first character is not one of
	    <code>#, }</code>, <i>space, tab</i> and <i>newline</i>, or whose
	    first two characters are not <code>//</code> or <code>/*</code>, and
	    whose previous line last char (before <i>newline</i>) is not
	    <code>\</code>. Obviously the beginning of the buffer is also
	    considered to be a definition beginning. Made by the function
	    <i>goto<code>\_</code>beginning<code>\_</code>of<code>\_</code>c<code>\_</code>definition</i>.
<P>
	    <LI> <i>Esc f</i> goes to the end of the current or next
	    expression (skipping comments). Before a <i><code>{,(,[</code></i>
	    or <i><code>&quot;</code></i> it goes after the corresponding <i><code>},),]</code></i> or <i><code>&quot;</code></i>, else it goes to the end of the
	    following word. A word contains alphabetic characters,
	    digits and underscore. Made by  the <i>forward<code>\_</code>c<code>\_</code>form</i>
	    function.
<P>
	    <LI> <i>Esc b</i> goes to the beginning of the current or
	    previous expression (skipping comments). Made by  the <i>backward<code>\_</code>c<code>\_</code>form</i> function.
<P>
	    <LI> <i>Esc d</i> deletes the end of the current
	    expression, or the next expression (skipping comments).
	    Made by  the <i>delete<code>\_</code>next<code>\_</code>c<code>\_</code>form</i> function.
<P>
	    <LI> <i>Esc delete</i> or <i>Esc backspace</i> deletes the
	    beginning of the current expression or the previous
	    expression (including comments). Made by  the function named:
<P>
	    <i>delete<code>\_</code>previous<code>\_</code>c<code>\_</code>form</i>.
<P>
	    <LI> <i>Esc i</i> indents the current region. If you put a
	    mark at the beginning of the buffer and go to the end
	    before you type <i>Esc i</i>, all the buffer will be reindented
	    (which is not immediate when the buffer is large). Made by
	    the <i>c<code>\_</code>indent<code>\_</code>region</i> function.
<P>
	 </UL>
<P>
	 Indentation<A NAME=1074>&#160;</A> is parameterized by the following global
	 variables:
<P>
	 <UL>	    <LI> <i>int c<code>\_</code>indent<code>\_</code>in<code>\_</code>comment</i> (default
	    value 3)
<P>
	    <LI> <i>int c<code>\_</code>indent<code>\_</code>in<code>\_</code>string</i> (default
	    value 0)
<P>
	    <LI> <i>int c<code>\_</code>indent<code>\_</code>in<code>\_</code>parenthesis</i>
	    (default value 1)
<P>
	    <LI> <i>int c<code>\_</code>indent<code>\_</code>in<code>\_</code>bracket</i> (default
	    value 1)
<P>
	    <LI> <i>int c<code>\_</code>indent<code>\_</code>in<code>\_</code>brace</i> (default
	    value 2)
<P>
	    <LI> <i>int c<code>\_</code>indent<code>\_</code>in<code>\_</code>statement</i> (default
	    value 2)
<P>
	    <LI> <i>int c<code>\_</code>arg<code>\_</code>decl<code>\_</code>indent</i> (default
	    value 4)
<P>
	 </UL>
<P>
	 The indentation rules for an empty line, for instance when
	 you type a <i>return</i> at the end of a line, are (take a deep
	 breath):
<P>
	 <UL>	    <LI> In a <i>comment</i>, indentation is set to the previous
	    (not empty or only containing spaces and tabs) line
	    indentation, except for the second line of comments,
	    whose indentation is the `<code>/*</code>' position plus the
	    absolute value of <i>c<code>\_</code>indent<code>\_</code>in<code>\_</code>comment</i>. A
	    comment begins with `<code>/*</code>' and ends with `<code>*/</code>',
	    and a <i>C++</i> comment with `<code>//</code>' and ends at the end of
	    line.
<P>
	    <LI> In a <i>string</i>, if <i>c<code>\_</code>indent<code>\_</code>in<code>\_</code>string</i> is less than 0 the
	    indentation is the string beginning position minus <i>c<code>\_</code>indent<code>\_</code>in<code>\_</code>string</i> (so plus its absolute
	    value), otherwise indentation equals <i>c<code>\_</code>indent<code>\_</code>in<code>\_</code>string</i>.
<P>
	    <LI> In a <i>parenthesis</i>, indentation equals `('
	    position plus absolute value of the variable <i>c<code>\_</code>indent<code>\_</code>in<code>\_</code>parenthesis</i>.
<P>
	    <LI> In a <i>bracket</i>, indentation equals `[' position
	    plus absolute value of the variable <i>c<code>\_</code>indent<code>\_</code>in<code>\_</code>bracket</i>.
<P>
	    <LI> In a <i>block</i> (between <code>{}</code>), all depends
	    on the previous character (skipping <i>space, tab,
	    newline and comments</i>):
<P>
	    <UL>	       <LI> If it is `{' (so you are at the beginning of the
	       block), indentation is set to the `{' position plus the
	       absolute value of <i>c<code>\_</code>indent<code>\_</code>in<code>\_</code>brace</i>.
<P>
	       <LI> If it is `}', indentation is set to the indentation
	       of the corresponding `{' or of the expression preceding
	       it.
<P>
	       <LI> If it is <code>`.'</code> or <code>`;'</code>, indentation
	       is set to the previous expression indentation.
<P>
	       <LI> If it is `)' or `]', indentation is set to
	       beginning expression indentation plus the absolute value
	       of <i>c<code>\_</code>indent<code>\_</code>in<code>\_</code>statement</i>.
<P>
	       <LI> Otherwise the character line indentation plus the
	       absolute value of the variable
	       <i>c<code>\_</code>indent<code>\_</code>in<code>\_</code>statement</i>.
<P>
	    </UL>
<P>
	    <LI> At top level, all depends on the previous
	    character (skipping <i>space, tab, newline and
	    comments</i>):
<P>
	    <UL>	       <LI> If it is `}', indentation is set to 0.
<P>
	       <LI> If it is `)', indentation is set to <i>c<code>\_</code>arg<code>\_</code>decl<code>\_</code>indent</i> because it is probably
	       the parameters of a function written with the old
	       syntax.
<P>
	       <LI> If it is <code>`;'</code>, indentation is set to
	       previous expression indentation.
<P>
	       <LI> Otherwise, in an expression, indentation is set to
	       the absolute value of <i>c<code>\_</code>indent<code>\_</code>in<code>\_</code>statement</i>,
	       elsewhere 0.
<P>
	    </UL>
<P>
	 </UL>
<P>
	 The indentation rules, when you indent a non empty line (for
	 instance when you reindent a line with a <i>tab</i>) depend on
	 the first character(s) (jumping space, <i>tab, newline</i> and
	 comments) (cheer up <code>!</code>, we're almost there):
<P>
	 <UL>	    <LI> If it is `<code>#</code>', indentation is set to 0.
<P>
	    <LI> If it is `<code>*</code>' and the next character is
	    `<code>/</code>', so you close a comment, indentation is set
	    to the indentation of the `<code>/*</code>'
<P>
	    <LI> If it is a `{' out of a block, indentation is set to 0.
<P>
	    <LI> Otherwise in a block:
<P>
	    <UL>	       <LI> If it is `}', indentation is set to the indentation
	       of the corresponding `{' or of the expression preceding
	       it.
<P>
	       <LI> If it is '<i>case</i>' or '<i>default</i>', indentation
	       is set to the corresponding <i>switch</i> indentation.
<P>
	       <LI> If it is <code>`:'</code>, indentation is set to the
	       indentation of the corresponding <code>`?'</code>.
<P>
	    </UL>
<P>
	 </UL>
<P>
	 As you can see, it is rather complicated, nevertheless
	 some cases are not taken into account and need 
	 braces. For instance it is the case for nested <i>if</i> like:
<P>
<P><IMG ALIGN=BOTTOM SRC="_12027_tabular1157.gif"><P>
<P>
are poorly indented:
<P>
<P><IMG ALIGN=BOTTOM SRC="_12027_tabular1162.gif"><P>
<P>
but the indentation is correct with braces:
<P>
<P><IMG ALIGN=BOTTOM SRC="_12027_tabular1167.gif"><P>
<P>
	 Of course the quantity of code interpreted by <b>Smac</b> when you
	 type a simple <i>return</i> is rather disturbing, but don't be
	 afraid, <b>Smac</b> is a good boy.
<P>
      <BR> <HR><A NAME=tex2html1519 HREF="node64.html"><IMG ALIGN=BOTTOM ALT="next" SRC="./next_motif.gif"></A> <A NAME=tex2html1517 HREF="node62.html"><IMG ALIGN=BOTTOM ALT="up" SRC="./up_motif.gif"></A> <A NAME=tex2html1511 HREF="node62.html"><IMG ALIGN=BOTTOM ALT="previous" SRC="./previous_motif.gif"></A> <A NAME=tex2html1521 HREF="node1.html"><IMG ALIGN=BOTTOM ALT="contents" SRC="./contents_motif.gif"></A> <A NAME=tex2html1522 HREF="node126.html"><IMG ALIGN=BOTTOM ALT="index" SRC="./index_motif.gif"></A> <BR>
<B> Next:</B> <A NAME=tex2html1520 HREF="node64.html"> default mode</A>
<B>Up:</B> <A NAME=tex2html1518 HREF="node62.html"> mode.sc</A>
<B> Previous:</B> <A NAME=tex2html1512 HREF="node62.html"> mode.sc</A>
<BR> <HR> <P>
<BR> <HR>
<P><ADDRESS>
<I> Lionel Fournigault <BR>
Mon Mar  6 13:33:34 MET 1995</I>
</ADDRESS>
</BODY>
