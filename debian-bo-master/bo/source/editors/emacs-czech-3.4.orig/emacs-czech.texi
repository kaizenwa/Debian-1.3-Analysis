\chyph
\def\uvv#1{\char"FE\relax#1\char"FF{}}
\input cztexinfo
@c $Id: emacs-czech.texi,v 3.4 1997/02/27 09:57:14 pdm Exp $
@c %**start of header
@setfilename emacs-czech.info
@settitle Czech Support for Emacs
@set version 3.4
@set years 1995, 1996, 1997
@setchapternewpage off
@c @syncodeindex fn vr
@c %**end of header

@ifinfo
This file documents Czech support for Emacs

Copyright @copyright{} @value{years} Milan Zamazal

Permission is granted to make and distribute verbatim
copies of this manual provided the copyright notice and
this permission notice are preserved on all copies.

@ignore
Permission is granted to process this file through TeX
and print the results, provided the printed document
carries a copying permission notice identical to this
one except for the removal of this paragraph (this
paragraph not being relevant to the printed manual).
@end ignore
@end ifinfo

@iftex
@afourpaper
@end iftex
@tex
@tolerance 10000
@end tex
@finalout

@titlepage
@title{Emacs Czech}
@subtitle{Podpora èe¹tiny pro Emacs}
@subtitle{Verze @value{version}}
@author Milan Zamazal
@page
@vskip 0pt plus 1filll
Copyright @copyright{} @value{years} Milan Zamazal

Permission is granted to make and distribute verbatim
copies of this manual provided the copyright notice and
this permission notice are preserved on all copies.
@end titlepage

@c -----***** Konec úvodních hlavièek *****-----


@node Top, Úvodem, (dir), (dir)
@comment  node-name,  next,  previous,  up
@top Podpora èe¹tiny pro Emacs

@ifinfo
This manual describes the package @samp{emacs-czech}, version @value{version}.

Most of the following text is in Czech language.  If you are interested in it
and you don't understand Czech, contact me, @xref{Author}.  You may also found
some information at the beginning of the source files, especially
@file{czech.el}.

@xref{Copying and warranty}, for information about copying and warranty.
@end ifinfo

@menu
* Úvodem::                      Proè @samp{emacs-czech}, co umí a co ne.
* Novinky::                     Co se zmìnilo a co je nového.
* Instalace::                   Návod k instalaci.
* Nejjednodu¹¹í konfigurace::   Jak to jednodu¹e pou¾ít a o více se nestarat.

* Konfigurace::                 Toto si prosím pøeètìte pøednostnì.
* Klávesnice::                  Konfigurace klávesnice.
* Psaní èeských textù::         Pou¾ití èeské klávesnice.
* Konvertory::                  Konverze znakových sad.
* Tøídìní::                     Pseudoèeské tøídìní.
* Messages::                    Èeské maily, newsy s Gnusy.
* Rùzné::                       Ostatní funkce.

* Nedostatky a chyby::          Co nefunguje, jak by mìlo.
* FAQ::                         Èasto pokládané otázky.
* Index kláves::                Seznam v¹ech klávesových pøíkazù.
* Index promìnných a funkcí::   Seznam v¹ech promìnných a funkcí.

* Èe¹tina a UN*X::              Stav podpory èe¹tiny v UN*Xu.
* Pojïme psát èesky!::          Pøe¾ije "cestina" rok 2000?

* Author::                      O autorovi a jeho spolupracovnících.
@end menu


@c ***** Úvod *****

@node Úvodem, Novinky, Top, Top
@comment  node-name,  next,  previous,  up
@chapter Úvodem

Tento balík nabízí základní funkce nutné pro pohodlnou práci s èe¹tinou v
interaktivním výpoèetním prostøedí Emacs.  Je urèen pro pou¾ití v grafickém
rozhraní X Window System, i kdy¾ vìt¹inu funkcí lze bez problémù pou¾ívat i na
textových terminálech nebo v NT verzi Emacsu.  Vy¾adován je Emacs verze alespoò
19.30 nebo XEmacs verze 19.14; pro zcela bezproblémovou funkci Emacs 19.31 v
unixové verzi.

Je zde obsa¾ena zejména podpora pro zobrazování èeských znakù, jejich syntaxi,
èeskou klávesnici, konverze kódování, Gnus a jednoduché tøídìní.

Poznámka: @emph{XEmacs není Emacs v Xové podobì, nýbr¾ jiný druh GNU Emacsu};
Emacs spu¹tìný v Xech s menu, barvami a my¹í je stále Emacs.  V¹ude, kde se v
tomto dokumentu hovoøí o Emacsu, míní se tím v¹echny tøi podporované verze GNU
Emacsu (Emacs, Emacs NT, XEmacs), není-li výslovnì øeèeno jinak.

@menu
* Motivace::                    Proè jsem stvoøil vlastní podporu.
* Co to umí a co ne::           Jakými vlastnostmi disponuje.
* Budoucnost::                  Bude se @file{czech.el} dále vyvíjet?
* Copying and warranty::        Kopírování a záruka.
@end menu


@node Motivace, Co to umí a co ne, Úvodem, Úvodem
@comment  node-name,  next,  previous,  up
@section Historie

Jsem zavilým pøíznivcem GNU Emacsu a potrpím si na psaní textù èesky
(tj. nikoliv
@ifinfo
"cesky").
@end ifinfo
@iftex
@uv{cesky}).
@end iftex
Proto potøebuji solidní èeskou podporu, která mi
umo¾òuje soustøedit se na to, co pí¹u a ne jen neustále nará¾et na drobná, leè
nepøíjemná omezení vyplývající z mé nechuti psát bez háèkù a èárek.

Vyzkou¹el jsem minimálnì tøi rùzné podpory èe¹tiny pro Emacs, ale coby pomìrnì
nároèný u¾ivatel jsem ani s jednou z nich nebyl zcela spokojen.  Proto¾e, jak
známo, v Emacsu lze udìlat v¹echno (pøípadné pochybovaèe odkazuji na diskusní
skupinu @samp{alt.religion.emacs}), rozhodl jsem se napsat podporu vlastní,
která bude splòovat mých deset základních po¾adavkù:

@enumerate
@item
Zobrazení 8-bitových znakù.
@item
Nastavení èeských fontù.
@item
Správná vzájemná konverze malých a velkých (èeských) písmen.
@item
Èeská klávesnice s mrtvou klávesou.
@item
Pøi zapnuté èeské klávesnici mo¾nost psaní èísel na numerickém bloku.
@item
Pùvodní (pøedefinované) klávesy stále dostupné pøes mrtvou klávesu.
@item
Správná funkce i v overwrite modu.
@item
Pøinejmen¹ím mo¾nost zapnutí èeské klávesnice v minibufferu.
@item
Èeská klávesnice lokální vzhledem k bufferùm.
@item
Èeská klávesnice v @samp{Isearch} modu.
@end enumerate

Podaøilo se mi splnit v¹echny tyto po¾adavky a postupem èasu byl program
roz¹íøen o øadu dal¹ích funkcí.  Dnes u¾ není èeská klávesnice jedinou hlavní
funkcí programu; balík by mìl slou¾it jako komplexní podpora pro zpracování
èeských textù v Emacsu.


@node Co to umí a co ne, Budoucnost, Motivace, Úvodem
@comment  node-name,  next,  previous,  up
@section Co to umí, co ne a proè

Zaènìme tím, co program umí:

@itemize @bullet
@item
Splòuje v¹ech deset v pøedchozím odstavci uvedených po¾adavkù.
@item
Dává mo¾nost volby rùzné míry globálního èi lokálního pøepínání klávesnic.
@item
Minibuffery a @samp{Isearch} dìdí druh klávesnice z volajícího bufferu.
@item
Má pøeddefinované dvì èeské klávesnice, ale umo¾òuje i nadefinovat si vlastní
rozlo¾ení kláves.
@item
Mo¾nost pøedefinování kláves @kbd{M-1} a¾ @kbd{M-0}.
@item
Vlo¾ení libovolného ISO-8859-2 znaku.
@item
Korekce slov napsaných na ¹patnì pøepnuté klávesnici.
@item
Rozpoznání èeského textu.
@item
Podporuje konverze znakových sad vèetnì mo¾nosti vyu¾ití @file{.enc} souborù z
balíku @samp{cstools/cstocs}.
@item
Automatické konverze textù psaných v jiném ne¾ ISO-8859-2 (resp. CP 1250 v
pøípadì NT verze Emacsu) kódování.
@item
Jednoduché pseudoèeské tøídìní.
@item
Automatická konverze mailù a news pøíspìvkù do ASCII nebo MIME (ve spojení s
balíkem @samp{tm}).
@item
Individuální konverze mailù a newsù podle specifikací ulo¾ených v promìnných
nebo v @samp{BBDB}.
@item
Umí navíc je¹tì øadu dal¹ích drobností.
@end itemize


A co program neumí:

@itemize @bullet
@item
Nejsou poèe¹tìna menu v Emacsu ani ¾ádná hlá¹ení.  I kdy¾ by i toto bylo
teoreticky mo¾né udìlat, jednalo by se o úkon velice slo¾itý a s takøka nulovým
praktickým pøínosem.
@item
Mo¾ná nìco dal¹ího, co by se vám hodilo --- dejte mi vìdìt.
@end itemize


Nìkolik poznámek k po¾adavkùm pro bezproblémový provoz programu:

@itemize @bullet
@item
Pro zcela bezproblémový provoz je vy¾adován Emacs verze alespoò 19.30
(testování probíhalo na verzi 19.34) nebo XEmacs verze alespoò 19.14.
@item
Pou¾ití textových terminálù je problematické.  Neposkytují jednotné rozhraní a
mnohdy ani mo¾nost nastavení fontù.  Pøesto program do urèité míry funguje i na
takovém terminálu.  Jako pøíklad mohu uvést linuxovskou konzolu, kde program
pouze nerespektuje zvlá¹tní postavení kláves na numerickém bloku a také je
samozøejmì nutné externì nastavit èeský font.  Ostatní funkce pracují normálnì.
@item
V XEmacsu a NT verzi Emacsu nejsou dostupné nìkteré funkce.
@end itemize


@node Budoucnost, Copying and warranty, Co to umí a co ne, Úvodem
@comment  node-name,  next,  previous,  up
@section Pohled do budoucna

Døíve èi pozdìji nepochybnì dojde k mezinárodnímu sjednocení kódování,
klávesnic a vùbec v¹eho.  Na dobré cestì je mo¾ná napøíklad program
@file{remap}, který se pomocí Unicodu sna¾í sjednotit rùzná kódování a
podporuje øadu národních klávesnic.

K uskuteènìní tohoto snu v¹ak nedojde v tak úplnì krátké dobì.
Bohu¾el v souèasnosti je¹tì nelze hovoøit o plném vyrovnání se se v¹emi
záludnostmi v¹ech jazykù, a proto je nutné mít zatím vlastní specializovanou
národní podporu.  To je dùvod, proè vznikl balíèek @file{emacs-czech}.

Budu vdìèný za pøipomínky, komentáøe, návrhy, námìty a zprávy o chybách.  I
pouhé sdìlení, ¾e tuto vìc nìkdo pou¾ívá, má pro mì význam --- moje budoucí
snaha o rùzná vylep¹ení bude pravdìpodobnì závislá na ohlasech u¾ivatelù.


@node Copying and warranty,  , Budoucnost, Úvodem
@comment  node-name,  next,  previous,  up
@ifinfo
@section Copying and warranty

Copyright @copyright{} @value{years} Milan Zamazal

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; version 2.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
@end ifinfo
@iftex
@section Kopírování a záruka

Copyright @copyright{} @value{years} Milan Zamazal

Tento program je free software; mù¾ete jej distribuovat a/nebo modifikovat
podle podmínek GNU General Public License, verze 2, v podobì, v jaké byla
publikována Free Software Foundation.

Tento program je distribuován v nadìji, ¾e bude u¾iteèný, av¹ak @emph{bez
jakékoliv záruky}; dokonce i bez implicitní záruky dané obchodními zákony nebo
@emph{zpùsobilosti pro jakékoliv pou¾ití}.  Podmínky jsou popsány detailnìji v
GNU General Public License.

Kopie GNU General Public License by mìla být obsa¾ena v programovém balíku;
pokud tomu tak není, lze ji získat od Free Software Foundation, Inc., 675 Mass
Ave, Cambridge, MA 02139, USA.
@end iftex


@c ***** Release notes *****

@node Novinky, Instalace, Úvodem, Top
@comment  node-name,  next,  previous,  up
@chapter Novinky a zmìny oproti pøedchozím verzím

@itemize @bullet

@item Zmìny ve verzi 3.4

@itemize @bullet
@item
Díky Jaroslavu ©najdrovi má nyní XEmacs menu a @code{ascii-display-mode}.
@item
Opraveno velké mno¾ství chyb.
@item
Zfunkènìny a zdokonaleny automatické konverze, @xref{Automatické konverze}.
@item
@emph{Nekompatibilita}: Klávesové kombinaci @kbd{M-Pause} nyní pøíslu¹í nová
funkce @code{cz-correct-switch}, @xref{Opravy}.
@item
@emph{Nekompatibilita:} Opravena øada pravopisných chyb v názvech konverzních
funkcí.
@item
Updatovány informace o èe¹tinì a o jiných programech.
@end itemize

@item Zmìny ve verzi 3.3

@itemize @bullet
@item
Nový mód: @code{cz-ascii-display-mode}, @xref{ASCII terminály}.
@item
Rùzné drobné opravy a úpravy.
@end itemize

@item Zmìny ve verzi 3.2

@itemize @minus
@item
Opravy chyb.
@item
Nová funkce: @code{cz-message-show-method},
@xref{Obsluha v message-mode}.
@item
Nová promìnná: @code{cz-evils}, @xref{Obcházení problémù}.
@end itemize

@item Zmìny ve verzi 3.1

@itemize @minus
@item
Opravy chyb.
@end itemize

@item Zmìny ve verzi 3.0

@itemize @minus
@item
Nová implementace klávesnice (@emph{nekompatibilní} specifikace klávesnice),
@xref{Vlastní rozlo¾ení kláves}.
@item
Mo¾nost vlo¾ení libovolného @w{ISO 8859-2} znaku, @xref{Exotické znaky}.
@item
Nové a vylep¹ené funkce pro korekci textu napsaného na opaèné klávesnici,
@xref{Opravy}.
@item
Mo¾nost pøepínání klávesnice v @samp{Isearch} módu, @xref{Pøepínání klávesnic}.
@item
Automatická konverze textù do/z kódování pracovního prostøedí,
@xref{Automatické konverze}.
@item
Více interních konverzních funkcí a jejich lep¹í kvalita, @xref{Konvertory}.
@item
Automatická konverze mailù a newsù podle pøíjemce, @xref{Messages}.
@item
Mo¾nost vyu¾ití balíkù @samp{tm} a @samp{BBDB}, @xref{Messages}.
@item
Jednoduché pseudoèeské tøídìní, @xref{Tøídìní}.
@item
Daleko více pøíkazù dostupných klávesovými zkratkami (@emph{nekompatibilními}),
@xref{Index kláves}.
@item
Menu.
@item
Podpora NT verze Emacsu.
@item
@TeX{}ovatelná dokumentace zcela v èe¹tinì.
@item
@emph{Nekompatibilita}: Název souboru @file{czech-conv.el} zmìnìn na
@file{czech-convert.el}; nové zdrojové soubory.
@end itemize

@item Zmìny ve verzi 2.1

@itemize @minus
@item
Funguje i v XEmacsu.
@item
@TeX{}ovatelná dokumentace.
@end itemize

@item Zmìny ve verzi 2.0

@itemize @minus
@item
@emph{Nekompatibilita}: Implicitnì se nastavuje @emph{nestandardní}
@ifinfo
("programátorská")
@end ifinfo
@iftex
(@uv{programátorská})
@end iftex
èeská klávesnice,
@xref{Volba klávesnice}.
@item
@emph{Nekompatibilita}: Promìnná @w{@code{cz-disable-annoying-messages}} je
nahrazena promìnnou @w{@code{cz-verbose-level}}, @xref{Rùzné}.
@item
@emph{Nekompatibilita}: Název info dokumentace zmìnìn z @file{czech.info} na
@file{emacs-czech.info}.
@item
Výraznì roz¹íøeny mo¾nosti konverze kódování, @xref{Konvertory}.
@item
Podpora pro konverze externím programem, @xref{Externí konverze}.
@item
Mo¾nost pøedefinovat kombinace kláves @kbd{M-0} a¾ @kbd{M-9},
@xref{Numerické klávesy}.
@item
Nová funkce @samp{cz-is-cz-text} detekující èeský text,
@xref{Autodetekce èeských textù}.
@item
Øada zmìn v dokumentaci.
@end itemize

@item Zmìny ve verzi 1.2

@itemize @minus
@item
Funguje v Emacsu 19.30.
@item
Lze konfigurovat promìnné pøíkazem @samp{set-variable} a @samp{edit-options}.
@end itemize

@item Zmìny ve verzi 1.1

@itemize @minus
@item
Opraveny nìkteré hloupé chyby.
@item
Nová funkce @w{@code{cz-correct-word}}, @xref{Opravy}.
@item
Nová promìnná @w{@code{cz-redefine-keypad}}, @xref{Numerické klávesy}.
@end itemize

@end itemize


@c ***** Instalace *****

@node Instalace, Nejjednodu¹¹í konfigurace, Novinky, Top
@comment  node-name,  next,  previous,  up
@chapter Instalace

Doporuèuji následující postup instalace:

@itemize @bullet
@item
Zeditujte dle potøeby úvodní promìnné v @file{Makefile}.
@item
Upgradujete-li ze star¹í verze, sma¾te v¹echny soubory této verze (dùle¾ité!).
@item
Proveïte @kbd{make install} (warningy byte-kompilátoru Emacsu ignorujte).
@item
Updatujte soubor @file{dir} v patøièném @file{info} adresáøi.
@item
Do svého @file{~/.emacs} pøidejte øádky
@example
(setq load-path (cons "/cesta/k/adresáøi/s/emacs/czech" load-path))
(load "czech")
@end example
Instalujete-li @samp{emacs-czech} globálnì, umístìte první øádek (nastavení
cesty) do souboru @file{site-start.el}.  Neumis»ujte zde druhý øádek (zavedení
èe¹tiny)!  Chcete-li, aby se èe¹tina zavádìla v¹em u¾ivatelùm, umístìte do
souboru @file{default.el} (pokud v adresáøích Emacsu není, vytvoøte jej v
adresáøi, kde se nachází @file{site-start.el}) øádek
@example
(require 'czech)
@end example
@item
Máte-li zájem, pøeètìte si celou dokumentaci, balík má øadu zajímavých funkcí a
¹iroké mo¾nosti konfigurace.
@end itemize

V pøípadì, ¾e pou¾íváte XEmacs nebo mo¾ná i Emacs 19.30 z linuxovských
distribucí Slackware nebo RedHat, nainstalujte i pøilo¾ený soubor
@file{iso02-syn.el}, nejlépe do @emph{standardního} adresáøe lispovských
souborù (X)Emacsu.

Pokud z nìjakého dùvodu @samp{make} sel¾e, musíte provést patøièné kroky
ruènì podle ¹ablony dané následujícím seznamem:

@enumerate
@item
Proveïte byte-kompilaci v¹ech souborù @file{czech*.el}.
@item
Zkopírujte vzniklé @file{*.elc} soubory do nìjakého @file{site-lisp} adresáøe.
@item
Soubory @file{emacs-czech.info*} zkopírujte do nìjakého adresáøe s info soubory
(obvykle @file{/usr/local/info/}).
@item
Chcete-li, mù¾ete tyto soubory zagzipovat (i pak budou pro Emacs èitelné).
@end enumerate


@c ***** Struèný návod ******

@node Nejjednodu¹¹í konfigurace, Konfigurace, Instalace, Top
@comment  node-name,  next,  previous,  up
@chapter Velmi struèný návod k pou¾ití

Zde jsou informace pro ty, kteøí neradi ètou dlouhé návody, spokojí se s
implicitními nastaveními a nezajímají je ¾ádné dal¹í funkce.  Není zde uvedeno
nic, co by se nevyskytovalo v jiných èástech tohoto manuálu.

V¹e se provede pouhým pøidáním nìkolika øádkù do va¹eho @file{~/.emacs}.
Nejzákladnìj¹í mo¾nosti jsou tyto:

@itemize @bullet
@item
Pouhé zavedení a nic víc:

@example
(load "czech")
@end example

Tímto se definuje minor mode @samp{cz-keyboard-mode} pro pøepínání èeské
klávesnice. Klávesnici lze pøepínat pomocí klávesy @kbd{Pause} (funguje
vìt¹inou v prostøedí X Window a na linuxovské konzole).
@item
Pou¾ití standardní èeské klávesnice:

@example
(setq cz-keyboard-nonstandard nil)
(load "czech")
@end example

Definuje standardní èeskou klávesnici (na rozdíl od pøedchozích pøípadù, kdy se
definuje klávesnice
@ifinfo
"programátorská").
@end ifinfo
@iftex
@uv{programátorská}).
@end iftex
@end itemize

To» v¹e, co je potøeba pro aktivaci v¹ech funkcí, z nich¾ ty nejzákladnìj¹í
jsou dostupné z menu @samp{Czech} nebo z klávesnice pod prefixem @kbd{C-x C-z},
@xref{Index kláves}.

Doporuèení: Udìlejte si nìkdy èas a pøeètìte si tento manuál.  Vyplatí se to.


@c ***** Konfigurace *****

@node Konfigurace, Klávesnice, Nejjednodu¹¹í konfigurace, Top
@comment  node-name,  next,  previous,  up
@chapter Nìkolik obecných poznámek úvodem

Nejdùle¾itìj¹í funkce jsou dostupné z menu (jen v Emacsu, XEmacs menu nemá)
nebo klávesovými zkratkami s prefixem @kbd{C-x z} èi @kbd{C-c z} v pøípadì
lokálních funkcí.  (@kbd{C-x} a @kbd{C-c} je dáno konvencemi Emacsu, @kbd{z} je
pak druhé písmeno slova
@ifinfo
"Czech",
@end ifinfo
@iftex
@uv{Czech},
@end iftex
které je navíc na klávesnici velmi blízko obìma prefixovým klávesám.)

Konfigurace nastavení vám vyhovujícího chování se provádí prostøednictvím
nastavení hodnot konfiguraèních promìnných nebo volání funkcí, nejlépe v
souboru @file{~/.emacs}.

@emph{Dùle¾ité upozornìní:}

@enumerate
@item
Ve¹keré @emph{funkce} lze volat a¾ po provedení @kbd{M-x load RET czech RET}
nebo @w{@code{(load "czech")}}, proto¾e døíve o nich Emacs nemù¾e vìdìt.
@item
Nastavení nìkterých @emph{promìnných} má okam¾itý úèinek na chování
@samp{emacs-czech} (je-li ji¾ zavedena).  Takových promìnných je vìt¹ina a lze
je nastavovat kdykoliv.
@item
Nastavení nìkterých @emph{promìnných} se projeví teprve @emph{a¾ po naètení
nebo znovunaètení} @samp{emacs-czech} nebo po zavolání nìjaké funkce.  To se
týká promìnných, na jejich¾ základì se budují rùzné pomocné struktury, na nì¾
tyto promìnné nemají okam¾itý vliv.  Pøes snahu mno¾ství takových promìnných
minimalizavot pøeci jen je¹tì nìkteré existují.  Jejich kompletní seznam je
uveden ní¾e.  Pokud zmìníte hodnotu nìkteré z tìchto promìnných, proveïte
@emph{poté} (znovu)zavedení pomocí nìkterého z pøíkazù uvedených v bodì 1.
Znovuzavádìní @samp{emacs-czech} nemá ¾ádný negativní vliv na ostatní funkce
ani na spotøebu pamìti èi nìco podobného.
@end enumerate

Seznam promìnných, po jejich¾ zmìna vstoupí v platnost a¾ po zavolání nìjaké k
tomu urèené funkce nebo (znovu)zavedení @samp{emacs-czech}:

@itemize @bullet
@item cz-convert-unknown-char
@item cz-dead-key-1
@item cz-dead-key-2
@item cz-enable-keybindings
@item cz-enable-menu
@item cz-font-default
@item cz-font-faces-list
@item cz-font-info-list
@item cz-global-mode
@item cz-keyboard-default-on
@item cz-keyboard-nonstandard
@item cz-keys
@item cz-keys-dead-1
@item cz-keys-dead-2
@item cz-minibuffer-nonczech
@item cz-redefine-alt-digits
@item cz-redefine-keypad
@end itemize


@c ***** Klávesnice *****
@node Klávesnice, Psaní èeských textù, Konfigurace, Top
@comment  node-name,  next,  previous,  up
@chapter Klávesnice

@findex cz-keyboard-mode
Základní funkcí @samp{emacs-czech} je redefinice klávesnice pro mo¾nost psaní
èeských textù.  Pro pou¾ití èeské klávesnice je definován minor mode
@w{@code{cz-keyboard-mode}}.  Tento mód nemá za úkol nic jiného, ne¾ pøepínat
mezi dvìmi klávesnicemi.

K dispozici jsou dvì pøeddefinované klávesnice --- standardní a
@ifinfo
"moje"
@end ifinfo
@iftex
@uv{moje}
@end iftex
(ta je myslím velmi podobná
@ifinfo
"programátorské"
@end ifinfo
@iftex
@uv{programátorské}
@end iftex
klávesnici legendárního T602),
nazývejme ji dále @dfn{programátorská}.

Standardní klávesnice je èeská klávesnice se 101 klávesami.  Programátorská
klávesnice se od standardní americké li¹í obvyklým pøenastavením kláves @kbd{2}
a¾ @kbd{0} na èeské znaky, pøièem¾ èísla zùstávají dostupná pøes numerický blok
nebo mrtvou klávesu.  Na místì hranatých závorek jsou klávesy @kbd{ú} a
@kbd{ù}, klávesa @kbd{=/+} slou¾í jako mrtvá klávesa.  Pùvodní znaky jsou opìt
dostupné pøes mrtvou klávesu.  Tento model se mi dobøe osvìdèil zejména pøi
psaní La@TeX{}ovských textù (fundamentalisticky ladìní plainisté nech» mi
prominou@dots{}).

Pøedpokládám, ¾e nìkterým u¾ivatelùm nevyhovuje ani jedna z tìchto klávesnic, a
proto je zde i mo¾nost nadefinovat si zcela vlastní rozlo¾ení kláves.

@menu
* Globální èi lokální::         V kterých bufferech se bude psát èesky.
* Volba klávesnice::            Standardní nebo programátorská?
* Numerické klávesy::           Jak fungují klávesy numerického bloku.
* Èíslice mimo numerický blok:: Èíslice na @kbd{M-1} a¾ @kbd{M-0}.
* Symboly mrtvých kláves::      Jak vypadá háèek a èárka? 
* Vlastní rozlo¾ení kláves::    Chci jinou klávesnici.
@end menu

@node Globální èi lokální, Volba klávesnice, Klávesnice, Klávesnice
@comment  node-name,  next,  previous,  up
@section Jak nastavit lokální nebo globální zapínání klávesnice

@file{czech.el} dává mo¾nost pomìrnì ¹iroké volby mo¾ností, kde èeskou
klávesnici pou¾ívat a kde nikoliv.  Pro tuto volbu slou¾í následující promìnné:

@table @code
@vindex cz-global-mode
@item cz-global-mode
Je-li hodnota této promìnné true, má pøepnutí klávesnic vliv na v¹echny buffery
v Emacsu.  V opaèném pøípadì se pøepnutí provede jen v rámci aktuálního
bufferu.  Obecná zku¹enost hovoøí ve prospìch druhé varianty a proto je
implicitnì nastaveno lokální pøepínání.  Chcete-li klávesnici pøepínat
globálnì, proveïte

@example
(setq cz-global-mode t)
@end example

@vindex cz-keyboard-default-on
@item cz-keyboard-default-on
Hodnota této promìnné urèuje, má-li se implicitnì po startu a pøi vytváøení
nových bufferù nastavovat èeská klávesnice.  Hodnota @code{nil} znamená ne,
jakákoliv jiná hodnota znaèí ano.  Implicitní je nil, tj. èeská klávesnice se
nenastavuje.  Toto chování lze mìnit i v závislosti na typu editovaného
souboru, @xref{Hooky}.

@vindex cz-minibuffer-nonczech
@item cz-minibuffer-nonczech
Pøi vstupu do minibufferu se nastavuje klávesnice podle bufferu, ze kterého
jste do minibufferu vstoupili.  Pokud èasto zadáváte @kbd{M-x} pøíkazy nebo
voláte elispovské funkce bìhem editace èeských textù, mohou vás pøedefinované
klávesy v minibufferu obtì¾ovat.  Nastavením promìnné
@w{@code{cz-minibuffer-nonczech}} na hodnotu true toto chování potlaèíte.
Pozor: Je-li na hodnotu true nastavena nìkterá z promìnných
@w{@code{cz-global-mode}} nebo @w{@code{cz-keyboard-default-on}}, nehraje
hodnota promìnné @w{@code{cz-minibuffer-nonczech}} ¾ádnou roli.  Hodnota této
promìnné se také netýká pøíkazù rodiny @samp{Isearch}, tam se v¾dy klávesnice
dìdí z volajícího bufferu.

@end table


@node Volba klávesnice, Numerické klávesy, Globální èi lokální, Klávesnice
@comment  node-name,  next,  previous,  up
@section Volba klávesnice

@vindex cz-keyboard-nonstandard
K tomuto úèelu slou¾í promìnná @w{@code{cz-keyboard-nonstandard}}.  Je-li její
hodnotou @code{nil}, je pou¾ita standardní èeská klávesnice o 101 klávesách.
Je-li její hodnotou pøesnì @code{t}, je pou¾ita programátorská klávesnice.
Chcete-li si nadefinovat vlastní rozlo¾ení kláves,
@xref{Vlastní rozlo¾ení kláves}, musíte nastavit hodnotu této promìnné na
cokoliv jiného.
Napøíklad:

@example
(setq cz-keyboard-nonstandard 1)
@end example

Implicitní hodnota je @code{t}, tj. je nastavena programátorská èeská
klávesnice.

@node Numerické klávesy, Èíslice mimo numerický blok, Volba klávesnice, Klávesnice
@comment  node-name,  next,  previous,  up
@section Klávesy na numerickém bloku

@vindex cz-redefine-keypad
Program implicitnì pøedefinuje klávesy numerického bloku.  Pozitivním dùsledkem
tohoto kroku je mo¾nost psát bez problémù i pøi pou¾ití èeské klávesnice èísla.
Pokud z nìjakého dùvodu nechcete toto pøedefinování provést, nastavte hodnotu
promìnné @w{@code{cz-redefine-keypad}} na @code{nil}.


@node Èíslice mimo numerický blok, Symboly mrtvých kláves, Numerické klávesy, Klávesnice
@comment  node-name,  next,  previous,  up
@section Psaní èísel pøes @kbd{Alt} na èeské klávesnici

@vindex cz-redefine-alt-digits
Pokud chcete pou¾ívat kombinace kláves @kbd{M-1} a¾ @kbd{M-0} pro psaní èísel
na èeské klávesnici, nastavte hodnotu promìnné
@w{@code{cz-redefine-alt-digits}} na @code{t}.  Implicitní hodnota je
@code{nil}, tj. pøedefinování se neprovádí.  Toto opatøení se týká jen èeské
klávesnice, neèeská klávesnice zùstává beze zmìny.

Tímto nastavením se ochudíte o mo¾nost pøedávat numerický argument pøes dané
kombinace kláves.  Proto je lépe toto pøedefinování neprovádìt a psát radìji
èísla na numerickém bloku.

Jiná situace nastává, pou¾íváte-li Emacs na linuxovské konzole.  Pak toti¾
psaní èísel na numerickém bloku pøi zapnuté èeské klávesnici nefunguje.  Pokud
tedy chcete psát èísla mimo numerický blok napøíklad právì na textových
terminálech, pøidejte si do svého @file{~/.emacs} následující øádek:

@example
(if (not window-system) (setq cz-redefine-alt-digits t))
@end example

@node Symboly mrtvých kláves, Vlastní rozlo¾ení kláves, Èíslice mimo numerický blok, Klávesnice
@comment  node-name,  next,  previous,  up
@section Symboly mrtvých kláves

Pøi stisku mrtvé klávesy se vìt¹inou na obrazovce objeví pøíslu¹ný akcent,
tj. nejspí¹e háèek nebo èárka.  Ne v¹echny fonty mají tyto akcenty na stejném
místì znakové sady.  Následující promìnná umo¾òuje nastavit správné akcenty.

@table @code
@vindex cz-dead-symbols
@item cz-dead-symbols
Asociativní seznam formátu
@example
(@var{MRTVÁ-KLÁVESA} . @var{ZNAK}) ... (@var{MRTVÁ-KLÁVESA} . @var{ZNAK})
@end example
urèující znaky zobrazované pøi stisku pøíslu¹ných mrtvých kláves.  Mrtvé
klávesy, pro nì¾ není v této promìnné ¾ádná polo¾ka, pøi svém stisku
nezobrazují ¾ádné znaky.
@end table

Implicitní hodnota v prostøedí UN*Xu je @w{@code{((?= . ?\264) (?+ . ?\267))}}.
Nastavením

@example
(setq cz-dead-symbols '((?= . ?=) (?+ . ?+)))
@end example

lze zajistit, ¾e na obrazovce se budou objevovat pøímo znaky mrtvých kláves.
Nechcete-li, aby se vám pøi stisku mrtvé klávesy zobrazoval akcent, proveïte

@example
(setq cz-dead-symbols nil)
@end example


@node Vlastní rozlo¾ení kláves,  , Symboly mrtvých kláves, Klávesnice
@comment  node-name,  next,  previous,  up
@section Definice jiného rozlo¾ení kláves

Èeská klávesnice je v @file{czech.el} definována specifikováním tøí vìcí:

@enumerate
@item
Které klávesy fungují jako mrtvé.
@item
Co se má stát po jejich stisku.
@item
Jaké je obecné rozlo¾ení kláves.
@end enumerate

Jednotlivé body jsou podrobnì rozebrány v následujících odstavcích.  Musím
jenom upozornit, ¾e se nepøedpokládá potøeba pøedefinování kláves na numerickém
bloku.  Tyto klávesy vy¾adují tro¹ku zvlá¹tní zacházení.  Ponechávají si svùj
pùvodní význam za v¹ech okolností (díky tomu jsou napøíklad v¾dy pøístupné
èíslice) a nelze je tedy pøedefinovat.

Je mo¾né si definovat vlastní kompletní klávesnici nebo pouze èásteènì
modifikovat klávesnici programátorskou.

@menu
* Definice klávesnice::         Zcela vlastní klávesnice.
* Modifikace klávesnice::       Modifikace programátorské klávesnice.
* Nastavení nové klávesnice::   Aktivace zmìnìné klávesnice.
@end menu


@node Definice klávesnice, Modifikace klávesnice, Vlastní rozlo¾ení kláves, Vlastní rozlo¾ení kláves
@comment  node-name,  next,  previous,  up
@subsection Definice vlastní klávesnice

Vyhovuje-li vám klávesnice výraznì odli¹ná od pøeddefinované klávesnice
programátorské, mù¾ete si definovat kompletnì celou vlastní èeskou klávesnici.
Klávesnice je dána seznamem následujícího formátu:

@example
( ( @var{redefinice-kláves} )
  ( @var{mrtvá-klávesa} @var{redefinice-kláves} )
  @dots{}
  ( @var{mrtvá-klávesa} @var{redefinice-kláves} ) )
@end example

První polo¾ka seznamu urèuje jednoduché pøedefinování kláves a je povinná.
Dal¹í polo¾ky pak postupnì definují v¹echny mrtvé klávesy a redefinice kláves
po jejich stisku.  Mrtvých kláves mù¾e být definován libovolný nezáporný poèet.

@var{redefinice-kláves} je posloupnost elementù asociativního seznamu tvaru

@example
( @var{klávesa} . @var{redefinice} ) @dots{} ( @var{klávesa} . @var{redefinice} )
@end example

@var{klávesa} a @var{mrtvá-klávesa} musí být v¾dy @emph{znak}.
@var{redefinice} mù¾e být cokoliv, co jako redefinici akceptuje funkce
@code{define-key}, tedy zejména øetìzec nebo vektor.

Pøíklad definice standardní èeské klávesnice v prostøedí UN*Xu:

@example
(((?1 . "+") (?2 . [236]) (?3 . [154]) (?4 . [232]) (?5 . [248])
  (?6 . [158]) (?7 . [253]) (?8 . [225]) (?9 . [237]) (?0 . [233])
  (?` . "\"") (?~ . ";") (?! . "1") (?@ . "2") (?# . "3")
  (?$ . "4") (?% . "5") (?^ . "6") (?& . "7") (?* . "8")
  (?\( . "9") (?\) . "0") (?- . "=") (?_ . "%") (?\[ . [250])
  (?@{ . "/") (?\] . ")") (?@} . "(") (?\; . [249]) (?: . "\"")
  (?' . [167]) (?\" . "!") (?< . "?") (?> . ":") (?/ . "-")
  (?\? . "_") (?y . "z") (?Y . "Z") (?z . "y") (?Z . "Y"))
 (?+ (?c . [232]) (?d . [239]) (?e . [236]) (?n . [242]) (?r . [248])
     (?s . [154]) (?t . [157]) (?u . [249]) (?y . [190]) (?C . [200])
     (?D . [207]) (?E . [204]) (?N . [210]) (?R . [216]) (?S . [138])
     (?T . [141]) (?U . [217]) (?Y . [174])
     (?z . "z") (?Z . "Z"))
 (?= (?a . [225]) (?e . [233]) (?i . [237]) (?o . [243]) (?u . [250])
     (?z . [253]) (?A . [193]) (?E . [201]) (?I . [205]) (?O . [211])
     (?U . [218]) (?Z . [221])
     (?y . "y") (?Y . "Y")))
@end example

Takto definovaná klávesnice se aktivuje pomocí funkce @code{cz-set-keyboard},
@xref{Nastavení nové klávesnice}.  Tato funkce mimo jiné automaticky zajistí,
¾e stisk kterékoliv mrtvé klávesy a následný stisk pøedefinované klávesy
vyprodukuje znak pùvodnì nále¾ející pøedefinované klávese.

Máte-li pocit, ¾e va¹e klávesnice by mohla být zajímavá i pro jiné u¾ivatele,
mù¾ete mi ji poslat, @xref{Author}.  Mo¾ná ji pak zaøadím do pøí¹tí verze
@samp{emacs-czech}.


@node Modifikace klávesnice, Nastavení nové klávesnice, Definice klávesnice, Vlastní rozlo¾ení kláves
@comment  node-name,  next,  previous,  up
@subsection Modifikace programátorské klávesnice

Pokud vám celkem vyhovuje pøeddefinovaná programátorská klávesnice, ale chtìli
byste v ní nìco málo zmìnit, mù¾ete tak relativnì snadno uèinit nastavením
nìkteré z následujících promìnných.  Pokud nìèemu z ní¾e uvedeného nerozumíte,
nepropadejte panice.  Jistì postaèí osvìdèená metoda modifikace na konci
uvedeného pøíkladu i bez znalosti vìci.

@table @code
@vindex cz-dead-key-1
@item cz-dead-key-1
Specifikuje mrtvou klávesu implicitnì pou¾itou vesmìs pro písmena s háèky.
Hodnotou této promìnné musí být znak.
@vindex cz-dead-key-2
@item cz-dead-key-2
Shodná s @code{cz-dead-key-1}, ale specifikuje mrtvou klávesu implicitnì
pou¾itou vesmìs pro písmena s èárkami.
@vindex cz-keys
@item cz-keys
Urèuje základní význam kláves.  Je to asociativní seznam tvaru
@example
( ( @var{klávesa} . @var{definice} )
    @dots{}
  ( @var{klávesa} . @var{definice} ) )
@end example
@var{klávesa} musí být opìt znak (stejnì jako u definice mrtvých kláves) a
@var{definice} mù¾e být cokoliv, èemu rozumí funkce @code{define-key}, tedy
nejlépe vektor (jeden znak v hranatých závorkách) nebo øetìzec (v uvozovkách).
@item cz-keys-dead-1
Urèuje význam kláves po stisku první mrtvé klávesy (@code{cz-dead-key-1}).
Formát stejný jako pro @code{cz-keys}.
@item cz-keys-dead-2
Urèuje význam kláves po stisku druhé mrtvé klávesy (@code{cz-dead-key-2}).
Formát stejný jako pro @code{cz-keys}.
@end table

Poznámka: Je obecnì vhodné pøed nìkteré potenciálnì citlivé znaky (jako
uvozovky, obrácené lomítko a hranaté závorky) umis»ovat obrácené lomítko
(@samp{backslash}).  I kdy¾ to z hlediska syntaxe elispu není v¾dy nezbytnì
nutné, má to i jiné pozitivní efekty --- napø. není matena kontrola závorkování
v Emacsu.  Navíc uvedení obráceného lomítka pøed znakem, který to nevy¾aduje,
nemù¾e nic pokazit.

Následuje pøíklad nastavení promìnných v prostøedí UN*Xu.  Nastaví se mrtvé
klávesy na dvojici kláves @key{~} (háèky) a @key{`} (èárky), prohodí se @key{y}
a @key{z} a po stisku mrtvé klávesy @key{~} a následném @key{a} se objeví
@samp{ä}, pøípadnì @samp{Ä}.

@example
(setq cz-dead-key-1 ?~)   ; znak se uvozuje otazníkem, nìkdy je nutno i \
(setq cz-dead-key-2 96)   ; i èíslo je znak (zde obrácený apostrof)
(setq cz-keys             ; vektory znakù v [] nebo øetìzce v ""
  '((?2 . [236]) (?3 . [185]) (?4 . [232]) (?5 . [248]) (?6 . [190])
    (?7 . [253]) (?8 . [225]) (?9 . [237]) (?0 . [233]) (?\[ . [250])
    (?\] . [249])         ; a¾ sem je to pùvodní definice
    (?z . "y") (?y . "z")))
(setq cz-keys-dead-1
  '((?c . [232]) (?d . [239]) (?e . [236]) (?n . [242]) (?r . [248])
    (?s . [185]) (?t . [187]) (?u . [249]) (?z . [190]) (?C . [200])
    (?D . [207]) (?E . [204]) (?N . [210]) (?R . [216]) (?S . [169])
    (?T . [171]) (?U . [217]) (?Z . [174])   ; a¾ sem pùvodní definice
    (?a . [228]) (?A . [196])))
@end example

Modifikovanou klávesnici je nutno po nastavení patøièných promìnných
aktivovat, @xref{Nastavení nové klávesnice}.


@node Nastavení nové klávesnice,  , Modifikace klávesnice, Vlastní rozlo¾ení kláves
@comment  node-name,  next,  previous,  up
@subsection Nastavení nové klávesnice

@findex cz-set-keyboard
Chcete-li nastavit modifikovanou programátorskou klávesnici a provedete
nastavení patøièných promìnných pøed @w{@code{(load "czech")}}, bude zavedena va¹e
modifikovaná klávesnice.  Pokud promìnné nastavíte pozdìji, aktivujete
modifikovanou klávesnici znovuzavedením @samp{emacs-czech} pomocí @code{(load
"czech")} nebo voláním funkce @code{cz-set-keyboard} jako

@example
(cz-set-keyboard)
@end example

Chcete-li aktivovat vlastní kompletní klávesnici, provedete to voláním

@example
(cz-set-keyboard @var{klávesnice})
@end example


@c ***** Hlavní návod *****

@node Psaní èeských textù, Konvertory, Klávesnice, Top
@comment  node-name,  next,  previous,  up
@chapter Psaní èeských textù

Zde jsou popsány funkce pro práci s èeskou klávesnicí a èeskými texty.

@menu
* Pøepínání klávesnic::         Jak zapnout/vypnout èeskou klávesnici.
* Exotické znaky::              Vlo¾ení libovolného ISO 8859-2 znaku.
* Opravy::                      Korekce po pou¾ití nesprávné klávesnice.
* Hooky::                       Speciální akce.
* Autodetekce èeských textù::   Je to èeský text?
@end menu


@node Pøepínání klávesnic, Exotické znaky, Psaní èeských textù, Psaní èeských textù
@comment  node-name,  next,  previous,  up
@section Pøepínání klávesnic

Pro pøepínání klávesnic je definována následující kombinace kláves:

@table @kbd
@kindex C-x z z
@kindex pause
@findex cz-keyboard-mode
@item C-x z z
Pøepínání mezi èeskou a anglickou klávesnicí (@code{cz-keyboard-mode}).  Ve
vìt¹inì prostøedí je tato funkce dostupná i klávesou @kbd{Pause}.  Pomocí
klávesy @kbd{Pause} pak lze pøepínat klávesnici i bìhem inkrementálního
vyhledávání pøíkazy @kbd{C-s} a @kbd{C-r} (tato funkce nefunguje v XEmacsu).
@end table

Dáváte-li naopak pøednost pou¾ití dvou kláves, z nich¾ jedna èeskou klávesnici
v¾dy zapíná a druhá v¾dy vypíná, mù¾ete to udìlat kupøíkladu takhle:

@example
(global-set-key "\C-x8" 'cz-keyboard-mode-off)
(global-set-key "\C-x9" 'cz-keyboard-mode-on)
@end example

O syntaxi zápisu rùzných kombinací kláves se lze více dozvìdìt v manuálu
Emacsu,
@ifinfo
@xref{Init Rebinding,,,emacs}.
@end ifinfo
@iftex
viz manuál Emacsu, oddíl [Init Rebinding].
@end iftex


@node Exotické znaky, Opravy, Pøepínání klávesnic, Psaní èeských textù
@comment  node-name,  next,  previous,  up
@section Vlo¾ení libovolného ISO 8859-2 znaku

Bì¾nou metodou vkládání neèeských znakù ze sady @w{ISO 8859-2} je pou¾ití
souboru obsahujícího v¹ech 256 znakù.  Z toho pak písaø ¾ádaný znak zkopíruje.
Následující funkce mù¾e tuto ponìkud nekultivovanou metodu nahradit.

@table @kbd
@kindex C-x z c
@kindex C-pause
@findex cz-select-char
@item C-x z c
Uká¾e buffer se v¹emi písmeny z horní poloviny sady @w{ISO 8859-2}, ze kterého
lze vlo¾it klávesou @kbd{RET} nebo prostøedním tlaèítkem my¹i zvolený znak do
textu.  Vyvolání s prefixovým argumentem vlo¾í ihned naposledy zvolený znak.
Buffer se znaky lze zru¹it bez volby znaky stiskem @kbd{C-c C-c}.  Na vìt¹inì
klávesnic je tato funkce (@code{cz-select-char}) dostupná i pøes @kbd{C-pause}.
@end table


@node Opravy, Hooky, Exotické znaky, Psaní èeských textù
@comment  node-name,  next,  previous,  up
@section Korekce slov napsaných na chybné klávesnici

Obèas se nìkomu stává, ¾e napí¹e nìkolik slov, ani¾ by se podíval na obrazovku,
a poté zjistí, ¾e mìl zapnutou jinou klávesnici, ne¾ pøedpokládal.  Pro
usnadnìní následných oprav jsou k dispozici ní¾e uvedené funkce.

@table @kbd
@findex cz-correct-word
@item M-x cz-correct-word
Opraví poslední slovo jako kdyby bylo napsáno na opaèné klávesnici, ne¾ která
je právì aktivována.  Je-li vyvoláno s èíselným prefixovým argumentem, provede
se oprava odpovídajícího poètu pøedcházejících slov.
@kindex C-x z w
@findex cz-correct-word-switch
@item C-x z w
Shodné s pøedchozím, ale nejprve se provede pøepnutí klávesnic
(@code{cz-correct-word-switch}).
@kindex M-pause
@findex cz-correct-word-switch
@item M-x cz-correct-switch
Provede korekci do zaèátku aktuálního øádku s pøepnutím klávesnic.  Prefixový
argument zpùsobí korekci i zadaný poèet øádkù pøed aktuálním øádkem.  Je-li
funkce vyvolána bez prefixového argumentu a od pozice kurzoru do zaèátku øádku
jsou pouze mezerové znaky, provede se korekce pøedcházejícího øádku.  Na
vìt¹inì klávesnic je tato funkce dostupná i pøes @kbd{M-pause}.
@kindex C-x z r
@findex cz-correct-region
@item C-x z r
Provede korekci regionu (@code{cz-correct-region}).
@findex cz-correct-word-on
@item M-x cz-correct-word-on
Stejné jako @code{cz-correct-word}, ale provede korekci slov, jako kdyby byla
napsána chybnì na anglické klávesnici.
@findex cz-correct-word-off
@item M-x cz-correct-word-off
Stejné jako @code{cz-correct-word}, ale provede korekci slov, jako kdyby byla
napsána chybnì na èeské klávesnici.
@end table


@node Hooky, Autodetekce èeských textù, Opravy, Psaní èeských textù
@comment  node-name,  next,  previous,  up
@section Pou¾ití hookù

@vindex cz-keyboard-mode-hook
Jako ka¾dý minor mode, má i @w{@code{cz-keyboard-mode}} vlastní hook s názvem
@w{@code{cz-keyboard-mode-hook}}.  Chcete-li tedy napøíklad pøi ka¾dém zapnutí
èeské klávesnice provést funkci @code{foo}, pøidejte do svého konfiguraèního
souboru øádek

@example
(add-hook 'cz-keyboard-mode-hook 'foo)
@end example

Vyu¾ít hooky lze i pro automatické zapnutí èeské klávesnice pro urèité typy
souborù.  Jsou definovány následující funkce:

@table @kbd
@findex cz-keyboard-mode
@item cz-keyboard-mode
Slou¾í jako pøepínaè klávesnic.
@findex cz-keyboard-mode-on
@item cz-keyboard-mode-on
Zapne èeskou klávesnice nezávisle na jejím pøedchozím nastavení.
@findex cz-keyboard-mode-off
@item cz-keyboard-mode-off
Vypne èeskou klávesnice nezávisle na jejím pøedchozím nastavení.
@end table

Chcete-li tedy, aby se vám napøíklad pro ka¾dý La@TeX{}ovský soubor zapnula
èeská klávesnice, zavolejte ve svém konfiguraèním souboru funkci

@example
(add-hook 'LaTeX-mode-hook 'cz-keyboard-mode-on)
@end example

Pokud máte naopak nastavenu hodnotu promìnné @w{@code{cz-keyboard-default-on}}
na hodnotu true, ale nechcete pou¾ívat èeskou klávesnici pøi editaci C
programù, lze to zaøídit takto:

@example
(add-hook 'c-mode-hook 'cz-keyboard-mode-off)
@end example

Poznámka: Pøedpokládá se správné nastavení emacsovské promìnné
@w{@code{auto-mode-alist}}, která nastavuje módy podle jména editovaného
souboru.  Je té¾ mo¾né zaøídit automatické nastavení èeské klávesnice pøímo v
daném souboru.  Podrobnìj¹í informace o automatickém nastavování módù naleznete
v manuálu Emacsu,
@ifinfo
@xref{Choosing Modes,,,emacs}.
@end ifinfo
@iftex
viz manuál Emacsu, oddíl [Choosing Modes].
@end iftex
S výhodou lze té¾ vyu¾ít autodetekce èeských textù, @xref{Autodetekce èeských
textù}.


@node Autodetekce èeských textù,  , Hooky, Psaní èeských textù
@comment  node-name,  next,  previous,  up
@section Autodetekce èeských textù

@findex cz-is-cz-text
Funkce @w{@code{cz-is-cz-text}} se pokou¹í detekovat, zda aktuální buffer
obsahuje èeský text.  Pokud dospìje k názoru, ¾e tomu tak je, vrátí @code{t}, v
opaèném pøípadì vrátí @code{nil}.

Funkci lze vyu¾ít pro automatické nastavení klávesnice pøi otevøení souboru.
Zkuste si do svého @file{~/.emacs} pøidat øádky

@example
(defun my-find-file-hook ()
  (if (cz-is-cz-text) (cz-keyboard-mode 1)))
(add-hook 'find-file-hooks 'my-find-file-hook)
@end example

V optimálním pøípadì se vám pak pøi otevøení souboru nastaví èeská klávesnice
právì pro èeské texty.

Autodetekce je zalo¾ena na poètech èeských a neèeských znakù v testovaném
vzorku textu.  Lze ji øídit pomocí následujících promìnných:

@table @code
@vindex cz-is-empty-czech
@item cz-is-empty-czech
Urèuje, zda má být prázdný buffer pova¾ován za èeský text (hodnoty @code{t} a
@code{nil}).  Implicitní hodnota je @code{nil}.
@vindex cz-is-buffer-empty
@item cz-is-buffer-empty
Do jaké velikosti bufferu v bytech má být buffer pova¾ován za prázdný.
Implicitní hodnota je 80.
@vindex cz-is-test-size
@item cz-is-test-size
Maximální poèet testovaných bytù.  Implicitní hodnota je 1000.
@vindex cz-is-skip-start
@item cz-is-skip-start
Kolik úvodních bytù má být pøed testováním pøeskoèeno.  Implicitní hodnota je
0.
@vindex cz-is-czech-min
@item cz-is-czech-min
Minimální podíl èeských znakù ve vzorku, aby text mohl být pova¾ován za èeský.
Implicitní hodnota je 0.01.
@vindex cz-is-nonczech-max
@item cz-is-nonczech-max
Maximální podíl neèeských znakù z horní poloviny znakové sady, kdy smí být
je¹tì text pova¾ován za èeský.  Implicitní hodnota je 0.01.
@vindex cz-is-czech-characters
@item cz-is-czech-characters
Seznam èeských znakù.
@end table


@c ***** Pøekódování *****

@node Konvertory, Tøídìní, Psaní èeských textù, Top
@comment  node-name,  next,  previous,  up
@chapter Konverze kódování

Program umí provádìt konverze znakových sad.  K dispozici jsou pøevodníky
zalo¾ené pouze na interních strukturách i komplexnìj¹í metody zalo¾ené na
definièních souborech balíku @samp{cstocs}.

O konfiguraci zde platí toté¾ dùle¾ité upozornìní jako v pøípadì konfigurace
fontù a klávesnice, @xref{Konfigurace}.

Tip: Konverze jsou a¾ mnohonásobnì rychlej¹í, nemáte-li zapnut
@samp{font-lock-mode}.

@menu
* Interní konverze::            Zabudované konverze.
* Univerzální pøevodník::       Konverze s vyu¾itím externích souborù.
* Externí konverze::            Konverze externím programem.
* Speciální konverze::          OdDO$uj/zaDO$uj.
* Automatické konverze::        Nechci vidìt nic ne¾ ISO kódování.
* ASCII terminály::             Nechci vidìt nic ne¾ sedmibitové znaky.
* Emacs versus cstocs::         Kdy pou¾ít co.
@end menu


@node Interní konverze, Univerzální pøevodník, Konvertory, Konvertory
@comment  node-name,  next,  previous,  up
@section Interní konverze

Tyto konvertory jsou urèeny pro jednoduché pou¾ití a mají ménì mo¾ností, ne¾
jejich dokonalej¹í ekvivalenty, @xref{Univerzální pøevodník}.  Pøesto ve
vìt¹inì pøípadù postaèují a nejsou závislé na externích souborech.

@table @kbd
@findex cz-convert-to-csech
@item C-x z 7
Funkce (@code{cz-convert-to-csech}) je aplikována na region, kde pøevede
v¹echny 8-bitové znaky do jejich neakcentové podoby, tj. odstraní háèky, èárky
a jiná diakritická znaménka.  Neakcentované znaky z horní poloviny znakové sady
jsou nahrazeny teèkami.  Pokud je funkce vyvolána s prefixovým argumentem, je
za zkonvertovaný region doplnìna vìta @samp{Èeský text konvertován na cesky
text.}.  Tato funkce se mù¾e uplatnit pøi odesílání èesky psané po¹ty pro
pøíjemce, kterému by se správnì nezobrazily èeské znaky.  Pou¾ijete-li
prefixový argument, mù¾ete jej decentnì upozornit na to, ¾e by s tím mìl nìco
dìlat.
@findex cz-convert-to-native
@item C-x z n
Zkonvertuje region do @w{ISO 8859-2} kódování, resp. do kódování
@ifinfo
"Code page 1250"
@end ifinfo
@iftex
@uv{Code page 1250}
@end iftex
v pøípadì NT verze Emacsu (nadále shrnuto pod spoleèný pojem @dfn{kódování
prostøedí}).  Kódování regionu musí být nìkteré z následujících: bratøí
Kamenických, KOI8,
@ifinfo
"Code page 852", "Code page 1250".
@end ifinfo
@iftex
@uv{Code page 852}, @uv{Code page 1250}.
@end iftex
Kódování je implicitnì automaticky detekováno; pøi pou¾ití prefixového
argumentu je u¾ivatel na vstupní kódování dotázán.  Tato funkce
(@code{cz-convert-to-native}) je primárnì urèena jako vy¹¹í rozhraní k ní¾e
uvedeným funkcím a vyu¾ívá funkci @samp{cz-is-cz-text}, @xref{Autodetekce
èeských textù}.
@end table

Pokud autodetekce kódování sel¾e, mù¾ete kromì prefixového argumentu pou¾ít i
odpovídající funkci z následujícího seznamu:

@table @kbd
@findex cz-convert-from-kamenik
@item M-x cz-convert-from-kamenik
Zkonvertuje region z kódování bratøí Kamenických do kódování prostøedí.
@findex cz-convert-from-koi8
@item M-x cz-convert-from-koi8
Zkonvertuje region z kódování KOI8 do kódování prostøedí.
@findex cz-convert-from-do$
@item M-x cz-convert-from-windoze
Zkonvertuje region z kódování
@ifinfo
"Code page 1250"
@end ifinfo
@iftex
@uv{Code page 1250}
@end iftex
do kódování prostøedí.
@item M-x cz-convert-from-do$
Zkonvertuje region z kódování
@ifinfo
"Code page 852"
@end ifinfo
@iftex
@uv{Code page 852}
@end iftex
do kódování prostøedí.
@findex cz-convert-from-windoze
@end table

@node Univerzální pøevodník, Externí konverze, Interní konverze, Konvertory
@comment  node-name,  next,  previous,  up
@section Univerzální pøevodník

Tento pøevodník vyu¾ívá definièních souborù programu @samp{cstocs}, proto je
nutné je mít instalovány.  Program @file{cstocs} je souèástí balíku
@file{cs-tools}.  Je k dispozici napøíklad na
@samp{ftp://ftp.muni.cz/pub/UNIX/localization/linux/cs-tools/}.

@table @kbd
@findex cz-convert-from-to
@item M-x cz-convert-from-to
Konvertuje region z jednoho kódování do jiného.  Zeptá se na vstupní a výstupní
kódování, které by mìlo být zadáno jménem pøíslu¹ného definièního souboru.
Je-li funkce vyvolána s prefixovým argumentem, pou¾ijí se bez dotazu naposledy
zadaná kódování.
@findex cz-convert-delete-tables
@item M-x cz-convert-delete-tables
Sma¾e v¹echny konverzní tabulky z pamìti a cache soubor z disku.  Viz ní¾e
promìnné @code{cz-convert-unknown-char} a @code{cz-convert-cache-file}.
@end table

Obvykle je nutné je¹tì nejprve nastavit nìkteré z následujících promìnných:

@table @code
@vindex cz-encoding-files-dir
@item cz-encoding-files-dir
Øetìzec urèující cestu k definièním souborùm rùzných kódování (@file{.enc}
soubory a soubor @file{accent}).  Implicitní hodnota je
@w{@code{"/usr/local/lib/cstocs"}}.
@vindex cz-convert-accent-file
@item cz-convert-accent-file
Jméno souboru definujícího 7-bitové ekvivalenty k rùzným znakùm.  Implicitní
hodnota je @w{@code{"accent"}}.
@vindex cz-convert-unknown-char
@item cz-convert-unknown-char
Znak, kterým jsou nahrazeny znaky bez ekvivalentu v novém kódování.  Implicitní
hodnota je @code{.}.  Je-li tento znak zmìnìn a¾ po provedení nìjakého
pøekódování v Emacsu, musí být zavolána funkce
@w{@code{cz-convert-delete-tables}}, aby zmìna vstoupila v platnost (dùvodem
jsou v pamìti vybudované tabulky, které by tuto zmìnu nerespektovaly).
@vindex cz-convert-onebymore
@item cz-convert-onebymore
Je-li @code{nil}, neprovádí se nahrazení znakù jejich víceznakovými ekvivalenty
a pøíslu¹né znaky jsou nahrazeny podle promìnné
@w{@code{cz-convert-unknown-char}}.  V jiném pøípadì jsou nahrazeny svými
víceznakovými ekvivalenty.  Implicitní hodnota je @code{nil}.
@vindex cz-convert-encfiles
@item cz-convert-encfiles
Asociativní seznam urèující pøeddefinované názvy konverzních souborù.
@vindex cz-convert-cache-file
@item cz-convert-cache-file
Na pomalej¹ích strojích mù¾e chvíli trvat poèáteèní vybudování konverzní
tabulky z definièních souborù.  V takovém pøípadì je mo¾né pou¾ít cache soubor,
do kterého jsou konverzní tabulky ukládány pro pozdìj¹í pou¾ití.  Za normálních
okolností je pou¾ití cache souboru zbyteèné.  Obsahem této promìnné je øetìzec
urèující název cache souboru.  Implicitní hodnota je @code{nil},
co¾ znamená, ¾e cache soubor nebude pou¾íván.
@end table

@node Externí konverze, Speciální konverze, Univerzální pøevodník, Konvertory
@comment  node-name,  next,  previous,  up
@section Externí konverze

Konverze lze provádìt i pomocí externího programu, zejména @samp{cstocs}.
Konverze se provádìjí pomocí toto¾ných funkcí, pouze se pomocí konfiguraèních
promìnných urèí, za jakých podmínek má být konverze provedena externím
programem.

@table @code
@vindex cz-use-cstocs-limit
@item cz-use-cstocs-limit
Minimální velikost konvertovaného regionu v bytech, od které je provádìna
konverze externím programem.  Pokud je hodnota promìnné nastavena na
@w{@code{infinity}} (implicitní), není externí program pou¾íván vùbec.  Je-li
hodnota 0, jsou naopak ve¹keré konverze provádìny externím programem.
@vindex cz-use-cstocs-program
@item cz-use-cstocs-program
Øetìzec definující jméno externího programu.  Implicitní je
@w{@code{"cstocs"}}.
@end table

Ostatní promìnné jsou stejné jako v pøípadì univerzálního pøevodníku,
@xref{Univerzální pøevodník}.

@node Speciální konverze, Automatické konverze, Externí konverze, Konvertory
@comment  node-name,  next,  previous,  up
@section Speciální konverze

Nìkteré systémy mají zlozvyk pøidávat èi vy¾adovat znaky @samp{^M} na koncích
øádkù, pøípadnì i znak @samp{^Z} na konec souboru.

@table @kbd
@kindex C-x z u
@findex cz-convert-undo$
@item C-x z u
Odstraní paznaky na koncích øádkù v celém bufferu a pøípadnì i na jeho konci
(@code{cz-convert-undo$}).
@item C-x z d
Pøidá paznaky na konce øádkù v celém bufferu (@code{cz-convert-do$}).
@end table

Zaøídit èásteènì automatické odstraòování tìchto znakù lze napøíklad pomocí
následujího øádku v @file{~/.emacs}:

@example
(add-hook 'find-file-hooks 'cz-convert-undo$)
@end example

Mo¾ným øe¹ením je i aktivace automatických konverzí, @xref{Automatické
konverze}, (nefunguje zatím u ASCII souborù).


@node Automatické konverze, ASCII terminály, Speciální konverze, Konvertory
@comment  node-name,  next,  previous,  up
@section Automatické konverze

@samp{emacs-czech} umí provádìt i automatické konverze na pozadí pøi naèítání a
zápisu souborù.  Tato funkce je u¾iteèná napøíklad pøi prohlí¾ení souborù
vzniklých na jiné platformì nebo pøi editaci souborù pro jinou platformu.
Podporovaná kódování jsou: @w{ISO 8859-2}, Kameniètí, KOI8,
@ifinfo
"Code page 1250" a "Code page 852".
@end ifinfo
@iftex
@uv{Code page 1250} a @uv{Code page 852}.
@end iftex

@table @kbd
@kindex C-x z a
@findex cz-convert-auto-toggle
@item C-x z a
Pøepne re¾im automatických konverzí (@code{cz-convert-auto-toggle}).  Tento
re¾im je globální a je implicitnì vypnut.  Pøi zapnutém re¾imu automatických
konverzí je pøi ka¾dém otevøení souboru autodetekováno jeho kódování,
@xref{Autodetekce èeských textù}, a je provedena konverze bufferu (nikoliv
souboru) do kódování prostøedí.  Pøi zápisu do souboru je provedena zpìtná
konverze do kódování souboru.  Detekované kódování souboru je symbolicky
vyznaèeno ve stavovém øádku (modeline).  Pøi vlo¾ení textu ze souboru v jiném
kódování je opìt provedena patøièná konverze, pùvodnì stanovené kódování
souboru se nemìní, lze jej v¹ak v pøípadì potøeby zmìnit ruènì (viz ní¾e).
@findex cz-convert-auto-enable
@item M-x cz-convert-auto-enable
Zapne re¾im automatických konverzí (@code{cz-convert-auto-enable}).
@findex cz-convert-auto-disable
@item M-x cz-convert-auto-disable
Vypne re¾im automatických konverzí (@code{cz-convert-auto-disable}).
@kindex C-x z b
@findex cz-convert-auto-encoding
@item C-x z b
Zmìní stanovené kódování souboru pøíslu¹ného aktuálnímu bufferu
(@code{cz-convert-auto-encoding}).  Volba @samp{none} vypne automatickou
konverzi pro tento buffer.
@end table

Pøi pøevodu z @w{ISO 8859-2} do nìkterého jiného kódování, resp. naopak, jsou
pøidávány, resp. odstraòovány, znaky @samp{^M} na koncích øádkù.

Chcete-li, aby se automatické konverze implicitnì provádìly, pøidejte do svého
@file{~/.emacs} nìkam @emph{za} @w{@code{(load "czech")}} øádek

@example
(cz-convert-auto-enable)
@end example

Je-li re¾im automatických konverzí vypnut, ale buffer má nastaveno nìjaké
kódování, automatické konverze se pro nìj provádí.

Automatické konverze jsou provádìny pouze pøi práci se soubory a nefungují pøi
prohlí¾ení èi editaci @samp{tar} souborù.


@node ASCII terminály, Emacs versus cstocs, Automatické konverze, Konvertory
@comment  node-name,  next,  previous,  up
@section ASCII terminály

Pracujete-li na zaøízení, které z nìjakého dùvodu není schopno správnì zobrazit
èeské znaky, mù¾e vám pomoci následující funkce:

@table @kbd
@findex cz-ascii-display-mode
@kindex C-x z t
@item C-x z t
Pøepíná globální minor mode sedmibitového zobrazování znakù
(@code{cz-ascii-display-mode}).  Je-li tento mód aktivován, jsou místo v¹ech
akcentovaných @w{ISO 8859-2} znakù zobrazovány jejich sedmibitové náhra¾ky.
Samotný text v bufferu zùstává nezmìnìn (konverze se provádí pouze na úrovni
zobrazování) a lze v nìm normálnì psát èesky.
@end table

Tuto funkci jistì s radostí vyu¾ijí i lidé, které pøivádí k nepøíèetnosti èesky
psané pøíspìvky v newsech.


@node Emacs versus cstocs,  , ASCII terminály, Konvertory
@comment  node-name,  next,  previous,  up
@section Kdy pou¾ít Emacs a kdy @samp{cstocs}?

Oba programy mají své výhody i nevýhody.  Obecnì platí pøibli¾nì tyto principy:

@noindent Emacs je výhodné pou¾ít za tìchto okolností:

@itemize @bullet
@item
Jste-li právì v Emacsu a potøebujete zkonvertovat editovaný text nebo nìjaký
soubor, který je po ruce.
@item
Pokud je pro vás jednodu¹¹í zkonvertovat vìt¹í mno¾ství souborù v dired bufferu
Emacsu ne¾ z pøíkazové øádky shellu.
@end itemize

@noindent @samp{cstocs} je výhodné pou¾ít za tìchto okolností:

@itemize @bullet
@item
Jste-li v shellu a nemáte zrovna spu¹tìný Emacs.  (Jak se vám ale nìco takového
mù¾e stát?)
@item
Pokud je pro vás jednodu¹¹í zkonvertovat vìt¹í mno¾ství souborù z pøíkazové
øádky shellu ne¾ v dired bufferu Emacsu.
@item
Potøebujete-li konvertovat mnohamegabytové soubory a máte k dispozici novou
rychlej¹í verzi @samp{cstocs}.  @samp{cstocs} funguje na rozdíl od Emacsu jako
filtr a má tedy konstantní pamì»ové nároky nezávislé na velikosti
zpracovávaného souboru.
@item
Provádíte-li konverzi dávkovì z shell-scriptu.  Konverze pomocí @samp{cstocs}
je o nìco rychlej¹í vzhledem k pomalej¹ímu startu Emacsu.
@end itemize


@c ***** Tøídìní *****

@node Tøídìní, Messages, Konvertory, Top
@comment  node-name,  next,  previous,  up
@chapter Pseudoèeské tøídìní

Emacs má celou øady pøíkazù umo¾òujících tøídìní podle rùzných
kritérií.  @samp{emacs-czech} se sna¾í alespoò zèásti umo¾nit i tøídìní
èeských textù.

@menu
* Typ tøídìní::                 Co je toto tøídìní zaè.
* Ovládání tøídìní::            Jak se to pou¾ívá.
@end menu


@node Typ tøídìní, Ovládání tøídìní, Tøídìní, Tøídìní
@comment  node-name,  next,  previous,  up
@ifinfo
@section Jaký typ "èeského" tøídìní byl implementován
@end ifinfo
@iftex
@section Jaký typ @uvv{èeského} tøídìní byl implementován
@end iftex

Implementované tøídìní je pouze nejjednodu¹¹í variantou tøídìní èeských
textù.  Definuje pouze správné zaøazení èeských znakù do anglické
abecedy.  Nezohledòuje písmeno @samp{ch} ani ¾ádná jiná specifika
èeského tøídìní textù.  Poøadí znakù vzniklo setøídìním v¹ech znakù
znakové sady pomocí programu @samp{csr} Petra Ol¹áka.

Základním problémem èeského tøídìní je jeho pomalost.  Z dùvodu interní
implementace tøídìní v Emacsu nelze dost dobøe implementovat seriózní èeské
tøídìní, které by nebylo velmi pomalé.  I v @samp{emacs-czech} implementovaná
nejjednodu¹¹í podoba èeského tøídìní je výraznì pomalej¹í ne¾ tøídìní
standardní.  Nezávisle na pøípadné aktivaci èeského tøídìní v¹ak pùvodní
rychlost standardního tøídìní zùstává zachována.


@node Ovládání tøídìní,  , Typ tøídìní, Tøídìní
@comment  node-name,  next,  previous,  up
@section Pou¾ití èeského tøídìní

Existují tøi re¾imy èeského tøídìní:

@enumerate
@item
V¾dy standardní tøídìní (tento re¾im je implicitní).
@item
V¾dy èeské tøídìní.
@item
Tøídìní podle módu.
V tomto pøípadì se aplikuje èeské tøídìní, je-li v daném bufferu
zapnuta èeská klávesnice, jinak se aplikuje standardní tøídìní Emacsu.
@end enumerate

Aktivované èeské tøídìní má vliv na nìkteré standardní tøídící funkce
Emacsu (jako napøíklad @samp{sort-lines}).  Ostatních funkcí, které
nevyu¾ívají standardní tøídící funkci Emacsu (a kterých je patrnì
vìt¹ina), se toto nastavení netýká.

Nastavení re¾imu lze provést z menu nebo pomocí následujícího pøíkazu:

@table @kbd
@kindex C-x z s
@findex cz-sort-toggle
@item C-x z s
Cyklické pøepínání mezi tøemi re¾imy tøídìní (@code{cz-sort-toggle}).
Je-li vyvoláno s prefixovým argumentem, cyklické pøepínání se provádí v
opaèném smìru.
@end table

@vindex cz-sort
Implicitní re¾im je v¾dy standardní tøídìní.  Toto lze zmìnit nastavením
promìnné @code{cz-sort} pøed provedením @w{@code{(load "czech")}}.  Je-li
hodnota této promìnné @code{t}, bude nastaveno v¾dy èeské tøídìní.  Je-li
hodnotou této promìnné symbol @code{by-mode}, tøídìní je nastaveno podle módu.


@c ***** Messages *****

@node Messages, Rùzné, Tøídìní, Top
@comment  node-name,  next,  previous,  up
@chapter Maily, newsy a èe¹tina

Program podporuje automatickou konverzi mailù a newsù do
@ifinfo
"správného"
@end ifinfo
@iftex
@uv{správného}
@end iftex
kódování.  Umo¾òuje i vyu¾ití balíkù @samp{tm} (MIME) a @samp{bbdb}
(Insidious Big Brother Database).  Podporován je @samp{message-mode}
Gnus.  Z toho vyplývá, ¾e pøíslu¹né funkce balíku @samp{emacs-czech} lze
pou¾ívat jen v rámci Gnus verze 5.2 nebo vy¹¹í (máte-li Emacs verze
alespoò 19.31 nebo XEmacs 19.14, pak tyto Gnus máte).  V pøípadì zájmu
u¾ivatelù mohou být v budoucnu podporovány i jiné systémy, zejména
@samp{rmail}.

@menu
* Volba kódování::              Kdo je kdo.
* Obsluha v message-mode::      Funkce pro konverze v message-mode.
* Hooky v message-mode::        Co provádìt pøed konverzí a po ní.
* MIME::                        Emacs a MIME.
@end menu


@node Volba kódování, Obsluha v message-mode, Messages, Messages
@comment  node-name,  next,  previous,  up
@section Nastavení promìnných pro správnou funkci automatických konverzí

@samp{emacs-czech} rozli¹uje tøi základní typy kódování odesílaného mailu nebo
èlánku:

@table @code
@item ascii
7-bitové kódování jako v anglickém textu, dosud bohu¾el nejèastìji pou¾ívané i
pro èeské texty.
@item mime
Kódování podle standardu MIME, 7-bitové.  Toto kódování by mìli být schopni
pøijímat v¹ichni lidé v èeských zemích vybavení rozumným softwarem.
@item plain
®ádné kódování odesílaného textu, pøípadnì 8-bitové kódování podle standardu
MIME.  Zásadními nevýhodami tohoto zpùsobu kódování je neprùchodnost pøes
7-bitové linky (kterých je pomìrnì dost) a neèitelnost v prostøedích
pou¾ivajících nestandardní znakové sady (kterých je bohu¾el je¹tì více).
@end table

@vindex cz-gnus
@samp{emacs-czech} umí na základì E-mailové adresy (nikoliv jména!) èi názvu
diskusní skupiny nastavit podle zadaných kritérií správný typ kódování
odesílané zprávy.  Aktivace nebo deaktivace této funkce se provádí nastavením
promìnné @code{cz-gnus} na nìkterou z následujících hodnot:

@itemize @bullet
@item
@code{nil}: Konverze nebude provádìna.
@item
@code{no-mime} (implicitní): Konverze bude provádìna, ale není vyu¾íván balík
@samp{tm} (podpora MIME).
@item
@code{t}: Konverze bude provádìna vèetnì vyu¾ití funkcí balíku @samp{tm}.
@end itemize

Jestli¾e není k dispozici podpora MIME (promìnná @code{cz-gnus} má hodnotu
@code{no-mime}), znaèí @code{mime} v¾dy toté¾, co @code{ascii}.

Jestli¾e je k dispozici podpora pro MIME (promìnná @code{cz-gnus} má hodnotu
@code{t}), pou¾ívá se v¾dy v pøípadì @code{plain} 8-bitová podoba tohoto
standardu.

@menu
* Globální nastavení::          Implicitní kódování.
* Individuální nastavení::      Kódování na jméno.
* Vyu¾ití BBDB::                Velký Bratr to ví.
* Více pøíjemcù::               Kdo z koho.
@end menu


@node Globální nastavení, Individuální nastavení, Volba kódování, Volba kódování
@comment  node-name,  next,  previous,  up
@subsection Globální nastavení

Jednotné implicitní nastavení typù kódování se provádí pomocí následujících
promìnných:

@table @code
@item cz-message-method-default
Implicitní typ kódování v¹ech typù odesílaných zpráv (implicitnì
@code{ascii}).  Tato promìnná se pou¾ije v pøípadì, kdy je má nìkterá z ní¾e
uvedených promìnných hodnotu @code{nil}.
@item cz-message-method-mail
Implicitní typ kódování odesílaných mailù (implicitnì @code{mime}).
@item cz-message-method-news
Implicitní typ kódování odesílaných newsù (implicitnì @code{nil}).
@end table

Tyto promìnné urèují typ kódování odesílané zprávy v pøípadì, kdy pro pøíjemce
není dána individuální specifikace, @xref{Individuální nastavení}.

@node Individuální nastavení, Vyu¾ití BBDB, Globální nastavení, Volba kódování
@comment  node-name,  next,  previous,  up
@subsection Individuální nastavení

V pøípadì, kdy se pro nìkteré vám známé pøíjemce nebo diskusní skupiny li¹í
po¾adovaný typ kódování od implicitního, lze pomocí ní¾e uvedených promìnných
urèit typ kódování pøímo pro dané pøíjemce.  Je záhodno definovat individuální
nastavení kódování i pro ty pøíjemce zpráv, u nich¾ je po¾adovaný typ kódování
shodný s implicitním --- u¹etøíte si pak práci (a mo¾ná i problémy) pøi zmìnì
implicitního typu kódování.  V pøípadì vìt¹ího mno¾ství nastavovaných adres
mù¾e být s výhodou vyu¾ito balíku @samp{bbdb}, @xref{Vyu¾ití BBDB}.

Typ kódování se urèuje na základì e-mailové adresy pøíjemce, resp. názvu
diskusní skupiny.  V ní¾e uvedených promìnných je adresa èi název v¾dy
pova¾ována za regulární výraz, u nìho¾ staèí i shoda na podøetìzec adresy nebo
názvu.  Pokud se adresa èi název shoduje s více polo¾kami konfiguraèních
promìnných, platí první shoda.

Konfiguraèní promìnné:

@table @code
@item cz-message-method-people
Urèuje typ kódování pro pøíjemce e-mailù.  Jedná se o seznam obsahující
podseznamy formátu @w{@code{(@var{typ-kódování} "øetìzec 1" ... "øetìzec n")}}.
První polo¾ka podseznamu je nìkterý ze symbolù @code{ascii}, @code{mime} nebo
@code{plain}, ostatní jsou specifikující regulární výrazy.  I pro jeden a tý¾
typ kódování mù¾e být uvedeno více podseznamù.
@item cz-message-method-newsgroups
Tato promìnná má zcela shodný formát s @code{cz-message-method-people}, av¹ak
pou¾ívá se pro posuzování newsových zpráv.
@end table

Pøíklad nastavení:

@example
(setq cz-message-method-people
  '((mime "\\<mime_user@@"
          "\\.mime_factory\\.com\\>")
    (plain "@@our\\.domain\\.")
    (ascii "\\.oldware\\.com\\>"
           "\\<csech@@.*ascii\\.cz\\>"
           "\\<.*sevenbit.*@@")))
(setq cz-message-method-newsgroups
  '((mime "\\<cz\\." "mail.linux")
    (plain "\\<fido\\.")))
@end example

@node Vyu¾ití BBDB, Více pøíjemcù, Individuální nastavení, Volba kódování
@comment  node-name,  next,  previous,  up
@subsection Urèení typu kódování z BBDB

Pou¾íváte-li balík @samp{bbdb} (Insidious Big Brother Database; dostupný v
elisp archívu, té¾ standardní souèástí Debianu), mù¾ete k osobám ve své
databázi pøidat informaci o typu kódování, které preferují.  Zalo¾te polo¾ku
@code{mailtype} a do ní pro ka¾dou z daných osob ulo¾te nìkterou z hodnot
@code{ascii}, @code{mime} nebo @code{plain}.

Jestli¾e je hodnota promìnné @code{cz-message-use-bbdb} nastavena na jinou
hodnotu ne¾ @code{nil} a je k dispozici balík @samp{bbdb}, je pøi rozhodování o
typu konverze provedeno nejprve prohledání databáze.  Je-li nalezena u pøíjemce
polo¾ka @code{mailtype}, nastaví se kódování na její hodnotu.  V opaèném
pøípadì se aplikuje standardní postup urèení kódování podle konfiguraèních
promìnných.

Na rozdíl od konfiguraèních promìnných popsaných v pøedchozí sekci musí
e-mailová adrese pøíjemce souhlasit pøesnì s údajem v databázi, tj. pøi
porovnávání se neakceptuje podøetìzec ani regulární výraz.  @samp{bbdb} není
nikdy vyu¾íváno pøi urèování typu kódování pro diskusní skupiny.

@node Více pøíjemcù,  , Vyu¾ití BBDB, Volba kódování
@comment  node-name,  next,  previous,  up
@subsection Více pøíjemcù

Jestli¾e je zpráva urèena více pøíjemcùm, typ kódování se volí podle
následujících pravidel:

@itemize @bullet
@item
Je-li typ kódování pro nìkterého z pøíjemcù @code{ascii}, zvolí se toto
kódování.
@item
Jinak je-li typ kódování pro v¹echny pøíjemce @code{mime}, zvolí se
@code{mime}.
@item
Jinak je-li typ kódování pro v¹echny pøíjemce @code{plain}, zvolí se
@code{plain}.
@item
Jinak se zvolí typ kódování @code{ascii}.
@end itemize

Tímto je zaruèeno, ¾e nikdo z pøíjemcù nedostane zprávu v pro nìm (zcela)
neèitelném kódování.

Je-li zpráva urèena do diskusní skupiny a zároveò se kopie posílá e-mailem,
rozhoduje pouze název diskusní skupiny a nikoliv adresy pøíjemcù kopií.


@node Obsluha v message-mode, Hooky v message-mode, Volba kódování, Messages
@comment  node-name,  next,  previous,  up
@section Aktivace a korekce automatických konverzí

Je-li promìnná @code{cz-gnus} nastavena na jinou hodnotu ne¾ @code{nil}, je
aktivována mo¾nost konverze odesílaných mailù nebo èlánkù.  V
@samp{message-mode} jsou definovány následující funkce:

@table @kbd
@kindex C-c C-z
@findex cz-message-send-and-exit
@item C-c C-z
Toté¾, co standardní funkce @code{message-send-and-exit} (@kbd{C-c C-c}), ale
pøed odesláním provede patøiènou konverzi (@code{cz-message-send-and-exit}).
@findex cz-message-send
@item M-x cz-message-send
Toté¾, co standardní funkce @code{message-send}, ale pøed odesláním
provede patøiènou konverzi.
@kindex C-c C-s
@findex cz-message-show-method
@item C-c C-s
Vypí¹e metodu konverze, která má být aplikována pøi odeslání mailu
(@code{cz-message-show-method}). @footnote{Kombinace kláves @kbd{C-s C-s} je v
Gnus standardnì pøiøazena pro vlo¾ení signatury.  Proto¾e v¹ak pro tento úèel
existuje novìj¹í funkce na @kbd{C-c C-w}, lze zmínìnou kombinaci pøedefinovat.}
@end table

Je-li nastavena promìnná @code{cz-message-ask-on-send} na jinou hodnotu ne¾
@code{nil}, Emacs se pøed odesláním mailu nebo èlánku zeptá, je-li ve správné
podobì.  Implicitní hodnota této promìnné je závislá na hodnotì promìnné
@code{cz-verbose}, @xref{Rùzné rùzné}, co¾ implicitnì znamená @code{t}.

Kromì automatického urèení správného kódování lze toto zadat i explicitnì.

@table @kbd
@kindex C-c C-m
@findex cz-message-set-method
@item C-c C-m
Tato funkce (@code{cz-message-set-method}) se zeptá, jaké má být kódování
editované zprávy.  Mo¾né odpovìdi jsou @code{ascii}, @code{mime} (jen pøi
aktivované podpoøe MIME), @code{plain} a @code{default} (v tomto pøípadì bude
kódování zvoleno podle automatického výbìru).
@end table

Je-li mail nebo pøíspìvek odeslán pomocí standardních funkcí (napøíklad
@kbd{C-c C-c}), ¾ádná konverze se neprovádí.  Obáváte-li se, ¾e byste mohli
kvùli chybnému stisku kombinace kláves omylem odeslat zprávu nezakódovanou,
mù¾ete do svého @file{~/.emacs} pøidat následující øádky:

@example
(defun my-safe-message ()
  (define-key message-mode-map "\C-c\C-c" 'undefined))
(add-hook 'message-mode-hook 'my-safe-message)
@end example


@node Hooky v message-mode, MIME, Obsluha v message-mode, Messages
@comment  node-name,  next,  previous,  up
@section Hooky v @samp{message-mode}.

Pro @samp{message-mode} jsou definovány tyto hooky provádìné pøi odesílání
zpráv:

@itemize @bullet
@vindex cz-message-before-hook
@item cz-message-before-hook
Hook aplikovaný pøed konverzí zprávy pøipravené pro odeslání.
@vindex cz-message-after-hook
@item cz-message-after-hook
Hook aplikovaný po konverzi zprávy tìsnì pøed jejím odesláním.
@end itemize


@node MIME,  , Hooky v message-mode, Messages
@comment  node-name,  next,  previous,  up
@section Emacs a MIME

Existují dva programy umo¾òující pou¾ívání standardu MIME v Emacsu: @samp{tm} a
@samp{rmime}.  Proto¾e o druhém z nich je mi známo jen velmi málo a
@samp{emacs-czech} jej nepodporuje, uvedu zde nìkolik poznámek jen o balíku
@samp{tm}, konkrétnì jeho verzi 7.100.3.  I kdy¾ nemáte instalovánu ¾ádnou
podporu pro MIME, Gnus vám umo¾òují alespoò pøevést quoted printable v èlánku
do èitelné podoby pomocí pøíkazu @kbd{W q}.

Balík @samp{tm} je dostupný na následujících adresách:

@noindent
@samp{ftp://ftp.jaist.ac.jp/pub/GNU/elisp/mime/}@*
@samp{ftp://ftp.nis.co.jp/pub/gnu/emacs-lisp/tm/}@*
@samp{ftp://ftp.nisiq.net/pub/gnu/emacs-lisp/tm/}@*
@samp{ftp://ftp.miranova.com/pub/gnus/jaist.ac.jp/}@*
@samp{ftp://ftp.unicamp.br/pub/mail/mime/tm/}@*
@samp{ftp://ftp.tnt.uni-hannover.de/pub/editors/xemacs/contrib/}

Kromì toho je té¾ souèástí Debianu, tak¾e zdrojové texty patrnì získáte
nejrychleji z nìkterého jeho mirroru v Èeské republice.

Funguje v Emacsu i XEmacsu.  Autoøi uvádí, ¾e plná podpora vìt¹iny znakových
sad (vèetnì @w{ISO 8859-2}) je k dispozici jen v MULE Emacsu (multijazyková
modifikace GNU Emacsu, pou¾ívaná zejména v Japonsku).  Z dùvodu rychlosti je
vyu¾ívána externí podpora MIME, tj. metamail @footnote{Nemáte-li instalován
metamail, mù¾ete pøesto @samp{tm} v omezené míøe pou¾ívat: nastavte promìnné
@code{quoted-printable-internal-encoding-limit} a
@code{quoted-printable-internal-decoding-limit} na dostateènì velké hodnoty
(tyto promìnné nejsou popsány v dokumentaci).}.  Pøesto¾e se oficiálnì jedná o
beta verzi, program se zdá být plnì funkèní a má celkem pøíjemné ovládání a
vlastnosti a spolupracuje (na rozdíl od @samp{emacs-czech}) se v¹emi
emacsovskými mail a news rozhraními.

Tip: Pou¾íváte-li @samp{font-lock-mode}, pøidejte do svého @file{~/.gnus.el}
øádek

@example
(add-hook 'mime-editor/translate-hook (lambda () (font-lock-mode 0)))
@end example

Mo¾ná pak bude ukonèení editace MIME zprávy výraznì rychlej¹í a s výraznì
men¹ími pamì»ovými nároky.


@c ***** Co se neve¹lo jinam *****

@node Rùzné, Nedostatky a chyby, Messages, Top
@comment  node-name,  next,  previous,  up
@chapter Rùzné

@menu
* Fonty::                       Nastavení (èeských) fontù.
* Menu::                        Menu ano èi ne?
* Obcházení problémù::          Co s problematickým SW okolo?
* Rùzné rùzné::                 Co se neve¹lo jinam.
@end menu


@node Fonty, Menu, Rùzné, Rùzné
@comment  node-name,  next,  previous,  up
@section Fonty

Pro správné zobrazení èeských znakù je potøeba Emacsu nastavit èeské fonty.
Toho lze dosáhnout trojím zpùsobem:

@enumerate
@item
Nastavením atributù systému X Window pøed startem Emacsu.
@item
Parametrem pøíkazové øádky pøi jeho spu¹tìní.
@item
Nastavením fontù funkcemi Emacsu za jeho bìhu.
@end enumerate

Jak lze realizovat kteroukoliv z tìchto metod je popsáno v manuálu Emacsu,
@ifinfo
@xref{Font X,,,emacs}.
@end ifinfo
@iftex
viz manuál Emacsu, oddíl [Font X].
@end iftex

První metoda,
@ifinfo
@xref{Resources X,,,emacs},
@end ifinfo
@iftex
viz manuál Emacsu, oddíl [Resources X],
@end iftex
je obecnì nejvýhodnìj¹í.  Staèí jednou nastavit správný font v
souboru @file{~/.Xdefaults} a o více se nestarat.  Tato metoda selhává v
pøípadì, kdy je tento soubor sdílený mezi prostøedími vy¾adujícími rùzné fonty
a nelze provést volbu patøiènými instrukcemi makroprocesoru.

Druhá metoda je nejjednodu¹¹í v pøípadì, kdy font není nastaven a je potøeba
jej zvolit.  Je v¹ak ponìkud nepohodlná.

Tøetí metoda umo¾òuje nastavit fonty pøímo z Emacsu, napøíklad podle obsahu
promìnné @samp{DISPLAY}.  Její nevýhodou je pomalej¹í start Emacsu, je-li
pou¾ita v @file{~/.emacs}, nebo» se mìní pùvodnì nastavený font.  Tuto metodu
vyu¾ívá @samp{emacs-czech}.

@menu
* Konfiguraèní promìnné::       Poèáteèní nastavení fontù.
* Nastavení fontù::             Explicitní nastavení fontù.
* Pøíklad::                     Pøíklad konfigurace a nastavení.
@end menu


@node Konfiguraèní promìnné, Nastavení fontù, Fonty, Fonty
@comment  node-name,  next,  previous,  up
@subsection Konfiguraèní promìnné

Pomocí nastavení následujících promìnných @emph{pøed} provedením
@w{@code{(load "czech")}} lze nastavit ¾ádané fonty.

@table @code
@vindex cz-font-default
@item cz-font-default
Promìnná urèující implicitní font, který se pou¾ije ve v¹ech druzích textu,
není-li specifikováno jinak.  Její hodnotou je øetìzec se jménem fontu.
Nastavení této promìnné má stejný efekt jako toté¾ nastavení v seznamu atributù
nebo volba @samp{-fn} na pøíkazové øádce.  Pøíklad:

@example
(setq cz-font-default
"-misc-fixed-medium-r-normal-sans-15-140-75-75-c-90-iso8859-2")
@end example

Struèné vysvìtlení jednotlivých polo¾ek je uvedeno napøíklad v manuálu Emacsu,
@ifinfo
@xref{Font X,,,emacs}.
@end ifinfo
@iftex
viz manuál Emacsu, oddíl [Font X].
@end iftex

@vindex cz-font-faces-list
@item cz-font-faces-list
Seznam urèující fonty pou¾ité v rùzných typech textu (@dfn{faces}).  Prvky
tohoto seznamu jsou seznamy o dvou polo¾kách urèujících typ textu a pøíslu¹ný
font.  Není nutné urèit fonty pro v¹echny druhy textu --- není-li font pro
nìjaký typ textu uveden, bude pou¾it implicitní font.  Pøíklad:

@example
(setq cz-font-faces-list
'((modeline "-misc-fixed-medium-r-normal-*-15-*-*-*-c-*-iso8859-2")
  (highlight "-misc-fixed-medium-r-normal-*-15-*-*-*-c-*-iso8859-2")
  (region "-misc-fixed-medium-r-normal-*-15-*-*-*-c-*-iso8859-2")
  (secondary-selection 
   "-misc-fixed-medium-r-normal-*-15-*-*-*-c-*-iso8859-2")
  (bold "-misc-fixed-bold-r-normal-*-15-*-*-*-c-*-iso8859-2")
  (italic "-misc-fixed-medium-r-normal-*-15-*-*-*-c-*-iso8859-2")
  (bold-italic "-misc-fixed-bold-r-normal-*-15-*-*-*-c-*-iso8859-2")
  (underline "-misc-fixed-medium-r-normal-*-15-*-*-*-c-*-iso8859-2")
))
@end example

Vìt¹í fantazii pøi zachování èitelnosti textù lze pøi souèasném mno¾ství volnì
dostupných èeských fontù, @xref{Dal¹í fonty,Èeské fonty pro X}, jen sotva
uplatnit.

@vindex cz-font-info-list
@item cz-font-info-list
Zcela analogická promìnná k @w{@code{cz-font-faces-list}}, pouze se zde
nastavují fonty pro info, tj. @w{@code{info-xref}}, @w{@code{info-node}} a
@w{@code{info-menu-5}}.  Tyto polo¾ky nelze uvádìt v promìnné
@w{@code{cz-font-faces-list}}, proto¾e pokus o jejich nastavení pøed prvním
vstupem do info prohlí¾eèe by vedl k chybì.
@end table

Pokud tyto promìnné nejsou explicitnì nastaveny, je jejich hodnota @code{nil} a
pøíslu¹né fonty se nenastaví (pou¾ijí se fonty implicitní).


@node Nastavení fontù, Pøíklad, Konfiguraèní promìnné, Fonty
@comment  node-name,  next,  previous,  up
@subsection Nastavení fontù

Nastavení fontù podle hodnot konfiguraèních promìnných se provede automaticky
pøi zavedení @samp{emacs-czech} (@w{@code{(load "czech")}}) nebo jej lze provést
explicitnì kdykoliv pozdìji pomocí funkce @code{cz-set-fonts}.

@table @code
@findex cz-set-fonts
@item cz-set-fonts @var{default} &optional @var{faces-list} @var{info-list}
Nastaví základní font (@var{default}), fonty pro faces (@var{faces-list}) a
fonty pro info browser (@var{info-list}).  Formát parametrù je shodný s
formátem odpovídajících konfiguraèních promìnných,
@xref{Konfiguraèní promìnné}.
@end table


@node Pøíklad,  , Nastavení fontù, Fonty
@comment  node-name,  next,  previous,  up
@subsection Pøíklad konfigurace fontù

Ukázka nastavení fontù v souboru @file{~/.emacs}:

@example
(setq cz-font-default
  (cond
    ((string= (substring (getenv "DISPLAY") 0 10) "bigdisplay")
      "-*-20-*-2")
    ((string= (substring (getenv "DISPLAY") 0 5) "small")
      "-*-12-*-2")
    (t
      "-*-16-*-2")))
(load "czech")
@end example

Toto zajistí nastavení urèených fontù pro konzoly poèítaèù @samp{bigdisplay} a
@samp{small}.  Na displayích ostatních poèítaèù bude nastaven font
@samp{-*-16-*-2}.  Analogickým zpùsobem lze nastavit ostatní promìnné
definující fonty.

Je-li pou¾íván secure shell s automatickou alokací displaye, neznám ¾ádnou
metodu, jak zjistit typ prostøedí.  Pøípadné informace na toto téma uvítám.


@node Menu, Obcházení problémù, Fonty, Rùzné
@comment  node-name,  next,  previous,  up
@section Menu

@vindex cz-enable-menu
@findex cz-menu-on
@findex cz-menu-off
Pokud vám vadí menu @samp{Czech} v menubaru, mù¾ete jej zru¹it jeho
sebedestrukèní polo¾kou.  Druhou mo¾ností je pøidat do svého
@file{~/.emacs} nastavení promìnné @code{(setq cz-enable-menu nil)} @emph{pøed}
@w{@code{(load "czech")}} nebo volání funkce @code{(cz-menu-off)} @emph{za}
@w{@code{(load "czech")}}.

Chcete-li, aby se menu objevovalo jen v nìkterých módech, lze i toto
zaøídit.  Chcete-li napøíklad, aby se menu @samp{Czech} objevovalo pouze
v nìkterých textových re¾imech, pøidejte do svého @file{~/.emacs}
následující øádky:

@example
(load "czech")   ; není nutno, bylo-li ji¾ provedeno
(cz-menu-off)
(make-variable-buffer-local 'cz-menu-mode)
(add-hook 'text-mode-hook 'cz-menu-on)
(add-hook 'indented-text-mode-hook 'cz-menu-on)
(add-hook 'latex-mode-hook 'cz-menu-on)
@end example

Chcete-li naopak, aby se toto menu vyskytovalo v¹ude, ale neobtì¾ovalo
vás v dired módu, pøidejte tyto øádky:

@example
(load "czech")   ; není nutno, bylo-li ji¾ provedeno
(cz-menu-on)
(make-variable-buffer-local 'cz-menu-mode)
(add-hook 'dired-mode-hook 'cz-menu-off)
@end example

V XEmacsu menu @samp{Czech} není.


@node Obcházení problémù, Rùzné rùzné, Menu, Rùzné
@comment  node-name,  next,  previous,  up
@section Obcházení problémù

Nìkdy se stává

@table @code
@vindex cz-evils
@item cz-evils
Seznam symbolù upozoròující na chybnì se chovající software v okolí
@samp{emacs-czech}.  V souèasné dobì je brán zøetel na následující hodnoty:
@itemize @bullet
@item bad-sendmail
Existují systémy, na kterých je instalován sendmail a je zkonfigurován tak, ¾e
automaticky pøekódovává maily odesílané v 8-bitovém MIME do nìkteré ze
7-bitových variant.  Pokud nemù¾ete toto chování zmìnit jinak (napø. vlastním
zásahem nebo prostøednictvím va¹eho systémového administrátora), pou¾ijte tento
symbol.  8-bitové maily pak budou odesílány bez MIME hlavièek, èím¾ bude
nevhodné chování sendmailu potlaèeno.  Na druhou stranu tyto maily budou (na
rozdíl od mailù s MIME hlavièkami) patrnì chybnì zobrazeny ve v¹ech mail
readerech v prostøedí Windoze.
@end itemize
@end table


@node Rùzné rùzné,  , Obcházení problémù, Rùzné
@comment  node-name,  next,  previous,  up
@section Rùzné rùzné vìci

Nìkteré dal¹í funkce:

@table @kbd
@findex cz-save-settings
@item M-x cz-save-settings
Ulo¾í aktuální nastavení do souboru @file{~/.emacs}.  Pøi pøí¹tím spu¹tìní
Emacsu by mìla být konfigurace @samp{emacs-czech} podobná konfiguraci pøi
posledním zavolání této funkce.  Mìjte na pamìti, ¾e autor programu nenese
¾ádnou zodpovìdnost za pøípadný nepoøádek ve va¹em @file{~/.emacs}, který tato
funkce nadìlá.
@end table

Nìkteré dal¹í promìnné:

@table @code
@vindex cz-verbose-level
@item cz-verbose-level
Tato promìnná udává, jak moc má být program ukecaný.  Povolené hodnoty jsou
celá èísla od 0 do 9.  0 znamená, ¾e se nebudou vypisovat ¾ádná hlá¹ení kromì
fatálních chyb, pøi hodnotì 9 se vypisuje úplnì v¹e.  Chcete-li, aby se vám
vypisovala právì dùle¾itá varování, nastavte hodnotu promìnné na 5.  Implicitní
hodnota je 9.
@vindex cz-enable-keybindings
@item cz-enable-keybindings
Je-li tato promìnná nastavena na hodnotu @code{nil}, nebudou pøi zavedení
@samp{emacs-czech} definovány klávesové pøíkazy.  Implicitní hodnota je
@code{t}.
@end table


@c ***** Bugs *****

@node Nedostatky a chyby, FAQ, Rùzné, Top
@comment  node-name,  next,  previous,  up
@chapter Nedostatky a chyby

Program má následující nedostatky:

@itemize @bullet
@item
Èeská klávesnice nefunguje v jednoznakovém interaktivním promptu (napø. funkce
@w{@code{zap-to-char}}).
@item
V XEmacsu a na nìkterých strojích i v Emacsu nefunguje pøepínání klávesnic v
@samp{Isearch} módu.
@item
Na nìkterých svérázných klávesnicích (napø. Sun) nìkteré klávesnicové funkce
nefungují.
@item
Program se ve více situacích nechová zcela korektnì, je-li vkládaný znak uvozen
prefixovým argumentem.
@item
Automatické konverze nefungují pøi prohlí¾ení a editaci @samp{tar} souborù.
@item
V NT verzi Emacsu nefunguje správnì MIME z dùvodu nestandardního kódování
znakù v tamìj¹ím prostøedí.
@item
Nastavení promìnné @w{@code{cz-default-font}} na hodnotu @code{nil} neprovede
odstranìní èeského fontu, jak by nìkdo mohl oèekávat.
@item
Dokumentace nepro¹la jazykovou úpravou.
@item
Vzezøení z@TeX{}ované dokumentace je limitováno mo¾nostmi stylu @samp{texinfo}.
@item
Pøi pou¾ití nìkterých fontù se mù¾e stát, ¾e kurzor natvrdo pøekrývá znaky ---
znaky pøes nìj
@ifinfo
"neprosvítají".
@end ifinfo
@iftex
@uv{neprosvítají}.
@end iftex
Nemám tu¹ení, co je pøíèinou tohoto jevu (snad chyba ve fontu) a tudí¾ ani
nemám ¾ádnou ideu, jak mu zabránit (samozøejmì kromì pou¾ití jiných fontù).
Nejedná se v¹ak o chybu mého programu.
@end itemize

@samp{emacs-czech} se umí pøizpùsobit nìkterým problémùm, které jsou zpùsobeny
pou¾itím nestandardnì se chovajícího softwaru, @xref{Obcházení problémù}.

Nejsou mi známy ¾ádné jiné chyby.  Pokud nìjaké naleznete, mù¾ete mì o nich
informovat, @xref{Author}.  Pøipojte prosím informaci o verzi
@w{@samp{emacs-czech}}, va¹eho Emacsu a o prostøedí, ve kterém jej pou¾íváte.
Aktuální informace jsou k dispozici na
@w{@samp{http://www.fi.muni.cz/~pdm/emacs-czech.html}}.


@c ***** Frequntly asked questions *****

@node FAQ, Index kláves, Nedostatky a chyby, Top
@comment  node-name,  next,  previous,  up
@chapter Èasto pokládané otázky

@itemize @bullet
@item
? Pøi naèítání souboru @w{@file{czech.el}} se objevuje chyba o neexistujícím
souboru @w{@file{iso02-syn.el}}.

! Zkopírujte pøilo¾ený soubor @w{@file{iso02-syn.el}} do @emph{standardního}
adresáøe lispovských knihoven Emacsu.
@item
? Ve svém @file{~/.emacs} mám øádek
@example
(setq @var{promìnná} @var{hodnota})
@end example
ale toto nastavení nemá ¾ádaný úèinek.

! Nìkterá nastavení promìnných je nutno provést pøed provedením
@example
(load "czech")
@end example
tj. v tomto pøípadì je správné poøadí pøíkazù
@example
(setq @var{promìnná} @var{hodnota})
(load "czech")
@end example
@item
? Nefunguje mi pøepínání klávesnic pomocí klávesy @kbd{Pause}@*
!
@itemize @minus
@item V prostøedí systému X Window:@*
Zkontrolujte, zda klávesa @kbd{Pause} skuteènì dává odpovídající symbol,
napøíklad pomocí programu @samp{xev}.  Pokud tomu tak není, je nutné si pøidat
patøièný øádek do souboru @file{~/.Xmodmap} (bli¾¹í informace podá manová
stránka programu @samp{xmodmap}).
@item Na znakovém terminálu:@*
Zde je situace trochu slo¾itìj¹í.  Znakové terminály nevrací symbol
@samp{Pause}, nýbr¾ sekvenci symbolù obvykle uvozenou znakem @samp{Escape}.
Tuto sekvenci je nutno nìjakým zpùsobem zjistit a poté jí pøiøadit funkci
pøepínání klávesnice.  Napøíklad na linuxovské konzole mù¾e fungovat
@example
(global-set-key "\e[P" 'cz-keyboard-mode)
@end example
@end itemize
@item
? Jsem zaèínajícím u¾ivatelem Emacsu.  Kde mohu získat o Emacsu, jeho funkcích
a konfiguraci více informací?

! Mo¾ností je nìkolik:
@itemize @minus
@item
Emacs obsahuje tutoriál dostupný z menu @samp{Help} polo¾kou @samp{Emacs
Tutorial} nebo kombinací kláves @kbd{C-h t}.  Tento tutoriál je ponìkud hùøe
stravitelný, ale obsahuje v¹echny základní informace a je ihned po ruce.  Pìkný
úvod do Emacsu je souèástí linuxovské u¾ivatelské pøiruèky dostupné na vìt¹inì
linuxovských ftp.
@item
Emacs obsahuje kompletní dokumentaci v elektronické podobì pøístupnou z menu
@samp{Help} polo¾kou @samp{Browse Manuals} nebo kombinací kláves @kbd{C-h i}.
Je velmi obsáhlá a lze v ní najít ve¹keré u¾ivatelské informace.  Tuto
dokumentaci lze i zTeXovat a vytisknout --- originální Texinfo soubor je
souèástí distribuce Emacsu.  Pokud chcete i trochu programovat v Emacs LISPu,
lze si pøeèíst úvodní pøíruèku @w{@file{emacs-lisp-intro}}; referenèní
pøíruèkou je @w{@file{elisp-manual}}.  V¹echny tyto vìci jsou dostupné na øadì
ftp serverù v adresáøích @file{gnu}.  Originální zdroj je
@w{@samp{ftp://prep.ai.mit.edu/pub/gnu/}}.
@item
Existuje nìkolik diskusních skupin o Emacsu, zejména:
@display
gnu.emacs.help
comp.emacs
gnu.emacs.source
gnu.emacs.announce
@end display
Ve skupinì @w{@samp{gnu.emacs.help}} jsou publikovány frequently asked
questions about Emacs, ze kterých se lze dozvìdìt více zajímavých vìcí (a
jejich¾, vìt¹inou mírnì zastaralá, verze je dostupná z menu
@w{@samp{Help/Emacs FAQ}}.
@end itemize
@item
? Kde lze nalézt aktuální informace o @w{@samp{emacs-czech}} a nejnovìj¹í verzi
tohoto balíku?

! @w{@samp{http://www.fi.muni.cz/~pdm/emacs-czech.html}}
@item
? Stále si nevím rady.  Co mám dìlat?

! Je¹tì jednou si dobøe pøeètìte tuto dokumentaci.  Pokud to nepomù¾e, zkuste
se zeptat nìjakého kolegy nebo se podívat na
@w{@samp{http://www.fi.muni.cz/~pdm/emacs-czech.html}}.  Pokud ani to nepomù¾e
nebo není mo¾né, zkuste se obrátit na adresu @w{@samp{pdm@@fi.muni.cz}}.
Popi¹te v¹ak vá¹ problém pokud mo¾no co nejpodrobnìji a nejsrozumitelnìji.
Nezapomeòte pøipojit informaci o verzi @w{@samp{emacs-czech}}, va¹eho Emacsu a
prostøedí, ve kterém jej pou¾íváte.
@end itemize


@c ***** Indexy *****


@node Index kláves, Index promìnných a funkcí, FAQ, Top
@comment  node-name,  next,  previous,  up
@chapter Seznam klávesových pøíkazù

@printindex ky


@node Index promìnných a funkcí, Èe¹tina a UN*X, Index kláves, Top
@comment  node-name,  next,  previous,  up
@chapter Seznam promìnných a funkcí

Zde je uveden seznam v¹ech promìnných, které lze pou¾ít pro konfiguraci, a dále
v¹ech interaktivních a nìkterých neinteraktivních funkcí programu.

Seznam funkcí:

@printindex fn

Seznam promìnných:

@printindex vr


@c ***** O èe¹tinì v Unixu *****

@node Èe¹tina a UN*X, Pojïme psát èesky!, Index promìnných a funkcí, Top
@comment  node-name,  next,  previous,  up
@chapter Èe¹tina a UN*X

Dovolil bych si zde uvést nìkolik poznámek o stavu èeské podpory pro UN*X
obecnì.

Ní¾e zmiòované balíky pro pou¾ití èe¹tiny v UN*Xu jsou k dispozici na@*
@samp{ftp://ftp.muni.cz/pub/UNIX/localization/}.

Bohu¾el máme tu smùlu, ¾e na¹e abeceda je pøíli¹ slo¾itá na to, aby ji bylo
mo¾no bez problémù kdykoliv pou¾ít, a zároveò pøíli¹ jednoduchá na to, aby si
kdekdo mohl
@ifinfo
"zbastlit"
@end ifinfo
@iftex
@uv{zbastlit}
@end iftex
vlastní podporu.  Dochází tedy k tomu, ¾e si ka¾dý
@ifinfo
"nìco udìlá".
@end ifinfo
@iftex
@uv{nìco udìlá}.
@end iftex
Vzniká chaos, mnohdy se stejná vìc dìlá zbyteènì vícekrát.  Dobré my¹lenky se
pøitom mohou ztratit a ¹patné se naopak standardizovat.

Apeluji: Stvoøíte-li nìco, o èem si myslíte, ¾e by to mohlo být k u¾itku i
nìkomu jinému, nenechávejte si to pro sebe!  Pracujete-li na nìèem takovém,
sdìlte to té¾.  Nejste-li si jisti, zda je va¹e vìc opravdu k u¾itku, nevadí,
zkuste to taky.  Nic tím nepokazíte.  Je to i pøípad programu
@samp{emacs-czech}.  Pokud ètete tento text, znamená to u¾ mo¾ná, ¾e jsem jej
nepsal úplnì zbyteènì.

Tøeba nìkdo zrovna nìco takového marnì shání.  Tøeba je nìkdo ochoten se na
va¹í práci podílet.  Tøeba se nìkdo inspiruje a pøidá rùzná vylep¹ení.
Zvy¹ujme vzájemnou informovanost!  Jinak by se nám mohlo (nikoliv poprvé) stát,
¾e se mezitím probudí nìjaká velká firma, která zavede vlastní nepøíli¹
podaøený standard a následnì nám jej vnutí.

S potì¹ením mohu konstatovat, ¾e v poslední dobì se ledy pohnuly.  Koneènì se
na¹lo nìkolik lidí, kteøí jsou ochotni nìco udìlat pro
@ifinfo
"veøejný zájem".
@end ifinfo
@iftex
@uv{veøejný zájem}.
@end iftex

Struèný pøehled vìcí, které je tøeba lokalizovat:

@menu
* Dal¹í fonty::                 Chybí èeské fonty pro X Window System.
* Postscriptové fonty::         Chybí i jiné fonty.
* Univerzální klávesnice::      Kde vzít èeskou klávesnici mimo Emacs?
* Kontrola pravopisu::          Èeská podpora pro ispell.
* Èeský @TeX{}::                @TeX{}ování èesky.
* Locales::                     SW a národní zvyklosti.
@end menu

Jestli se snad nìkde zmiòuji o nìèem, co je potøeba udìlat a ono to existuje,
je to pouze potvrzením nìkterých vý¹e uvedených skuteèností.  Potom neváhejte a
dejte vìdìt ostatním.

@node Dal¹í fonty, Postscriptové fonty, Èe¹tina a UN*X, Èe¹tina a UN*X
@comment  node-name,  next,  previous,  up
@section Fonty

Èeské fonty pro X Window System jsou prvním krokem nezbytným k poèe¹tìní
UN*Xu.  V poslední dobì mno¾ství volnì dostupných Xových fontù pøekroèilo
magickou hranici pou¾itelnosti.  To samozøejmì neznamená, ¾e by nebylo
zapotøebí dal¹ích fontù, tak¾e má-li kdo chu», mù¾e v jejich vytváøení
pokraèovat.

V¹echny @emph{volnì ¹íøitelné} @w{ISO 8859-2} fonty pro Xy, o kterých vím, jsou
obsa¾eny v debianovských balících @samp{xfntil2} a  @samp{xfntil2-nonfree}.
Tyto balíky jsou souèástí Debianu od verze 1.3 (v dobì psaní tìchto øádkù
je¹tì ve stavu nestabilní distribuce).  Pro ménì informované: Debian je
distribuce Linuxu a jeho mirror v Èeské republice se nachází na
@samp{ftp://sunsite.mff.cuni.cz/MIRRORS/ftp.debian.org/debian/}.

Pro puntièkáøe:  Nerozli¹uji pojmy @samp{èeský font} a @samp{font obsahující
znaky sady @w{ISO 8859-2}}.

@node Postscriptové fonty, Univerzální klávesnice, Dal¹í fonty, Èe¹tina a UN*X
@comment  node-name,  next,  previous,  up
@section Postscriptové fonty

Nechce se mi tomu vìøit, ale prý neexistuje jediný pou¾itelný volnì ¹íøitelný
postscriptový font obsahující v¹echny èeské znaky.

@node Univerzální klávesnice, Kontrola pravopisu, Postscriptové fonty, Èe¹tina a UN*X
@comment  node-name,  next,  previous,  up
@section Klávesnice

Zapeklitá vìc.  Na linuxovské konzole u¾ bìhá èeská klávesnice bez problémù.
Potí¾e jsou v¹ak stále s èeskou klávesnicí pod X Window System.  Díky Janu
@ifinfo
"Yenyovi"
@end ifinfo
@iftex
@uv{Yenyovi}
@end iftex
Kasprzakovi je podpora èeské klávesnice pro Xy souèástí cs-tools od verze 0.18.
Funguje se v¹emi programy, které mají dynamicky pøilinkované základní X
knihovny nebo které jsou slinkovány staticky s knihovnami podporujícími XKB.
Pozor, tato podpora se týká pouze XFree86 3.1.2 a 3.2!

@node Kontrola pravopisu, Èeský @TeX{}, Univerzální klávesnice, Èe¹tina a UN*X
@comment  node-name,  next,  previous,  up
@section Kontrola pravopisu

Hmm, hmm.  Práce pro skuteèné odborníky.  Èeská kontrola pravopisu sice
existuje, ale pouze jako souèást jistých komerèních produktù.  Tedy v
rámci GNU projektu pro ispell nepou¾itelná.  Bez této pomùcky se sice
lze obejít, ale o její u¾iteènosti také nelze pochybovat.  Co vy na to,
@TeX{}isté?

Aspoò jedna vla¹tovka: Díky panu Tomá¹i Èermákovi existuje volnì dostupná èeská
podpora pro ispell na @samp{http://hlava22.fsv.cvut.cz/~cermak/ispell/}.
Bohu¾el má zatím daleko k pou¾itelnosti.  Uvidíme, co se s ní stane v budoucnu.

@node Èeský @TeX{}, Locales, Kontrola pravopisu, Èe¹tina a UN*X
@comment  node-name,  next,  previous,  up
@section Èeský @TeX{}

Zde je situace pomìrnì dobrá.  Podporu èeského Plain-@TeX{}u lze nalézt na
oficiálním ftp serveru CsTUGu: @samp{ftp://ftp.cstug.cz/pub/tex/local/cstex/}.
Díky Jaroslavu ©najdrovi existuje i funkèní podporu La@TeX{}u, která je k mání
na @samp{http://home.zcu.cz/~snajdr5/cslatex/}.

@node Locales,  , Èeský @TeX{}, Èe¹tina a UN*X
@comment  node-name,  next,  previous,  up
@section Locales

Málem jako houby po de¹ti se v poslední dobì zaèaly objevovat rùzné èeské
podpory locales.  Nemù¾eme samozøejmì oèekávat hned na zaèátku zázraky, ale je
dobøe, ¾e se na vìci pracuje.  Za v¹echny uvádím podporu Vladimíra Michla na@*
@samp{http://www.inf.upol.cz/~michlv/WG15-collection.tar.gz} a podporu Davida
Sauera na@*
@samp{http://cs.felk.cvut.cz/~xsauer/locales.htmlx}.


@c ***** Politika *****

@node Pojïme psát èesky!, Author, Èe¹tina a UN*X, Top
@comment  node-name,  next,  previous,  up
@ifinfo
@chapter Pøe¾ije "cestina" rok 2000?
@end ifinfo
@iftex
@c Nemá to rádo normální uvozovky v moving argumentu
@chapter Pøe¾ije @uvv{cestina} rok 2000?
@end iftex

@emph{(Proto¾e mi bylo nìkolikrát vyèteno, ¾e nemám dostatek taktu, doporuèuji
tuto sekci pøeskoèit. --- Pozn. autora.)}

Jsem asi jen jeden z mála, komu vadí, ¾e vìt¹ina lidí posílá
@ifinfo
"èeské"
@end ifinfo
@iftex
@uv{èeské}
@end iftex
maily bez akcentù a ¾e ve v¹ech èeských diskusních skupinách se diskutuje tímto
zpùsobem.  Nemohu si v¹ak pomoci --- je pro mne naprosto nepochopitelné,
jakto¾e na konci dvacátého století nejsme schopni komunikovat ve své
mateø¹tinì.

Nejde pøitom jen o problém èistoty jazyka.  Zásadní problém vidím v tom, ¾e
bezakcentové texty jsou hùøe èitelné, mnohdy matoucí a nìkdy dochází i ke
ztrátì informace
@ifinfo
("jak se ten pán vlastnì jmenuje?").
@end ifinfo
@iftex
@uv{jak se ten pán vlastnì jmenuje?}.
@end iftex
Nicménì i
@ifinfo
"estetické"
@end ifinfo
@iftex
@uv{estetické}
@end iftex
hledisko je nezanedbatelné.

Musím se pøiznat, ¾e jsem pøístupem vìt¹iny lidí k tomuto problému naprosto
znechucen.  Pøestalo mì definitivnì bavit bojovat s ignorancí, leností a je¹tì
ledasèím jiným.  Inu, kdo chce kam, pomozme mu tam.  Máme, co chceme.  Patrnì
skonèíme jako národ pologramotných hackerù, na nì¾ si budou vysmátí Windozisti
ukazovat prstem.


@c ***** O autorovi ******

@node Author,  , Pojïme psát èesky!, Top
@comment  node-name,  next,  previous,  up
@ifinfo
@chapter Author of this program

My name is Milan Zamazal.  I am a student of computer science at Masaryk
University in Brno.  E-mail: @w{@samp{pdm@@fi.muni.cz}}.

I would like to thank especially the following people:

@itemize @bullet
@item
Jaroslav ©najdr, who contributed and consulted some XEmacs parts.
@item
Michal Koneèný, who made the simple Czech keyboard package from which I got
the first basic ideas how to make Czech keyboard for Emacs.
@item
Jan "Yenya" Kasprzak, the famous UN*X guru and the main author of the
@samp{cstools} package; he answers a lot of my UN*X questions and gave me some
ideas.
@item
Ale¹ Èepek for various consulting.
@end itemize

Feel free to send me bugs, comments, improvements, suggestions, and your
opinions on this package.
@end ifinfo
@iftex
@chapter Autor programu

Jmenuji se Milan Zamazal.  Jsem studentem matematické informatiky na Masarykovì
univerzitì v Brnì.  E-mail: @w{@samp{pdm@@fi.muni.cz}}.

Chtìl bych na tomto místì podìkovat zejména následujícím lidem:

@itemize @bullet
@item
Jaroslavu ©najdrovi, který pøispìl kódem a radami k èástem týkajícím se
XEmacsu.
@item
Michalu Koneènému, který vytvoøil jednoduchý elispovský prográmek pro èeskou
klávesnici, ze kterého jsem naèerpal první ideje, jak èeskou klávesnici
v Emacsu implementovat.
@item
Janu @uv{Yenyovi} Kasprzakovi, známému UN*Xovému expertovi a autoru balíku
@samp{cstools}, za v¹estrannou spolupráci v oblasti poznávání UN*Xu a nìkteré
my¹lenky.
@item
Ale¹i Èepkovi za konzultaci ohlednì balíku a dokumentace.
@end itemize

Informace o chybách, komentáøe, vylep¹ení, návrhy a názory na tento program
jsou vítány.
@end iftex


@c -------****** Závìr *****-------

@contents
@bye


@c Local Variables:
@c mode: texinfo
@c cz-keyboard-mode: t
@c abbrev-mode: t
@c End:

