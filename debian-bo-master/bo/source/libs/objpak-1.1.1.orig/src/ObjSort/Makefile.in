
###############################################################################
#
# ObjectPak Objective C Class Library
#
###############################################################################

objcc       = @objcc@
CPPFLAGS    = @CPPFLAGS@ -I../../include/private
CFLAGS      = @CFLAGS@
GFLAGS      = @GFLAGS@
DEFS        = @DEFS@

libdir      = @libdir@

###############################################################################
#
# ObjectFiles
#
###############################################################################

OBJFILES    = ObjSort.o SortSeq.o

###############################################################################
#
# Rule for .m suffix for compilation of Objective C files
# Prepend 'pwd' to the filename to make it possible to debug the library from
# some other directory (e.g. a program that links in the library)
#
###############################################################################

.SUFFIXES: .m .g

.m.o:
	${objcc} -c ${DEFS} ${CPPFLAGS} ${CFLAGS} `pwd`/$*.m -o $*.o

.m.g:
	${objcc} -c ${DEFS} ${CPPFLAGS} ${GFLAGS} `pwd`/$*.m -o $*.g

objects : ${OBJFILES}
	ar cq ${libdir}/libobjpak.a ${OBJFILES}

debug   : ${OBJFILES:.o=.g}
	ar cq ${libdir}/libobjpak.a ${OBJFILES:.o=.g}

###############################################################################
#
# 'clean' deletes the system, the object files, and temporary files
# of objcc and editors, but not the Makefile 
#
###############################################################################

clean ::
	rm -f *.[~%ocP]
	
distclean : clean
	rm -f Makefile
