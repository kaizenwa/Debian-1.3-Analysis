
objcc    = @objcc@
OBJFILES = main.o token.o
DEFS     = @DEFS@
CPPFLAGS = @CPPFLAGS@ -I@hdrdir@
CFLAGS   = @CFLAGS@
LDFLAGS  = @LDFLAGS@

.SUFFIXES: .m .lm

.m.o:
	${objcc} -c ${DEFS} ${CPPFLAGS} ${CFLAGS} $*.m -o $*.o

.lm.o:
	${LEX} $*.lm
	mv lex.yy.c $*.m
	${objcc} -c ${DEFS} ${CPPFLAGS} ${CFLAGS} $*.m -o $*.o
	rm $*.m

words : ${OBJFILES}
	${objcc} ${CFLAGS} ${OBJFILES} ${LDFLAGS} -o words

clean ::
	rm -f words *.[~%oPc]

distclean : clean
	rm -f Makefile
