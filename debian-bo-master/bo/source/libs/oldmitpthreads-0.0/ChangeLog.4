Sat Mar  4 19:25:01 1995  H.J. Lu (hjl@fudan)

	* version 4.6.30 is released.

	* sysdeps/linux/set-init.c:
	* <gnu-stabs.h> (text_set_element): undo the change of
	  Mon Feb 27 23:23:55 1995 by H.J. Lu (hjl@fudan).
	  need the latest binutis >= gas-950304.

Thu Mar  2 16:21:54 1995  Swen Thuemmler  <swen@linux.uni-paderborn.de>

	* pwd/getpwuid.c: Fixed major bug: getpwuid did not read beyond
	  the first -@netgroup entry.
	  Fixed bug: getpwuid did not work correctly if the first
	  entry in /etc/passwd started with a +.
	  Fixed bug: getpwuid would segfault, if there was a +-entry.

	* pwd/getpwent.c: Added handling of -@netgroup and -user
	  entries.
	  Fixed potential memory leak in nis_cache handling.

	* pwd/getgrgid.c:
	* pwd/getread.c:
	* pwd/getpwnam.c:
	* pwd/getgrent.c:
	* pwd/pwdread.c: Overwriting of passwd fields revamped.
	  Now overwriting fields in +@netgroup entries and the general
	  +:::::: entry is possible.
	  Attention! This makes the entry +:*:0:0::: invalid, since
	  it would overwrite the passwd field of every NIS entry
	  with a '*'.

	* yp/yplib.c: don't print out the "clnttcp_create" error
	  message

Thu Mar  2 23:05:11 1995  H.J. Lu (hjl@fudan)

	* sysdeps/linux/set-init.c:
	* <gnu-stabs.h> (text_set_element): disabled for ELF.
	  The current binutils couldn't handle building the shared
	  library with them enabled.

Thu Mar  2 20:05:11 1995  H.J. Lu (hjl@fudan)

	* sysdeps/linux/set-init.c: add the ELF support. need
	  the new binutils and gcc.

	* libio/iovfprintf.c (PAD): check if width > 0 and increment
	  `done' if chars are written.

	* libio/cleanup.c: for linux, make _cleanup () an alias of
	  _IO_flush_all (). Only used by a.out.

	* libio/ChangeLog.new: addition.

	* <gnu-stabs.h>: no stabs for ELF.
	  (text_set_element):
	  (data_set_element):
	  (bss_set_element):
	  (_elf_set_element):
	  (symbol_set_define):
	  (symbol_set_declare):
	  (symbol_set_first_element):
	  (symbol_set_end_p): new for ELF. from glibc (Roland).

	* libio/iovfscanf.c (_IO_vfscanf): don't read in
	  one char more than width for "%*xxxc".

Mon Feb 27 23:23:55 1995  H.J. Lu (hjl@fudan)

	Modified for ELF. The new I/O code needs 3 functions in
	libgcc.a. But our old ELF binaries do not have them. We
	build the shared ELF C library with libgcc.a only for libc
	4.x.x. With a new major release number, this should be removed.

 	  * Makefile (DIRS): include gcc for ELF.

	  * elf/Makefile (lib): link with

		$(ELF_SHARED_DIR)/libgcc/libgcc3.a

	    for libc.so.

	  * gcc/Makefile (LIB2FUNCS): set to  _udivdi3 _umoddi3
	    _udivmoddi4 for ELF.
	    (LIBGCC2_CFLAGS): set to

		$(BASE_OPTFLAGS) $(PIC_OPT_CFLAGS)

	    for ELF.

	* libio/iovfprintf.c (vfprintf): added the aliase.

	* libio/iovfscanf.c (vfscanf): commented out the alias.

	* Maketargets (depend): depend on $(SRCS)

	* elf/Makefile (CRTBIGIN): changed to CRTBEGIN.

	* sysdeps/i386/addmul_1.c:
	* sysdeps/i386/lshift.c:
	* sysdeps/i386/mul_1.c:
	* sysdeps/i386/rshift.c:
	* sysdeps/i386/submul_1.c: added the PIC support. We cannot
	  touch ebx if PIC is used without saving/restoring it.  We
	  have to do it ourselves until the compiler gets fixed.

	* libio/iovfscanf.c (weak_alias):
	* stdlib/__stdtof.c (weak_alias):
	* stdlib/__stdtold.c (weak_alias): added the missing ';'.

	* stdlib/Makefile (SRC1S): added __strtold.c __strtof.c.
	  removed strtold.c strtof.c.
	  (SRC2S): added strtold.c strtof.c.

	* sysdeps/linux/i386/____sig.S: change popfl to popf for the
	  new as with the 16 bit support.

	* <i386/gmp-mparam.h>: new from the GNU MP Library.

	* <gmp-mparam.h>: new, just include the machine-dependent
	  version.

	* sysdeps/i386/Makefile (INC_FLAGS): add -I../generic.
	  (IEEE754_DIR): ../ieee754.
	  (IEEE854_DIR): ../ieee854.
	  (GENERIC_DIR): ../generic.
	  (__isinf.c): depend on $(IEEE754_DIR)/__isinf.c.
	  (__isnan.c): depend on $(IEEE754_DIR)/__isnan.c.
	  (dbl2mpn.c): depend on $(IEEE754_DIR)/dbl2mpn.c.
	  (mpn2dbl.c): depend on $(IEEE754_DIR)/mpn2dbl.c.
	  (mpn2flt.c): depend on $(IEEE754_DIR)/mpn2flt.c.
	  (__isinfl.c): depend on $(IEEE854_DIR)/__isinfl.c.
	  (__isnanl.c): depend on $(IEEE854_DIR)/__isnanl.c.
	  (ldbl2mpn.c): depend on $(IEEE854_DIR)/ldbl2mpn.c.
	  (mpn2ldbl.c): depend on $(IEEE854_DIR)/mpn2ldbl.c.

	  (cmp.c): depend on $(GENERIC_DIR)/cmp.c.
	  (divmod.c): depend on $(GENERIC_DIR)/divmod.c.
	  (divmod_1.c): depend on $(GENERIC_DIR)/divmod_1.c.
	  (mul.c): depend on $(GENERIC_DIR)/mul.c.
	  (mul_n.c): depend on $(GENERIC_DIR)/mul_n.c.

Sun Feb 26 14:55:11 1995  Nick Holloway <Nick.Holloway@alfie.demon.co.uk>

	* misc/syslog.c (syslog):  masking the priority with LOG_PRI
	  before converting to a mask value and comparing with LogMask.

Thu Feb 23 06:57:13 1995  Ulrich Drepper  (drepper@gnu.ai.mit.edu)

	* libio/stdio/Makefile (INC_CFLAGS): removed.
	  (SRC1S): add printf-prs.c reg-printf.c.

	* libio/Makefile (INC_CFLAGS): changed to

		-I../sysdeps/generic -I../stdlib.

	  (DIRS): remove ldouble.
	  (XCFLAGS): add -DUSE_IN_LIBIO.
	  (SRC1S): remove  floatconv.c outfloat.c.
	  add _itoa.c printf_fp.c.

	* libio/iovfprintf.c:
	* libio/iovfscanf.c: rewritten.

	* jump/libc/jump.funcs:
	* jump/libc.lite/jump.funcs: add ___printf_fp, ___strtof
	  ___isinf ___isinfl ___isnan ___isnanl ___mpn_add_n
	  ___mpn_addmul_1 ___mpn_cmp ___mpn_extract_double
	  ___mpn_divmod ___mpn_divmod_1 ___mpn_extract_long_double
	  ___mpn_lshift ___mpn_construct_double ___mpn_construct_float
	  ___mpn_construct_long_double ___mpn_mul ___mpn_mul_1
	  ___mpn_mul_n ___mpn_rshift ___mpn_sub_n ___mpn_submul_1
	  __itoa _register_printf_function _parse_printf_format
	  enable ___udivdi3 ___udivmoddi4 ___umoddi3.
	  comment out __IO_dtoa __IO_outfloat __IO_ldtoa.

	* <huge_val.h>: updated from glibc.

	* libio/stdio/printf-prs.c: update.

	* <printf.h> (printf_info): add a new field:

		unsigned int group:1;	/* ' flag.  */ 

	* <stdlib.h> (strtof):
	  (strtold): new.

	* gcc/Makefile (LIB2FUNCS): add _udivdi3 _umoddi3 _udivmoddi4.

	* stdlib/Makefile (INC_CFLAGS): add -I../sysdeps/generic.
	  (SRC1S): add strtof.c strtold.c fpioconst.c.
	  (SRC2S): add strtod.c.

	* stdlib/strtod.c:
	* stdlib/strtol.c: modified.

	* stdlib/__strtof.c:
	* stdlib/fpioconst.c:
	* stdlib/__strtold.c:
	* stdlib/fpioconst.h:
	* stdlib/strtof.c:
	* stdlib/strtold.c: new.

	* sysdeps/i386/Makefile (SRC1S): add files for the GNU
	  MP library.

	* sysdeps/i386/add_n.c:
	* sysdeps/i386/addmul_1.c:
	* sysdeps/i386/lshift.c:
	* sysdeps/i386/mul_1.c:
	* sysdeps/i386/rshift.c:
	* sysdeps/i386/sub_n.c:
	* sysdeps/i386/submul_1.c:
	* sysdeps/generic/cmp.c:
	* sysdeps/generic/divmod.c:
	* sysdeps/generic/divmod_1.c:
	* sysdeps/generic/gmp-impl.h:
	* sysdeps/generic/gmp.h:
	* sysdeps/generic/longlong.h:
	* sysdeps/generic/mul.c:
	* sysdeps/generic/mul_n.c: 
	* sysdeps/ieee754/mpn2dbl.c:
	* sysdeps/ieee754/mpn2flt.c:
	* sysdeps/ieee854/mpn2ldbl.c: new from the GNU MP Librar and
	  glibc.

Sat Feb 25 22:44:20 1995  H.J. Lu (hjl@fudan)

	* elf/d-link/Makefile (INC_CFLAGS): add USE_CACHE.

	* elf/d-link/readelflib1.c (_dl_lookup_cache): mask
	  libent[i].libnamelen with 0xff.
	  (_dl_xmemcmp): defined as _dl_memcmp.
	  (_dl_xmemcpy): defined as _dl_memcpy.

Thu Feb 23 19:41:25 1995  H.J. Lu (hjl@fudan)

	* sysdeps/i386/asm-ops.h (ALIGN): add "\n\t" at the end.

	* <stdlib.h>: don't use "extern __inline" if __STRICT_ANSI__
	  is defined.
	  (__gnu_malloc):
	  (__gnu_calloc): commented out.
	  (NULL): define it if <stddef.h> fails.

	* <malloc.h> (malloc):
	  (calloc): always external.

	* malloc/memalign.c (memalign): don't put the node on the
	  _aligned_blocks list more than once.

	* malloc-930716/malloc.c (malloc):
	* malloc/malloc.c (malloc): don't return NULL if size == 0.
	  many codes call malloc (0).

	* malloc-930716/malloc.h (alignlist): defined.
	  (_aligned_blocks):
	  (_free_internal): declared.

	* malloc-930716/free.c (_free_internal): old free ().
	  (free): check _aligned_blocks and
	  call _free_internal ().

	* malloc-930716/malloc.c:
	* malloc-930716/realloc.c: call _free_internal () if possible.

	* malloc-930716/memalign.c: new, copied from malloc/memalign.c.

	* malloc-930716/valloc.c: modified, copied from malloc/valloc.c.

	* malloc-930716/Makefile (SRC1S): add memalign.c.

	* jump/libc/jump.funcs:
	* jump/libc.lite/jump.funcs: enable _memalign and __free_internal.

	* jump/libc.lite/jump.params:
	* jump/libc/jump.params: bump up to version 4.6.30.
 
	* <_G_config.h>: change verion to 4.6.30.

	* elf/libdl/jump.params: bump up to version 1.0.16.

Tue Jan 31 11:46:45 1995  Craig Smith (craig@rezrov.natinst.com)

	* elf/d-link/libdl/dlib.c (_dlopen): set
	  rpnt->next_handle to handles before putting
	  the new handle at the head of the linked
	  list. 

Mon Feb 20 09:39:50 1995  H.J. Lu (hjl@fudan)

	* version 4.6.29 is released.

Sun Feb 19 23:50:50 1995  H.J. Lu (hjl@fudan)

	* jump/libc.lite/jump.params:
	* jump/libc/jump.params: bump up to version 4.6.29.
 
	* <_G_config.h>: change verion to 4.6.29.

	* regex/ChangeLog:
	* regex/ChangeLog.new:
	* regex/rx.c:
	* regex/rx.h:
	* <rx.h>: updated from rx 0.07.1 plus other patches. See
	  regex/ChangeLog and regex/ChangeLog.new for details.

Sun Feb 19 23:30:52 1995  H.J. Lu (hjl@fudan)

	* version 4.6.28 is released.

	* jump/libc.lite/jump.funcs: comment out _nl_langinfo.

	* locale/Makefile (NL_SCRS): new, nl_langinfo.c.
	  don't set it if LITE is true.

	* sysdeps/linux/i386/crt/defaultlocale.c: new file,
	  used to extract LC_ALL.

	* sysdeps/linux/i386/crt/crt0.S:
	* sysdeps/linux/i386/crt/gcrt0.S: changed that to
	  call setlocale (LC_ALL, "").

	* sysdeps/linux/i386/crt/Makefile: pass LC_ALL from
	  defaultlocale.c to crt source.
	  make crt files depend on files which defaultlocale.c
	  depend on.

	* regex/ChangeLog.new:
	* <rx.h>:
	* regex/rx.h: undo the change of Tue Feb 14 21:50:02
	  1995 by H.J. Lu (hjl@fudan).

	* <ld_so_config.h>: new, from ld.so 1.5.2. Used by the ELF
	  d-linker.

	* elf/d-link/i386/string.h: use the local label names
	  for string functions since they will be inlined.

	* <sys/syscall.h>: add

		#define	SYS_setfsuid	138
		#define	SYS_setfsgid	139
		#define	SYS__llseek	140

	* <ctype.h>: 
	* locale/C-ctype_ct.c:
	* locale/ISO88591_ct.c:
	* locale/KOI8-ct.c: undo change made on Tue Feb  7 
	  15:58:56 1995 by Ulrich Drepper (drepper@gnu.ai.mit.edu).
	  They break all the old binaries.

Fri Feb 17 16:33:28 1995  Per Bothner  <bothner@kalessin.cygnus.com>

	* libio/fileops.c (_IO_file_close_it):  Call _IO_file_sync, rather
	than _IO_do_flush, because we want to adjust the file pointer
	if reading and not at end (as in SVR4, and as in fflush).
	Also, make sure to return error indication if sync fails.
	(_IO_file_sync):  Ignore seek error if it is ESPIPE.
	(_IO_file_seekoff):  If not readable, do dumb lseek.
	* iofclose.c (_IO_fclose):  If closing a non-filebuf, return -1
	if _IO_ERR_SEEN.

	* libio/ChangeLog.new: add new entry.

Sat Oct 15 19:10:43 1994  Mitch DSouza (Mitch.Dsouza@Dubai.Sun.COM)

	* elf/d-link/Makefile (lib): add -x to remove the internal
	  symbols.

	* elf/d-link/i386/syscall.h (_dl_stat):
	  (_dl_munmap): new.

	* elf/d-link/readelflib1.c (_dl_lookup_cache): new.
	  check cache.

Tue Feb 14 21:50:02 1995  H.J. Lu (hjl@fudan)

	* <stdlib.h>: don't include it for K&R C.
	  RAND_MAX: check if defined.

	* jump/libc/jump.funcs:
	* jump/libc.lite/jump.funcs: add ___setfsgid ___setfsuid
	  _asprintf  _vasprintf  _nl_langinfo _strtoq _strtouq.

	* sysdeps/i386/__stpncpy.c:
	* sysdeps/i386/memchr.c:
	* sysdeps/i386/stpcpy.c:
	* sysdeps/i386/strcat.c:
	* sysdeps/i386/strchr.c:
	* sysdeps/i386/strcspn.c:
	* sysdeps/i386/strlen.c:
	* sysdeps/i386/strpbrk.c:
	* sysdeps/i386/strrchr.c:
	* sysdeps/i386/strspn.c:
	* sysdeps/i386/strstr.c: restore change made on Sun Dec  4
	  03:25:21 1994 by Ulrich Drepper (drepper@ira.uka.de).
	  Please test them.

	* sysdeps/linux/i386/syscall.S: add .type and .size.

	* sysdeps/linux/i386/sysdep.h:
	* sysdeps/linux/i386/syscall.S: fix the static version for ELF.

	* jump/libm/jump.params:
	* jump/libc.lite/jump.params:
	* jump/libc/jump.params: bump up to version 4.6.28.
 
	* <_G_config.h>: change verion to 4.6.28.

	* elf/libdl/jump.params: bump up to version 1.0.15.

	* <signal.h>: define SA_RESETHAND as SA_ONESHOT, SA_NODEFER
	  as SA_NOMASK for SVR4.

	* <rx.h>:
	* regex/rx.h: see regex/ChangeLog.new.

	* regex/ChangeLog.new: new change.

	* libio/stdio/Makefile (SRC1S): add asprintf.c vasprintf.c.

	* locale/Makefile (SRCS): add nl_langinfo.c.

	* locale/nl_langinfo.c: include <ansidecl.h> and <localeinfo.h>.
	  coment out <localedef.h>.

	* posix/Makefile (SRC2S): add setfsgid.c setfsuid.c.

	* sysdeps/linux/Makefile (SRC2S): add __setfsgid.S and
	  __setfsuid.S.

	* stdlib/Makefile (SRC1S): strtoq.c strtouq.c.

	* libio/stdio/ChangeLog.new: add new entries.

	* Makeconfig (REENTRENT_OPT_CFLAGS): new, -D_REENTRENT.
	  (REENTRENT_CFLAGS): new, as
		$(REENTRENT_OPT_CFLAGS) $(BASE_CFLAGS)
	  (REENTRENT_DIR): $(TOPDIR)/reentrent.
	  (REENTRENT_LIB): new, $(REENTRENT_DIR)/libc_r.a.
	  (OBJS_DIRS): add (REENTRENT_DIR) $(ELF_REENTRENT_DIR)
	  $(CHECKER_DIR).

	* Maketargets (lib): make $(REENTRENT_DIR)/$(SUBDIR). make
	  $(REENTRENT_LIB).
	  (depend): add $(REENTRENT_DIR)/$(SUBDIR)/\1.

	* README: minor addition.

Wed Feb  8 12:32:41 1995  Uwe Ohse (uwe@tirka.gun.de)

	* misc/syslog.c: setlogmask sets LogMask, but vsyslog() doesn't
	  check LogMask. Instead it uses LOG_MASK(LOG_PRI(pri)), which
	  is wrong, since LOG_MASK(priority) is defined as
	  (1<<priority).
	 
	  Another problem: closelog() should reset the mask and some
	  other internal states. If it doesn't, a syslog() after
	  closelog(), but before another openlog(), behaves
	  surprisingly.

Tue Feb  7 15:58:56 1995  Ulrich Drepper  (drepper@gnu.ai.mit.edu)

	* <ctype.h>: isalpha, isxdigit, isgraph and isprint
	  may be independent from any other entry.  Use own bit.
	  check __USE_POSIX2 instead of __USE_GNU.

	* locale/C-ctype_ct.c:
	* locale/ISO88591_ct.c:
	* locale/KOI8-ct.c: change using own bits for above isXXX
	   values.

Mon Feb  6 14:53:11 1995  Ulrich Drepper  (drepper@gnu.ai.mit.edu)

	* <langinfo.h>:
	* <mbstr.h>: 
	* <printf.h>:
	* <wcstr.h>: new.

	* <confname.h>: define and check _CONFNAME_H.

	* <ieee754.h>:
	* <ieee854.h>: adding structure about NaNs.

	* <math.h>: make some fuctions inline for MC 68000.

	* <stdio.h>:
	* libio/stdio/stdio.h: add asprintf () and vasprintf ().

	* <stdlib.h>: add 64 bit fuctions.

	* <sys/syslog.h>: add __attribute__ () for syslog.

	* <unistd.h>: add setfsuid (), setfsgid ().
	  (_POSIX2_LOCALEDEF): defined as 1.

	* bsd/setenv.c: use GNU version and make it reentrent.

	* cvt/cvt_r.c: new file;  reentrent version of ecvt fcvt
	  
	* io/ftw.c (ftw_dir, ftw): minor changes to match GNU libc code.

	* libbsd/cfsetspeed.c: make global variable xref 'static const'
	  so that it can go into the .text section.

	* libbsd/pty.c: make reentrent.

	* libbsd/sgtty.c: make global variable trans 'const' so that it
	  can go into the .text section.

	* libio/stdio/asprintf.c:
	* libio/stdio/vasprintf.c:
	* libio/stdio/reg-printf.c:
	* libio/stdio/printf-prs.c: new files.

	* locale/nl_langinfo.c: new file; implements function
	  nl_langfo ().

	* misc/drand48_r.c:
	* misc/hsearch_r.c: new, reentrent version.

	* misc/hsearch.3: modification.

	* misc/syslog.c: modified for reentrent.

	* posix/setfsgid.c:
	* posix/setfsuid.c: new syscalls.

	* stdlib/__random_r.c:
	* stdlib/random_r.c:
	* stdlib/rand_r.c:
	* stdlib/srand_r.c: new, reentrent versions.

	* stdlib/strtol.c:
	* stdlib/strtoul.c: enable 64-bit support if QUAD is defined.

	* stdlib/strtoq.c:
	* stdlib/strtouq.c: new, 64-bit versions. need gcc-950203 or
	  later.

	* sysdeps/ieee754/__isinf.c:
	* sysdeps/ieee754/__isnan.c: needed in libc.

	* sysdeps/ieee754/__isqnan.c:
	* sysdeps/ieee754/__issnan.c:
	* sysdeps/ieee754/dbl2mpn.c: new functions.

	* sysdeps/ieee854/__isinfl.c:
	* sysdeps/ieee854/__isnanl.c:
	* sysdeps/ieee854/__isqnanl.c:
	* sysdeps/ieee854/__issnanl.c:
	* sysdeps/ieee854/ldbl2mpn.c:  new functions for long double
	  match those in ieee754.

	* sysdeps/linux/__setfsgid.S:
	* sysdeps/linux/__setfsuid.S: new syscalls.

	* sysdeps/linux/__sysconf.c: add _POSIX2_LOCALEDEF.

	* xstring/mbsadvance.c:
	* xstring/mbscat.c:
	* xstring/mbschr.c:
	* xstring/mbscmp.c:
	* xstring/mbscpy.c:
	* xstring/mbsdup.c:
	* xstring/mbslen.c:
	* xstring/mbsncat.c:
	* xstring/mbsncmp.c:
	* xstring/mbsncpy.c:
	* xstring/mbsrchr.c:
	* xstring/mbstomb.c:
	* xstring/wcscat.c:
	* xstring/wcschr.c:
	* xstring/wcscmp.c:
	* xstring/wcscpy.c:
	* xstring/wcscspn.c:
	* xstring/wcsdup.c:
	* xstring/wcslen.c:
	* xstring/wcsncat.c:
	* xstring/wcsncmp.c:
	* xstring/wcsncpy.c:
	* xstring/wcspbrk.c:
	* xstring/wcsrchr.c:
	* xstring/wcsspn.c:
	* xstring/wcstok.c:
	* xstring/wcswcs.c: new functions.

Sun Feb  5 19:48:23 1995  H.J. Lu (hjl@fudan)

	* sysdeps/linux/Makefile (OPT_SRC1S): add nlist.c.
	  (SRC1S): remove nlist.c.

	* <libelf.h>: new for libelf.a.

	* <elf.h> (struct nlist): new.

	* <nlist.h>: include <elf.h> if __ELF__ is defined.

	* <curses.h>: don't define OK, bool and reg.

	* jump/libc.lite/jump.vars:
	* jump/libc/jump.vars: add _rx_cache_bound.

Sun Feb  5 10:38:23 1995  H.J. Lu (hjl@fudan)

	* <sys/cdefs.h>: only the new g++ (> 2.6.x) can take

		__attribute__ ((const));

	* <rpc/xdr.h> (__pp, __op): changed due to ANSI C++.

	* sysdeps/linux/i386/crt/crt0.S:
	* sysdeps/linux/i386/crt/gcrt0.S: call setlocale (NULL) before
	  call main ().

	* Makefile (install): check ELF=true.

	* <stdlib.h>: update from glibc 1.09 with some minor
	  modifications/additions.

	* <search.h>: don't include <stdlib.h>.
	  (__compar_fn_t): define it.
	  include <stddef.h> for size_t and NULL.

	* misc/tsearch.c: include <stdlib.h>.

	* elf/libtermcap/jump.params:
	* termcap/version.c: bump up to 1.2.4

Sun Feb  5 09:05:06 1995  Mitch DSouza (Mitch.Dsouza@Dubai.Sun.COM)

	* inet/gethstnmad.c (init_services): call res_init () if
	  RES_INIT is not set.

Fri Feb  3 12:27:55 1995  Dominik Kubla (dominik.kubla@uni-mainz.de)

	* pwd/getpwuid.c (__netgroup_getpwuid): check a valid passwd
	  entry.

Tue Jan 24 08:26:32 1995 Alan Cox (A.Cox@swansea.ac.uk)

	* <sys/socketvar.h>:
	* <net/route.h>:
	* <netinet/ip_fw.h>:
	* <netinet/igmp.h>: Some additional include files (relative to
	  libc 4.6.20) for the newer features and stuff. It adds
	  netinet/ip_fw.h as per BSD and netinet/igmp.h for the
	  multicasting. It also inserts a few commonly used things
	  that could do with include links (sys/socketvar.h,
	  net/route.h ).

Fri Jan 27 07:50:13 1995  Ross Biro (biro@yggdrasil.com)

	* elf/d-link/i386/boot1.c (_dl_boot): load any shared libraries
	listed in the environment variable LD_PRELOAD loaded before the
	normal shared libraries if e[gu]id == [gu]id.

Mon Jan 16 22:28:13 1995  Ross Biro (biro@yggdrasil.com)

	* elf/d-link/i386/boot1.c (_dl_boot): don't load the shared
	  library if it is not used by anyone.

Fri Oct 21 04:33:10 1994  Miquel van Smoorenburg (miquels@drinkel.ow.org)

	* termcap/termcap.c:  an octal number (\123) can never have
	  more than three digits now.
	  padding code to also behave OK for speeds > B38400.

Sun Jan 22 10:36:13 1995  Eric Youngdale  (eric@andante)

	* elf/d-link/readelflib1.c (_dl_load_elf_shared_library):  Do not
	issue an error message if we fail to open a file.  In the case
	where we are searching for a file in multiple paths, it results
	in spurious error messages.

	* elf/d-link/readelflib1.c (_dl_load_shared_library): If we
	have an absolute path (i.e. contains a '/' character), do
	not search RPATH or LD_LIBRARY_PATH for the file.

	* elf/d-link/readelflib1.c (_dl_load_shared_library): IBCS only - 
	when changing /usr/lib to /usr/i486-sysv/lib, remember to
	NULL terminate string.

Tue Dec 13 21:03:16 1994  H.J. Lu (hjl@fudan)

	* version 4.6.27 is released.

	* sysdeps/i386/__stpncpy.c:
	* sysdeps/i386/memchr.c:
	* sysdeps/i386/stpcpy.c:
	* sysdeps/i386/strcat.c:
	* sysdeps/i386/strchr.c:
	* sysdeps/i386/strcspn.c:
	* sysdeps/i386/strlen.c:
	* sysdeps/i386/strpbrk.c:
	* sysdeps/i386/strrchr.c:
	* sysdeps/i386/strspn.c:
	* sysdeps/i386/strstr.c: undo change made on Sun Dec  4
	  03:25:21 1994 by Ulrich Drepper (drepper@ira.uka.de) for
	  the new public release.

Mon Dec 13 21:03:16 1994  H.J. Lu (hjl@fudan)

	* <rpc/types.h>: change "#ifndef linux" to
	  "#ifndef __linux__".

	* misc/hsearch.c (isprime): return number%div != 0.

	* Makefile (DEPEND_DIRS): new, include elf/d-link.
	  (depend): make depend in all of $(DEPEND_DIRS).

	* login/utmp2.c (Utname): change it to Utname [].

	* jump/libm/jump.params:
	* jump/libc.lite/jump.params:
	* jump/libc/jump.params: bump up to version 4.6.27.
 
	* <_G_config.h>: update from libg++ 2.6.2 beta and change
	  verion to 4.6.27.

	* sysdeps/i386/asm-ops.h: support ELF alignment.

	* elf/libdl/jump.params: bump up to version 1.0.14.

	* elf/d-link/readelflib1.c (_dl_load_elf_shared_library):
	* elf/d-link/i386/boot1.c (_dl_boot):
	  (_dl_malloc): check return from _dl_open ().

	* libio/ChangeLog:
	* libio/ChangeLog.new: update.

	* libio/fileops.c (_IO_file_underflow): fix comments.

	* <iostdio.h> (setbuffer):  #define as _IO_setbuffer.

	* <libio.h>:
	* libio/ldouble/libio.h: Add comment. Update Copyright notice.
	  (__P): Change argument name spelling from `paramlist' to
	  `protos' for compatibility with BSDI 1.1.

	* libio/_G_config.h: update from libg++ 2.6.2 beta.

	* sysdeps/i386/strncmp.c: undo change made on Sun Dec  4
	  03:25:21 1994 by Ulrich Drepper (drepper@ira.uka.de).
	  There are two LL(1)s. Bad for ELF.

	* sysdeps/i386/strcmp.c: undo change made on Sun Dec  4
	  03:25:21 1994 by Ulrich Drepper (drepper@ira.uka.de).
	  It uses ____brk_addr. It is not portable and has an
	  extra _ prefix for ELF.

Sun Dec  4 19:50:32 1994  Per Bothner  <bothner@kalessin.cygnus.com>

	* libio/iostdio.h (setbuffer):  #define as _IO_setbuffer.

Tue Nov 29 23:38:57 1994  Per Bothner  (bothner@rtl.cygnus.com)

	* libio/floatconv.c (setword0, setword1):  Fix typo.

Tue Nov 29 15:37:29 1994  Per Bothner  <bothner@kalessin.cygnus.com>

	* libio/floatconv.c (word0, word1):  Re-place/re-implement
	  using unions instead of casts to avoid optimizer problems.

Fri Nov  4 17:19:11 1994  Per Bothner  <bothner@kalessin.cygnus.com>

	* libio/libio.h:  Add comment.  Update Copyright notice.

Fri Nov  4 21:46:30 1994  Paul Eggert  <eggert@twinsun.com>

	* libio/libio.h (__P): Change argument name spelling from
	  `paramlist' to `protos' for compatibility with BSDI 1.1.

Sun Dec  4 03:25:21 1994  Ulrich Drepper  (drepper@ira.uka.de)

	* sysdeps/i386/memchr.c: Use register contents when testing for
	  the byte in a dword.
	  add further optimization by testing for length of full inner
	  loop and dd code to process trailing chars upto 15 in number.
	  correct processing of last dwords: add $4 to %0 before
	  comparing.

	* sysdeps/i386/__stpncpy.c: improvement.

	* sysdeps/i386/strlen.c: Have a little bit shorter code by
	  using edi in the main loop and let ecx have the original
	  byte for testing.
	  use same technique as memchr to detect NULL char.
	
	* sysdeps/i386/stpcpy.c: improvement.

	* sysdeps/i386/strcat.c: Use fast scanning technique. But take
	  care of i386 on which the string functions are not that bad.

	* sysdeps/i386/strchr.c: correct case where char is found in
	  dword but before a NULL char is placed.
	  Use fast char match algorithm twice in a 4 x 4 bytes
	  processing loop.

	* sysdeps/i386/strcmp.c:
	* sysdeps/i386/strncmp.c: make 8-bit clean.
	  Add secure comparison: only strings in user memory are
	  compared with the 32-bit version.

	* sysdeps/i386/strcmp.c: correct jump to chose between compare
	  functions.
	  correct code for alignment: test with testb on %edx is ok, but
	  not on %esi.
	  Name must not have __ prefix (was for testing).
	  Remove superflous saving of EDI.
	  Process 16 bytes per round by using fast NULL char test.

	* sysdeps/i386/strncmp.c: correct code for alignment: test with
	  testb on %edx is ok, but not on $esi.
	  old code for single byte processing assumed counter in %ecx.
	  initialize %al for single-byte code with 0 (= result for NUL
	  string).
	  use fast char match technique along with 16 byte loop.

	* sysdeps/i386/strcspn.c: Correct alignment of main loop.
	  Correct signed loading of index.  Use simple movb for all
	  loadings after clearing ecx at the beginning.

	* sysdeps/i386/strpbrk.c: Correct signed loading of index. Use
	  simple movb for all loadings after clearing ecx at the
	  beginning.

	* sysdeps/i386/strspn.c: Correct type in intial ecx clearing.
	  Correct signed loading of index. Use simple movb for all
	  loadings after clearing ecx at the beginning.

	* sysdeps/i386/strrchr.c: remove test for match-bits, add
	  ALIGNs, add test for case of set carry bit.
	  Use fast char matching algorithm and 16 byte loop.

	* sysdeps/i386/strstr.c: correct bugs introduced by last
	  optimization where %eax was used only for the result.
	  add PIC support for gcc 2.6.2 and comments.

Sun Dec 11 09:53:12 1994  H.J. Lu (hjl@fudan)

	* version 4.6.26 is released.

	* jump/libm/jump.params:
	* jump/libc.lite/jump.params:
	* jump/libc/jump.params: bump up to version 4.6.26.
 
	* <_G_config.h>: update verion to 4.6.26.

	* elf/libdl/jump.params: bump up to version 1.0.13.

	* misc/Makefile (SRC1S): add basename.c.

	* jump/libc/jump.funcs:
	* jump/libc.lite/jump.funcs: add _basename.

	* <unistd.h>: added prototype for `basename ()'.

	* misc/basename.c: include <unistd.h>.

Mon Dec  5 01:46:06 1994  Ulrich Drepper  (drepper@ira.uka.de)

	* io/ftw.c (ftw_dir, ftw): don't panic if file cannot be
	  stat'ed because it does not exist (happens when unresolved
	  symlink is found). reported by <chatterj@maths.ox.ac.uk>.

	* malloc-930716/malloc.c: little cosmetic plus little speed
	  change.

	* misc/basename.c: new file.

	* nls/genlib.c: accept \" in substitue text.
	  be generous for prepending lines in message file (for GNU
	  locale)

	* nls/msgcat.c: include GNU locale directories in search path.

Wed Dec  7 20:05:33 1994  Eric Youngdale  (eric@andante)

	* elf/d-link/hash.c (_dl_find_hash): Allow STT_NOTYPE symbols
	  to be resolved.

	* elf/d-link/readelflib1.c (_dl_load_shared_library): Do not
	  search /lib for libraries in the iBCS2/ABI version of the
	  dynamic loader.

Wed Dec  7 19:34:41 1994  H.J. Lu (hjl@fudan)

	* version 4.6.25 is released.

	* regex/ChangeLog.new: update.

Wed Dec  7 04:44:28 1994  Martin Pirker (pirker@eiunix.tuwien.ac.at)

	* regex/rx.c: Fix RX_DEBUG.
	  the LETTER_P macro and modified the ..._fetch_char function
	  to use the offset even if it is not zero.

Tue Dec  6 19:38:39 1994  H.J. Lu (hjl@fudan)

	* <bsd/bsd.h>: include <limits.h>.
	  (NCARGS): defined as ARG_MAX.
	  (NBBY): defined as CHAR_BIT.

Fri Dec 02 15:37:28 1994  Robert Andrew Ryan (robr@cmu.edu)

	* elf/d-link/readelflib1.c (_dl_load_elf_shared_library):
	  fixed to reserve the entire vm area needed by the
	  library with one mmap before mapping the individual
	  sections.

Tue Dec  6 12:47:19 1994  Ulrich Drepper (drepper@ira.uka.de)
 
	* misc/hsearch.c: change copyright
  
	* <sys/param.h>: include definition of DEV_BSIZE

Tue Dec  6 09:38:59 1994  H.J. Lu (hjl@fudan)

	* sysdeps/linux/i386/math/Makefile: fix a typo.

Mon Dec  5 13:13:57 1994  H.J. Lu (hjl@fudan)

	* jump/libm/jump.params:
	* jump/libc.lite/jump.params:
	* jump/libc/jump.params: bump up to version 4.6.25.
 
	* <_G_config.h>: update verion to 4.6.25.

	* elf/libdl/jump.params: bump up to version 1.0.12.

	* elf/d-link/libdl/dlib.c (_dlclose): check if tpnt->next is
	  NULL before set tpnt->next->prev. do the same for
	  _dl_loaded_modules->prev.

	* libio/ChangeLog.new: update.

Sun Dec  4 23:11:37 1994  H.J. Lu (hjl@fudan)

	* version 4.6.24 is released.

	* libio/ChangeLog.new: update.

Sun Dec  4 19:50:32 1994  Per Bothner  <bothner@kalessin.cygnus.com>

	* libio/fileops.c (_IO_file_init, _IO_file_close_it, _IO_file_sync):
	  Set _offset to _IO_pos_BAD, to support applications that
	  follow POSIX.1 rules on mixing file handles.

	* libio/fileops.c (_IO_file_overflow): Handle case that buffer
	  was allocated (perhaps by setvbuf) but _IO_write_base is
	  still 0.

Sun Dec  4 12:13:47 1994  H.J. Lu (hjl@fudan)

	* libio/fileops.c (_IO_file_seekoff): undo the change of Tue Nov
	  8 00:36:53 1994 by H.J. Lu  (hjl@nynexst.com).

	* elf/d-link/hash.h: include <link.h>.

	* elf/d-link/linuxelf.h: don't re-define the structures defined
	  in <elf.h>.
	  
	* elf/d-link/i386/boot1.c (_dl_boot): don't recheck mmap of
	  /dev/zero.
	  use

		debug_addr->r_map = _dl_loaded_modules;

	  instead of

		debug_addr->link_map = _dl_loaded_modules;

	* <link.h>: new for the ELF dynamic linker. used by gdb. need
	  the new <linux/elf.h>.

	* elf/libdl/jump.params: bump up to version 1.0.11.

Sun Dec  4 01:46:01 1994  Eric Youngdale (eric@aib.com)

	* elf/d-link/i386/boot1.c:
	* elf/d-link/linuxelf.h:
	* elf/d-link/libdl/dlib.c:
	* elf/d-link/hash.h:
	* elf/d-link/hash.c:
	* elf/d-link/readelflib1.c: Update dynamic loader for gdb
	  support of automatic shared library loading.  Add patches so
	  that the same source tree can be used for both native ELF and
	  iBCS2.

Sun Dec  4 01:16:31 1994  H.J. Lu (hjl@fudan)

	* libio/ldouble/libioP.h: don't include linux.h if
	  __cplusplus is defined.
		   
	* libio/ChangeLog.new: update.

Sat Dec  3 07:07:00 1994  Ulrich Drepper (drepper@ira.uka.de)

	* io/ftw.c: check ENOENT when returns from stat ().

Fri Dec  2 17:27:04 1994  H.J. Lu (hjl@fudan)

	* sysdeps/i386/Makefile (SRC3S): new, add frexp.S.

	* sysdeps/i386/frexp.S: copied from
	  sysdeps/linux/i386/math/frexp.S.

	* sysdeps/generic/Makefile (SRC1S): add ldexp.c.

	* sysdeps/generic/ldexp.c: moved from misc/ldexp.c.

	* misc/Makefile (SRC1S): remove ldexp.c.

	* sysdeps/linux/i386/math/Makefile (SRC2S): don't include
	  frexp.S for ELF.

	* sysdeps/linux/i386/math/frexp.S: fix alignment for ELF.

	* jump/libc/jump.funcs:
	* jump/libc.lite/jump.funcs: add _frexp.

Wed Nov 30 16:18:14 1994  H.J. Lu (hjl@fudan)

	* jump/libm/jump.params:
	* jump/libc.lite/jump.params:
	* jump/libc/jump.params: bump up to version 4.6.24.
 
	* <_G_config.h>: update verion to 4.6.24.

	* <math.h>: add more long double prototypes.

	* sysdeps/linux/i386/math/mathl.h: new for long double.

Sun Nov 27 17:58:03 1994  H.J. Lu (hjl@fudan)

	* version 4.6.23 is released.

	* jump/libc-nys/genfuncs: do

		chmod +x genfuncs

	  need to remove the old one?

	* Makeconfig (BASE_CFLAGS): clean up.

	* elf/libdl/jump.params: bump up to version 1.0.10.

	* jump/libc/jump.funcs:
	* jump/libc.lite/jump.funcs: add __IO_ldtoa and __IO_strtold.

	* <libio.h> (_IO_LDOUBLE): defined as 0400000.

	* <math.h> (acosl):
	  (acoshl):
	  (asinl):
	  (asinhl):
	  (atan2l):
	  (atanl):
	  (atanhl):
	  (ceill):
	  (coshl):
	  (cosl):
	  (expl):
	  (fabsl):
	  (floorl):
	  (fmodl):
	  (frexpl):
	  (hypotl):
	  (ldexpl):
	  (log10l):
	  (logl):
	  (modfl):
	  (powl):
	  (sinhl):
	  (sinl):
	  (sqrtl):
	  (tanhl):
	  (tanl): new for long double.

	* libio/Makefile (INC_CFLAGS): changed to

	  INC_CFLAGS=-I./ldouble -I./ldouble -I./ldouble -I./ldouble

	* libio/ldouble/Makefile (INC_CFLAGS): changed to

	  INC_CFLAGS=

	  (NEWSTDIOFLAGS): new. set to

	  NEWSTDIOFLAGS=

	* libio/stdio/Makefile (INC_CFLAGS): changed to

	  INC_CFLAGS=-I../ldouble -I../ldouble -I../ldouble -I../ldouble

	* libio/ldouble/floatio.h:
	* libio/ldouble/linux.h: linked from ../.

	* libio/ChangeLog.new:
	* libio/stdio/ChangeLog.new: modified for long double.

Sat Nov 26 23:41:35 1994  Stephen L Moshier (moshier@world.std.com)

	* libio/Makefile (DIRS): add ldouble.
	  (SRC1S): remove iovfscanf.c, iovfprintf.c and outfloat.c.

	* libio/ldouble/libio.h (_IO_LDOUBLE): defined as 0400000.

	* libio/ldouble/libioP.h (_IO_outfloat): change double to
	  long double.
	  (_IO_strtold):
	  (_IO_ldtoa): new.

	* libio/ldouble/iovfprintf.c:
	* libio/ldouble/iovfscanf.c:
	* libio/ldouble/outfloat.c: modified for long double.

	* libio/ldouble/Makefile:
	* libio/ldouble/README:
	* libio/ldouble/ioldouble.c: new for long double

	* jump/libm/jump.funcs:
	* jump/libm/jump.vars: add long double symbols.

	* <ieee854.h>: new for long double.

	* sysdeps/linux/i386/math/float.h: new for long double. work
	  around until gcc's <float.h> is correct.

	* sysdeps/linux/i386/math/fp.h: new for the NCEG.

	* sysdeps/linux/i386/math/Makefile (SRC1S): add __infnanl.c,
	  __polevll.c, acoshl.c, acosl.c, asinl.c, atanhl.c, cbrtl.c,
	  ceill.c, erfl.c, floorl.c, frexpl.c, j0l.c, j1l.c, jnl.c,
	  ldexpl.c, lgammal.c, log10l.c, log1pl.c, log2l.c, logl.c,
	  modfl.c, powl.c and sqrtl.c.
	  (SRC2S): add asinhl.S, atan2l.S, atanl.S, coshl.S, cosl.S,
	  expl.S, expm1l.S, fabsl.S, fmodl.S, hypotl.S, sinhl.S,
	  sinl.S, tanhl.S and tanl.S.

	* sysdeps/linux/i386/math/lgamma.c: minor changes.

	* sysdeps/linux/i386/math/README.ldouble:
	* sysdeps/linux/i386/math/fpclassifyf.c:
	* sysdeps/linux/i386/math/__infnanl.c:
	* sysdeps/linux/i386/math/__polevll.c:
	* sysdeps/linux/i386/math/acoshl.c:
	* sysdeps/linux/i386/math/acosl.c:
	* sysdeps/linux/i386/math/asinl.c:
	* sysdeps/linux/i386/math/atanhl.c:
	* sysdeps/linux/i386/math/cbrtl.c:
	* sysdeps/linux/i386/math/ceill.c:
	* sysdeps/linux/i386/math/erfl.c:
	* sysdeps/linux/i386/math/floorl.c:
	* sysdeps/linux/i386/math/frexpl.c:
	* sysdeps/linux/i386/math/j0l.c:
	* sysdeps/linux/i386/math/j1l.c:
	* sysdeps/linux/i386/math/jnl.c:
	* sysdeps/linux/i386/math/ldexpl.c:
	* sysdeps/linux/i386/math/lgammal.c:
	* sysdeps/linux/i386/math/log10l.c:
	* sysdeps/linux/i386/math/log1pl.c:
	* sysdeps/linux/i386/math/log2l.c:
	* sysdeps/linux/i386/math/logl.c:
	* sysdeps/linux/i386/math/modfl.c:
	* sysdeps/linux/i386/math/powl.c:
	* sysdeps/linux/i386/math/sqrtl.c:
	* sysdeps/linux/i386/math/asinhl.S:
	* sysdeps/linux/i386/math/atan2l.S:
	* sysdeps/linux/i386/math/atanl.S:
	* sysdeps/linux/i386/math/coshl.S:
	* sysdeps/linux/i386/math/cosl.S:
	* sysdeps/linux/i386/math/expl.S:
	* sysdeps/linux/i386/math/expm1l.S:
	* sysdeps/linux/i386/math/fabsl.S:
	* sysdeps/linux/i386/math/fmodl.S:
	* sysdeps/linux/i386/math/hypotl.S:
	* sysdeps/linux/i386/math/sinhl.S:
	* sysdeps/linux/i386/math/sinl.S:
	* sysdeps/linux/i386/math/tanhl.S:
	* sysdeps/linux/i386/math/tanl.S: new for long double.

Fri Nov 25 08:12:20 1994  Robert Andrew Ryan (rr2b+@andrew.cmu.edu)

	* elf/d-link/hash.c (_dl_find_hash): add a new parameter,
	  int copyrel. Symbol resolution has been fixed so that data
	  symbols from a shared object which get copied into the
	  executable will work properly. Previously dynamically loaded
	  code would see the definition in the shared object instead of
	  the copy.

	* elf/d-link/hash.h (_dl_find_hash): fix the prototype.

	* elf/d-link/readelflib1.c:
	* elf/d-link/i386/boot1.c: All mmap calls are now properly
	  checked for failure. Previously some were unchecked and
	  others where checked only for 0xffffffff. The mmap system
	  call actually returns -errno.

	* elf/d-link/i386/boot1.c (_dl_boot): add 0 to _dl_find_hash ().
	  (_dl_malloc): _dl_malloc has been fixed to allocate additional
	  pages as needed.

	* elf/d-link/i386/elfinterp.c (_dl_linux_resolver):
	  (_dl_parse_relocation_information): add 0 to _dl_find_hash ().
	  (_dl_parse_copy_information): add 1 to _dl_find_hash ().

	* elf/d-link/i386/syscall.h (_dl_MAX_ERRNO): new. defined as
	  4096.
	  (_dl_mmap_check_error): new macro. defined as

	  #define _dl_mmap_check_error(__res)   \
		(((int)__res) < 0 && ((int)__res) >= -_dl_MAX_ERRNO)

	* elf/d-link/libdl/dlib.c (_dlsym): add 0 to _dl_find_hash ().
	  (_dlclose): Symbol resolution during fini execution was
	  causing a segfault. Now the fini sections are run before the
	  objects which might be needed for them are unloaded.

Wed Nov 23 22:06:13 1994  Delman Lee (delman@mipg.upenn.edu)

	* libbsd/cfsetspeed.c: add 57600/115200 baud support.
	  need kernel 1.1.65 or above.

Mon Nov  7 10:36:55 1994  Theodore Ts'o (tytso@MIT.EDU)

	* posix/cfsetget.c: add support for 57600 and 115200 bps.
	  need kernel 1.1.65 or above.

Sun Nov 20 23:28:21 1994  H.J. Lu (hjl@fudan)

	* <regexp.h> (compile): use

		RETURN((__preg->buffer + __preg->rx.allocated - __preg->rx.reserved));

	  if _RX_H is defined. from Gerd Rausch <gerd@alf.oche.de>.

	* jump/libm/jump.params:
	* jump/libc.lite/jump.params:
	* jump/libc/jump.params: bump up to version 4.6.23.
 
	* <_G_config.h>: update verion to 4.6.23.

Sun Nov 20 20:28:20 1994  H.J. Lu (hjl@fudan)
	
	* elf/crt/config/i386/linuxelf.h (LIBGCC_SPEC): changed
	  from LIB_SPEC_2.

Sun Nov 20 13:22:28 1994  H.J. Lu (hjl@fudan)

	* version 4.6.22 is released.

	* jump/libm/jump.params:
	* jump/libc.lite/jump.params:
	* jump/libc-nys/jump.params:
	* jump/libc/jump.params: bump up to version 4.6.22.
 
	* <_G_config.h>: update verion to 4.6.22.

        * sysdeps/i386/memchr.c: undo the change of Wed Nov 16
	  11:13:24 1994 by Ulrich Drepper (drepper@ira.uka.de).
	  make linked with libc.so couldn't take linux/kernel/Makefile
	  in the Linux kernel 1.1.64.
			     
Sat Nov 19 17:02:01 1994  H.J. Lu (hjl@fudan)

	* version 4.6.21 is released.

	* <regexp.h> (compile): use

		RETURN((__preg->buffer + __preg->allocated - __preg->reserved));

	  if _RX_H is defined.

	* elf/crt/crtstuff.c (CRT_END): add dummy

		extern void *___brk_addr;
		extern char **__environ;

		___brk_addr = __environ;

	  if __linux__ and __PIC__ are defined.

	* jump/libcurses/jump.params: bump up to version 0.1.2.

	* curses-bsd4.4/ChangeLog: new entry.

	* sysdeps/m68k/crypt.S: copied from ufc/crypt.sun3.S.
	  don't use it since it doesn't support PIC.

	* sysdeps/linux/i386/syscall.S: fix alignment for ELF.

	* time/strftime.c (SET_AMPM): change to

		ampm = _time_info->ampm[tp->tm_hour >= 12]

	  from Mark_Weaver@brown.edu.

Fri Nov 18 20:11:55 1994  J. Alan Eldridge (alane@wozzle.linet.org)

	* curses-bsd4.4/newwin.c (__set_subwin): fix
	  "olp" and "lp->line". Please test it.

Fri Nov 18 04:53:28 1994   Andreas Schwab (schwab@issan.informatik.uni-dortmund.de)

	* <gnu-stabs.h>: fix typo.

	* <m68k/__math.h>:
	* <m68k/syscall.h>:
	* <math.h>:
	* <values.h>: add m68k support. 

	* Makerules: use "$(@D)/" instead of "$(@D)".

	* Maketargets (depend): use ".*\.o\" instead of ".*.o".

	* compat/m68k/__old__uname.c: d1 may be clobbered.

	* cvt/gcvt.c: handle exponents >= 100.

	* grp/gshadow.c:
	* pwd/shadow.c: clear "shadow" after fclose ().

	* libio/floatconv.c: check __mc68000__ for IEEE_MC68k.

	* libio/ChangeLog.new: new entry.

	* sysdeps/linux/__load.c (__load_shared_libraries): don't
	  write out the trailing '\0'.

	* sysdeps/linux/m68k/Makefile (DIRS): add gmon.

	* sysdeps/linux/m68k/__fcntl.c: 
	* sysdeps/linux/m68k/__ioctl.c:
	* sysdeps/linux/m68k/__open.c: d3 may be clobbered.

	* sysdeps/linux/m68k/__sbrk.c: add register.

	* sysdeps/linux/m68k/__select.c: d1 may be clobbered.

	* sysdeps/linux/m68k/getprio.c: d0 may be clobbered.

	* sysdeps/linux/m68k/math/Makefile (SRC1S): add cbrt.c.

	* sysdeps/linux/m68k/math/frexp.c (frexp): use inline version.
	  (ldexp): new. use inline version.

	* sysdeps/linux/m68k/syscall.c: d0 may be clobbered.

	* sysdeps/linux/m68k/sysdep.h:
	* sysdeps/m68k/setjmp/__longjmp.c: modified.

	* ufc/crypt.sun3.S: modified. don't use it since
	  it doesn't support PIC.

	* sysdeps/linux/m68k/gmon/Makefile:
	* sysdeps/linux/m68k/gmon/gmon.c:
	* sysdeps/linux/m68k/gmon/gmon.h:
	* sysdeps/linux/m68k/gmon/profil.c:
	* sysdeps/linux/m68k/math/cbrt.c: new for m68k.

Thu Nov 17 11:40:02 1994  H.J. Lu (hjl@fudan)

	* jump/libm/jump.params:
	* jump/libc.lite/jump.params:
	* jump/libc-nys/jump.params:
	* jump/libc/jump.params: bump up to version 4.6.21.
 
	* elf/libdl/jump.params: bump up to version 1.0.9.
 
	* <_G_config.h>: update verion to 4.6.21.

Thu Nov 17 09:34:53 1994  Swen Thuemmler (swen@uni-paderborn.de)

	* rpc/getrpcent.c: 
	* pwd/getpwent.c:
	* grp/getgrent.c: free a pointer if it is not NULL
	  and then set it to NULL.

	* grp/initgroups.c (ypmode): don't make it static. make
	  it on stack.

Thu Nov 17 01:42:12 1994  H.J. Lu (hjl@fudan)

	* elf/d-link/readelflib1.c (_dl_load_shared_library): try
	  "/lib/" before "/usr/lib/".

	* sysdeps/linux/__load.c (__load_shared_libraries): check
	  LDSO_IMAGE1 if it is defined.

	* sysdeps/linux/config.h (LDSO_IMAGE1): new. defined as

		"/usr/"TARGET_MACHINE"/lib/ld.so"

	* sysdeps/linux/Makefile (BASE_CFLAGS): add

		-DTARGET_MACHINE=\"$(TARGET_MACHINE)\"

	* sysdeps/i386/Makefile (SRC1S): add  __stpncpy.c stpcpy.c
	  strstr.c.

	* string/Makefile (SCR1S): remove __stpncpy.c stpcpy.c
	  strstr.c.

	* elf/libtermcap/jump.params: Version 1.2.3.

	* termcap/version.c: 1.2.3.

Wed Nov 16 11:13:24 1994  Ulrich Drepper (drepper@ira.uka.de)

	* sysdeps/i386/memchr.c:
	* sysdeps/i386/strstr.c: add PIC support.

Sat Nov 12 08:41:59 1994  Ulrich Drepper (drepper@ira.uka.de)

	* <mntent.h>: support the new mount options for ext2
	  in 1.1.61.

	* nls/Makefile (GENCATOBJ): new. defined as

		gencat.o genlib.o mcprt.o mcprtlib.o msgcat.o msgcat-libc.o.

Sat Nov 12 04:15:27 1994  Alan Modra (alan@SPRI.Levels.UniSA.Edu.Au)

	* termcap/termcap.c: use the version and disallow greater than
	  length 2 lookup strings!.

Wed Nov  9 01:09:56 1994  Rick Sladkey  <jrs@world.std.com>

	* elf/Makefile: Build crt before ELF libraries. Ensure gcc
	  finds the newly built crt*.o files instead of the installed
	  ones when building the shared objects.
