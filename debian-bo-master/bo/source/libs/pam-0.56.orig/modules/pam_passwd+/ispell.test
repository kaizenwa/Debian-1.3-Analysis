#!/bin/sh
#
# Test the passwords against the ispell dictionary.
#
# This is important: The word must be lowercased before it is given to
# this script. This means that you must use the '*' modifier for the
# passwd+ code to lowercase the word. I chose to make this assumption
# rather than to run 'tr' a second time to lowercase the input.
#
# This is a rather crude attempt to use the ispell dictionaries and the
# ispell program to analyze the passwords. I just don't like having to
# dedicate two 'dictionaries' on my system, one for passwords and one for
# normal spelling functions.
#
# If you want to use a 'personal' dictionary of known bad, but otherwise
# mis-spelled words for ispell, then use a 'personal' dictionary to ispell.
#

NO_NUM=`echo $1 | /usr/bin/tr -d -c [a-z]`
if [ "${NO_NUM}" = "$1" ]; then
	CORRECTED=`echo "${NO_NUM}" | /usr/bin/ispell -l`
	if [ "X${CORRECTED}" = "X" ]; then
		echo "failed"
		exit 0
	fi
fi

echo "good"
exit 0
