#!/bin/bash

IGNORE_AGE=./.ignore_age
CONF=./limits.skel
MODULE=pam_limits

echo

if [ -f "$IGNORE_AGE" ]; then
	echo "you don't want to be bothered with the age of your $CONFILE file"
	yes="n"
elif [ ! -f "$CONFILE" ] || [ "$CONF" -nt "$CONFILE" ]; then
	if [ -f "$CONFILE" ]; then
		echo "\
An older $MODULE configuration file already exists ($CONFILE)"
		WRITE=overwrite
	fi
	echo -n "\
Do you wish to copy the $CONF file in this distribution
to $CONFILE ? (y/n) [n] "
	read yes
else
	yes=skip
fi

if [ "$yes" = "y" ]; then
	mkdir -p /etc/security
	echo "  copying $CONF to $CONFILE"
	cp $CONF $CONFILE
else
	echo "  Skipping $CONF installation"
	if [ "$yes" = "n" ]; then
		touch "$IGNORE_AGE"
	fi
fi

echo

exit 0
