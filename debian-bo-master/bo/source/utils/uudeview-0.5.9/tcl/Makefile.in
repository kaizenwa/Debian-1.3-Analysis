#
#
# ============================================================================
#
# Makefile for the Tcl/Tk stuff of UUDeview --- fp@informatik.uni-frankfurt.de
#
# ============================================================================
#
# $Id: Makefile.in,v 1.2 1996/06/06 20:09:05 fp Exp $
#
# your make might need this
#
SHELL	=	/bin/sh
# 
# Source and Installation Paths
#
prefix	=	@prefix@
exec_prefix =	@exec_prefix@
srcdir =	@srcdir@
VPATH =		@srcdir@
#
# Where you want the binaries and the manual pages installed
#
BINDIR	=	@bindir@
MANDIR	=	@mandir@
#
# install program. use our own, as AC_PROG_INSTALL doesn't work reliably
#
INSTALL	=		@srcdir@/install-sh
INSTALL_PROGRAM =	${INSTALL} -c
INSTALL_DATA =		${INSTALL} -c -m 644
#
# If you don't have the GNU C compiler installed, set CC=cc here
#
CC	=	@CC@
#
# C Compiler Options
#
CFLAGS	=	@CFLAGS@ -I@srcdir@ @CPPFLAGS@ @DEFS@
#
# Libraries to link and their paths
#
LIBS	=	@LDFLAGS@ @LIBS@
#
# the ranlib program
#
RANLIB =	@RANLIB@
#
# shared library stuff, if available. not yet active. i first need to
# find someone who can really explain this to me.
#
SHLIB_CFLAGS =	@SHLIB_CFLAGS@
SHLIB_LD =	@SHLIB_LD@
SHLIB_SUFFIX =	@SHLIB_SUFFIX@
SHLIB_VERSION =	@SHLIB_VERSION@
#
###############################################################################
# You shouldn't have to change anything below.
###############################################################################
#
@SET_MAKE@
#

SOURCE	=	uuwish.c uutcl.c tkImgFmtGFP.c
OBJ	=	${SOURCE:.c=.o}

#
# make stuff
#

.SUFFIXES:
.SUFFIXES: .c .o

all:		uuwish xdeview

clean:
	rm -f uuwish [Xx]deview gif2gfp
	rm -f *.o *.a *.so core *~ TAGS

distclean:	clean
	rm -f config.status config.cache config.log Makefile config.h
	rm -f uudeview-*tar* uudeview-sfx

realclean:	distclean

install: 	all
	for d in $(PROGS) ; do \
		$(INSTALL_PROGRAM) $(srcdir)/$$d $(BINDIR)/$$d ; \
	done
	-for d in $(MPAGES) ; do \
		$(INSTALL_DATA) $(srcdir)/$$d $(MANDIR)/man1/$$d ; \
	done

new:		clean
	rm -f uuwish [Xx]deview gif2gfp
	make all

uuwish:		$(OBJ) ../uulib/libuu.a
	$(CC) -o $@ $(OBJ) -L../uulib -luu $(LIBS)

xdeview:	xdeview.head tk_MFSbox.tcl xdeview.tail
	rm -f $@
	sed -e 's,@''bindir''@,@bindir@,g' < $(srcdir)/$@.head > $@
	cat $(srcdir)/tk_MFSbox.tcl >> $@
	-if [ -r $(srcdir)/FrankGFP.tcl ] ; then \
		cat $(srcdir)/FrankGFP.tcl >> $@ ; \
	fi
	-if [ -r $(srcdir)/COPYING.tcl ] ; then \
		cat $(srcdir)/COPYING.tcl >> $@ ; \
	fi
	cat $(srcdir)/xdeview.tail >> $@
	chmod 755 $@

.c.o:
	$(CC) -c $(CFLAGS) -I../uulib $(VDEF) $<

uuwish.o:	uuwish.c config.h
uutcl.o:	uutcl.c config.h
tkImgFmtGFP.o:	tkImgFmtGFP.c config.h
