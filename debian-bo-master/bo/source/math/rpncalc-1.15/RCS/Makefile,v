head	1.12;
access;
symbols;
locks; strict;
comment	@# @;


1.12
date	97.02.01.14.30.11;	author david;	state Exp;
branches;
next	1.11;

1.11
date	97.01.25.23.40.57;	author david;	state Rel;
branches;
next	1.10;

1.10
date	97.01.19.21.17.32;	author david;	state Exp;
branches;
next	1.9;

1.9
date	97.01.19.20.09.35;	author david;	state Exp;
branches;
next	1.8;

1.8
date	96.10.26.15.15.26;	author david;	state Rel;
branches;
next	1.7;

1.7
date	96.09.14.15.54.08;	author david;	state Rel;
branches;
next	1.6;

1.6
date	96.09.13.20.21.29;	author david;	state Exp;
branches;
next	1.5;

1.5
date	96.08.14.21.18.33;	author david;	state Rel;
branches;
next	1.4;

1.4
date	96.07.13.20.48.22;	author david;	state Exp;
branches;
next	1.3;

1.3
date	96.05.09.20.54.52;	author david;	state Exp;
branches;
next	1.2;

1.2
date	96.03.17.15.35.09;	author david;	state Exp;
branches;
next	1.1;

1.1
date	96.02.24.17.25.05;	author david;	state Exp;
branches;
next	1.0;

1.0
date	95.12.31.20.05.34;	author david;	state Rel;
branches;
next	;


desc
@Simple rpn calculator, tries to emulate a HP28.
Makefile
@


1.12
log
@Added dependency to proto.ed (for automatic checkout) and
let `date` suppress whitespaces in front of day.
@
text
@# Makefile for rpncalc - a rudimentary emulation of a HP28S
#
# $Id: Makefile,v 1.12 1997/02/01 14:14:35 david Rel david $

RM      = rm -f
CC      = gcc

LINT	= lclint
LINTOPTS= -exitarg -unrecog -realcompare -predboolint -boolops +boolint\
 -nullassign +charintliteral -mustfree

# Define -Dsunos4 or -Dsunos5 if you're unfortunate enough
# to run SunOs 4.1 or SunOs 5.5 (aka Solaris 2.5).
# Define -Dfreebsd if you're running FreeBSD.
DEFS	= -DVERSION=\"1.15\"

# Define -DHAVE_READLINE if you want readline support (strongly suggested)
# and have the readline libraries installed (most commercial Unices probably
# don't, though; Linux and FreeBSD almost certainly have them installed).
DEFS	+= -DHAVE_READLINE

CFLAGS  = -O2 -Wall -Wstrict-prototypes -Wmissing-prototypes -Wshadow\
  -Wpointer-arith -Wbad-function-cast -Wcast-qual -Wcast-align\
  -Wwrite-strings -Wmissing-declarations -Wnested-externs
LIBS    = -lm

#if defined(HAVE_READLINE)
LIBS   += -lreadline -lncurses
#endif
LDFLAGS =

BIN     = rpncalc
MAN     = $(BIN).1
MANTEMPL= $(MAN).sed
SRCS    = cmds.c stack.c utils.c
OBJS	= cmds.o stack.o utils.o
HEADER  = $(BIN).h cmds.h utils.h stack.h

prefix  = /usr
BINDIR  = $(prefix)/bin
MANDIR  = $(prefix)/man/man1

all:	rpncalc $(MAN)

$(BIN).c:
debian.rules:
	co -kv $@@

$(MAN): $(BIN) proto.ed
	if [ \! -r $(MANTEMPL) ]; then co -kk $(MANTEMPL); fi
	sed -e "s/\\\$$Date.*\\\$$/`date +'%B %-d, %Y'`"/g $(MANTEMPL) > $(MAN)
	ed -s - $(MAN) < proto.ed
	chmod 644 $(MAN)

.c.o:	$(HEADER) $(SRCS)
		$(CC) $(CFLAGS) $(DEFS) -c -o $@@ $<

rpncalc:	$(HEADER) $(SRCS) $(OBJS) $(BIN).c
	$(CC) $(CFLAGS) $(LDFLAGS) $(DEFS) -o $(BIN) $(BIN).c $(OBJS) $(LIBS)

clean:
	$(RM) *.o *~ *.bak \#*\# errors core* a.out TAGS

distclean:	clean
	$(RM) $(BIN)

realclean:	distclean
	-rcsclean
	-$(RM) cmds.* rpncalc.*

install: 	$(MAN) $(BIN)
	install -d -g root -o root -m 755 $(BINDIR)
	install    -g root -o root -m 755 -s $(BIN) $(BINDIR)
	install -d -g root -o root -m 755 $(MANDIR)
	install    -g root -o root -m 644 $(MAN) $(MANDIR)

lint:	$(SRCS) $(BIN).c
	$(LINT) $(LINTOPTS) $^
@


1.11
log
@Generate manpage out of prototype with help of ed(1) and `rpncalc help`.
@
text
@d3 1
a3 1
# $Id: Makefile,v 1.10 1997/01/19 21:17:32 david Exp david $
d49 1
a49 1
$(MAN): $(BIN)
d51 1
a51 1
	sed -e "s/\\\$$Date\\\$$/`date +'%B %d, %Y'`"/g $(MANTEMPL) > $(MAN)
@


1.10
log
@Extract command list automatically.
@
text
@d3 1
a3 1
# $Id: Makefile,v 1.10 1997/01/19 21:11:16 david Exp $
d14 6
a19 1
DEFS	= -DVERSION=\"1.2\" #-Dfreebsd
d22 2
a23 2
CFLAGS  = -O2 -Wall -Wstrict-prototypes -Wmissing-prototypes -Wshadow \
  -Wpointer-arith -Wbad-function-cast -Wcast-qual -Wcast-align \
d28 1
a28 1
LIBS	+= -lreadline -lncurses
a44 3
source:	$(SRCS) $(HEADER) $(MAN)
# implicit rules.

d49 4
a52 6
$(MAN): 
	-co -kk -p $(MANTEMPL) | sed "s/\\\$$Date\\\$$/`date +'%B %d, %Y'`/g;"\
	  > $(MAN)
	(echo "H"; echo "/%CMDS%/d"; echo ".-1r !rpncalc help";\
	 echo ".d"; echo "/The following operations and/d";\
	 echo ".d"; echo "w")|ed - $(MAN)
@


1.9
log
@Added more Warnings to the CFLAGS and the freebsd directive.
@
text
@d3 1
a3 33
# $Id: Makefile,v 1.10 1997/01/19 20:00:50 david Rel $
# $Log: Makefile,v $
# Revision 1.10  1997/01/19 20:00:50  david
# Added freebsd definition
#
# Revision 1.9  1997/01/19 18:23:58  david
# Added various Warning-Flags to CFLAGS.
#
# Revision 1.8  1996/10/26 15:15:26  david
# Changes in order to make rpncalc compile under SunOs 5.5
#
# Revision 1.7  1996/09/14 15:54:08  david
# New debian source format; removed $(DEBIAN) variable.
#
# Revision 1.6  1996/09/13 20:21:29  david
# lclint additions
#
# Revision 1.5  1996/08/14 21:18:33  david
# Fix for unexecutable /usr/man, /usr/man/man1
#
# Revision 1.4  1996/07/13 20:48:22  david
# Passing $(DEFS) to the compilation line for objects,
# since some function (getline etc) have moved.
#
# Revision 1.3  1996/05/09 20:54:52  david
# link against ncurses, not against termcap!
#
# Revision 1.1  1996/02/24 17:25:05  david
# Uses now MANTEMPL instead of MAN. This is nicer and cleaner.
#
# Revision 1.0  1995/12/31 20:05:34  david
# Initial revision
#
d29 1
a29 1
MANTEMPL= $(BIN).1.sed
d38 1
a38 1
all:	rpncalc
d48 5
a52 3
	co -kk $(MANTEMPL)
	sed "s/\\\$$Date\\\$$/`date +'%B %d, %Y'`/g" $(MANTEMPL) > $(MAN)
	-rm $(MANTEMPL)
d58 1
a58 1
rpncalc:	$(HEADER) $(SRCS) $(OBJS) $(BIN).c $(MAN)
@


1.8
log
@Changes in order to make rpncalc compile under SunOs 5.5
@
text
@d3 1
a3 1
# $Id: Makefile,v 1.7 1996/09/14 15:54:08 david Rel $
d5 9
d44 8
a51 2
DEFS	= -DHAVE_READLINE
CFLAGS  = -O2 -Wall
d53 1
d64 1
a64 1
HEADER  = $(BIN).h cmds.h utils.h
d85 2
a86 2
.c.o:	$(HEADER) $(SRCS) $(OBJS)
	$(CC) $(CFLAGS) $(DEFS) -c -o $@@ $<
@


1.7
log
@New debian source format; removed $(DEBIAN) variable.
@
text
@d3 1
a3 1
# $Id: Makefile,v 1.6 1996/09/13 20:21:29 david Exp $
d5 3
@


1.6
log
@lclint additions
@
text
@d3 1
a3 1
# $Id: Makefile,v 1.5 1996/08/14 21:18:33 david Rel david $
d5 3
d33 1
a33 2
#CFLAGS  = -O2 -Wall
CFLAGS  = -g -Wall
a45 1
DEBIAN  = debian.rules debian.control debian.README
d53 1
a53 1
source:	$(SRCS) $(HEADER) $(DEBIAN) $(MAN)
d69 1
a69 1
rpncalc:	$(HEADER) $(SRCS) $(OBJS) $(BIN).c $(MAN) $(DEBIAN)
d80 1
a80 1
	-$(RM) cmds.* rpncalc.*  $(DEBIAN)
@


1.5
log
@Fix for unexecutable /usr/man, /usr/man/man1
@
text
@d3 1
a3 1
# $Id: Makefile,v 1.4 1996/07/13 20:48:22 david Exp david $
d5 3
d25 4
d30 2
a31 1
CFLAGS  = -O2 -Wall
d86 3
@


1.4
log
@Passing $(DEFS) to the compilation line for objects,
since some function (getline etc) have moved.
@
text
@d3 1
a3 1
# $Id: Makefile,v 1.3 1996/05/09 20:54:52 david Exp david $
d5 4
d76 1
a76 1
	install -d -g root -o root -m 644 $(MANDIR)
@


1.3
log
@link against ncurses, not against termcap!
@
text
@d3 1
a3 1
# $Id: Makefile,v 1.1 1996/02/24 17:25:05 david Exp david $
d5 3
d20 4
a23 1
LIBS    = -lm -lreadline -lncurses
d54 1
a54 1
	$(CC) $(CFLAGS) $(DEFINES) -c -o $@@ $<
@


1.2
log
@Adapted for ELF compile.
@
text
@d17 1
a17 1
LIBS    = -lm -lreadline -ltermcap
@


1.1
log
@Uses now MANTEMPL instead of MAN. This is nicer and cleaner.
@
text
@d3 1
a3 1
# $Id: Makefile,v 1.0 1995/12/31 20:05:34 david Rel $
d5 3
d18 1
a18 1
LDFLAGS = -s -Wl,-qmagic
@


1.0
log
@Initial revision
@
text
@d3 5
a7 2
# $Id$
# $Log$
d19 1
d38 4
a41 5
$(MAN):
	co -kk $(MAN)
	mv $(MAN) $(MAN).sed
	sed "s/\\\$$Date\\\$$/`date +'%B %d, %Y'`/g" $(MAN).sed > $(MAN)
	-$(RM) $(MAN).sed
@


1.0
log
@Initial revision
@
text
@# Makefile for rpncalc - a rudimentary emulation of a HP28S
#
# $Id$
# $Log$

RM      = rm -f
CC      = gcc

DEFS	= -DHAVE_READLINE
CFLAGS  = -O2 -Wall
LIBS    = -lm -lreadline -ltermcap
LDFLAGS = -s -Wl,-qmagic 

BIN     = rpncalc
SRCS    = cmds.c stack.c utils.c
OBJS	= cmds.o stack.o utils.o
HEADER  = $(BIN).h cmds.h utils.h
DEBIAN  = debian.rules debian.control debian.README

MAN     = $(BIN).1

prefix  = /usr
BINDIR  = $(prefix)/bin
MANDIR  = $(prefix)/man/man1

all:	rpncalc

source:	$(SRCS) $(HEADER) $(DEBIAN) $(MAN)
# implicit rules.

$(BIN).c:
debian.rules:
	co -kv $@@

$(MAN):
	co -kk $(MAN)
	mv $(MAN) $(MAN).sed
	sed "s/\\\$$Date\\\$$/`date +'%B %d, %Y'`/g" $(MAN).sed > $(MAN)
	-$(RM) $(MAN).sed

.c.o:	$(HEADER) $(SRCS) $(OBJS)
	$(CC) $(CFLAGS) $(DEFINES) -c -o $@@ $<

rpncalc:	$(HEADER) $(SRCS) $(OBJS) $(BIN).c $(MAN) $(DEBIAN)
	$(CC) $(CFLAGS) $(LDFLAGS) $(DEFS) -o $(BIN) $(BIN).c $(OBJS) $(LIBS)

clean:
	$(RM) *.o *~ *.bak \#*\# errors core* a.out TAGS

distclean:	clean
	$(RM) $(BIN)

realclean:	distclean
	-rcsclean
	-$(RM) cmds.* rpncalc.*  $(DEBIAN)

install: 	$(MAN) $(BIN)
	install -d -g root -o root -m 755 $(BINDIR)
	install    -g root -o root -m 755 -s $(BIN) $(BINDIR)
	install -d -g root -o root -m 644 $(MANDIR)
	install    -g root -o root -m 644 $(MAN) $(MANDIR)
@


1.0
log
@Initial revision
@
text
@# Makefile for rpncalc - a rudimentary emulation of a HP28S
#
# $Id: Makefile,v 1.0 1995/12/31 19:54:12 david Exp david $
# $Log: Makefile,v $
# Revision 1.0  1995/12/31 19:54:12  david
# Initial revision
#

RM      = rm -f
CC      = gcc

DEFS	= -DHAVE_READLINE
CFLAGS  = -O2 -Wall
LIBS    = -lm -lreadline -ltermcap
LDFLAGS = -s -Wl,-qmagic 

BIN     = rpncalc
SRCS    = cmds.c stack.c utils.c
OBJS	= cmds.o stack.o utils.o
HEADER  = $(BIN).h cmds.h utils.h
DEBIAN  = debian.rules debian.control debian.README

MAN     = $(BIN).1

prefix  = /usr
BINDIR  = $(prefix)/bin
MANDIR  = $(prefix)/man/man1

all:	rpncalc

source:	$(SRCS) $(HEADER) $(DEBIAN) $(MAN)
	# implicit rules.

$(BIN).c:
debian.rules:
	co -kv $@@

$(MAN):
	co -kk $(MAN)
	mv $(MAN) $(MAN).sed
	sed "s/\\\$$Date\\\$$/`date +'%B %d, %Y'`/g" $(MAN).sed > $(MAN)
	-$(RM) $(MAN).sed

.c.o:	$(HEADER) $(SRCS) $(OBJS)
	$(CC) $(CFLAGS) $(DEFINES) -c -o $@@ $<

rpncalc:	$(HEADER) $(SRCS) $(OBJS) $(BIN).c $(MAN) $(DEBIAN)
	$(CC) $(CFLAGS) $(LDFLAGS) $(DEFS) -o $(BIN) $(BIN).c $(OBJS) $(LIBS)

clean:
	$(RM) *.o *~ *.bak \#*\# errors core* a.out TAGS

distclean:	clean
	$(RM) $(BIN)

realclean:	distclean
	-rcsclean
	-$(RM) cmds.* rpncalc.*  $(DEBIAN)

install: 	$(MAN) $(BIN)
	install -d -g root -o root -m 755 $(BINDIR)
	install    -g root -o root -m 755 -s $(BIN) $(BINDIR)
	install -d -g root -o root -m 644 $(MANDIR)
	install    -g root -o root -m 644 $(MAN) $(MANDIR)
@


1.0
log
@Initial revision
@
text
@# Makefile for rpncalc - a rudimentary emulation of a HP28S
#
# $Id$
# $Log$

RM      = rm -f
CC      = gcc

DEFS	= -DHAVE_READLINE
CFLAGS  = -O2 -Wall
LIBS    = -lm -lreadline -ltermcap
LDFLAGS = -s -Wl,-qmagic 

BIN     = rpncalc
SRCS    = cmds.c stack.c utils.c
OBJS	= cmds.o stack.o utils.o
HEADER  = $(BIN).h cmds.h utils.h
DEBIAN  = debian.rules debian.control debian.README

MAN     = $(BIN).1

prefix  = /usr
BINDIR  = $(prefix)/bin
MANDIR  = $(prefix)/man/man1

all:	rpncalc

source:	$(SRCS) $(HEADER) $(DEBIAN) $(MAN)
	# implicit rules.

$(BIN).c:
debian.rules:
	co -kv $@@

$(MAN):
	co -kk $(MAN)
	mv $(MAN) $(MAN).sed
	sed "s/\\\$$Date\\\$$/`date +'%B %d, %Y'`/g" $(MAN).sed > $(MAN)
	-$(RM) $(MAN).sed

.c.o:	$(HEADER) $(SRCS) $(OBJS)
	$(CC) $(CFLAGS) $(DEFINES) -c -o $@@ $<

rpncalc:	$(HEADER) $(SRCS) $(OBJS) $(BIN).c $(MAN) $(DEBIAN)
	$(CC) $(CFLAGS) $(LDFLAGS) $(DEFS) -o $(BIN) $(BIN).c $(OBJS) $(LIBS)

clean:
	$(RM) *.o *~ *.bak \#*\# errors core* a.out TAGS

distclean:	clean
	$(RM) $(BIN)

realclean:	distclean
	-rcsclean
	-$(RM) cmds.* rpncalc.* 

install: 	$(MAN) $(BIN)
	install -d -g root -o root -m 755 $(BINDIR)
	install    -g root -o root -m 755 -s $(BIN) $(BINDIR)
	install -d -g root -o root -m 644 $(MANDIR)
	install    -g root -o root -m 644 $(MAN) $(MANDIR)
@


1.0
log
@Initial revision
@
text
@# Makefile for rpncalc - a rudimentary emulation of a HP28S
#
# $Id: Makefile,v 1.0 1995/12/31 19:46:47 david Rel $
# $Log: Makefile,v $
# Revision 1.0  1995/12/31 19:46:47  david
# Initial revision
#
# Revision 1.0  1995/12/31 19:41:24  david
# Initial revision
#
# Revision 1.0  1995/12/31 18:56:22  david
# Initial revision
#

RM      = rm -f
CC      = gcc

DEFS	= -DHAVE_READLINE
CFLAGS  = -O2 -Wall
LIBS    = -lm -lreadline -ltermcap
LDFLAGS = -s -Wl,-qmagic 

BIN     = rpncalc
SRCS    = cmds.c stack.c utils.c
OBJS	= cmds.o stack.o utils.o
HEADER  = $(BIN).h cmds.h utils.h
DEBIAN  = debian.rules debian.control debian.README

MAN     = $(BIN).1

prefix  = /usr
BINDIR  = $(prefix)/bin
MANDIR  = $(prefix)/man/man1

all:	rpncalc

source:	$(SRCS) $(HEADER) $(DEBIAN) $(MAN)
	# implicit rules.

$(BIN).c:
debian.rules:
	co -kv $@@

$(MAN):
	co -kk $(MAN)
	mv $(MAN) $(MAN).sed
	sed "s/\\\$$Date\\\$$/`date +'%B %d, %Y'`/g" $(MAN).sed > $(MAN)
	-$(RM) $(MAN).sed

.c.o:	$(HEADER) $(SRCS) $(OBJS)
	$(CC) $(CFLAGS) $(DEFINES) -c -o $@@ $<

rpncalc:	$(HEADER) $(SRCS) $(OBJS) $(BIN).c $(MAN) $(DEBIAN)
	$(CC) $(CFLAGS) $(LDFLAGS) $(DEFS) -o $(BIN) $(BIN).c $(OBJS) $(LIBS)

clean:
	$(RM) *.o *~ *.bak \#*\# errors core* a.out TAGS

distclean:	clean
	$(RM) $(BIN)

realclean:	distclean
	-rcsclean
	-$(RM) cmds.* rpncalc.* 

install: 	$(MAN) $(BIN)
	install -d -g root -o root -m 755 $(BINDIR)
	install    -g root -o root -m 755 -s $(BIN) $(BINDIR)
	install -d -g root -o root -m 644 $(MANDIR)
	install    -g root -o root -m 644 $(MAN) $(MANDIR)
@


1.0
log
@Initial revision
@
text
@# Makefile for rpncalc - a rudimentary emulation of a HP28S
#
# $Id: Makefile,v 1.0 1995/12/31 19:41:24 david Exp $
# $Log: Makefile,v $
# Revision 1.0  1995/12/31 19:41:24  david
# Initial revision
#
# Revision 1.0  1995/12/31 18:56:22  david
# Initial revision
#

RM      = rm -f
CC      = gcc

DEFS	= -DHAVE_READLINE
CFLAGS  = -O2 -Wall
LIBS    = -lm -lreadline -ltermcap
LDFLAGS = -s -Wl,-qmagic 

BIN     = rpncalc
SRCS    = cmds.c stack.c utils.c
OBJS	= cmds.o stack.o utils.o
HEADER  = $(BIN).h cmds.h utils.h
DEBIAN  = debian.rules debian.control debian.README

MAN     = $(BIN).1

prefix  = /usr
BINDIR  = $(prefix)/bin
MANDIR  = $(prefix)/man/man1

all:	rpncalc

source:	$(SRCS) $(HEADER) $(DEBIAN) $(MAN)
	# implicit rules.

$(BIN).c:
debian.rules:
	co -kv $@@

$(MAN):
	co -kk $(MAN)
	mv $(MAN) $(MAN).sed
	sed "s/\\\$$Date\\\$$/`date +'%B %d, %Y'`/g" $(MAN).sed > $(MAN)
	-$(RM) $(MAN).sed

.c.o:	$(HEADER) $(SRCS) $(OBJS)
	$(CC) $(CFLAGS) $(DEFINES) -c -o $@@ $<

rpncalc:	$(HEADER) $(SRCS) $(OBJS) $(BIN).c $(MAN) $(DEBIAN)
	$(CC) $(CFLAGS) $(LDFLAGS) $(DEFS) -o $(BIN) $(BIN).c $(OBJS) $(LIBS)

clean:
	$(RM) *.o *~ *.bak \#*\# errors core* a.out TAGS

distclean:	clean
	$(RM) $(BIN)

realclean:	distclean
	rcsclean

rcsclean:
	distclean
	rcsclean
	-$(RM) cmds.* rpncalc.* 

install: 	$(MAN) $(BIN)
	install -d -g root -o root -m 755 $(BINDIR)
	install    -g root -o root -m 755 -s $(BIN) $(BINDIR)
	install -d -g root -o root -m 644 $(MANDIR)
	install    -g root -o root -m 644 $(MAN) $(MANDIR)
@


1.0
log
@Initial revision
@
text
@# Makefile for rpncalc - a rudimentary emulation of a HP28S
#
# $Id: Makefile,v 1.0 1995/12/31 18:56:22 david Rel david $
# $Log: Makefile,v $
# Revision 1.0  1995/12/31 18:56:22  david
# Initial revision
#

RM      = rm -f
CC      = gcc

DEFS	= -DHAVE_READLINE
CFLAGS  = -O2 -Wall
LIBS    = -lm -lreadline -ltermcap
LDFLAGS = -s -Wl,-qmagic 

BIN     = rpncalc
SRCS    = cmds.c stack.c utils.c
OBJS	= cmds.o stack.o utils.o
HEADER  = $(BIN).h cmds.h utils.h
DEBIAN  = debian.rules debian.control debian.README

MAN     = $(BIN).1

prefix  = /usr
BINDIR  = $(prefix)/bin
MANDIR  = $(prefix)/man/man1

all:	rpncalc

$(BIN).c:
debian.rules:
	co -kv $@@

$(MAN):
	co -kk $(MAN)
	mv $(MAN) $(MAN).sed
	sed "s/\\\$$Date\\\$$/`date +'%B %d, %Y'`/g" $(MAN).sed > $(MAN)
	-$(RM) $(MAN).sed

.c.o:	$(HEADER) $(SRCS) $(OBJS)
	$(CC) $(CFLAGS) $(DEFINES) -c -o $@@ $<

rpncalc:	$(HEADER) $(SRCS) $(OBJS) $(BIN).c $(MAN) $(DEBIAN)
	$(CC) $(CFLAGS) $(LDFLAGS) $(DEFS) -o $(BIN) $(BIN).c $(OBJS) $(LIBS)

clean:
	$(RM) *.o *~ *.bak \#*\# errors core* a.out TAGS

distclean:	clean
	$(RM) $(BIN)

realclean:	distclean
	rcsclean

rcsclean:
	distclean
	rcsclean
	-$(RM) cmds.* rpncalc.* 

install: 	$(MAN) $(BIN)
	install -d -g root -o root -m 755 $(BINDIR)
	install    -g root -o root -m 755 -s $(BIN) $(BINDIR)
	install -d -g root -o root -m 644 $(MANDIR)
	install    -g root -o root -m 644 $(MAN) $(MANDIR)
@


1.0
log
@Initial revision
@
text
@# Makefile for rpncalc - a rudimentary emulation of a HP28S
#
# $Id$
# $Log$

RM      = rm -f
CC      = gcc

DEFS	= -DHAVE_READLINE
CFLAGS  = -O2 -Wall
LIBS    = -lm -lreadline -ltermcap
LDFLAGS = -s -Wl,-qmagic 

BIN     = rpncalc
SRCS    = cmds.c stack.c utils.c
OBJS	= cmds.o stack.o utils.o
HEADER  = $(BIN).h cmds.h utils.h

MAN     = $(BIN).1

prefix  = /usr
BINDIR  = $(prefix)/bin
MANDIR  = $(prefix)/man/man1

.c.o:	$(HEADER) $(SRCS) $(OBJS)
	$(CC) $(CFLAGS) $(DEFINES) -c -o $@@ $<

rpncalc:	$(HEADER) $(SRCS) $(OBJS) $(BIN).c
	$(CC) $(CFLAGS) $(LDFLAGS) $(DEFS) -o $(BIN) $(BIN).c $(OBJS) $(LIBS)
clean:		
	$(RM) *.o *~ *.bak \#*\# errors core* a.out TAGS

distclean:	clean		
	$(RM) $(BIN)

realclean:	distclean
	rcsclean	

install: 	$(MAN) $(BIN)
	install -d -g root -o root -m 755 $(BINDIR)
	install    -g root -o root -m 755 -s $(BIN) $(BINDIR)
	install -d -g root -o root -m 644 $(MANDIR)
	install    -g root -o root -m 644 $(MAN) $(MANDIR)
@


1.0
log
@Initial revision
@
text
@# Makefile for rpncalc - a rudimentary emulation of a HP28S
#
# $Id$
# $Log$

RM      = rm -f
CC      = gcc

DEFINES = -DHAVE_READLINE
CFLAGS  = -O2 -Wall
LIBS    = -lm -lreadline -ltermcap
LDFLAGS = -s -Wl,-qmagic 

BIN     = rpncalc
SRCS    = cmds.c stack.c utils.c
OBJS	= cmds.o stack.o utils.o
HEADER  = $(BIN).h cmds.h utils.h

MAN     = $(BIN).1

prefix  = /usr
BINDIR  = $(prefix)/bin
MANDIR  = $(prefix)/man/man1

.c.o:	$(HEADER) $(SRCS) $(OBJS)
	$(CC) $(CFLAGS) $(DEFINES) -c -o $@@ $<

rpncalc:	$(HEADER) $(SRCS) $(OBJS) $(BIN).c
	$(CC) $(CFLAGS) $(LDFLAGS) $(DEFINES) -o $(BIN) $(BIN).c $(OBJS) \
	  $(LIBS)
clean:		
	$(RM) *.o *~ *.bak \#*\# errors core* a.out TAGS

distclean:	clean		
	$(RM) $(BIN)

realclean:	distclean
	rcsclean	

install: 	$(MAN) $(BIN)
	install -d -g root -o root -m 755 $(BINDIR)
	install    -g root -o root -m 755 -s $(BIN) $(BINDIR)
	install -d -g root -o root -m 644 $(MANDIR)
	install    -g root -o root -m 644 $(MAN) $(MANDIR)
@
