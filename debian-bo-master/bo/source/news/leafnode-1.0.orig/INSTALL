This is very much preliminary.

1. Edit the Makefile, set SPOOLDIR and LIBDIR to the appropriate
directories.

2. Create a "news" user if you don't have one.

3. make install

5. Edit $(LIBDIR)/config so server points to your upstream news server
(generally, your IP provider's).  Make sure $NNTPSERVER or
/etc/nntpserver points to your own host so clients will talk to
leafnode rather than try to go to the upstream server.

4. Set up a cron job (as user "news") to run texpire every night or
maybe every week.  Here is my crontab line, which runs nightly:

0 4 * * * /usr/local/sbin/texpire

I did "crontab -u news -e" as root to edit the crontab file, and added
this line.  Substituting "1" for the third "*", thus:

0 4 * * 1 /usr/local/sbin/texpire

tells cron to run texpire at 4am Monday morning.

5. Make sure fetch is run at the appropriate time.  If you have a
full-time link, run it out of cron (as "news" again), if not, run it
when your connection to the net is established.  If it is run as root,
it will change user to "news".  I use PPP, and run fetch from
/etc/ppp/ip-up.

6. Edit /etc/inetd.conf so $(BINDIR)/leafnode is executed for incoming
NNTP connections.  HUP inetd.  Here is my inetd.conf line:

nntp    stream  tcp     nowait  news    /usr/sbin/tcpd /usr/local/sbin/leafnode

This starts leafnode for all connections on the nntp port, subject to
/etc/hosts/allow and /etc/hosts.deny screening.

7. Run fetch, then read news using an NNTP client (with $NNTPSERVER or
/etc/nntpserver pointing to your own host), then run fetch again.  The
second run of fetch should pick up all the groups you read.

Arnt Gulbrandsen <agulbra@troll.no>