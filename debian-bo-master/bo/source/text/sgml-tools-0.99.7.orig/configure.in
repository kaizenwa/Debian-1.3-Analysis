dnl
dnl  configure.in
dnl
dnl  $Id: configure.in,v 1.5 1997/03/21 10:26:09 cg Exp $
dnl
dnl  Process this file with autoconf to produce a configure script.

AC_INIT(sgmls-1.1)

AC_PROG_INSTALL

AC_PATH_PROG(PERL, perl)
AC_SUBST(PERL)
AC_ARG_WITH(perl-w,
[  --with-perl-w                use perl -w option],
   PERLWARN=-w,
   PERLWARN=
)
AC_SUBST(PERLWARN)
AC_PATH_PROG(GROFF, groff)
AC_SUBST(GROFF)

AC_PATH_PROG(NSGMLS, nsgmls)
AC_ARG_WITH(installed-nsgmls,
[  --with-installed-nsgmls      use installed nsgmls],
   test -n "$NSGMLS" || AC_MSG_ERROR("nsgmls not found")
   BUILD_NSGMLS=,
   NSGMLS=\${prefix}/bin/nsgmls
   BUILD_NSGMLS=true
) 
AC_SUBST(NSGMLS)
AC_SUBST(BUILD_NSGMLS)

AC_PATH_PROG(SGMLSASP, sgmlsasp)
AC_ARG_WITH(installed-sgmlsasp,
[  --with-installed-sgmlsasp    use installed sgmlsasp],
   test -n "$SGMLSASP" || AC_MSG_ERROR("sgmlsasp not found")
   BUILD_SGMLSASP=,
   SGMLSASP=\${prefix}/bin/sgmlsasp
   BUILD_SGMLSASP=true
) 
AC_SUBST(SGMLSASP)
AC_SUBST(BUILD_SGMLSASP)

dnl
dnl  Set directory names.
dnl
BINDIR='${prefix}/bin'
LIBDIR='${prefix}/lib/sgml-tools'
AC_SUBST(BINDIR)
AC_SUBST(LIBDIR)

if test "$BUILD_NSGMLS" = "true"
then
  SUB=sp-1.1.1
fi
AC_CONFIG_SUBDIRS($SUB)

AC_OUTPUT(Makefile bin/sgml2html bin/sgml2info bin/sgml2latex bin/sgml2lyx bin/sgml2rtf bin/sgml2txt bin/sgmlcheck bin/genertoc lib/driver.pl)

if test "$BUILD_SGMLSASP" = "true"
then
  echo "Configuring sgmls-1.1";
  cd sgmls-1.1; make config.h; cd ..
fi
