groff-src=/u/jjc/groff
groff-build=/u/jjc/groff-build
DEV=lj4
#DEVDIR=$(groff-src)/dev$(DEV)
DEVDIR=./dev$(DEV)
AUTOFONT=/u/jjc/autofont
INCLUDES=-I$(groff-src)/include
XLIBS=$(groff-build)/libgroff/libgroff.a

CXX=cygnus-gcc
CXXFLAGS=-g -Wall
LIBS=-lm
PROG=autodit
OBJS=autodit.o
IFLAG=-i 436
SFLAG=-s
TEXTMAP=text.map
SPECIALMAP=special.map

.SUFFIXES: .cc

.cc.o:
	$(CXX) $(INCLUDES) $(CXXFLAGS) -c $<

all: $(PROG)

$(PROG): $(OBJS) $(XLIBS)
	$(CXX) $(CXXFLAGS) -o $(PROG) $(OBJS) $(XLIBS) -lm

# TFM files are available as
# ftp-boi.external.hp.com:/pub/printers/laserjet/win.dos/tfmlj4p.exe
# This is a self-extracting MS-DOS archive.

fonts: FORCE $(PROG) $(TEXTMAP) $(SPECIALMAP)
	test -d $(DEVDIR) || mkdir $(DEVDIR)
	./$(PROG) $(AUTOFONT)/9nb00086.tfm $(TEXTMAP) $(DEVDIR)/TR
	./$(PROG) $(IFLAG) $(AUTOFONT)/9nb00084.tfm $(TEXTMAP) $(DEVDIR)/TI 
	./$(PROG) $(AUTOFONT)/9nb00083.tfm $(TEXTMAP) $(DEVDIR)/TB 
	./$(PROG) $(IFLAG) $(AUTOFONT)/9nb00085.tfm $(TEXTMAP) $(DEVDIR)/TBI 
	./$(PROG) $(AUTOFONT)/9nb00064.tfm $(TEXTMAP) $(DEVDIR)/CR 
	./$(PROG) $(IFLAG) $(AUTOFONT)/9nb00062.tfm $(TEXTMAP) $(DEVDIR)/CI 
	./$(PROG) $(AUTOFONT)/9nb00061.tfm $(TEXTMAP) $(DEVDIR)/CB 
	./$(PROG) $(IFLAG) $(AUTOFONT)/9nb00063.tfm $(TEXTMAP) $(DEVDIR)/CBI 
	./$(PROG) $(AUTOFONT)/9nb00068.tfm $(TEXTMAP) $(DEVDIR)/GR 
	./$(PROG) $(IFLAG) $(AUTOFONT)/9nb00066.tfm $(TEXTMAP) $(DEVDIR)/GI 
	./$(PROG) $(AUTOFONT)/9nb00065.tfm $(TEXTMAP) $(DEVDIR)/GB 
	./$(PROG) $(IFLAG) $(AUTOFONT)/9nb00067.tfm $(TEXTMAP) $(DEVDIR)/GBI 
	./$(PROG) $(AUTOFONT)/9nb00076.tfm $(TEXTMAP) $(DEVDIR)/OR 
	./$(PROG) $(IFLAG) $(AUTOFONT)/9nb00074.tfm $(TEXTMAP) $(DEVDIR)/OI 
	./$(PROG) $(AUTOFONT)/9nb00073.tfm $(TEXTMAP) $(DEVDIR)/OB 
	./$(PROG) $(IFLAG) $(AUTOFONT)/9nb00075.tfm $(TEXTMAP) $(DEVDIR)/OBI 
	./$(PROG) $(AUTOFONT)/9nb00094.tfm $(TEXTMAP) $(DEVDIR)/UR 
	./$(PROG) $(IFLAG) $(AUTOFONT)/9nb00092.tfm $(TEXTMAP) $(DEVDIR)/UI 
	./$(PROG) $(AUTOFONT)/9nb00088.tfm $(TEXTMAP) $(DEVDIR)/UB 
	./$(PROG) $(IFLAG) $(AUTOFONT)/9nb00093.tfm $(TEXTMAP) $(DEVDIR)/UBI 
	./$(PROG) $(AUTOFONT)/9nb00089.tfm $(TEXTMAP) $(DEVDIR)/UCR 
	./$(PROG) $(IFLAG) $(AUTOFONT)/9nb00087.tfm $(TEXTMAP) $(DEVDIR)/UCI 
	./$(PROG) $(AUTOFONT)/9nb00090.tfm $(TEXTMAP) $(DEVDIR)/UCB 
	./$(PROG) $(IFLAG) $(AUTOFONT)/9nb00091.tfm $(TEXTMAP) $(DEVDIR)/UCBI 
	./$(PROG) $(AUTOFONT)/9nb00052.tfm $(TEXTMAP) $(DEVDIR)/ALBR 
	./$(PROG) $(AUTOFONT)/9nb00051.tfm $(TEXTMAP) $(DEVDIR)/ALBB 
	./$(PROG) $(AUTOFONT)/9nb00071.tfm $(TEXTMAP) $(DEVDIR)/LGR 
	./$(PROG) $(AUTOFONT)/9nb00069.tfm $(TEXTMAP) $(DEVDIR)/LGB 
	./$(PROG) $(IFLAG) $(AUTOFONT)/9nb00070.tfm $(TEXTMAP) $(DEVDIR)/LGI 
	./$(PROG) $(AUTOFONT)/9nb00055.tfm $(TEXTMAP) $(DEVDIR)/AOR 
	./$(PROG) $(IFLAG) $(AUTOFONT)/9nb00054.tfm $(TEXTMAP) $(DEVDIR)/AOI 
	./$(PROG) $(AUTOFONT)/9nb00053.tfm $(TEXTMAP) $(DEVDIR)/AOB 
	./$(PROG) $(AUTOFONT)/9nb00072.tfm $(TEXTMAP) $(DEVDIR)/MARIGOLD 
	./$(PROG) $(AUTOFONT)/9nb00070.tfm $(TEXTMAP) $(DEVDIR)/CORONET 
	./$(PROG) $(AUTOFONT)/9nb00060.tfm $(TEXTMAP) $(DEVDIR)/CLARENDON 
	./$(PROG) $(SFLAG) $(AUTOFONT)/9nb00086.tfm $(SPECIALMAP) $(DEVDIR)/S 

FORCE:
