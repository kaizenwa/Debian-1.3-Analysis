dnl Process this file with autoconf to produce a configure script.
AC_INIT(magicfilter.c)

AC_CONFIG_HEADER(config.h filters/filters.h filters/filters2.h)

dnl Figure out the C compiler
AC_PROG_CC
AC_MINIX
AC_AIX
AC_ISC_POSIX

dnl Check for programs used by makefiles
AC_PROG_INSTALL
AC_PROG_LN_S
AC_PROG_CPP

dnl Check for programs used in filters
AC_PATH_INCLUDE(GHOSTSCRIPT, gs)
AC_PATH_INCLUDE(GROG, grog)
AC_PATH_INCLUDE(GROFF, groff)
AC_PATH_INCLUDE(DITROFF, gtroff ditroff troff)
AC_PATH_INCLUDE(GROPS, grops)
AC_PATH_INCLUDE(GRODVI, grodvi)
AC_PATH_INCLUDE(GROTTY, grotty)
AC_PATH_INCLUDE(GROLJ4, grolj4)
AC_PATH_INCLUDE(GZIP, gzip gunzip gzcat)
AC_PATH_INCLUDE(ZCAT, zcat)
AC_PATH_INCLUDE(UNCOMPRESS, uncompress)
AC_PATH_INCLUDE(DVIPS, dvips)
AC_PATH_INCLUDE(PNMTOPS, pnmtops)
AC_PATH_INCLUDE(GIFTOPPM, giftopnm giftoppm)
AC_PATH_INCLUDE(DJPEG, djpeg)
AC_PATH_INCLUDE(SGITOPNM, sgitopnm)
AC_PATH_INCLUDE(TOPS, tops)
AC_PATH_INCLUDE(SGITOPS, sgitops)
AC_PATH_INCLUDE(TIFFTOPNM, tifftopnm)
AC_PATH_INCLUDE(BMPTOPPM, bmptopnm bmptoppm)
AC_PATH_INCLUDE(RASTTOPNM, rasttopnm)
AC_PATH_INCLUDE(NENSCRIPT, nenscript enscript)
AC_PATH_INCLUDE(A2X, a2x)
AC_PATH_INCLUDE(A2PS, a2ps)
AC_PATH_INCLUDE(FIG2DEV, fig2dev)

dnl Check to see if zcat is gzip
AC_PROG_GNU_ZCAT($ZCAT)

dnl Check to see if ditroff works
AC_PROG_DITROFF($DITROFF)

dnl Look for sendmail and /bin/mail
ac_save_path="$PATH"
PATH=$PATH:/usr/libexec:/usr/sbin:/usr/lib:/usr/etc:/etc
AC_PATH_CINCLUDE(SENDMAIL, sendmail smail mail)
PATH="$ac_save_path"

dnl Check for header files
AC_CHECK_HEADERS(memory.h)
AC_CHECK_HEADERS(paths.h)
AC_CHECK_HEADERS(stdlib.h)
AC_CHECK_HEADERS(unistd.h)
AC_HEADER_SYS_WAIT

dnl Check for missing C things
AC_C_CONST
AC_TYPE_PID_T
AC_CHECK_FUNCS(dup2)
AC_CHECK_FUNCS(tmpnam)
AC_CHECK_FUNCS(waitpid)
AC_CHECK_FUNCS(wait4)
AC_CHECK_FUNCS(unsetenv)

dnl Write Makefile
AC_OUTPUT(Makefile filters/Makefile)
