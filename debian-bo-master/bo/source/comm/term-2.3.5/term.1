.TH TERM 1
.SH NAME
term \- server for multiple communication channels on a serial link
.SH SYNOPSIS
.na
.B "term "
[-s speed] [-n on|off] [-c on|off] [-S on|off] [-r] [-f arg]
[-w arg] [-t arg] [-o] [-a] [-d lev] [-l file] [-v file] [-1] [-q]
[-u tcp|unix|off] [-b port] <server>
.ad
.SH DESCRIPTION
.IR Term
and its clients support multiple, compressed, and error-corrected communication 
channels over a regular serial link, typically a modem connection.  
The clients can set up channels to run an interactive shell on the other
system similar to
.IR rlogin (1),
to execute commands on the other system similar to
.IR rsh (1),
to transfer files in either direction, to redirect X server connections
from one system to the other, or to redirect any network port 
connection from one system to a port on the other.
Any of these can occur simultaneously, and in either direction.
.PP
To support these multiple clients,
a term daemon on each system takes control of the device connected to the modem.
So you must compile
.IR term 
and the clients on both systems.
Source is available by anonymous ftp temporarily from 
.PP
\ \ \ physics.purdue.edu:/pub/bcr/term/
.PP
Normally source is available by anonymous ftp  from 
.PP
\ \ \ tartarus.uwa.edu.au:/pub/oreillym/term/
.PP
and 
.PP
\ \ \ nic.funet.fi:/pub/OS/Linux/BETA/
.PP
but not at the time of this patch.
.SH DEFINITION
Due to the fact that anything 
.IR term
and its clients can initiate from one end of the link
they will just as happily initiate from the
other, the following frame of reference will be used throughout this 
documentation.  The remote system refers to the system at the other
end of the modem link, and the local host refers to the machine you are
typing on, typically the user's home system.
.SH USAGE
.IR Term 
is run as a daemon which accepts connections from its clients and establishes
channels for each client's data.  
.IR Term
must be run on both ends.
On the remote system, execute something like
.PP
\ \ \ term -r -n off
.PP
Then, on the local system, you can exit your comm program and type
.PP
\ \ \ term -v /dev/tty?? [-n off] &
.PP
where tty?? is the device name for your modem or serial port.
You may be able to start the local term from within your comm program,
e.g. for xcomm type
.PP
\ \ \ control-A x "$ term"
.PP
Once the term daemons are running at both ends they handle the
transmission of data over the link.
These clients connect to a local 
.IR term
daemon which establishes a communication
channel with the remote daemon and/or remote processes.
The clients are discussed in detail in
.IR term_clients (1).
Briefly,
.IR trsh
runs an interactive shell or commands on the remote system, 
.IR tupload
transfers files from the local system to the remote,
.IR tdownload
transfers files from the remote to the local system,
.IR tredir 
redirects connections from a port on the local system to a port on the
remote system,
.IR txconn 
redirects X server connections from the local system to the remote,
and
.IR tmon
monitors client statistics.
.SH OPTIONS
.IR Term 
accepts a number of command-line options which override settings
established by the termrc file (see below):
.TP
.BR \-S \ off|on
Turns off|on share mode.  This option is on by default if the program is 
set user or group id.
.TP
.BR \-b \ port
This causes term to listen to the specified port instead of listening to
the modem.  This is only usefull with a program that then connects the
port to the IO device.  I've been using it succesfully for making 
resumable internet term sessions.
.TP
.BR \-c \ off|on
Turns off compression.  Still does error correction.  Consider this option
if you have hardware compression (ie. v.32.bis) or are transferring compressed
files. The default is to have compression on.
.TP 
.BR \-n \ on|off
Turns on line noise echoing.  Talk requests, writes, and biffs to the login
which is running term will then appear.  This is a useful option to use on the
local end (the end you are sitting at).  Without this, you will never see any
talk requests directed to your remote login. Default is off.
.TP 
.BR \-f \ off|<number>
Makes term send XON at specified interval.  Zero is no flow control emulation,
10 is a single XON every 10 characters. The default is zero. 100 is a
reasonable value.
.TP
.BR \-s \ off|<number>
Specifies a maximum number of bits per second (baudrate) term will try
to send over the serial link.  Term will avoid sending characters
at a higher data rate than this.  
This overrides the BAUDRATE environment variable.
The default is to use the speed of your computer's serial port, but
be warned that this may be too high if your modem runs at a lower rate
over the phone line.  The baudrate option is intended 
for systems that buffer output to the modem.
During setup and tuning it is better to have <number> be too small
rather than too large.  For high speed links (> 38400), making it
unlimited is probably advantageous. This is achieved by using the value of
.IR off.
.IR term
will then rely solely on your kernel to do flow control.
.TP
.BR \-w \ <number>
Sets the transmission window size; that is, the number of
unacknowledged packets that term may send.  Lower numbers may lead to
better interactive response times.  Higher numbers may lead to better
throughput, particularly if the serial link latencies are large and
the timeout length is set large.  Higher numbers can also improve
efficiency on noisy lines.  The default is determined as a function
of your baudrate.
.TP
.BR \-t \ <number>
Timeout length in 20ths of a second.  This specifies how long term
will wait for an acknowledgement before retransmitting a packet.
Default is 70 (i.e. 3.5 seconds), maximum 1000.
Decreasing both window size and timeouts can lead to less latencies
for interactive work, and faster noise recovery at the expense of
total throughput speed.
.TP
.BR \-r
Use this on the remote term so that client numbers won't clash.
.TP
.BR \-a
Turns on seven bit line mode.  Use only if you have a seven bit line, as 
determined by 
.IR linecheck.
.TP
.BR \-l \ <filename>
Output all log/noise/debugging to the file <filename>
.TP
.BR \-v \ <filename>
Set the modem device to be <filename>.  Appropriate usage is something like
"-v/dev/ttys1"
.TP
.BR \-1
Use stdout instead of stdin as the modem port.  This is ignored if a \-v
is also present.
.TP
.BR \-d \ off|<number>
This sets the debugging level.  This is useful for monitoring packet timeout 
conditions and other things.  Level 64 is suggested, 478 is verbose.
Read debug.h and the other source files to find out what the levels do.
If you are not familiar with packet protocols and pouring through
source code, then this option is unlikely to help you. 
.TP
.BR \-o
Turns on packet send forcing.  Re-transmits oldest packet if nothing to send.
Default off.  Of dubious utility. Not properly debugged. Very bad idea
if speed is unlimited.
.TP
.BR \-u \ tcp|unix|off
Specifies the socket type term should use.  Consider off if you need extra
security on the remote side and tcp if your home directory is NFS or AFS
mounted.  The default is unix.
.TP
.BR \-q
Make term quieter.  Multiple `-q' options make term more quiet.
.TP 8
.PD 0

.BR <server>
Use this to tell term to use a unique socket name. Then for term clients \
to work, you will need the following:
.IP "" 16
setenv \ TERMSERVER \ <server> \ (csh, tcsh)
.IP "" 8
or:
.IP "" 16
export \ TERMSERVER=<server> \ (sh, bash)
.IP "" 8
This option is normally used only if your machine has multiple modems \
so that users can specify which term server they wish to use.
.RE
.PD
.SH ENVIRONMENT VARIABLES
.TP
.BR BAUDRATE
Used to set the speed.  Overridden by termrc or command line setting.
.TP 
.BR SHELL
Default shell for 
.IR trsh.
.TP
.BR TERMDIR
Where to find the .term directory in private mode.  This directory will
contain the socket used by all term clients.  The default is HOME.
.TP
.BR TERMSHARE
Where term runs from in shared mode.  The default is /usr/local/lib/term.
.TP
.BR TERMMODE
What mode term will attempt to use. 0 == private, 1 == system shared,
2 == user shared.
.TP
.BR TERMSERVER
This should specify the <server> name, if you used one.
.SH FILES
There are several files referenced by term and by its clients a user may
create to improve efficiency.
.TP
.IR termrc
The 
.IR termrc
file is used for configuring
.IR term
to run efficiently.  You might not be able to get
.IR term
to work at all without this file.
.TP
.IR hosts.term
While not required, the
.IR hosts.term
file can be usefull for adding your own aliases for internet hosts
you access frequently.  The 
.IR hosts.term 
file may be placed in any the of
.IR $TERMSHARE,
.IR /usr/local/lib/term,
.IR /usr/lib/term,
.IR /usr/etc,
and 
.IR /etc
directories and uses the same syntax as 
.IR /etc/hosts.
When using private or user shared mode, then you can also use the
.IR $TERMDIR/.term,
.IR ~/.term,
or 
.IR ~/term
directory.
.TP
.IR termnet
The 
.IR termnet
file is currently a dummy file, which existence in any of the directories
allowed for the
.IR hosts.term
file activates full 
.IR term
networking at the price of causing some 
.IR term 
clients to no-longer work when connecting to localhost.  Eventually 
configuration options will be added to this file.
.SH DIAGNOSTICS
The 
.B \-d
option provides debugging output.  See 
.IR term_setup (1)
or
.IR linecheck (1)
for further diagnostic information.
.SH SEE ALSO
.TP
.IR term_clients (1)
The man page for the 
.IR term
clients.
.TP
.IR term_setup (1)
The man page for 
.IR term
setup.
.TP
.IR termrc (1)
The man page for the
.IR term
configuration file.
.TP
.IR linecheck (1)
The manual page for the
.IR linecheck
program for
debugging your serial link.
.TP
.IR termtest (1)
The manual page for the
.IR termtest
program for
exercising 
.IR term
and clients.
.TP
.IR term/INSTALL
Documents how to install 
.IR term 
on your machine.
.TP
.IR term/README
The original documents for 
.IR term 
from which these man pages were written.
.TP
.IR term/README.security
Describes in more detail how 
.IR term's
shared mode works.
.TP
.IR term/README.porting
How to compile and link network-using programs to take advantage of term's
transparent network emulation.
.TP
.IR term/Term.HOWTO
A detailed description of how to make term work.  It may be somewhat
out of date with the current version of
.IR term.
.TP
.IR term/FAQ
Answers to some frequently asked questions.
.TP
.IR term/TERMRC
Another description of the syntax and options the user may set in ~/.term/termrc.
.TP
.IR term/CREDITS
Credits for many of the people who have contributed to 
.IR term.
.TP
.IR term/CHANGES
A list of changes to the program since these manuals were edited (version 
1.19).
.SH BUGS
If a remote client stops consuming its input but leaves the channel
open,  the local term daemon will continue to resend unacked packets.
.IR Term 
by default requires a line which passes through all ascii values from 0 to
255.  Xyplex-type terminal servers may require the use of set session passall
to work correctly.
.SH AUTHOR
Michael O'Reilly, michael@iinet.com.au, original author
.br
Bill C. Riemers, bcr@physics.purdue.edu, current developer
