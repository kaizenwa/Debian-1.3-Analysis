.\" apmd.8 -- 
.\" Created: Wed Jan 10 15:07:25 1996 by r.faith@ieee.org
.\" Revised: Sun Apr 21 16:37:43 1996 by r.faith@ieee.org
.\" Copyright 1996 Rickard E. Faith (r.faith@ieee.org)
.\" 
.\" Permission is granted to make and distribute verbatim copies of this
.\" manual provided the copyright notice and this permission notice are
.\" preserved on all copies.
.\" 
.\" Permission is granted to copy and distribute modified versions of this
.\" manual under the conditions for verbatim copying, provided that the
.\" entire resulting derived work is distributed under the terms of a
.\" permission notice identical to this one
.\" 
.\" Since the Linux kernel and libraries are constantly changing, this
.\" manual page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from
.\" the use of the information contained herein.  The author(s) may not
.\" have taken the same level of care in the production of this manual,
.\" which is licensed free of charge, as they might when working
.\" professionally.
.\" 
.\" Formatted or processed versions of this manual, if unaccompanied by
.\" the source, must acknowledge the copyright and authors of this work.
.\" 
.TH APMD 8 "10 Jan 1996" "" "Linux Programmer's Manual"
.SH NAME
apmd \- Advanced Power Management (APM) BIOS daemon
.SH SYNOPSIS
.BI "apmd [ \-vVW ] [ \-p " percent_change " ] [ \-w " warn_percent " ]
.SH DESCRIPTION
.B apmd
is an APM BIOS monitoring daemon.  It will log, via
.BR syslogd (2),
changes in APM power status (e.g., on or off AC power, discharging or
charging battery).  When the available battery power becomes very low, it
can use
.BR wall (1)
to alert all users on the system.  When the APM BIOS notifies the daemon of
a pending suspend or standby request,
.B apmd
will call
.BR sync (2),
sleep for 2 seconds, and then tell the APM BIOS to continue its operation.
When a critical resume occurs,
.B apmd
will make a feable attempt to reset the clock.
.PP
The information logged contains 4 fields:
.HP
1) Rate of discharge (percent/minute).  Negative rates indicate charging.
.HP
2) Time since total charge or total discharge (hh:mm:ss).  This value is
only useful if it reflects the time since a 100% or 0% state has been
reached.  Otherwise, this time is in parentheses, and reflects the time
since the last important
.B apmd
status change.
.HP
3) Estimate of time left until total discharge (or total charge), assuming
use similar to that since the last resume ( or since AC was connected).
This time is calculated by
.B apmd
itself.
.HP
4) Parenthetically, the percent and length of remaining battery life, as
estimated by the APM BIOS (which is often an estimate from the
intelligent battery itself).
.SH OPTIONS
.TP
.B \-V, \-\-version
Print version and exit.
.TP
.B \-v, \-\-verbose
Log all APM events
.TP
.BR "\-p " percent_change, " \--percentage " percent_change
Every time the percentage of available power changes by
.IR percent_change ,
log information.  The default is 5.  Use values greater than 100 to disable
this feature.
.TP
.BR "\-w " warn_percent, " \--warn " warn_percent
When the battery is not being charged and the percentage of available power
drops below
.IR warn_percent ,
log a warning at ALERT level to
.BR syslog (2).
If the
.B \-W
or
.B \-\-wall
flag was given,
use
.BR wall (1)
to alert all users of impending doom.  Give the warning each time the
percentage changes.  The default is 10.  Use negative values to disable
this feature.
.TP
.B \-W, \-\-wall
In addition to logging via
.BR syslog (2),
also use
.BR wall (1)
to alert all users.  This is most useful if
.BR syslogd (8)
is not set up to write ALERT messages to all users.  If both methods are
used, more noise will be made during the critical time period.
.SH BUGS
The first status report printed after a power change may be
inaccurate because the power change occured at a fractional percentage that
was rounded to a full percentage.  For example, say you are discharging the
machine and have 50.9% power, which is reported as 50%.  When you start to
charge the machine, it will only have 0.1% left before the percentage flips
to 50%, and the charge rate will be dramatically over-estimated.
.SH FILES
.I /proc/apm
.br
.I /proc/devices
.SH AUTHOR
This program was written by Rik Faith (faith@cs.unc.edu) and may be freely
distributed under the terms of the GNU General Public License.  There is
ABSOLUTELY NO WARANTY for this program.
.SH "SEE ALSO"
.BR apm "(1), " xamd (1)
