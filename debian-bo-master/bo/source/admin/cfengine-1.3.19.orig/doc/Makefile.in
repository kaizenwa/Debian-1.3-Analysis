#
# Makefile for CFEngine's documentation
#
# This file is intended as a guide. You may need to modify it a little on your
# system.  Note that you need the GNU texinfo package to run tex on this
# documentation!!  A postscript version is included since some people have had
# problems here.
#

version = @cfversion@

VPATH = @srcdir@

DOCS = @CFDOCS@

prefix = @prefix@
infodir = @infodir@

INSTALL = @INSTALL@
INSTALL_DATA = @INSTALL_DATA@

MKINSTALLDIR = @top_srcdir@/bin/mkinstalldirs

MAKEINFO = @MAKEINFO@
TEX = @TEX@
TEXINDEX = @TEXINDEX@
DVIPS = @DVIPS@
TEXI2HTML = @TEXI2HTML@

CP = ln
RM = rm -f

# Needs to agree with VPATH
MAKEINFOFLAGS = -I@srcdir@

.SUFFIXES: .ps .info .html .dvi .texinfo

all: ${DOCS}

install: cfengine.info
	${MKINSTALLDIR} ${infodir}
	for x in cfengine.info* ; \
	do \
	${INSTALL_DATA} $$x ${infodir}; \
	done

dist: ${version}.ps

${version}.ps: cfengine.dvi
	${DVIPS} -f cfengine.dvi > $@

cfengine.dvi: version.texi

cfengine.html: version.texi

cfengine.info: version.texi

clean:
	${RM} cfengine.info* cfengine.aux cfengine.log cfengine.cp
	${RM} cfengine.pg cfengine.tp cfengine.vr cfengine.fn
	${RM} cfengine.ky cfengine.toc cfengine.cps cfengine.vrs
	${RM} cfengine.fns  cfengine.mb cfengine.mbs  
	${RM} cfengine.f cfengine.fs *~

distclean: clean
	${RM} cfengine.dvi cfengine.ps

.info.html:
	-${TEXI2HTML} $<

.texinfo.info:
	-${MAKEINFO} ${MAKEINFOFLAGS} $<

.texinfo.dvi:
	-${TEX} $<
	-${TEXINDEX} $*.vr $*.mb $*.cp
	echo rescanning || ${TEX} $<
