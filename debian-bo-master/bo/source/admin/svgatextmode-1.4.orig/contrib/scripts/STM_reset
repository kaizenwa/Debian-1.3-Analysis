#!/bin/bash
#
# This scripts is called from the "resetprog" line in TextConfig,
# when SVGATextMode has finished switching modes.
#
# This example only restarts selection, since that's all I need.
# 
# Adapt this script so it suits YOUR system setup. 
#
echo "Screen resized to $1x$2. Restarting GPM..."
/usr/bin/gpm -k         # kill gpm
/usr/bin/gpm -t ms      # for MicroSoft Mice

#
# The following should work, too, but a kernel bug prevents it from working (according to Mr Rubini).
# A kernel patch is included in this directory which SHOULD solve this.
#
# kill -WINCH `cat /var/run/gpmpid`     # gets pid from current gpm daemon, and send resize signal to it
#
#
# Some programs need not be restarted, but just need a "SIGWINCH" signal sent to them.
# Emacs and gpm seem to be examples of this (according to Alessandro Rubini)
#
# killall -WINCH -v emacs       # this sends window change signal to all processes called "emacs"
#
# for those still using selection: this restarts it
#
# /bin/killall -v selection
# (/usr/bin/selection -t ms &)   # for MicroSoft mouse. Other mice need other option!

