dnl Process this file with autoconf to produce a configure script.
AC_INIT()
AC_PREREQ(2.4)

AC_CONFIG_HEADER(include/FVWMconfig.h)

CFLAGS=-O

dnl Checks for programs.
AC_CHECK_PROG(AR, ar, ar cr, ar cr)
AC_CHECK_PROG(MAKEDEPEND, makedepend, makedepend, makedepend)
AC_CHECK_PROG(RM, rm, rm -f, rm -f)
AC_PROG_RANLIB
AC_PROG_MAKE_SET
AC_PROG_CC

dnl Check for OS specific
AC_AIX

dnl Checks for standard programs.
AC_PROG_CPP
AC_PROG_YACC
AC_PROG_LEX
AC_PROG_INSTALL
AC_PROG_LN_S

dnl Checks for libraries.
dnl nothing to check for
dnl need to check for Xpm and rplay

dnl Checks for header files.
AC_HEADER_STDC

dnl Checks for typedefs, structures, and compiler characteristics.
AC_C_CONST
AC_C_INLINE

dnl Checks for library functions.
dnl AC_CHECK_FUNCS(select)
AC_CHECK_FUNCS(gethostname)
AC_CHECK_FUNCS(waitpid)
AC_CHECK_FUNCS(sysconf)
AC_CHECK_FUNCS(uname)

dnl ========================================================================

dnl 
dnl Check for X11
AC_PATH_X

dnl
dnl Hard coded fvwm config stuff
fvwm_name="fvwm95-2"
fvwm_rc=".fvwm2rc95"
fvwm_icons="$x_includes/X11/bitmaps:$x_includes/X11/pixmaps:$prefix/icons"

if test "x$x_libraries" != x ; then
  x_libraries="-L$x_libraries"
fi
if test "x$x_includes" != x ; then
  x_includes="-I$x_includes"
fi

dnl
dnl export variables
AC_SUBST(x_libraries)
AC_SUBST(x_includes)
AC_SUBST(fvwm_icons)
AC_SUBST(fvwm_name)
AC_SUBST(fvwm_rc)

dnl
dnl always build Makefiles in examples subdir
dnl so user can manually build programs when needed.
AC_OUTPUT(Makefile \
          fvwm/Makefile \
          icons/Makefile \
          libs/Makefile \
          mini-icons/Makefile \
          utils/Makefile \
          xpmroot/Makefile \
          sample.fvwmrc/Makefile \
          modules/Makefile \
          modules/FvwmAudio/Makefile \
          modules/FvwmAuto/Makefile \
          modules/FvwmBacker/Makefile \
          modules/FvwmBanner/Makefile \
          modules/FvwmButtons/Makefile \
          modules/FvwmConsole/Makefile \
          modules/FvwmCpp/Makefile \
          modules/FvwmDebug/Makefile \
          modules/FvwmForm/Makefile \
          modules/FvwmIconBox/Makefile \
          modules/FvwmIconman/Makefile \
          modules/FvwmIdent/Makefile \
          modules/FvwmM4/Makefile \
          modules/FvwmPager/Makefile \
          modules/FvwmSave/Makefile \
          modules/FvwmSaveDesk/Makefile \
          modules/FvwmScroll/Makefile \
          modules/FvwmTalk/Makefile \
          modules/FvwmTaskBar/Makefile \
          modules/FvwmWinList/Makefile)

dnl
dnl Hasta La Vista.
dnl
