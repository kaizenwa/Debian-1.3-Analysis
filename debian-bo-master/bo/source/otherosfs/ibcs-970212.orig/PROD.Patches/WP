
            How to install WordPerfect 5.1 for SCO on Linux


The changes below only apply to installation. Note that some of them
are not even required since the problems they address are not fatal.
These changes are included for completeness and so that people who
are expecting things to go wrong don't keep bugging me with false
bug reports.


1. Extract the archive(s) from the media as instructed. If you have a
   floppy distribution and the disks seem to be blank MS-DOS disks
   read the HINTS file. The disks are *not* blank really...


2. Look at ./wpinstall. Around line 400 there is a line that tests how
   to tell echo not to line feed which says:

	if [ "-nZ" = "`echo -nZ`" ]

   For the test to work correctly with the echo built in to bash this
   needs a space inserting between the n and Z.

	if [ "-n Z" = "`echo -n Z`" ]

   If you don't change this it isn't fatal - it just looks unpleasant.


3. Start ./wpinstall. Fill in the details but do *not* select the install
   option yet.


4. The first thing wpinstall does is uncompress the files in ./_I. Now
   they are uncompressed you want to check some things before you start
   the install. Look at the file _I/installloop. Some versions of this
   have missing quotes (WP have fixed these in later versions) which
   are a problem for bash. Specifically:

   around line 64:
	newcnt=`ls $EXEDIR../$i 2> /dev/null | wc | awk '{ printf "%d", $1}`
	                                                                   ^
	                                                            missing '
   around line 167:
	JNK=`echo "$4" | sed 's/^[^GC].*//g`
	                                   ^
                                    missing '

   around line 170:
	if [ `echo "$4" | sed 's/^G//g` != "$4" ]	# is file type a G?
	                              ^
	                       missing '
   around line 174:
	elif [ `echo "$4" | sed 's/^C//g` != "$4" ]	# is file type a C?
	                                ^
	                         missing '

   If you have these problems you must fix them or the install will fail.


5. Look at _I/wpinstall.char. Around line 1100 there is a block of code
   that says:

	ifiles=`expr $ifiles \* 100 2> /dev/null`
	percent=`expr $ifiles / $totalfiles 2> /dev/null`
	if [ "$percent" -le 100 -a "$percent" -ge 1 ]
	then
		display_status $percent			# redisplay % complete
	fi

   The value of ifiles is dependent on the contents of a file which is
   expected to vanish thus this code should be protected by an if:

	if [ -n "$ifiles" ]; then
		ifiles=`expr $ifiles \* 100 2> /dev/null`
		percent=`expr $ifiles / $totalfiles 2> /dev/null`
		if [ "$percent" -le 100 -a "$percent" -ge 1 ]
		then
			display_status $percent			# redisplay % complete
		fi
	fi

  This change is not essential but does avoid a race condition which could
  result in a (non-fatal) error message during installation.


6. Select the install option of wpinstall and let it go.


7. WP ship .snf fonts which the distributed XFree86 servers don't like.
   You need to remove the .snf fonts and reconvert the supplied .bdf
   descriptions to .pcf font files:

	# cd shlib
	# for bdf in *.bdf
	> do
	>   fn=`basename $bdf .bdf`
	>   [ -r $fn.snf ] && mv $fn.snf $fn.snf.old
	>   bdftopcf -o $fn.pcf $bdf
	> done
	# mkfontdir .
	# xset fp rehash


8. You're done...
