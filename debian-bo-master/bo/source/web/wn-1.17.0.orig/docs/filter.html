<html>
<head>
<title>Filters</title>
</head>
<body>
<!-- pnuts --> <a href="field.html">[Previous]</a> <a href="range.html">[Next]</a> <a href="manual.html">[Up]</a> <a href="manual.html">[Top]</a> <a href="dosearch.html">[Search]</a> <a href="docindex.html">[Index]</a>
<hr size="4">
<!-- #WN_start -->

<h2 align="center">Filters</h2>
<hr size="4">

An arbitrary "filter" can be assigned to any file to be served.  A
filter is a program which reads the file and has the program output
served rather than the content of the file.  One common use of this
feature is for on-the-fly decompression.  For, example a file can be
stored in its compressed form and assigned a filter like zcat which
uncompresses it.  Then the client is served the uncompressed file but
only the compressed version is stored on disk.  As another example,
you might use "nroff -man" as a filter to process UNIX man files
before serving.  There are many other interesting uses of filters.
Be creative!<p>

A filter is assigned to a file by use of the <i>Filter=</i> directive
in the file's record in its index.cache file.  For example, the
lines<p>
<blockquote>
     File=foo.gz<br>
     Content-type=text/plain<br>
     Filter=/usr/local/bin/zcat<br>
     Content-encoding=none<br>
</blockquote><p>

cause the compressed file foo.gz to be uncompressed on the fly and
served to the client as a text/plain document.  Notice that it is necessary
to have the content-encoding line to override the default action
of <i>wndex</i> which is to infer from the ".gz" suffix that the
content-encoding is x-gzip.  If the compressed file were named simply
"foo" then the content-encoding line would be unnecessary.<p>


The Filter= directive 
takes the value of a path to a file in three different forms.
If the path begins with a '/' then it is relative to the system
root.  If it begins with ~/ then it is relative to the <i>WN</i>
hierarchy root, and otherwise it is relative to the directory
containing the index file. <p>

The ability to filter files can be
restricted in several ways.  If <i>WN</i> is invoked with the
<a href="appendixA.html#e_opt">-e option</a> then no includes, filters,
or CGI programs will be executed.  <p>

The -E option in conjunction with the <a
href="appendixA.html#t_opt">-t or -T options</a> restricts the use of
filters to those listed in index.cache files owned by trusted users or
groups.  The <a href="appendixA.html#u_opt"> -u option</a> allows only
the use of filters owned by the owner of the index.cache file which
lists them. <p>

If you wish to have all the standard CGI environment variables made
available to the filter program you can do so by adding the line
<blockquote>
     <a href="appendixB.html#attributes">Attributes</a>=CGI
</blockquote>
to the file record.  A list of these environment variables can be
found in the <a href="appendixD.html">Appendix D.</a>
(Also see the <a href="examples/sample.cgi">sample CGI script</a>
which is located in the file /docs/examples/sample.cgi which accompainies
the WN distribution.)
<p>
<!-- #WN_end -->
<hr>
<address>
John Franks &lt;john@math.nwu.edu&gt;
</address>
<!-- pnuts --> <a href="field.html">[Previous]</a> <a href="range.html">[Next]</a> <a href="manual.html">[Up]</a> <a href="manual.html">[Top]</a> <a href="dosearch.html">[Search]</a> <a href="docindex.html">[Index]</a>
</body>
</html>
