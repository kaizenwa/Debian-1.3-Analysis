<!--%hypertext -->
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">

<!-- mod_fastcgi.html -->
<!--	Documentation for the interface to FCGI for the Apache web server -->
<!-- Copyright (c) 1996 Open Market, Inc. -->
<!-- See the file "LICENSE.TERMS" for information on usage and redistribution -->
<!-- of this file, and for a DISCLAIMER OF ALL WARRANTIES. -->

<html>
<head>
<title>Apache module mod_fastcgi</title>
</head>

<body>
<IMG SRC="http://www.apache.org/images/apache_sub.gif" ALT="">
<!--/%hypertext -->
<h1>Module mod_fastcgi</h1>

This module is contained in the <code>mod_fastcgi.c</code> file.
It provides for startup of and communication with FastCGI
applications. This module is not compiled into the server by default. To use
this module you must copy <code>src/mod_fastcgi.c</code> from this kit into
your Apache server's source directory. Then you have to add the following line
to the server build Configuration file.
<PRE>
Module fastcgi_module	mod_fastcgi.o
</PRE>
Any file with the MIME type
<code>application/x-httpd-fcgi</code> will be processed by this module.
Note that the ScriptAlias directive takes priority over the
AddType directive; a file located in a directory that is the
target of ScriptAlias directive will have type
<code>application/x-httpd-cgi</code> and be handled by
<code>mod_cgi</code>, regardless of its name.  So
don't put FastCGI applications in your <code>/cgi-bin/</code>
directory -- they won't work properly!


<H2>Summary</H2>

FastCGI is a faster alternative to CGI.  FastCGI gets its speed by having
the Web server keep the application processes running between requests. So,
unlike CGI, you do not have the overhead of starting up a new process and
doing application initialization each time somebody requests a document. The
processes start up with the Web server and keep on running.<p>

FastCGI applications communicate with a Web server using a simple
communications protocol.  A single full-duplex connection communicates
the environment variables and <code>stdin</code> data to the
application, and <code>stdout</code> and <code>stderr</code> data to
the Web server.<p>

For more information on FastCGI including freely available FastCGI
server modules and application libraries, go to the <A
HREF="http://www.fastcgi.com/">FastCGI home page
(http://www.fastcgi.com)</A>.<p>

Any file that has a MIME type of <code>application/x-httpd-fcgi</code>
and that has an Application Class associated with it will be treated
as a FastCGI script.  A file gets this MIME type by (a) <i>not</i>
residing in a <code>ScriptAlias</code> directory and (b) having a name
ending in an extension defined by an <code>AddType
application/x-httpd-fcgi</code> directive.  An Application Class is
established by the AppClass directive.<p>

<h2>Directives</h2>
<ul>
<li><A HREF="#appclass">AppClass</A>
</ul>
<hr>

<A name="appclass"><h2>AppClass</h2></A>
<strong>Syntax:</strong> AppClass exec-path
                   <em>[-processes N] [-listen-queue-depth N] 
	           [-restart-delay N] [-priority N] 
                   [-initial-env name=value]<br></em>
<strong>Context:</strong> srm.conf<br>
<strong>Module:</strong> mod_fastcgi<p>

The <code>AppClass</code> directive starts one or more FastCGI application
processes, using the executable file <code>exec-path</code>.  This file must
have MIME type <code>application/x-httpd-fcgi</code>.  The server is
responsible for restarting these processes should they die. All of the
FastCGI application processes started by a given <code>AppClass</code>
directive share a common Unix domain listening socket.<p> When a a client
request comes in for the file <code>exec-path</code>, the request is handled
by the <code>mod_fastcgi</code> module.  The FastCGI module connects the
requests to a processes belonging to the corresponding application class.<p>

The optional parameters to the <code>AppClass</code> directive
are as follows:
<UL>
<LI> <B>processes: </B>number of FastCGI processes that the server
will spawn, default value is 1.
<LI> <B>listen-queue-depth: </B>depth of listening queue
shared by the processes, default value is 5.
<LI> <B>restart-delay: </B> number of seconds before web server restarts
a dead FastCGI process. The server will restart dead processes no more often
than one every <EM>restart-delay</EM> seconds.
<LI> <B>priority: </B>priority of FastCGI processes, default value
is same priority as the HTTP server.
<LI> <B>initial-env: </B>a name-value pair in the initial environment
passed to the application processes.  Several name-value pairs can
be specified by using this option several times.  The default
initial environment is empty (no name-value pairs).
</UL>
<P>
If there are any errors in processing the FastCGI directive
<code>AppClass</code>, the server will exit with appropriate error
messages.  Errors include syntax errors, <code>exec-path</code>
having incorrect MIME-type, <code>exec-path</code> does not exist.

<h3>Example</h3>
In srm.conf
<PRE>
AddType application/x-httpd-fcgi .fcgi
Alias /fcgi-bin/ /usr/local/etc/httpd/fcgi-devel-kit/examples/
AppClass /usr/local/etc/httpd/fcgi-devel-kit/examples/tiny-fcgi.fcgi -processes 2
</PRE>
<P>
In this example if a request comes in for /fcgi-bin/tiny-fcgi.fcgi it'll be
bound to the application class defined above, and the request would get sent
to one of the 2 tiny-fcgi.fcgi processes.
<P>
<EM><STRONG>Note:</STRONG> To try this configuration example with the
FastCGI Developer's Kit, you need to make a link from
the name examples/tiny-fcgi.fcgi to the existing file examples/tiny-fcgi.</EM>
<HR>
</BODY>
</HTML>
<!--/%hypertext -->
