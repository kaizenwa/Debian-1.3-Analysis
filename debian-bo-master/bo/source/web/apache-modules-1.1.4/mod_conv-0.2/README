This is mod_conv, a module for special handling of ftp archive subtree in the
Apache daemon. Documentation is not written yet, but will be soon. Check
http://sunsite.mff.cuni.cz/web/local/ from time to time.
This is a successor for mod_ftp. The name was misleading, so the name has
been changed. Please remove any your old FTP* options in srm.conf.
To get it working:
You need
a) get a fresh copy of Apache sources
b) edit src/Configuration to suit your needs+add a line
Module conv_module conv_ftp.o
   On some systems (like Solaris) you'll have to add -DHAVE_STRING_H to
   AUX_FLAGS, so that regex.c compiles okay. I wish autoconf configured
   Apache!! On Linux you may use the regex.c enclosed or you may use the one
   in libc (then skip point c and add -DHAVE_RX_H -DHAVE_REGCOMP instead).
c) edit your Makefile.tmpl and add there regex.o in the OBJS= line just
   before $(MODULES)
OBJS=......................... regex.o $(MODULES)
d) copy from this package src/* to Apache's src/
e) Configure, make
f) Insert the enclosed conf/srm.conf-conv into your conf/srm.conf end edit
   it to suit your needs (there are some comments for each directive),
   especially take care to set the second argument in ConvAlias /ftp/ ...
   correctly to your ftp subtree (sometimes it is /archive/, I use /ftp/,
   sometimes it is something else). Of course, you can change the first
   parameter (/ftp/) as well. This is the URI prefix in which the archive
   will be virtually shown
f) if you have not changed the directives much, especially is you use
   the /wwwftp/ alias, copy enclosed wwwftp/ directory to the place
   specified as the second argument in the Alias /wwwftp/ .....
   and edit Prolog.html, Epilog.html and Search.html to suit your needs.
Run httpd
Getting http://yourserver/ftp/ now should get the root directory of the ftp
tree or index file, if there is any and you haven't disabled it.
http://yourserver/ftp/?F should get the root directory of the ftp tree
in any case.
htp://yourserver/ftp/somefile should get somefile, etc., including
conversions, e.g. http://yourserver/ftp/somefile.gz, or you can see all the
possible conversions for the file http://yourserver/ftp/somefile?C (this can
be done easily by clicking on the rightmost icon in the directory listing of
the file. There are some other thing users will find out easily by following
particular hyperlinks in the directory listing. Java enabled version for
Java enabled browsers is currently being written and will be available soon
(it will transfer less data accross the network and have additional
features). You should check the regular expression in TableAllow and
TableDeny. This tells Apache which user-agent should get tables by default
adn which agents should get plain view by default. In any case, the user
will be able to change this by following a link on the top of each dir
listing, so that caching is possible and even if they're cheating with
custom User-Agent header, they get what they would like to.
If you disable index files for all the directories of ftp tree, then you
should probably add ForceIndex option to ConvIndexOptions; this will lower
network traffic and make everything more cacheable.

Send all your comments to jj@sunsite.mff.cuni.cz

