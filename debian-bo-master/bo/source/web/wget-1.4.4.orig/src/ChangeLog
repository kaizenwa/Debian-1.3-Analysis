Mon Feb 17 07:17:49 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* init.c: New option netrc.
	(initialize): Don't parse .netrc.

	* cmpt.c (recursive): Return rp.
	(strptime_internal): Match the long strings first, the abbreviated
	second.

Sun Feb 16 00:09:50 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* http.c (check_end): New function.
	(http_atotm): Use it.
 
Thu Feb 13 10:50:19 1997  gilles Cedoc  <gilles@cedocar.fr>

	* http.c (gethttp): Use them.

	* init.c: New options proxy_user and proxy_passwd.

Fri Feb 14 23:28:11 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c (ftp_retrieve_list): Create links even if not relative.

Mon Feb 10 22:20:16 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* recur.c (recursive_retrieve): Lowercase the host name, if the
 	URL is not "optimized".

	* host.c (realhost): Return l->hostname, even if it matches with
 	host.

Mon Feb 10 19:56:28 1997  Marin Purgar  <pmc@asgard.hr>

	* connect.c: Make addrlen size_t instead of int.
	(conaddr): Ditto.

Sun Feb  9 21:55:55 1997  Gregor Hoffleit  <flight@mathi.uni-heidelberg.DE>

	* systhings.h: Define S_ISLNK on NeXT too.

Sun Feb  9 01:49:54 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: Released 1.4.3.

	* url.c: Futher update to list of protostrings.
	(skip_proto): Skip `//' correctly for FTP and HTTP.

	* url.c (get_urls_html): Handle bogus `http:' things a little
 	different.

	* main.c (main): Removed `follow-ftp' from `f'.
	(main): Dumped the `prefix-files' and `file-prefix' options and
 	features; old and bogus.
	(main): Exit on failed setval() in `-e'.

	* http.c (fetch_next_header): Use it to detect header continuation
 	correctly.

	* retr.c (buf_peek): New function.

Sat Feb  8 18:39:29 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* wget.h: Include time.h and stuff.

Sat Feb  8 16:20:09 1997  Roger Beeman  <beeman@cisco.com>

	* ftp.c: Include <time.h>

Fri Feb  7 10:04:23 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* url.c (findurl): Would read over buffer limits.

Thu Feb  6 01:52:12 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp-ls.c (ftp_parse_unix_ls): Allow spaces in file names.

Wed Feb  5 21:17:36 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* http.c (http_atotm): Initialize tm.is_dst.

Sun Feb  2 16:01:27 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* http.c (gethttp): Don't print the number of retrieved headers.

	* main.c (main): New option `--no-clobber', alias for `-nc'.

	* url.c: Recognize `https://'.

Sat Feb  1 10:07:31 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* host.c (herrmsg): Don't use h_errno.

Thu Jan 30 07:00:04 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* host.c (accept_domain): Use it.

	* main.c (main): New option `--exclude-domains'.

	* retr.c (retrieve_url): Use it.
	(retrieve_url): Bail out when an URL is redirecting to itself.

	* url.c (url_equal): New function.

Wed Jan 29 10:56:30 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* connect.c: Include arpa/inet.h instead of arpa/nameser.h.

	* http.c (mk_utc_time): New function.
	(http_atotm): Use it; handle time zones correctly.

Tue Jan 28 15:21:36 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* http.c: Ditto.

	* ftp-basic.c: Use it instead of WRITE.

	* connect.c (iwrite): New function.

Mon Jan 27 16:12:14 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* cmpt.c (mktime): New function.

	* netrc.c: Include <sys/types.h>.

	* main.c (main): Wouldn't recognize --spider.

	* retr.c (rate): Use `B', `KB' and `MB'.
	(reset_timer,elapsed_time): Moved from utils.c.

	* ftp.c (ftp_retrieve_list): Ditto.

	* http.c (http_loop): Don't touch the file if opt.dfp.

Fri Jan 24 00:05:40 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* cmpt.c: New file.

	* ftp.c (ftp_retrieve_glob): New argument semantics.
	(ftp_retrieve_dirs): Use it.
	(ftp_loop): Ditto.

	* html.c (htmlfindurl): Recognize `'' as the quote char.

Thu Jan 23 12:05:04 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c (ftp_loop_internal): Use it.

	* utils.c (remove_link): New function.

Wed Jan 22 01:33:38 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* retr.c (retrieve_url): Require STRICT redirection URL.

	* url.c (parseurl): New argument STRICT.

	* http.c (hparsestatline): Be a little-bit less strict about
 	status line format.

Tue Jan 21 11:51:42 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* http.c (gethttp): Use it.

	* main.c (main): Don't use '<digit>' as options.

	* init.c: New option ignore_length.

	* http.c (gethttp): Ditto.
	(http_loop): Check for redirection without Location:.
	(gethttp): Don't print Length unless RETROKF.

	* ftp.c (getftp): Use it.

	* url.c (mkalldirs): New function.

	* utils.c (mymkdir): Don't check for existing non-directory.

	* url.c (mkstruct): Don't create the directory.

Mon Jan 20 06:50:46 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* init.c (setval): Removed NO_RECURSION checks.

Sun Jan 19 00:45:29 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: "Released" 1.4.3-pre2.

	* recur.c (recursive_retrieve): Bypass host checking only if URL
 	is ftp AND parent URL is not ftp.

	* ftp-basic.c (ftp_request): Print out Turtle Power.

	* ftp.c (ftp_loop): Call ftp_retrieve_glob with 0 if there's no
 	wildcard.
	(ftp_retrieve_glob): Call ftp_loop_internal even on empty list, if
 	not glob.

	* http.c (gethttp): Be a little bit smarter about status codes.

	* recur.c (recursive_retrieve): Always reset opt.recursive when
 	dealing with FTP.

Sat Jan 18 04:57:44 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* retr.c (retrieve_url): New variable location_changed; use it for
 	tests instead of mynewloc.
	(retrieve_url): Allow heuristic adding of html.

	* url.c (url_filename): Don't use the `%' in Windows file names.

	* http.c (http_loop): Always time-stamp the local file.

	* http.c (http_loop): Ditto.

	* ftp.c (ftp_retrieve_list): Use it.

	* utils.c (my_touch): New function.

	* ftp.c (ftp_retrieve_list): Use #ifdef HAVE_STRUCT_UTIMBUF
 	instead of #ifndef NeXT.

	* utils.c (strptime): New version, by Ulrich Drepper.

Fri Jan 17 21:36:12 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* http.c (haccepts_none): Renamed from `haccepts_bytes'.
	(gethttp): If haccepts_none(), disable ACCEPTRANGES.
	(http_loop): Would remove ACCEPTRANGES.

	* ftp.c (getftp): Call ftp_list with NULL.

Wed Jan 15 03:39:13 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* html.c (ftp_index): Don't print minutes and seconds if we don't
 	know them; beautify the output.

	* ftp.c (getftp): Don't close the socket on FTPNSFOD.

Tue Jan 14 05:16:50 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* utils.c (strptime): New function.
	(strptime): Don't use get_alt_number.
	(strptime): Don't use locale.
	(match_string): Made it a function.

Sun Jan 12 01:57:59 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* http.c (http_atotm): New function.
	(http_loop): Use it.

	* atotm.c: Removed from the distribution.

	* http.c (base64_encode_line): Rewrite.

Thu Jan  9 14:26:08 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c (getftp): Use ftp_expected_bytes; print size.

	* ftp-basic.c (ftp_response): Use ftp_last_respline.
	(ftp_expected_bytes): New function.

	* ftp.c (getftp): Print the unauthoritative file length.

	* ftp-ls.c: Renamed from ftp-unix.c.
	(ftp_parse_ls): Moved from ftp.c.
	(ftp_parse_unix_ls): Recognize seconds in time spec.
	(ftp_parse_unix_ls): Recognize year-less dates of the previous
 	year.

Wed Jan  8 08:30:10 1997  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp-basic.c: Don't declare errno if #defined.

	* host.c (ftp_getaddress): Check for sysinfo legally.

Wed Jan  8 08:30:10 1997  Darko Budor  <dbudor@diana.zems.fer.hr>

	* connect.c (iread): Use READ.

Mon Dec 23 00:51:36 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* url.c: Recognize finger, rlogin, tn3270, mid and cid as valid
 	schemes.

Sun Dec 22 23:23:18 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* host.c (ftp_getaddress): Allow `.' in hostname.

Thu Dec 26 16:51:38 1996  Darko Budor <dbudor@zems.fer.hr>

	* wget.h: READ and WRITE macros for use instead of read and write
	on sockets, grep READ *.c, grep WRITE *.c

	* wsstartup.c: new file - startup for winsock

	* wsstartup.h: new file

	* win32decl.h: new file - fixup for <errno.h> and winsock trouble

	* configure.bat: Configure utility for MSVC

	* src/Makefile.ms,config.h.ms: new files for use with MSVC 4.x

Sun Dec 22 00:49:42 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: Released 1.4.3-pre.

	* utils.c (prnum): Accept long.
	(legible): Use prnum().

	* connect.c (make_connection): Accept port as short.
	(bindport): Ditto.

	* http.c (gethttp): Use search_netrc.

Sat Dec 21 16:31:56 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c (getftp): Use search_netrc.

	* netrc.c (free_netrc): New function.

	* init.c (home_dir): New function.

	* url.c (convert_links): Allow REL2ABS changes.

Sat Dec 21 03:41:56 1996  Gordon Matzigkeit  <gord@gnu.ai.mit.edu>

	* netrc.c: New file.
	(parse_netrc, maybe_add_to_list): New functions.

Tue Dec 17 16:31:51 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* retr.c (retrieve_url): Reset opt.recursion before calling
 	ftp_loop if it is reached through newloc.

	* init.c (run_wgetrc): Print the wgetrc path too, when reporting
 	error; don't use "Syntax error", since we don't know if it is
 	really a syntax error.

Mon Dec 16 00:29:24 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* utils.c (acceptable): Extract the filename part of the path.

	* recur.c (recursive_retrieve): Call acceptable() with the right
 	argument; would bug out on wildcards.

	* init.c (parse_line): Likewise.

	* html.c (htmlfindurl): Cast to char * when calling stuff.

Sun Dec 15 17:19:52 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c (getftp): Use ftp_pasv.

	* ftp-basic.c (ftp_request): Accept NULL value.
	(ftp_pasv): New function.

	* options.h (struct options): Add passive FTP option.

Sun Dec 15 04:06:50 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* url.c (parseurl): Debug output.

	* utils.c (path_simplify): New one, adapted from bash's
 	canonicalize_pathname().

Sat Dec 14 17:49:52 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c (getftp): Don't discard the buffer.

	* retr.c (get_contents): New parameter nobuf.

Fri Dec 13 17:21:59 1996  Shawn McHorse  <riffraff@txdirect.net>

	* html.c (htmlfindurl): Recognize <meta contents="d; URL=...".

	* init.c (setval): Strip the trailing slashes on CVECDIR.

Fri Dec 13 17:24:10 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* init.c: Make excludes and includes under CVECDIR instead of
 	CVEC.

Fri Dec 13 17:21:59 1996  Shawn McHorse  <riffraff@txdirect.net>

	* url.c (get_urls_html): Skip "http:".

Fri Dec 13 16:02:55 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* utils.c (strcasecmp): From glibc.
	(strncasecmp): Also.
	(strstr): Also.

	* url.c: Added javascript: to the list of URLs prefixes.

Thu Dec 12 19:36:35 1996  Shawn McHorse  <riffraff@txdirect.net>

	* recur.c (retrieve_robots): Print the warning message only if
 	verbose.

Thu Dec 12 19:32:57 1996  Gregor Hoffleit  <flight@mathi.uni-heidelberg.DE>

	* ftp.c (ftp_retrieve_list): Use NeXT old utime interface.

Thu Dec 12 10:32:29 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* systhings.h: New file.

	* ../configure.in: Check for utime.h

	* ftp.c: Check whether we have unistd.h.

Wed Nov 27 16:37:39 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* recur.c (recursive_retrieve): Send the canonical URL as referer.
	(recursive_retrieve): Call get_urls_html with the canonical URL.

Fri Dec 13 16:43:33 1996  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* (configure.in, config.h.in, src/Makefile.in, src/*.[ch]): Add
 	ansi2knr support for compilers which don't support ANSI style
 	function prototypes and signatures.

	* (aclocal.m4, src/ansi2knr.c, src/ansi2knr.1): New files.

Tue Nov 26 09:30:04 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* url.c: Use it; Recognize paths ending with "." and ".." as
 	directories.
	(url_filename): Append .n whenever file exists and could be a
 	directory.

	* url.h (ISDDOT): New macro.

	* init.c (parse_line): Use unsigned char.

	* url.c (get_urls_html): Cast to unsigned char * when calling
 	htmlfindurl.

	* html.c (htmlfindurl): Use unsigned char.

	* version.c: Changed version to 1.4.3.

Mon Nov 25 00:42:37 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: Released 1.4.2.

	* ftp.c (getftp): Simplified assertion.
	(ftp_loop_internal): Remove symlink before downloading.
	(ftp_retrieve_list): Unlink the symlink name before attempting to
 	create a symlink!

	* options.h (struct options): Renamed print_server_response to
 	server_response.

	* ftp.c (rel_constr): Removed.
	(ftp_retrieve_list): Don't use it.
	(ftp_retrieve_list): Use opt.retr_symlinks.

Sun Nov 24 23:15:14 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* main.c (main): New option retr_symlinks.

	* url.c (convert_links): Print verbose message.

Sun Nov 24 00:57:11 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* http.c (http_loop): Reset newloc in the beginning of function;
 	would cause FMR in retrieve_url.

Sat Nov 23 14:13:51 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* recur.c (convert_all_links): Find the URL of each HTML document,
 	and feed it to get_urls_html; would bug out.
	(convert_all_links): Check for l2 instead of dl; removed dl.

	* url.c (convert_links): Don't refer to freed newname.

	* recur.c (recursive_retrieve): Add this_url to urls_downloaded.

	* main.c (main): Print the OS_TYPE in the debug output, too.

	* recur.c (recursive_retrieve): Check for opt.delete_after.

	* main.c (main): New option delete-after.

	* init.c (setval): Cleaned up.

Thu Nov 21 05:45:40 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* Makefile.in (wget): Make `wget' the default target.

	* ftp.c (ftp_loop_internal): Move noclobber checking out of the
 	loop.
	(ftp_retrieve_list): Warn about non-matching sizes.

	* http.c (http_loop): Made -nc non-dependent on opt.recursive.

	* init.c (setnum): Renamed from setnuminf; New argument flags.
	(setval): Use it.

	* main.c (main): Sorted the options.
	(main): New option --wait.

Thu Nov 21 02:42:58 1996  Shawn McHorse  <riffraff@txdirect.net>

	* html.c (htmlfindurl): Reset s->in_quote after getting out of
 	quotes.

Wed Nov 20 20:41:19 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: Changed version to 1.4.2.

Wed Nov 20 02:30:00 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: Released 1.4.1.

	* html.c (html_quote_string): New function.
	(ftp_index): Use it.
	(htmlfindurl): A more gentle ending debug message.

	* ftp.c (ftp_loop): Check for opt.htmlify.

	* init.c: New command htmlify.

	* ftp.c (getftp): Nicer error messages, with `'-encapsulated
 	strings.
	(ftp_loop): Print size of index.html.

	* init.c (setval): Implement "styles".

	* main.c (main): New option dotstyle.

Tue Nov 19 15:02:31 1996  Hrvoje Niksic  <hniksic@srce.hr>

        * ftp.c (getftp): Close the master socket in case of errors, after
        bindport().

        * connect.c (bindport): Initialize msock to -1.

        * ftp.c (getftp): Initialize dtsock to -1.

        * connect.c (closeport): Don't close sock if sock == -1.

Mon Nov 18 02:42:13 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* init.c (setnuminf): Nuked default value -- just leave unchanged.
	(setval): Don't send default values.
	(defaults): Use DEFAULT_TIMEOUT -- aaargh.

	* options.h (struct options): Use long for dot_bytes.

	* init.c (setquota): Renamed to setbytes.
	(setval): Use setbytes on DOTBYTES.

Sun Nov 17 01:02:14 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c (getftp): Initialize con->dltime.

	* recur.c (recursive_retrieve): Use same_host instead of
 	try_robots; simply load robots_txt whenever the host is changed.
	(recursive_retrieve): Free forbidden before calling parse_robots.

Sat Nov 16 03:57:27 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* retr.c (show_progress): Use them.

	* options.h (struct options): New options dot_bytes, dots_on_line
 	and dot_spacing.

Sat Nov 16 02:23:42 1996  Mark Boyns  <boyns@sdsu.edu>

	* recur.c (recursive_retrieve): Retrieve directories regardless of
 	acc/rej rules; check for empty u->file.

Thu Nov 14 17:24:57 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* init.c (setval): Use it.

	* utils.c (merge_vecs): New function.

	* init.c (setval): Reset the list-type functions when encountering
 	"".

Thu Nov 14 09:58:14 1996  Shawn McHorse  <riffraff@txdirect.net>

	* recur.c (recursive_retrieve): Use base_url instead of this_url
 	for no_parent.

Thu Nov 14 09:45:28 1996  Shawn McHorse  <riffraff@txdirect.net>

	* html.c (htmlfindurl): Reset s->in_quote after exiting the quote.

Wed Nov 13 10:13:07 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* utils.c (sepstring): Rewrote; don't use strtok.

	* recur.c (recursive_retrieve): Enter assorted this_url to slist
 	when running the first time.
	(retrieve_robots): Warn to ignore errors when robots are loaded.

	* utils.c (load_file): Moved from url.c.

	* http.c: Made static variables const too in h* functions.

	* main.c (main): Renamed --continue-ftp to --continue.

	* recur.c (recursive_retrieve): Use it.

	* utils.c (frontcmp): New function.

	* url.c (accdir): New function.

	* html.c (htmlfindurl): Recognize <area href=...>.

	* ftp.c (ftp_retrieve_dirs): Implemented opt.includes.

	* init.c (setval): Free the existing opt.excludes and
 	opt.includes, if available.

	* main.c (main): New option -I.

Tue Nov 12 15:51:39 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c (ftp_retrieve_glob): Do not weed out directories.

	* version.c: Changed version to 1.4.1.

Mon Nov 11 05:06:18 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: Released 1.4.0.

Sun Nov 10 19:46:07 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* main.c (main): Free com and val after parse_line.
	(printhelp): Reorder the listing.

	* http.c: More robust header parsing.

	* http.c: Allow any number of spaces, or no spaces, precede ':'.
	(hskip_lws): New function.
	(haccepts_bytes): New function.
	(gethttp): Use it.

	* init.c (setval): Check header sanity.
	(setval): Allow resetting of headers.

Sun Nov 10 02:43:37 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* http.c (http_loop): Don't use has_wildcards.

	* http.c (gethttp): Free all_headers -- would leak.

	* recur.c (recursive_retrieve): Initialize depth to 1 instead of
 	0 -- this fixes a long-standing bug in -rl.

Sat Nov  9 18:48:03 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c: Use -1 as "impossible" value for con->fd.

	* url.h (URL_SEPARATOR): Don't treat `*' and `+' as separators.

	* init.c (parse_line): Use isalpha.

	* ftp-unix.c: Use HAVE_UNISTD_H.

	* mtch.c (has_wildcards): Don't match \.

	* http.c (http_loop): Warn on HTTP wildcard usage.

Fri Nov  8 19:28:44 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* url.c (url_filename): Do not create numbered suffices if
 	opt.noclobber -- would bug out on -nc.

Thu Nov  7 18:22:24 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* recur.c (parse_robots): Don't chuck out the commands without
 	arguments (`Disallow:<empty>' didn't work).
	(parse_robots): Compare versions lowercase.
	(parse_robots): Match on base_version, not version_string!
	(parse_robots): Handle comments properly.
	(parse_robots): Match versions in a sane way.

	* init.c: Print nicer error messages.

	* version.c: Changed version to 1.4.0.

Wed Nov  6 21:04:19 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: Released 1.4.0-test2.

	* init.c (run_wgetrc): Close fp.

	* ftp.c (ftp_retrieve_dirs): Allocate the correct length for
 	u->dir.

Wed Nov  6 02:20:09 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* init.c (setquota): Allow inf as quota specification.

Tue Nov  5 00:49:12 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c (ftp_retrieve_dirs): Return QUOTEXC if quota exceeded.
	(ftp_retrieve_glob): Return QUOTEXC on quota exceeded.

	* main.c (main): Check for quota by comparison with downloaded
 	stuff, not from status.

	* connect.c (select_fd): Should compile on HPUX without warnings now.

	* ftp.c (ftp_get_listing): Check whether ftp_loop_internal
 	returned RETROK.

Mon Nov  4 12:02:54 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c (ftp_retrieve_glob): Print the pattern nicely.
	(getftp): Return FTPRETRINT on control connection error.

	* html.c (htmlfindurl): Recognize <embed src=...> and
	<bgsound src=...>.
	(ftp_index): Handle username and password correctly.

	* main.c (main): Made `-np' a synonim for --no-parent.

Sat Nov  2 22:23:07 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c (ftp_loop): Check for opt.ftp_glob too before calling
 	ftp_retrieve_glob.

	* version.c: Changed version to 1.4.0-test2.

Sat Nov  2 02:44:32 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: Released 1.4.0-test1.

	* url.c (str_url): Don't use sprintf when creating %2F-prefixed
 	directory.
	(convert_links): Removed definition of make_backup.

	* http.h: Removed definition of MAX_ERROR_LENGTH.

	* host.c (ftp_getaddress): Check for "(none)" domains.

	* ftp.c (ftp_retrieve_dirs): Docfix.

	* http.c (gethttp): Use ou->referer instead of u->referer.

	* retr.c (retrieve_url): Reset u to avoid freeing pointers twice;
 	this was known to cause coredumps on Linux.

	* html.c (ftp_index): Cast the argument to local_time to time_t *.

Fri Nov  1 17:38:41 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* connect.c (select_fd): Use exceptfds -- once and for all.

	* retr.c (retrieve_from_file): Free filename after
 	recursive_retrieve.
	(retrieve_from_file): Send RFIRST_TIME to recursive_retrieve on
 	first-time retrieval.
	(retrieve_from_file): Return uerr_t; new argument, count.
	(retrieve_from_file): Break on QUOTEXC.

	* init.c (setquota): Fixed a bug that caused rejection of
 	non-postfixed values..

Wed Oct 30 14:04:48 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: Changed name to wget.

	* connect.c (iread): Smarter use of select.
	(select_fd): Set errno on timeout.  If not timeout, return 1
 	instead of 0.

Tue Oct 29 18:05:55 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c (ftp_loop_internal): Don't use con->cmd before
 	establishing it.

Sat Oct 26 22:04:27 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* http.c (gethttp): Send correct referer when using proxy.
	(gethttp): Use struct urlinfo ou to access the relevant data; send
 	correct authorization in all cases.

	* host.c (same_host): Use skip_uname to skip username and
 	password.

	* url.c (skip_uname): New function.
	(parseurl): Use it.

	* host.c (same_host): Do not assume HTTP -- same_host should now
 	be totally foolproof.

	* url.c (skip_proto): New function.
	(parse_uname): Use it.

	* http.c (gethttp): Create local user and passwd from what is
 	given.

	* url.c (parseurl): Check for HTTP username and password too.

Fri Oct 25 15:12:42 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* config.h.in: Removed #define gethostbyname R...

Tue Oct 22 17:07:50 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: Changed version to 1.4.0-test1.

Mon Oct 21 18:06:49 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: "Released" 1.4b29.

	* recur.c (recursive_retrieve): Check for no_parent.

	* init.c (setval): Option update.

	* main.c (main): New option no-parent.

	* options.h (struct options): New variable no_parent.

	* recur.c (recursive_retrieve): Only files are checked for
 	opt.accepts and opt.rejects.
	(recursive_retrieve): Check directories for opt.excludes.
	(recursive_retrieve): Make the dir absolute when checking
 	opt.excludes.

	* html.c (htmlfindurl): Recognize <applet code=...> and <script
 	src=...>

Fri Oct 18 19:12:53 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c (getftp): Do not line-break assert entries at all.
	(ftp_retrieve_dirs): docfix.

	* connect.c (select_fd): Use fd + 1 as nfds.

	* version.c: Changed version to 1.4b29.

Fri Oct 18 02:07:50 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: "Released" 1.4b28.

	* ftp.c (ftp_loop_internal): Check whether f->size == len and
 	don't continue the loop if it is.
	(ftp_get_listing): Remove list_filename on unsuccesful loop.

Thu Oct 17 23:22:02 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c (ftp_loop_internal): Use strcpy to initialize tmp.
	(getftp): Do not use multiline assert.

	* http.c (hparsestatline): Use mjr and mnr instead of major and
 	minor, which don't compile on Ultrix.
	(http_loop): Use strcpy() to initialize tmp.

	* all: Geturl -> Fetch

Thu Oct 17 00:12:27 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* recur.c (parse_robots): Fixed an off-by-one bug when looking for
 	':'.

	* html.c (htmlfindurl): Fixed several possible off-by-one bugs by
 	moving `bufsize &&' to the beginning of each check in for-loops.

	* recur.c (parse_robots): Close fp on exit.

	* url.c (mymkdir): Check for each directory before creating.

Wed Oct 16 21:15:17 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: Changed version to 1.4b28.

Wed Oct 16 00:11:17 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: "Released" 1.4b27.

	* init.c (parse_line): Use isspace.
	(parse_line): Free *com on all errors.

	* ftp.c (ftp_loop): Change FTPOK to RETROK before exiting.
	(delelement): Use next instead of f->next and prev instead of
 	f->prev.
	(delelement): Free the members of the deleted element.

	* http.c (http_loop): Do not return RETROK on code != 20x.

	* init.c (cleanup): Free opt.user_header.
	(cleanup): Free opt.domains.

	* url.c (freelists): Moved to cleanup().

	* http.c (hparsestatline): Docfix.

	* main.c (main): Return with error status on unsuccesful
 	retrieval.

	* init.c (setval): Do not remove listing when mirroring.

	* url.c (url_filename): Use opt.fileprefix.

	* ftp.c (ftp_get_listing): Use url_filename to get filename for
 	.listing.

	* main.c (main): New option: -rn.

Tue Oct 15 09:09:39 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* Makefile.in (RM): Added RM = rm -f.

	* host.c (clean_hosts): New function.
	(free_hlist): Just free the list, no reset.

	* version.c: Changed version to 1.4b27.

Sun Oct 13 01:22:13 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: "Released" 1.4b26.

	* retr.c (retrieve_from_file): If call get_urls_html with
 	opt.spider to make it silent in spider mode.

	* url.c (str_url): Use CLEANDUP instead of URL_CLEANSE.

	* url.h (CLEANDUP): New macro.

	* http.c (gethttp): Fixed a bug that freed location only when it
 	was NULL.

	* retr.c (retrieve_url): Free url if it will not be stored,
 	i.e. newloc is NULL.

	* html.c (htmlfindurl): Handle exiting from quotes correctly; the
 	old version would bug out on <a href="x#a"href="y">.

	* html.h (state_t): New member in_quote.

	* html.c (htmlfindurl): Free s->attr at the beginning of
 	attr-loop.

	* recur.c (recursive_retrieve): Recognize RCLEANUP.
	(tried_robots): Make hosts a global variable.
	(recursive_retrieve): Free constr after URL host optimization.
	(tried_robots): Free urlinfo before exiting.

	* utils.c (free_slist): New function.

	* recur.c (recursive_retrieve): Use flags to add cleanup
 	possibility.

	* main.c (main): Free filename after recursive_retrieve.

	* http.c (gethttp): Store successful responses too.

Sat Oct 12 01:04:27 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* all: Constified the whole source.  This required some minor
 	changes in many functions in url.c, possibly introducing bugs -- I
 	hope not.

	* ftp-basic.c: Removed last_respline.

	* http.c (gethttp): Free type.

	* host.c (same_host): Free real1 and real2.

	* main.c (main): New option --spider.

	* retr.c (get_contents): Don't reset errno.

	* main.c (main): Sorted the options.

	* connect.c (iread): Set errno to ETIMEDOUT only if it was left
 	uninitialized by select().

	* http.c (http_loop): Print the time when the connection is
 	closed.
	(gethttp): Debug-print the HTTP request.

Fri Oct 11 19:57:28 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* connect.c (iread): Do not try reading after timeout.

	* main.c (main): Would bug out on -T.

	* connect.c (select_fd): Do not use exceptfds.
	(iread): Set ETIMEDOUT on select_fd <= 0.

	* version.c: Changed version to 1.4b26.

Thu Oct 10 00:10:52 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: "Released" 1.4b25.

	* ftp-unix.c (ftp_parse_unix_ls): Ignore lines without file name
 	or link name.

	* http.c (gethttp): Add errcode to struct hstat.
	(http_loop): Use it.

	* url.c (no_proxy_match): Simplify using char** for no_proxy.

	* options.h (struct options): Make opt.no_proxy a vector.

	* utils.c (sepstring): Use !*s instead of !strlen(s).

	* init.c (setval): Set opt.maxreclevel to 0 on --mirror.
	(getperms): Use ISODIGIT instead of isdigit.

	* ftp.c (getftp): Print time.

	* main.c (main): Use legible output of downloaded quantity.

	* ftp.c (getftp): Use elapsed_time().
	(ftp_loop_internal): Use rate().

	* http.c (http_loop): Add download ratio output; Use rate().

	* utils.c (rate): New function.

Wed Oct  9 15:41:48 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* http.c (http_loop): Use timer.

	* ftp.c: Split to ftp-basic.c and ftp.c

	* utils.c (reset_timer): New function.
	(elapsed_time): New function.

	* retr.c (show_progress): Make bytes_in_line and offs long; should
 	work on 16-bit machines.

Tue Oct  8 12:58:04 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* url.c (in_acclist): New argument backward.

	* ftp.c (ftp_retrieve_glob): Use acceptable() to determine whether
 	a file should be retrieved according to suffix.
	(ftp_get_listing): Check the return value of unlink; Do not call
 	ftp_retrieve_dirs if depth reached maxreclevel.
	(ftp_retrieve_dirs): Check whether the directory is in
 	exclude-list.

	* main.c (main): Print the version number at the beginning of
 	DEBUG output.
	(main): Use strrchr when creating exec_name.

	* ftp.c (ftp_retrieve_glob): Do not close control connection.

	* version.c: Changed version to 1.4b25.

Mon Oct  7 01:58:19 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: "Released" 1.4b24.

	* Makefile.in: Rewrite.

	* ftp.c (ftp_loop_internal): Likewise.

	* retr.c (time_str): Check for failed time().

	* html.c (htmlfindurl): Recognize <fig src> and <overlay src> from
 	HTML3.0.

	* retr.c (time_str): Return time_t *.

	* connect.c (bindport): Close msock on unsuccesful bind.
	(bindport): The same for getsockname and listen.

	* retr.c (retrieve_url): Allow any number of retries on
	proxy.

	* http.c (gethttp): Do not treat errno == 0 as timeout.
	(http_loop): Likewise.
	(http_loop): Cosmetic changes.

	* connect.c (iread): Set errno to ETIMEDOUT in case of timeout.

	* retr.c (get_contents): Reset errno.

	* ftp.c (getftp): Minor fixes.

Sun Oct  6 13:40:47 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* http.c: Do not use backups.

	* geturl.1 (WARNING): Warn that man-page could be obsolete.

	* getopt.c (getopt_long): Moved to getopt.c

	* geturl.texi: Enhanced.

	* main.c (main): Use it.

	* recur.c (convert_all_links): New function.

	* utils.c (add_slist): New argument flags.

	* recur.c (recursive_retrieve): Update a list of downloaded URLs.
	(parse_robots): Do not chuck out empty value fields.
	(parse_robots): Make yourself welcome on empty Disallow.

	* version.c: Changed version to 1.4b24.

Sun Oct  6 00:33:26 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: "Released" 1.4b23.

	* ftp.c (ftp_loop_internal): Get the time after getftp.

	* Makefile.in (install.info): New target.
	(install): Use it.

	* http.c (http_loop): Fix output when doing -O.

Sat Oct  5 14:10:05 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* geturl.texi: New file.

	* main.c (main): Do not print the warnings and download summary if
 	opt.quiet is set.

	* version.c: Changed version to 1.4b23.

Sat Oct  5 05:27:03 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* "Released" 1.4b22.

	* atotm.c (atotm): Use True and False instead of TRUE and FALSE,
 	to avoid redefinition warnings.

	* host.c (store_hostaddress): Use memcpy() to copy the address
 	returned by inet_addr.

	* version.c: Changed version to 1.4b22.

Fri Oct  4 10:57:56 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: "Released" 1.4b21.

	* ftp-unix.c (ftp_parse_ls): Renamed to ftp_parse_unix_ls.

	* ftp.c (ftp_port): Use conaddr.
	(getftp): Print the file length.
	(ftp_retrieve_list): Check the stamps of plain files only.

	* connect.c (closeport): Do not call shutdown().
	(conaddr): New function.

	* html.c (ftp_index): Made it dfp-aware.

	* init.c (cleanup): New name of freemem. Close opt.dfp.

	* ftp.c (getftp): Use opt.dfp if it is set.

	* ftp-unix.c (ftp_parse_ls): Recognize time in h:mm format.

	* ftp.c (ftp_retrieve_dirs): Fixed a bug that caused incorrect
 	CWDs to be sent with recursive FTP retrievals.

Thu Oct  3 15:20:11 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* recur.c (parse_robots): Made it more compliant with "official"
 	specifications.

	* http.c: New function.

	* ftp-unix.c (ftp_parse_ls): Added better debug output.

	* ftp.c (getftp): Print out the LIST in case of
 	opt.print_server_response.

	* version.c: Changed version to 1.4b21.

Tue Oct  1 12:53:03 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: "Released" 1.4b20.

	* README: Update.

	* http.c (gethttp): Preset lengths of various headers instead of
 	calculating them dynamically.
	(gethttp): Check for 206 partial contents.

Mon Sep 30 10:52:05 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* configure.in: Set SYSTEM_GETURLRC to $libdir/geturlrc

	* http.c (gethttp): Send the port number in the Host: header.

Sun Sep 29 00:23:49 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* http.c (gethttp): Send host: header.
	(gethttp): Add the possibility of user-defined headers.
	(gethttp): Move decision about pragma: no-cache to http_loop,
 	where it belongs.
	(gethttp): Pass a struct instead of enormous argument list.
	(http_loop): Use a new, fancier display format.
	(ftp_loop): Likewise.

	* main.c: (hangup): Turn off buffering of the new log file.

	* install-sh: Likewise.

	* config.sub: Replace with the one in autoconf-2.10

	* geturl.1: Update.

	* init.c: New options httpuser and httppasswd.

	* http.c: (base64_encode_line): New function.
	(gethttp): Send authentication.

	* connect.c (make_connection): Use store_hostaddress.

Sat Sep 28 00:19:48 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* host.c (store_hostaddress): New function.

	* NEWS: Update.

	* http.c (hgetrange): New function.
	(gethttp): Use ranges.

	* utils.c (numdigit): Accept long instead of int.

	* http.c (http_loop): Add restart capabilities.

	* ftp.c (ftp_retrieve_glob): Fixed a bug that could cause matchres
 	being used uninitialized.
	(ftp_retrieve_list): Similar fix.

	* host.c (add_hlist): Fixed a bug that could cause cmp being used
 	uninitialized.

	* url.c (construct_relative): New function.

	* recur.c (recursive_retrieve): Use it.

	* retr.c (convert_links): New function.

Fri Sep 27 14:09:59 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* url.c (free_urlpos): New function.

	* recur.c (recursive_retrieve): Adapt.

	* url.c (get_urls_html): Return a linked list instead of a vector.

	* url.c (get_urls_file): Return a linked list instead of a vector.

	* geturl.1: Update.

	* http.c (gethttp): Implement it.

	* init.c (setval): New option: SAVEHEADERS

	* ftp.c (ftp_loop_internal): Do not set restval if listing is to
 	be retrieved. Lack of this test caused bugs when the connection
 	was lost during listing.

	* retr.c (retrieve_url): Fixed a bug that caused
 	coredumps. *newloc is now reset by default.
	(retrieve_url): Lift the twenty-tries limit on proxies.

	* version.c: Changed version to 1.4b20.

Fri Sep 20 20:07:55 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: "Released" 1.4b19.

Thu Sep 19 13:24:27 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c (ftp_loop_internal): Renamed from ftp_1fl_loop.
	(getftp): Changed prototype to accept ccon *.

Tue Sep 17 10:54:36 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c (ftp_retrieve_list): Fixed a bug that caused setting
 	incorrect values to files pointed to by symbolic links.
	(ftp_1fl_loop): Do not count listings among the downloaded URL-s.

Mon Sep 16 13:19:34 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* url.c (mkstruct): Do not prepend "./" in front of a pathname.

	* main.c (main): New option: --user-agent.

	* geturl.1: Ditto.

	* init.h: Ditto.

	* init.c (setval): Ditto.

	* main.c (main): Rename "server-headers" to "server-response".

	* ftp-unix.c (ftp_parse_ls): Check for asterisks at the end of
 	executables in 'ls -F' listings.

Sun Sep 15 12:17:50 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* url.c (parseurl): Remove realloc() and sprintf().
	(str_url): Get rid of sprintf().

	* recur.c (recursive_retrieve): Enable FTP recursion through proxy
 	servers.

	* url.h (URL_CLEANSE): Made it else-resistant.
	(USE_PROXY): New macro.

Sat Sep 14 22:24:42 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* NEWS: Update.

	* version.c: Changed version to 1.4b19.

Sat Sep 14 00:12:43 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: "Released" 1.4b18.

	* url.c: Made it reallocate space exponentially.

Sat Sep 14 00:12:30 1996  Drazen Kacar  <dave@fly.cc.fer.hr>

	* html.c (htmlfindurl): Added <frame src> and <iframe src> among
 	the list of stuff to fetch.

Fri Sep 13 01:58:04 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* url.c (get_urls_html): Fixed a bug that caused SIGSEGV's with
 	-Fi.

	* html.c (htmlfindurl): Rewrite.

	* http.c (gethttp): Use opt.proxy_cache.

	* main.c (main): Added --cache option.

	* ftp.c (ftp_response): Print server response if opt.print_server
 	response is set.
	(getftp): Print newlines after each request if the server response
 	is to be printed.
	(ftp_response): Copy the last response line to last_respline.

	* http.c (gethttp): Add Pragma: nocache for retried
 	proxy-retrievals.

	* ftp.c (getftp): Use it.

	* retr.c (buf_discard): New function.

	* ftp.c (ftp_response): Use buf_readchar().
	(getftp): Flush the control connection buffer before calling
 	get_contents().

	* retr.c (buf_readchar): New function.
	(buf_flush): New function.
	(get_contents): Use buf_readchar() instead of read(x, x, 1).
	(get_contents): Use buf_flush.

Thu Sep 12 14:49:23 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c: Incorporate changes to ftp_response.

	* ftp.c (ftp_response): Allocate the server response dynamically,
 	as in read_whole_line and fetch_next_header.

	* utils.c (read_whole_line): Fixed a bug that prevented reading
 	the last line if it is not \n-terminated. Also fixed a possible
 	memory overflow.

	* http.c (fetch_next_header): Return malloc-ed string as large as
 	needed.
	(gethttp): Use new fetch_next_header.

Thu Sep 12 14:31:37 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* http.c (hgetlen): Compute the header length the first time only.
	(hgettype): Ditto.
	(hgetlocation): Ditto.
	(hgetmodified): Ditto.

Wed Sep 11 14:48:08 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* sample.geturlrc: Update.

Tue Sep 10 16:31:50 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* http.c (http_loop): Ditto.

	* ftp.c (getftp): Open the output file as binary.

	* version.c: Changed version to 1.4b18.

Tue Sep 10 14:19:43 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: "Released" 1.4b17.

	* ftp-unix.c (ftp_parse_ls): If unable to open file, return NULL
 	instead of failed assertion.

Mon Sep  9 14:54:00 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c (ftp_get_listing): Add a numbered suffix to LIST_FILENAME
 	if a file of that name already exists.

Thu Sep  5 10:53:14 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c (ftp_1fl_loop): Handler FTPPORTERR and FOPENERR correctly.

	* config.h.in: Define gethostbyname as Rgethostbyname when using
 	Socks.

	* configure.in: Check for -lresolv if using Socks.

	* version.c: Changed version to 1.4b17.

Mon Jul 15 10:29:45 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: "Released" 1.4b16.

	* http.c (gethttp): More intelligent check for first line of HTTP
 	response.
	(gethttp): Would bug out on time-stamping.

	* version.c: Changed version to 1.4b16.

Thu Jul 11 14:52:12 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: Released 1.4b15.

	* http.c (http_loop): Print \n after the loop entry, not before.

	* url.c (url_filename): Use ISDOT.

	* url.h (ISDOT): New macro.

	* recur.c (recursive_retrieve): Change only opt.recursive for
 	following FTP.

Thu Jul 11 14:45:59 1996  Antonio Rosella <antonio.rosella@agip.it>

	* socks/geturl.cgi: Fixed version No.

	* socks/download-netscape.html: Ditto.

	* socks/download.html: Changed socks.html to download.html.

Thu Jul 11 14:03:33 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* url.c (url_filename): Check for opt.dirstruct instead for
 	opt.recursive && opt.dirstruct.

	* init.c (defaults): Ditto.
	(defaults): Reset dirstruct by default.
	(setval): Set opt.dirstruct whenever setting recursive.

	* init.h: Removed FORCEDIRHIER.

	* INSTALL: Added -L to socks-description.

	* version.c: Changed version to 1.4b15.

Wed Jul 10 16:26:33 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: "Released" 1.4b14.

	* geturl.1: Update AUTHOR to include Rosella as contributor.

	* NEWS: Update.

	* socks/geturl.cgi: Simplified command creation, nuked <blink>.

	* socks/geturl.cgi: Wrap nutscape extensions within if $netscape.
	(cal_time): Fix == to eq.

	* socks/geturl.cgi: GPL-ized with permission of A. Rosella.

	* geturl.1 (hostname): Moved URL CONVENTIONS to the beginning.

	* Makefile.in: Use @VERSION@.

	* configure.in: Check version from version.c.

	* socks/geturl.cgi: Changed /pub/bin/perl to /usr/bin/perl.

	* socks/download.html: Created from download-netscape.html, made
 	HTML-2.0 compliant.

	* recur.c (recursive_retrieve): Set opt.force_dir_hier when
 	following FTP links from recursions.

Tue Jul  9 14:38:12 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* url.c (mymkdir): Fixed a bug that prevented mymkdir() to create
 	absolute directories correctly.

	* version.c: Changed version to 1.4b14.

Tue Jul  9 00:15:49 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: "Released" 1.4b13.

	* url.c (make_backup): New function.

	* http.c (http_loop): Make a backup copy of the local file (using
 	rename(2)) before opening it.

	* main.c (main): Added --backups.

	* host.c (ftp_getaddress): Bail out on failed mycuserid().
	(ftp_getaddress): Check for leading dot on MY_DOMAIN.
	(ftp_getaddress): Check for empty, null or (null) domain.

	* url.c (get_urls_html): If this_url is NULL, the base must have a
 	protocol.
	(parseurl): Use has_proto.

	* retr.c (retrieve_url): Warn when proxy is used with more than 20
 	retries.

	* url.c (mkstruct): Create the directory (calling mymkdir()) only
 	if it is not already there.
	(has_proto): New function.
	(get_urls_html): Eliminate the remaining call to findurl -- use
 	has_proto.

	* geturl.1: Ditto.

	* main.c: Change -X to -x.

	* url.c (url_filename): Simplify creation of filename if
 	prefix_files is set.
	(url_filename): Simplify everything. And I do mean *everything*.
	(mkstruct): Add dir_prefix before hostname.
	(path_simplify): Fixed a bug that caused writing outside the path
 	string in case of "." and ".." path strings.

Sat Jul  6 02:30:18 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* init.c: Added --mirror.

	* main.c (main): Added -X to force saving of directory hierarchy.

	* ftp.c (ftp_retrieve_list): Added recursion depth counter.
	(ftp_retrieve_list): Check whether quota is exceeded.

	* url.c (get_urls_html): Skip leading blanks for absolute URIs.

	* http.c (gethttp): Use referer if present.

	* recur.c (recursive_retrieve): Set u->referer before calling
 	retrieve_url.

	* url.c (newurl): Use memset to nullify the struct members.
	(freeurl): Free the referer field too.

	* url.h: Added referer to urlinfo.

	* geturl.1: Updated the manual to document some of the new features.

	* utils.c (numdigit): Moved from url.c.

	* README: Rewritten.

	* config.h.in: Add the support for socks.

	* configure.in: Add the support for socks.

	* url.c (url_filename): If the dir_prefix is ".", work with just
 	the file name.
	(url_filename): Do not look for .n extensions if timestamping if
 	turned on.

	* retr.c (show_progress): Skip the over-abundant restval data, and
 	print the rest of it with ',' instead of '.'.

Fri Jul  5 21:38:46 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* retr.c (show_progress): Changed second arg. to long (as it
 	should be).
	(show_progress): Moved to retr.c.
	(get_contents): Moved to retr.c.

	* version.c: Change version to 1.4b13.

Fri Jul  5 15:50:59 1996  Hrvoje Lacko <hlacko@fly.cc.fer.hr>

	* url.c (in_acclist): Would return after the first suffix.

Thu Jul  4 01:19:58 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: "Released" 1.4b12.

	* url.c (path_simplify): More kludgifications.
	(get_urls_html): Use new parameters for htmlfindurl.

	* html.c: Removed memorizing "parser states", since the new
 	organization does not require them.

	* init.c (run_geturlrc): Use read_whole_line.

	* ftp-unix.c (ftp_parse_ls): Use read_whole_line.

	* recur.c (parse_robots): Use read_whole_line.

	* utils.c (read_whole_line): New function.

	* recur.c (tried_robots): Use add_slist/in_slist, *much* cleaner.

	* host.c (ngethostbyname): Call inet_addr just once. Yet to be
 	tested on OSF and Ultrix.
	(add_hlist): New function.
	(free_hlist): New function.
	(search_host): New function.
	(search_address): New function.
	(realhost): Use search_host, search_address and add_hlist.
	(same_host): Replaced realloc() with strdupdelim(), made
 	case-insensitive, fixed a memory leak.

	* html.c (ftp_index): Fixed tm_min and tm_sec to be tm_hour and
 	tm_min, like intended.

	* version.c: Change user agent information to
 	Geturl/version.

Wed Jul  3 15:01:49 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* utils.c: Renamed nmalloc.c to utils.c, .h likewise.

	* url.c (acceptable): Always accept directories.

	* ftp-unix.c (ftp_parse_ls): Support brain-damaged "ls -F"-loving
 	servers by stripping trailing @ from symlinks and trailing / from
 	directories.

	* ftp.c (ftp_loop): Debugged the "enhanced" heuristics. :-)

	* url.c (skip_url): Use toupper instead of UCASE.

	* host.c (sufmatch): Made it case-insensitive.

	* url.c (match_backwards_or_pattern): Fixed i == -1 to j == -1.
	(match_backwards): New function, instead of
 	match_backwards_or_pattern.

	* recur.c (recursive_retrieve): Increased performance by
 	introducing inl, which reduces number of calls to in_slist to only
 	one.

	* ftp.c (ftp_loop): Enhanced the heuristics that decides which
 	routine to use.

	* main.c (printhelp): Removed the warranty stuff.

Tue Jul  2 19:35:03 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* url.c (add_slist): Simplify.
	(match_backwards_or_pattern): New function.
	(in_acclist): Use match_backwards_or_pattern.
	(matches): Remove.

Sun Jun 30 00:55:58 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c (ftp_loop): Call ftp_index on empty file names, if not
 	recursive.

	* html.c (ftp_index): Fixed to work. Beautified the output.

	* ftp.c (ftp_retrieve_glob): Another argument to control whether
 	globbing is to be used.
	(ftp_retrieve_list): Compare the time-stamps of local and remote
 	files to determine whether to download.

Sat Jun 29 01:10:28 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c (rel_constr): New function.

	* retr.c (retrieve_from_file): Check for text/html before
 	retrieving recursively.

	* main.c (main): Check whether the file is HTML before going into
 	recursive HTML retrieving.

	* ftp.c (ftp_retrieve_list): Manage directories.
	(ftp_retrieve_glob): Pass all the file-types to ftp_retrieve_list.
	(ftp_1fl_loop): Fixed a bug that caused con->com to be incorrectly
 	initialized, causing bugchecks in getftp to fail.

	* configure.in: Check for symlink.

	* ftp.c (ftp_retrieve_list): Added support for symlinks.

	* version.c: "Released" 1.4b10.

	* atotm.c (atotm): Redeclared as time_t.

	* init.c: New variable "timestamping".

	* main.c (main): New option 'N'.

	* http.c (hgetlocation): Case-insensitive match.
	(hgetmodified): New function.
	(http_loop): Implement time-stamping.

Fri Jun 28 05:46:06 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: Changed version to 1.4b10

	* atotm.c: New file, from phttpd.

	* options.h (struct options): New parameter timestamping.

	* version.c: 1.4b9 "released".

	* recur.c (recursive_retrieve): Used linked list (ulist) for
 	faster storing of URLs.

	* url.c (get_urls_html): Removed the old kludge with comparing the
 	outputs of htmlfindurl and findurl.
	(get_urls_html): Added better protocol support here.
	(create_hash): Removed, as well as add_hash and in_hash.
	(addslist): New function.
	(in_slist): ditto

	* version.c: Released 1.4b8, changed version to b9.

Thu Jun 27 03:17:06 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* ftp.c (freefileinfo): New function.
	(delelement): New function.

	* everywhere: GPL!

	* ftp.c (ftp_loop): Use ccon.
	(ftp_retrieve_glob): Likewise.

	* ftp.h: Define ccon, to define status of control connection.

	* ftp.c (ftp_get_listing): New function.
	(ftp_retrieve_more): New function.
	(ftp_retrieve_glob): New function.

Tue Jun 25 19:08:31 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* configure.in: Removed the search for cuserid().

	* init.c (getmode): Renamed to getperms.

Mon Jun 24 01:25:18 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* version.c: New version.

	* main.c (hangup): New function, that handles hangup. Hangup
        signal now causes geturl to stop writing on stdout, and to write
        to a log file.

	* ftp.c (getftp): "Released" 1.4b7.

	* html.c (htmlfindurl): Ignore everything inside <head>...</head>.
	(ftp_index): Use fileinfo/urlinfo.

	* ftp-unix.c (ftp_parse_ls): New function.
	(symperms): New function.

	* ftp.c (ftp_1fl_loop): New function, to handle 1-file loops.

	* retr.c (retrieve_url): Added FTP support.

Sun Jun 23 13:27:12 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* geturl.h: Removed NOTFTP2HTML enum.
	Added DO_LOGIN, DO_CWD and DO_LIST. LIST_ONLY is obsolete.

	* ftp.c (getftp): Resynched with urlinfo.
	(getftp): Removed HMTL-ization of index.html from getftp.

	* version.c: 1.4b6 "released".

	* options.h (options): New struct, to keep options in.

	* http.c (http_loop,gethttp): Synched with proxy.

	* retr.c (retrieve_url): Implemented proxy retrieval.

	* main.c (main): Use retrieve_from_file.

Sat Jun 22 15:24:27 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* retr.c (retrieve_from_file): New function.

	* url.c (parseurl): Modified to return URLOK if all OK. Protocol
        can be found in u->proto.

	* ftp.c (ftp_response): Fixed to accept multi-line responses as
        per RFC 959.

	* recr.c (recursive_retrieve): Take newloc from retrieve_url.

	* url.c (mymkdir): Removed the file of the same name, if one
        exists.
	(isfile): New function.
	(mkstruct): Fixed the '/' glitches.
	(path_simplify): Hacked to treat something/.. correctly.

Fri Jun 21 00:05:02 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* http.c (gethttp): Close the socket after error in headers.
	(http_loop): HEOF no longer a fatal header.

	* loop.c (retrieve_url): When dt is NULL, do not modify it. This
        simplifies the syntax of calling retrieve_url.

	* recr.c (recursive_retrieve): Modified to use get_urls_html.

	* url.c (get_urls_file): New function.
	(get_urls_html): New function.

	* recr.c (recursive_retrieve): Patched up to conform to the
        standards.

	* http.c (gethttp): Synched with the rest...
	(gethttp): Treat only CONREFUSED specially, with connection
	errors.

	* init.c,geturl.1,http.c (http_loop): Removed kill_error.

Thu Jun 20 15:46:57 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* http.c (http_loop): New function.

	* loop.c: Removed *lots* of stuff from retrieve_url.

	* url.c (parseurl): Changed to work with urlinfo. Integrated
        username finding and path parsing.
	(newurl): New function.
	(freeurl): New function.
	(mkstruct): Removed the old bogosities, made it urlinfo-compliant.
	(url_filename): Likewise.
	(path_simplify): Accept relative paths too.
	(opt_url): Made urlinfo-compliant, removed bogosities.
	(path_simplify): Expanded to accept relative paths.
	(str_url): A replacement for hide_url
	(decode_string): Fixed a bug that caused malfunctioning when
	encountering an illegal %.. combination.
	(opt_url): Removed the argument. Dot-optimizations are now default.

	* nmalloc.c (strdupdelim): New function.

	* url.h: Added the urlinfo structure

Wed Jun 19 21:37:27 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* url.c (hide_url): Thrown out the protocol assertion. Do not
        change the URL if the protocol if not recognized.
	(findurl): Put continue instead of break.

Tue Jun 18 22:21:51 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* sample.geturlrc: Changed the defaults to be commented out and
        harmless (previous defaults caused pains if copied to
        ~/.geturlrc).

	* http.c (gethttp): Print the HTTP request in debug mode.

	* connect.c (iread): Added EINTR check loop to select-ing
        too. EINTR is now correctly handled with select().

	* TODO: new file

Tue May  7 07:50:20 1996  Hrvoje Niksic  <hniksic@srce.hr>

	* host.c (same_host): Made the function a little bit more
        intelligent regarding diversified URL syntaxes.

	* url.c (skip_url): Spaces are now skipped after URL:

	* Released 1.3.1 with the patch to prevent crashing when sending
        NULL to robot* functions and the patch to compile "out of the box"
        on AIX.

	* recr.c (recursive_retrieve): Added checking whether this_url is
	NULL when calling the robot functions.

	* ChangeLog: New file.
	
