#
# Imakefile,v 1.13 1995/09/14 11:52:08 j Exp
#

#ifndef SharedLibXpm
#define SharedLibXpm HasSharedLibraries
#endif

XCOMM actually, not, but it doesn't matter
        XPMSRC = $(LIBSRC)/Xpm

#if SharedLibXpm
#ifndef SharedXpmRev
#define SharedXpmRev 4.5   /* current SO revision (Xpm 3.4e) */
#endif
SharedLibReferences(XPM,Xpm,$(XPMSRC),SOXPMREV,SharedXpmRev)
#else
UnsharedLibReferences(XPM,Xpm,$(XPMSRC))
#endif

#define XpmDepLib  $(XPMDEPLIB)
#define XpmLib     $(XPMLIB)

           PROG = xonix
       XONIXDIR = $(LIBDIR)/xonix
           CUTE = -DSEND_MAIL	/* cute feature :-) */

        DEPLIBS = XawClientDepLibs XpmDepLib
LOCAL_LIBRARIES = XawClientLibs XpmLib MathLibrary
  EXTRA_DEFINES = -DUSE_X11 -DXONIXDIR=\"$(XONIXDIR)\" $(CUTE)
/*    CDEBUGFLAGS = DebuggableCDebugFlags */

           SRCS = xonix.c x11.c stack.c
           OBJS = xonix.o x11.o stack.o

ComplexProgramTarget($(PROG))
InstallAppDefaults(Xonix)

/*
 * MakeDirectories() cannot be used due to the umask 0 requirement.
 */
install::
	@umask 0;							\
	if [ -d $(DESTDIR)$(XONIXDIR) ] ; then				\
		exit 0 ;						\
	else								\
		( set -x ; $(MKDIRHIER) $(DESTDIR)$(XONIXDIR) ) ;	\
	fi
