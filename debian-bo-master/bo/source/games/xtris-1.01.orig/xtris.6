.TH XTRIS 6 "Oct 13, 1996"
.SH NAME
xtris \- multiplayer tetris for X
.SH SYNOPSIS
.B xtris
[ -display \fImachine\fR:0 ] [ -help ] [ -k \fIkeys\fR ] [ -s ] 
[ -bw ] [ -big ] [ -flashy ] [ \fIserver.name\fR [ \fIport\fR ] ]
.SH OPTIONS
.TP
.BR "-bw"
With this option, the game will be drawn in black & white even on a
color display.
.TP
.BR "-big"
Makes
.B xtris
use larger graphics.
.TP
.BR "\-display "
Specify the X display where
.B xtris
will open a window to play the game.  By default,
.B xtris
connects to the display specified in the environment variable \fBDISPLAY\fP.
.TP
.BR "-flashy"
Selects an alternate, flashier set of colors for the tetris bricks.
.TP
.BR "-help"
Prints out a summary of the command-line options
.B xtris
recognizes.
.TP
.BR "-k "
Redefine the keys used by
.B xtris.
The argument must be a 6-letter string with the keys to move to the left
border, to move one position to the left, to rotate, to move one position
to the right, to move to the right border and to drop the brick, respectively.
The default keys are
.B 'JjklL '.
.TP
.BR "-s"
Starts the game in standalone mode.  In this mode,
.B xtris
will not connect to a server, will not be able to interact with other
players, and will not be able to start bots.
.SH ARGUMENTS
.TP
.BR "server.name"
Specifies the machine on which an
.B xtris
server (\fBxtserv\fP)
runs.
.B xtris
will connect to that server, and add itself to the game.  

If the server is not specified, 
.B xtris
will attempt to connect to a server on localhost (127.0.0.1).  If no
server is running on localhost,
.B xtris
will start one (with the '-once' option so it will not stay after the
client exits).
.TP
.BR "port"
Specifies the port to connect to, if the server was started on a port
other than the default (19503).
.SH DESCRIPTION
.B xtris
is version of the classical game of
.B Tetris
for any number of players, under the X window system.  
.PP
Multi-player games are managed by the xtris server,
.B xtserv;
they are synchronous: all users play at the same level, start at the
same time, and see each other's games.  The game stops when only one
player remains.
.PP
Each player has a name, initially set to his login name, or the contents
of the environment variables \fBXTRISNAME\fP or \fBNETTRISNAME\fP.
.PP
Whenever there is more than one player, players can type messages to
each other, which appear on a special message area; players who have
already lost can chat this way while the game continues.
.PP
To edit your name, move the mouse pointer to the small window at the bottom
of the screen where it is displayed.  The editing keys \fBbackspace\fP
and \fB^U\fP are recognized, as well as iso-latin-1 characters entered
with the help of the Meta (mod1) key.  Pressing \fBReturn\fP propagates the
name to all other players.
.PP
There are two modes for the game: 
.TP
.BR "normal"
The game starts with an empty pit.  Whenever one user fills two or more
rows at the same time, these lines appear at the bottom of some other
user's screen.

At the beginning of the game, each player is set to send his lines to
the next player, in the order of connection to the server.  After sending
some lines, the server chooses a next victim for the player, sequentially.
.TP
.BR "fun"
The game starts with some garbage at the bottom and the side of the pit.
Whenever one player fills a line, his victim gets an extra gray square
at the highest point of his game.  Filling two lines simultaneously sends
one line; filling three sends three, and filling four sends five.
.SH MESSAGES
The message area is a zone under the tetris pits where users can chat by
typing messages at each other.  It is not displayed by default; to
activate it, click on the "text" button, which appears as soon as there
are two or more users.
.PP
If verbose mode is activated, the message zone also gets messages about
the development of the game, users changing nicks, starting the game,
sending each other lines, and so on.
.PP
When you put your mouse pointer in the message area, the text you type
goes to the input line at the very bottom of the window.  When you press
Return, your line gets sent to all other players.  
.PP
If you hold down the Shift key when pressing Return in the message area,
the mouse pointer gets warped back to the main game.  This lets you
type in a message quickly during the game: press Tab to warp to the message
area, and end your message with Shift-Return to warp back.
.SH BOTS
Bots, or robots, are automated players that connect to the 
.B xtris
server and simulate a game of Tetris.  Clicking on the 'bot' button
will start a bot and connect it to the same game.  It is also possible
to start bots from the command line, with 
.B xtbot.
.PP
To remove a bot from the game, click on its name at the bottom of the window.
.SH KEYS AND BUTTONS
These keys can be redefined with the \-k option or with X resources:
.TP 30
.B "Key        Resource"
Action
.TP 30
.B "J          leftBorderKey"
Move to the left border.
.PD 0
.TP 30
.B "j          leftKey"
Move one position to the left.
.TP 30
.B "k          rotateKey"
Counter-clockwise rotation.
.TP 30
.B "l          rightKey"
Move one position to the right.
.TP 30
.B "L          rightBorderKey"
Move to the right border.
.TP 30
.B ",          downKey"
Move down one step.
.TP 30
.B "Space      dropKey"
Drop the brick.
.PD
.LP
Alternatively, you can use the arrow keys to move the piece around one
step, and the shifted arrow keys to move it all the way in each direction.
The Up arrow key rotates.
.LP
These keys can be redefined only with X resources:
.TP 30
.B "Key        Resource"
Action.
.TP 30
.B "s          startKey"
Start a game.
.PD 0
.TP 30
.B "q          quitKey"
Quit the game.
.TP 30
.B "p          pauseKey"
Pause/continue the game.
.TP 30
.B "b          botKey"
Start a bot on the same server.
.TP 30
.B "n          modeKey"
Change the game mode between normal and fun.
.TP 30
.B "t          textKey"
Open/close the message area.
.TP 30
.B "Return     toggleNextKey"
Toggle display of the next brick.
.TP 30
.B "c          clearKey"
Clear the message area.
.TP 30
.B "v          verboseKey"
Toggle displaying of server messages about the game in the message area.
.TP 30
.B "Tab        warpKey"
Warp the mouse pointer between the game area, the nick entry area, and
the message area (if visible).
.TP 30
.B "0 - 9      (no resource)"
Set the level.
.PD
.LP
The buttons on the 
.B xtris 
screen are:
.TP 20
.B start
.PD 0
Start a game (all players start at the same time).
.TP 20
.B quit
Quit the game.
.TP 20
.B pause
Pause or continue the game.
.TP 20
.B bot
Start a bot on the same server.
.TP 20
.B "0 \- 9"
Set the level.
.TP 20
.B normal
Toggle normal and fun game mode.
.TP 20
.B text
Display or hide the message area.
.TP 20
.B verbose
Toggle displaying of server messages about the game in the message area.
.TP 20
.B clear
Clear the message area.
.PD
.SH RESOURCES
.B xtris 
understands a number of X resources. The prefix for all of
them is 'xtris.'.
.PP
In addition to the ones listed in the KEYS section,
.B xtris
understands these resources:
.TP 15
.B big
Specifies whether
.B xtris
should use larger graphics or not.  The default is ``false''.
.TP 15
.B flashy
Specifies whether
.B xtris
should use flashier colors or not.  The default is ``false''.
.TP 15
.B bw
Specifies whether
.B xtris 
should start up in black & white mode.  The default is ``false''.
.TP 15
.B verbose
Specifies whether 
.B xtris 
should start up in verbose mode.  The default is ``false''.
.TP 15
.B scrollLines
Specifies the size (in lines) of the message area.  The default is 10,
and the allowed values are from 3 to 30.
.TP 15
.B background
Specifies the color used for the background.
.TP 15
.PD 0
.B brick0
.TP 15
.B "..."
.TP 15
.B brick6
Specifies the color used for the i-th brick.
.PD

.SH ENVIRONMENT
The environment variable \fBDISPLAY\fP controls the default X display
on which to open the 
.B xtris
window.

The environment variables \fBXTRISNAME\fP and \fBNETTRISNAME\fP set
the player's initial name.
.SH EXAMPLE
The command
.IP
\fCxtris -k 'Kkl;: ' -bw esane.net -display dedelamnio:0\fP
.LP
starts an xtris on the display dedelamnio:0, connected to the server
on esane.net, with the keys K, k, l, ;, : and space, and in
black and white.
.SH SEE ALSO
.BR xtserv (6),
.BR xtbot (6)
.SH BUGS
The default colors are rather hideous.
.LP
Please report any other bugs to the author.
.SH AUTHOR
.B xtris 
was written by Roger Espel Llima <roger.espel.llima@pobox.com>. 

Some bits of X11 code are based on
.B xtet42
by Hugo Eide Gunnarsen of the Norwegian Institute of Technology.

