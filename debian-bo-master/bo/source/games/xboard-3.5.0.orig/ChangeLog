3.5.0 -- Thu Jan  2 16:59:49 PST 1997  Tim Mann <mann@pa.dec.com>

Thanks to Frank McIngvale for much of the work on versions 3.4.4 and above!

* Fix Crafty resumed game time bug (frankm)

* Word wrap text in Analysis window (frankm)

* More debug info for XPM loading (frankm)

* Replaced config.sub, config.guess, etc., with up-to-date versions from
autoconf 2.12.  Hopefully this will fix problems on Pentium Pro machines.

* Removed some Makefile gunk that was causing looping for one person.

3.4.7 -- Thu Dec 19 14:22:41 PST 1996  Tim Mann <mann@pa.dec.com>

All changes from Frank:

* Retrieve ratings from ICC (and FICS, etc., when they add the Creating:
message), save them in the PGN tags, and pass them to Crafty in Zippy mode.

* Add settable time delay between characters in ICS login script.

* Colorize messages like personal tells.  Fix false recognition of channel
tells.

* Pass "tells" from Crafty through to ICS (in Zippy mode).

* Implement ~/ filename convention from C shell for game and position file
names.

* ZIPPYACCEPTONLY feature for testing.

3.4, patchlevel 6 -- Sat Nov 23 16:58:50 PST 1996  Tim Mann <mann@pa.dec.com>

* Put recognition of "illegal move" messages from Crafty for
illegal castling, etc., inside an #if that is currently turned off,
because of a bug in Crafty that generates bogus "illegal move" messages
after some moves that are actually legal and accepted by Crafty.

* Added -checkLegality option; previously this could not be turned off.

* Fixed an old bug in finding default board size parameters.

* Differentiated among channel tell, kibitz/whisper, and personal tell/say.

* Fixed a bug in detecting Xpm in the configure script.

3.4, patchlevel 5 -- Mon Nov 18 16:22:53 PST 1996  Tim Mann <mann@pa.dec.com>

* Added zic2xpm to the kit; it had been omitted by mistake.

* Added some default colors for -colorize

3.4, patchlevel 4 -- Sat Nov 16 18:10:17 PST 1996  Tim Mann <mann@pa.dec.com>

This is meant to be a beta release in preparation for version 3.5.

* Added InfoXBoard and ManXBoard to the Help menu.

* Made Frank's ICS input box optional, defaulting to off.

* Merged in Frank McIngvale's XbKit.  Many new features, including
-clickClick mode, the Analysis modes, piece flashing, ZIICS import,
ICS text colorization, and the ICS input box.  Many thanks to Frank for
supplying and documenting this code.

3.4, patchlevel 3 -- Mon Nov 11 18:23:14 PST 1996  Tim Mann <mann@pa.dec.com>

Small set of changes made while Frank McIngvale was working on XbKit in
parallel.  Unreleased in this form.

* Updated zippy.README.

* Removed useless X event handler and removed strange code for copying
form translation table to board that worked around the bug it caused.
This makes changing bindings in .Xdefaults more straightforward.

* Now pressing the Control key steps back one move, and releasing it steps
forward again.

* Moved quit from "q" to "Q" for greater safety.

* Use "unobserve" instead of "observe" to stop observing; needed on FICS.

* Support for interface variable.

* Strip titles from people who are talking to us, so (for example) Zippy
won't try things like "tell Darooha(*) hello".  Needed on FICS.

3.4, patchlevel 2 -- Tue Jul  9 19:06:42 PDT 1996  Tim Mann <mann@pa.dec.com>

This patchlevel is not planned to be an announced release.  It's in
preparation for integrating Frank McIngvale's XbKit.  It mostly contains
minor fixes I've accumulated since 3.4.pl1.

* WinBoard /telnet option now fires up an external program, as
with xboard, instead of trying to use a feature of NT 3.1 that does not
exist in later versions of NT or in Windows 95.  ChangeLog for 3.4.pl1
said this had been implemented there, but it really wasn't.

* Indicating player to move by the icon color now works under Windows 95.

* WinBoard now kills the chess program when you exit using the system menu
or the [X] button.  Thanks to Michael Lowe.

* Minor changes to Zippy, including: Now understands wild challenges on
FICS; these used to crash it.  Removed limit on how fast a game will be
accepted.  Use "set formula ..." on the chess server to limit this if you
are using GNU Chess.  Now sends correct opponent name to Crafty.

* Added some missing default values to documentation.  Thanks to Stuart
Cracraft.

* Bugfix: Trying to print "No fonts match pattern" error message would
crash.  This can happen to Linux users who don't install Helvetica, for
example. 

* Bugfix: Defaulting feature in -size n,n,n,n,n,n would put us in an
infinite loop.

* Added more directories to search for Athena widgets on HPUX.

* New cmail (3.12) from Evan Welsh; includes small fix from Kayvan Sylvan.

* Recognize "illegal move" messages from Crafty for illegal castling, etc.

* Bugfix: "name" command added to zippy.c for Crafty was producing error
message if GNU Chess was in use.

* In bughouse mode, suppress holding messages from console window; show
holdings only in banner.

* Minor fixes/cleanup to Makefile.in and configure.in.

3.4, patchlevel 1 -- Mon Dec 11 13:43:12 PST 1995  Tim Mann <mann@pa.dec.com>

* This patchlevel updates WinBoard to match xboard, and includes a few
fixes and minor improvements.  "-size tiny" and "-size n,n,n,n,n,n"
are still not implemented for WinBoard.

* Installed support for Crafty based on code from Bob Hyatt.
Currently the only documentation for this is in the FAQ, and a few
things don't work with Crafty 8.23.  Please do not report these
problems as bugs in either xboard or Crafty.  Bob and I know about
them.  The worst ones (if not all of them) should be fixed in Crafty
8.24.

* Changed the kludge command we send when gnuchess wants to print
something that doesn't end with a newline, from "help" to "bogus".
This works because the error message gnuchess prints ends with a
newline.  It also improves compatibility with Crafty, which doesn't
need the kludge, but for which sending "help" causes a problem.

* Don't draw grid at all if lineGap is 0; previously we drew the grid
with X "0-width" lines (usually 1 pixel wide) and then overwrote it.

* Makefile: Removed xboard.info from "all" target so we won't try to
rebuild it, because this fails on hosts that don't have makeinfo
installed.  Other minor fixes to "clean" targets, etc.

* Fixes and cleanup to Auto Comment code that handles continuation
lines and highlighting.

* Auto Observe now tries to observe the game from the point of view of
the player who was on your gnotify list.  Requested by rng.
Limitations: We can't tell which player it was unless you have ICS
highlighting turned on.  Also, currently "observe foo" works as
required (observing from foo's point of view) only on ICC, but FICS
will probably implement this soon.

* "-size tiny" now makes the default font smaller automatically.  This
was implemented by introducing an extra Form widget in the hierarchy
for all xboard windows, named either normalLayout, smallLayout, or
tinyLayout.  So you can have resource specifications that apply only
to certain layouts; in particular, XBoard*tinyLayout*font.

* Bug fix: EditGame or EditPosition while playing or examining still was
not really being permitted.

* WinBoard bug fix: On the EditPosition menu, King did not work.

* Added text catalog of WinSock error messages to WinBoard, because
Microsoft still has not put them in the system message catalog.

* Removed support for older ICS game-ending messages that do not have
a PGN result token (*, 0-1, 1-0, or 1/2-1/2) after the closing '}'.
The code for older messages was sometimes firing on the newer
messages, due to parsing ambiguity.  If the current code sees an old
message, it will understand that the game is over, but will always
display * as a result token instead of trying to guess the result by
interpreting the text message.

3.4, patchlevel 0 -- Tue Nov 21 01:02:50 PST 1995  Tim Mann <mann@pa.dec.com>

* This patchlevel was released for xboard only.

* Updated the info file.  It should now be as up-to-date as the man page,
with good English except in the parts that pertain only to AmyBoard.

* Added "-size tiny", requested by Bob Hyatt.  Also cleaned up bitmap
support and added "-size n,n,n,n,n,n" to allow arbitrary-sized bitmaps,
if the actual bitmaps are supplied by the user.

* Updated bughouse support.

3.3, patchlevel 4 -- Sat Nov 18 02:27:21 PST 1995  Tim Mann <mann@pa.dec.com>

* Unreleased beta that works with preliminary FICS bughouse code.  Will
need changes before release to track FICS message changes.

* Removed use of .EX macro from man page.  It is not supported by some
nroff -man macro packages, notably the one on Slackware Linux.  Switched
to boldface for references to xboard and other commands within the man
page, as this seems to be the modern way.

* Bug fix: If ICS rejected a move, it was correctly undone on the board,
but the message widget still displayed the bad move.  Reported by DAV.

* Normally, xboard in ICS mode fetches the move list whenever the board
display switches to a new game.  Doing this is now an option
(getMoveList) that can be turned off, which is useful if you are watching
multiple blitz games.  Requested by rng.

* Move list fetching code is now smarter: it ignores a move list if it is
not for the right game.

* Added support for bughouse as implemented on FICS.  Holdings are shown
in the window title in place of the strength numbers.  A menu on mouse
buttons 2 and 3 (same on both) lets you drop pieces.  There is no checking
as to whether you actually hold the piece you are trying to drop; we rely
on ICS to check that.  Notation of the form P@f7 is generated and parsed.
The mate detector does not understand that non-contact mate is not really
mate in bughouse, but this does no real harm.  It results in a "#"
suffix being displayed on the move notation, but xboard does not assume the
game is over.

* Bug fix: Promotion to a knight was not working with ICC!  Thanks to
Wendigo for the report.

* Bug fix: Special pty code for host types *-*-aix3* and *-*-irix3*
(supplied from configure.in) had a bug that would cause childio.c to
fail to compile, due to a "continue" that was not within a loop.

* Bug fix: In pgntags.c, memory was being freed while still in use.  One
symptom this caused was that on some machines, cmail would fail with a
message that it could not find the BlackNA tag.  The error was in some
submitted code that I included in version 3.2.pl3 without reading
carefully enough.  Anders Forberg noticed the symptoms, and Evan Welsh
(who had nothing to do with causing the bug) found the bug and submitted a
fix; thanks to them both.

* Removed restriction against using EditGame while playing, observing,
or examining on ICS.  You still get a warning popup.

3.3, patchlevel 3 -- Sat Sep 16 11:44:05 PDT 1995  Tim Mann <mann@pa.dec.com>

* Bug fix: Going directly from MachineWhite to TwoMachines mode would kill
off the second chess program after Black's first move.

* Added -timeIncrement feature.  Thanks to Joel Rivat.

* Deleted code that tries to keep you from observing more than one game,
or observing while playing or examining.  There is actually no problem in
doing this, except that every time an update comes in from a different
game than is currently being displayed, xboard fetches the history of the
new game, which may be time-consuming if you are on a slow link.

* Fixed configure so as not to crash when neither lex nor flex is found.
lex or flex is needed only if the user wants to rebuild parser.c.  Thanks
to Phil Humpherys for reporting the crash.

* Bug fix: config.h.in used #define instead of #undef for some macros used
in the pty code in childio.c.  This causes the code to fail to compile on
some architectures, because the symbols are supposed to be undefined, not
defined to empty, when they are not set in configure.  Bug originated in
3.3.pl0 when config.h was introduced.  Thanks to Phil Humpherys for report.

* Bug fix: ShowThinking would not show anything when current position had
no move to display in the move window.  E.g., if position was created by
LoadPosition or EditPosition.

3.3, patchlevel 2 -- Mon Aug 28 11:11:11 PDT 1995  Tim Mann <mann@pa.dec.com>

* Zippy code was omitted from xboard-3.3.pl1 by mistake; now included.

* For WinBoard, added hint to help file that you may need to turn off
LocalLineEditing while typing dialing commands to your modem.

3.3, patchlevel 1 -- Sat Aug 19 15:13:30 PDT 1995  Tim Mann <mann@pa.dec.com>

* Zippy distribution is no longer separate from regular xboard distribution.

* Deal properly with Show Thinking output from GNU Chess when it is
thinking on its opponent's time.  In TwoMachines mode this output is
suppressed to avoid interfering with the output from the machine that is
on move; in other modes it is displayed (including the move that GNU Chess
is predicting the user will make next).  GNU Chess produces this output
only if it is built without -DQUIETBACKGROUND defined; this symbol is
defined by default in patchlevels before pl75, but undefined by default in
pl75.

* Bug fix: Handling of initial board position in move list for wild games
was broken, so wild games could not be observed and adjourned wild games
could not be continued.  Thanks to "Maximum Entropy" for the bug report.

* Added feature: algebraic notation now shows "+" indicator for check
and "#" for checkmate, as called for in PGN standard.  Thanks to Kevin
Maher for the suggestion.

3.3, patchlevel 0 -- Thu Jul 27 22:21:07 PDT 1995  Tim Mann <mann@pa.dec.com>

* Changed configuration to use a config.h file instead of passing zillions
of -D options on the cc command line.

* Merged a small fix and some updates to the texinfo file from Jochen
Wiedmann.  The texinfo file still needs work.

3.2, patchlevel 5 -- Tue Jul 18 20:29:39 PDT 1995  Tim Mann <mann@pa.dec.com>

* Beta test release of xboard only.

* Updated WinBoard code to include new xboard features.

* Added texinfo file from Jochen Wiedmann to the release, but not as the
primary documentation.  It needs updating, and the English needs work.
I did make a few improvements, mostly to change incorrect uses of @var to
either @samp or @code as appropriate.

* Merged in code changes to 3.2.pl4beta from Jochen Wiedmann.

* Fixed EditComment; did not pop up window in previous beta.

* Added AutoComment feature.

* Added GameListDestroy to disable the outdated game list popup in cases
where we load a new game file without building a new popup.

* Added yyskipmoves feature to parser.l to speed up building of gamelist.

* gamelist.c wouldn't compile with a non-ANSI compiler.  Fixed.

* Change to yy_text handling in patchlevel 3 still had problems.  Can't
use AC_DECL_YYTEXT in configure.in, because that defines YYTEXT_POINTER
according to whether the lexer on the current host makes yytext a pointer.
But most people will be using a parser.c that was generated on another
host and shipped with the package.

3.2, patchlevel 4 -- Sun Jun 25 19:13:43 PDT 1995  Tim Mann <mann@pa.dec.com>

* Beta test release of xboard only.  

* Added FIREWALLS section to man page.

* Changed -icsport to be a string.  Now with the -telnet option,
specifying -icsport "" suppresses the second argument to telnet.

* Added EditTags feature.  Removed AboutGame from menu, because EditTags
subsumes it.  EditTags suggested by Jochen Wiedmann and first implemented by
him in AmyBoard.  xboard implementation is my own.

* Fixed some missing or incorrect prototypes.

3.2, patchlevel 3 -- Sat Jun  3 18:57:38 1995  Tim Mann  <mann@pa.dec.com>

* Beta test release of xboard only.  

* New version of cmail from Evan Welsh, to fix compatibility problems with
perl 5.0.

* Added game list feature on Load Game, based on code from Jochen
Wiedmann.  Integrated it with cmail.

* Several bug fixes from Jochen Wiedmann, including one to my yy_text
workaround for the difference in the type of yytext between lex and flex.

* Handle clock pause on FICS.

* Suppress clocks in untimed FICS games (time control 0 0).

* Rebuilt configure script with autoconf 2.3.  This fixes a bug in
configuring for X11R6, where -lSM -lICE would not be added when needed.

* Fixed inconsistent type declarations on IntSigHandler and
CmailSigHandler.  Bug report from Josh Daynard.

* backend.c wouldn't compile with a non-ANSI compiler.  Fixed.

3.2, patchlevel 2 -- Tue Feb  7 14:50:30 1995  Tim Mann  <mann@pa.dec.com>

* Minor release of both xboard and WinBoard.

* Added recognition of some FICS messages.  On the other hand FICS is also
changing some of its messages to match what xboard already recognizes.

* Temporarily went back to using "promote" command on ICS instead of
"a7a8=Q", because FICS doesn't implement the latter yet.

* We now avoid using overlapped I/O on pipes in WinBoard, to make Windows
95 beta 2 happy.  This lets WinBoard work with GNU Chess on Windows 95!

* Installed patches from Jochen Wiedmann to coordinate with Amiga XBoard.

* Installed patch to cmail bug in LoadGame from Evan Welsh.

* Bugfix: checkmate and stalemate moves entered with EditGame in ICS mode
were not being handled correctly.  Bug was in GameEnds().

* Implemented EchoOn and EchoOff for xboard, using system("stty echo\n").
Now passwords won't be echoed when you connect directly to ICS.  Also,
telnet negotiation characters aren't displayed (when possible).

* Implemented more of the telnet protocol.  Now connecting to a telnet
server with "-icsport 23" should work even without giving the -telnet
option.  The telnet is in "old line-by-line mode".

3.2, patchlevel 1 -- Sat Dec 10 13:50:46 1994  Tim Mann  (mann@pa.dec.com)

* This patchlevel released for WinBoard only.

* winboard.c: Fixed ConsoleInputThread().  Needed to change CRLF to LF,
not to CR.  This was stopping normal /ics mode from working.  Thanks to
Asher Kobin for the bug report.

* winboard.c: Fixed Raw(), EchoOn(), EchoOff().  Now they take effect
immediately, not on the next console read after the one in progress.

* winboard.c: Attempted to make WinBoard work with gnuchessx running
directly on Windows (not remotely via rsh).  It now works on NT, but only
if gnuchess is told not to think on its opponent's time ("easy\n" removed
from initString).  The problem seems to be that GenerateConsoleCtrlEvent
is not doing anything.  On Windows 95 beta 2, we get error messages on
both reading and writing to gnuchessx; I didn't investigate why.

3.2, patchlevel 0 -- Wed Dec  7 13:23:36 1994  Tim Mann  (mann@pa.dec.com)

* Thanks to all the beta testers who gave me feedback: Josef Nelissen,
Steve Booth, Evan Welsh, Dima Dakhnovsky, Chris Petroff, Peter Jansen,
Derek Terveer, Michel van der List, Richard Lloyd, Shelly Mistry, and Mike
Lee.  Sorry if I forgot anyone.  Thanks to Virendra Kumar Mehta for
information about DYNIX/ptx.

* Don't exit on keyboard EOF unless we get two in a row.

* WinBoard only: added -localLineEdit switch to allow turning off local
line editing if you really want to.  It is still a bad idea to let the
echoing be done remotely, however; see below.

* Fixed some configure problems on HP-UX.  [Steve Booth]

* Fixed (I hope) configure problem on SunOS 5.3/Solaris 2.3.  [Josef Nelissen]

* cmail bugfix from Evan Welsh (cmail 3.4).

3.1, patchlevel 9 -- Fri Dec  2 23:54:56 1994  Tim Mann  (mann@pa.dec.com)

* Beta distribution only

* Always do local echo/edit of user typing in ICS mode.  Doing the echo
downstream may seem nicer in some modes, and it can be hard to turn that
echo off, but the echoed characters can be interleaved with ICS output
and make it impossible to parse correctly.  For xboard this involved only
a change to recommendations in the man page, as Raw() isn't implemented.
For WinBoard, removing Raw() made a real difference.  Added code in 
WinBoard to change /r/n back into /r on keyboard input, as we get the 
former when Raw() is not called.

* Do not issue ICS "refresh" command after we start to observe a game
unless we get to the next prompt without seeing a board image.  Newest
version of ICS doesn't require this refresh, but old versions around still
do.

* cmail bugfix and small code cleanup in LoadGame, from Evan Welsh.

* Added keyboard accelerators N/P for LoadNextGame/LoadPreviousGame.  Evan
Welsh request.

* Using "-" on the command line as a filename for loading (saving) games
or positions specifies the standard input (standard output).  Alain Picard
suggestion.

* On WinBoard only, a command line option without a leading '-' or '/' is
now taken as the value of -lgf.

* Changed to not use stdin, stdout, stderr as initializers in backend.c;
needed for GNU libc compatibility.  You also must build parser.c with flex
(not lex) if you are using GNU libc, to avoid having the same problem
there.

* Changed WinBoard to avoid using "overlapped" input on the console.  It
now seems to fully work on Windows 95 beta 2.

* Improved comment popups on WinBoard.  Now newlines are handled properly,
and the plain Comment popup window doesn't disappear and reappear when we
step to a new move with a new comment.

* Fixed bugs in detecting the absence of the time and otim commands.

* Added built-in implementation of rcmd protocol to WinBoard.  Windows NT
does not implement passing signals through rsh, and Windows 95 does not
have rsh at all.

* Added -remoteUser option.

3.1, patchlevel 8 -- Mon Nov 28 15:26:07 1994  Tim Mann  (mann@pa.dec.com)

* Beta distribution only

* Rearranged ChangeLog file into reverse chronological order to be closer
to GNU standards.

* Integrated new cmail code from Evan Welsh (including cmail RCS rev 3.2).
Includes a bug fix to TruncateGame.

* Updated ICS address to be chess.lm.com.

* Bug fixes to handling the aftermath of FatalError.  Thanks to Chris
Petroff for the bug report.

* Test for remsh before rsh, other fixes for HP-UX.  Thanks to Richard
Lloyd.  I wasn't able to do all the things he suggested, so there may
still be some rough edges in building on HP-UX.  See the FAQ file for hints.

* Bug fix; added missing check for HAVE_SYS_SYSTEMINFO.  Thanks to Josef
Nelissen for testing on Solaris 2.x.

* Updated WinBoard to match xboard.  (WinBoard still has a few option
dialogs that don't exist in xboard.)

* Changed Hint output to a popup.

* ShowThinking output and move output no longer overwrite each other.
ShowThinking output won't appear if the displayed position is not current. 
ShowThinking output in TwoMachines mode made clearer and documented.

* Implemented --enable-ptys and --disable-ptys arguments to configure.

* Fixed Book and Hint code to work over a pty with echo enabled and tabs
expanded to spaces.  Thanks to Dima Dahknovsky for the bug report.

* Moved Attention calls from all over xboard to one place, inside
SendToProgram.

* Added bulletproofing to ShowThinkingEvent.

* Added code to handle "refresh N" boards that come in from ICS properly,
assuming ICS is changed to mark them with a new relation code (-3).

3.1, patchlevel 7 -- Sun Nov 13 22:16:01 PST 1994 -- mann@pa.dec.com

* Beta distribution only

* Changed ShowThinking to just show the current best line in the
DisplayMessage area, instead of dumping everything to stdout.

* Installed new cmail (RCS rev 3.1) and cmail.man (RCS rev 1.10), and
changes to cmail code in backend.c, from Evan Welsh.

* Miscellaneous minor fixes.

3.1, patchlevel 6 -- Fri Nov  4 12:53:53 PST 1994 -- mann@pa.dec.com

* This patchlevel was not actually released to anyone.

* Updated the pty code to be based on GNU Emacs 19.24, and moved it to a
separate file.  It was hard to split out just the pty configuration from
all the stuff emacs does with its custom configure script and .h files,
but I did my best.

* Converted from imake to GNU autoconf.  This was a serious upheaval.  

* Put in code to help trap "error gathering move list" problem reported by
Michel van der List if it recurs.  I couldn't reproduce it.

3.1, patchlevel 5 -- Mon Oct 31 21:12:00 PST 1994 -- mann@pa.dec.com

* Beta distribution only.

* We now test for checkmate or stalemate in EditGame mode after every user
move, and in LoadGame mode whenever we hit the end of a game without
seeing a PGN end marker.  cmail needs an update to deal with this
correctly; Evan promises one.

* Bugfixes in new move generator.  Thanks to Mike Lee for reporting one of
the bugs.

* Imakefile was omitted from patchlevel 4.

3.1, patchlevel 4 -- Mon Sep 19 18:19:46 PDT 1994 -- mann@src.dec.com

* Beta distribution only.

* The move generator includes a mate tester.  Initially this is used only
by cmail, and even that usage needs further work.

* Wrote a true move generator and used it to replace all the move
disambiguation and legality checking code in parser.l.  The move generator
is capable of dealing correctly with en passant and castling availability,
but the rest of the program still does not keep track of this information.

* Bug fix: xboard did not handle "foo has made you an examiner of game 23"
message.  Thus you could not use examine features until the next board
came in, showing your new relation to the game.  Thanks to POOKIEWOOKIE on ICS
for the bug report.

* Added AutoObserve feature.  Thanks to Chris Petroff for the idea.

* Added Book feature to use new gnuchess "bk" command.  Mike McGann request.

* Redid code to handle missing "time" command in gnuchess, because latest
gnuchess no longer sends a response to this command.  

* Eliminated need for -DFLEX.  Thanks to Michael Shields (Vladimir?) for
the idea.

* Added missing code to implement MoveNow in TwoMachines mode.

* Added ShowThinking feature.  Thanks to Richard Lloyd for the idea.

* Applied patches from Evan Welsh; some fixes and improvements to the
cmail code.

* Fixed bug in moving from EndOfGame mode to MachineWhite or MachineBlack,
introduced in previous patchlevel.  Also fixed related bug in ending a
game in ICS mode; was entering EndOfGame mode instead of IcsIdle.

* Added patch to implement internetChessServerLogonScript flag, from Kevin
O'Connor.  Thanks!

3.1, patchlevel 3 -- Wed Sep  7 13:22:07 PDT 1994 -- mann@src.dec.com

* Beta distribution only.

* Merged in new cmail code from Evan Welsh.  He added the ability to have
more than one game per message, needed for official IECG matches.  I added
the ability to resign or offer/accept/decline a draw in a cmail game.

* Bugfix: invalid -tc option caused segmentation fault; DisplayFatalError
was called too early in initialization.  Georges Honore reported this bug.

* Decided to keep EndOfGame mode as an element of the user interface---it
means that a gnuchess game or loaded game has ended, and the user must
explicitly select EditGame to edit it, rather than just being able to
enter more moves freely.  But internally there is no longer an invariant
tying this mode to whether the chess program is running.

* Zippy bugfix: Was saving only the final position in the -sgf file when
the game ended by something other than resignation or flag.  Also fixed
the longstanding bug that Zippy would think the final board of such a game
was a new game and restart the chess program.

* Now does a better job of faking castling availability in FEN.  We still
don't really keep track of it, but now at least we don't say that castling
is still available when the king or rook is not on its home square.

* Bugfix: Initial board of game history for wild games was going through
too much processing, causing us to forget the game length, which is now
needed by ParseGameHistory.  This was causing problems with resuming
adjourned wild games.

* Updated ICS host to ics.onenet.net.

* Zippy now accepts challenges where the opponent specified his color.

* Added ZIPPYPASSWORD2 to let operator give commands directly to gnuchess.

* Bitmap directory can include alternative icons now, too.

* Handle "Game * (*) has no examiners" message from ICS.

* Revamped window title and icon name selection.

3.1, patchlevel 2 -- Sun Jun 12 17:16:28 PDT 1994 -- mann@src.dec.com

* "Beta" distribution for Zippy users only.

* Bugfix: common.h was assuming that X11 type Boolean is char, which is
not always true.  This might have caused all sorts of obscure bugs!

* Installed new bitmaps from Elmar Bartel as the default.  Many thanks!
The old bitmaps can be used by changing the "bitmaps" symbolic link before
compiling xboard, or by using the -bitmapDirectory option at runtime.

* Loading a game that ends with the PGN unfinished symbol ("*") now always
leaves you in EditGame mode.

* Added documentation of -icscomm to man page.  Thanks to Maarten Remkes
for the linux script.

* ^C now kills gnuchess as well as xboard.  Thanks to Dima Dakhnovsky for
reminding me how to do this.

* Bitmap icon color now indicates player to move.  Stuart Cracraft
suggestion.

* Changed piece bitmap flags to have just one flag, which points to a
directory full of bitmaps, instead of a flag for each bitmap.  Also
changed bitmap naming convention.

* "Connection closed by ICS" is no longer a FatalError popup.  This was
too annoying in the normal case where the user typed "quit".

* Changed default font to 14 pixels instead of 10 points.  This seems to
make it close to the size I want it to be on more displays.

* Major mode (GNU Chess, etc.) appears in title bar.  Stuart Cracraft
request.

* Bug fix: EditGameEvent, MachineBlackEvent, MachineWhiteEvent, and
TwoMachinesEvent were calling PauseEvent to get out of pause mode, which
now has undesired side effects, such as advancing the display to the
forwardMostMove.  It works fine to just set pausing = FALSE instead.

* IcsExamining mode now lets you access ICS edit position commands using
the same popup menus as xboard's EditPosition mode.  Thanks to DAV on ICS
for inspiring the idea.

* Corrected test for gcc on HP in Imakefile; thanks to Richard Lloyd.

3.1, patchlevel 1 -- Wed Jun  1 16:25:11 PDT 1994 -- mann@src.dec.com

* Added parser.c.lex and parser.c.flex to the distribution.

* Added HP gcc options to Imakefile, from Mats Nylen.

* EndOfGame mode no longer highlights EditGame mode indicator, because the
modes really do differ.  I would like to get rid of EndOfGame mode in the
future, at least as far as users can see.

* Larger %a in parser.l, needed for RS/6000 users.

* Minor improvements to Mail Move error messages.

* When -debug flag is given to xboard, -v is passed to cmail.

* Old Save Style uses "1. ..." instead of "1..." when black moves after a
comment; more like xboard 3.0's actual style.

* New version of cmail from Evan Welsh.  Looks for UCB Mail in a more
portable way and has some minor bug fixes.

* Bug fix: Saving a FEN position while in EditPosition mode with black to
play was showing white to play in the saved position.

3.1, patchlevel 0 -- Fri May 20 16:36:15 PDT 1994 -- mann@src.dec.com

* This is the first general release since 3.0, patchlevel 9.  Releases
since then have been limited-distribution or beta releases.

* Thanks to my version 3.1 beta testers: Dmitry Dakhnovsky, Ed Hanway,
Richard Lloyd, Mike McGann, Shelly Mistry, Josef Nelissen, Chris Petroff,
Jack Robertson, Michel van der List, Ky Macpherson, Derek Terveer, and
Evan Welsh.  Sorry if I've forgotten anyone who gave me feedback.

* Updated man page.

* Minor cleanup on menu sensitivity code.

* Integrated another even better version of cmail from Evan Welsh,
including some code he supplied in xboard itself.

* A few more fixes to cmail support.

* Automatically update clocks after an ICS "moretime" command.

* Handle ICS automatic examine mode (set examine 1) after a game.

3.0, patchlevel 14 -- Tue May 17 13:41:44 PDT 1994 -- mann@src.dec.com

* Beta test release only.

* Don't suppress prompt on first board of game being examined; otherwise
it looks like nothing happened at all (i.e., like you're lagged).

* Added StopExamining and StopObserving (Chris Petroff suggestion).

* Made Reset do a refresh on ICS.  John Chanak's original ICS code for
xboard tried to do this; I finally decided it was a good idea after all.

* Fixed bugs in handling updates that come in while you are pausing in
examine mode.  This is pretty tricky to do right.

* Made un-Pausing immediately pop you to the current position.  This is
always necessary in examine mode, since the game may have changed under
you; your remembered moves might no longer be right.  So I made it do the
same in all modes.

* Took Detach Examine mode back out...used Pause mode for this instead!

* Put in a trap for the GNU Chess bug of printing an Illegal Move message
when its own hint move is illegal.

* Attempted to fix a Zippy bug; bogus "exited unexpectedly" messages after
it checkmates its opponent.  This involved adding an argument to GameEnds
to say who says it ended (ICS, GNU, etc.)  and taking different actions in
different cases.  Unfortunately, this just restored an older Zippy bug, where
Zippy restarts gnuchess when it gets the board with the final position,
because GameEnds still puts xboard in EndOfGame mode.  Sigh.

* We now capture elapsed time on last move when getting game history.
(Josef Nelissen bug report)

* Rewrote code to redisplay last file title so it really works.

* Fixed bug in oldSaveStyle.

* Larger %a and %o were needed for lex.

3.0, patchlevel 13 -- Mon May 16 16:26:22 PDT 1994 -- mann@src.dec.com 

* Beta test release only.

* FatalError popups stay on the screen now.  If the error is really fatal,
all functions are disabled, and the program exits when you press OK.

* Redisplay last file title when using Load (Next/Previous/Same) Game.

* Zippy understands new match challenge message format on ICS.

* Added Revert command.

* When examining a game on ICS, < > buttons do ICS backward/forward
commands, unless you set the Detach Examine option.  Thanks to Dima
Dakhnovsky for the idea.

* Fixed various minor problems in cmail mode.

* cmail generates the tags now.  New version of cmail from Evan Welsh.

* cmail mode won't let you do MailMove unless the currently displayed
position is exactly one move past the end of the game you loaded.

* Fixed building of man pages in Imakefile

* Updates to INSTALL file

3.0, patchlevel 12 -- Sat May  7 21:10:03 PDT 1994 -- mann@src.dec.com 

* Beta test release only.

* Brought man page up to date.

* Added Shift+R to resign from keyboard.

* Some items on Action menu available in GNU Chess mode now.

* Revamped Action menu.

* Reordered functions in backend.c as a small step toward reorganizing
this whole mess.

* Generate TimeControl PGN tag.

* Get type of ICS game (e.g., rated blitz) and save in PGN tags.

* Bug fix: Clocks were not redisplayed when entering EditGame mode.

* Bug fix: Clocks were not being redisplayed after loading a game file
with -td 0, so they could show the wrong color active.

* Bug fix: Chess programs would be killed and match mode would exit
prematurely when loading a PGN game fragment ending with "*".

* ICS command "sposition" no longer confuses xboard.

* Integrated new version of cmail (with support code in xboard) from Evan
Welsh.

* Added TruncateGame, MoveNow, RetractMove, and QuietPlay.

* Bug fix: switching between MachineWhite and MachineBlack was not calling
Attention().  Reported by Dino Dini.

* More improvements to INSTALL and Imakefile.

* Pack moves into 79 character lines in PGN output.  We don't generate
check indications, and we always break the line before the result,
so this is not quite PGN export format.

* Use FEN tag in PGN.

* Improved finding and counting of game starts in save files.

* Negative position or game numbers in -lpi/-lgi mean to seek to that byte
offset.  Hook for possible future features, not in man page.

* Detect and handle absence of either "time" or "otim" commands in
gnuchess.

* Don't use "promote" command to ICS anymore.

* Handle switching sides and taking back moves on FICS.

* Handle flip state flag in style 12 board.

* Handle examine mode on ICS.

* Improved error popups for various kinds of illegal moves.

* Suppress unasked-for hints from gnuchess (which it generates in post
mode).

* Load/save position functions use FEN.  Old style also supported.

* Added detailed error messages if loading a bitmap file fails.

* Small board has 2-pixel lines between squares instead of 3-pixel.

* Added OldSaveStyle and AboutGame.

* Renamed ForceMoves to EditGame.

3.0, patchlevel 11 -- Tue Sep 21 15:25:36 PDT 1993 -- mann@src.dec.com 

* The following changes were present in xboard 3.0, patchlevel 11, but the
first group did not make it into WinBoard 3.0 until later.  xboard
3.0.pl11 was a limited-distribution release only, mostly to Zippy users.

* Man page minor fixes.

* Added a missing file close.

* Removed automatic error popdown on Reset, which was destroying some
error messages before they could be read.

* Fixed char vs. unsigned char warnings on bitmaps.

* Use ICS board style 12.  Some improvements to ICS parsing.

* Comment window is now labelled with the move the comment is on, and
comments don't pop down when you step to the next move.

* Save files now in PGN format.

* Support for loading PGN files.  PGN tags pop up when a PGN game file
is loaded.

* More info in INSTALL and Imakefile about building for Suns (and
other systems).

* WinBoard 3.0 patchlevel 11 split off from an early version of xboard
3.0 patchlevel 11, so it does not have all the features of that
patchlevel.  The following changes made it into both xboard and
WinBoard:

* Made Comment dialog non-modal in WinBoard.

* EndOfGame mode is now more transparent.  It looks like ForceMoves
mode except that there is no chess program running.

* Small bug fixes in clock management.  Most noticeably, pausing when
it is gnuchess's move now works as documented (again).

* Add minimal support for -icscomm option.  Not documented yet because
I haven't sorted out the issues with setting the tty modes on the comm
port device, or with locking it properly.  But it's usable by wizards.

* Don't restart the chess program upon Backward event from EndOfGame mode.

* Suppress extra prompt after ICS sends us a board.

3.0, patchlevel 10 -- Sat Sep 11 18:44:03 PDT 1993 -- mann@src.dec.com 

* Beta test release only.

* Zippy now plays chess.  zippy.c and zippy.h are still not included
in the standard distribution, but are available on request.

* Switched to using style 12 on ICS.

* Updated man page, and documented use of XBoard*form.translations to
add more shortcut keys.

* Added shortcut keys "d" to claim/offer/accept a draw, and "t" to
call flag.  Suggested by venu on ICS.

* More explicit instructions in INSTALL file.

3.0, patchlevel 9 -- Tue Sep  7 14:02:00 PDT 1993 -- mann@src.dec.com

* General release, minor update to 3.0.pl8.

* Loosened checking on whether it's okay to start a move, to satisfy
ICS ultra-blitz players.  Now we don't check whether it's your turn
until you let go of the piece.

* Parser now recognizes "+-+" as meaning the game ended in a draw.

* Got rid of S_NONE symbol, which seems to conflict with some symbol
Sun defines.

* Tweaked the man page.  Clarified that there is currently no way for
two people running copies of xboard to play each other without going
through the Internet Chess Server.

* Fixed a bug in color name conversion.  Asking for two different
colors whose names were the same in the first four characters would
get you two copies of the first one.  Thanks to Volker Zink for the
bug report.

* Improved confusing Usage() message.

* Added a bunch of Sun information to the Imakefile and INSTALL file.
Thanks to Ed Hanway, Arik Klingensmith, and others who responded.

* Test for defined(WIN32) instead of !defined(unix).

* Avoid using (void *) type with non-ANSI C compilers.  Thanks to
James Altucher for the bug report.

3.0, patchlevel 8 -- Thu Sep  2 12:23:01 PDT 1993 -- mann@src.dec.com

* Note: Patchlevel 8 was the first non-beta release of xboard 3.0

* Added cmail to distribution.  Contributed (and still maintained) by
Evan Welsh, welsh@epcc.ed.ac.uk.

* Bug fix: -queen option wasn't initializing menu check.  Reported by
Pat Surry.

3.0, patchlevel 7 -- Thu Aug 26 13:23:24 PDT 1993 -- mann@src.dec.com

* Sent WinBoard 3.0.pl7 to doli@troi.cc.rochester.edu (Torre on ICS)

* Added parser.h to hold the interface to parser.l

* Upgraded COPYING file and copyright notices to GNU GPL version 2.

3.0, patchlevel 6 -- Tue Aug 24 15:16:13 PDT 1993 -- mann@src.dec.com

* We no longer display intermediate positions or intermediate comments
while loading a game file with -timeDelay 0 or loading an opening to
start up a -matchMode game.

* Loading an empty game from an xboard save file now gives a status
message "No moves in game" instead of an error popup saying "Game not
found in file."

* Added comment.awk to distribution.

3.0, patchlevel 5 -- Tue Aug 17 16:45:54 PDT 1993 -- mann@src.dec.com

* Bug fix:  xboard would crash if it couldn't get all its colors; now
it switches to monoMode instead.  Also, xboard was trying to convert
color resources even when using a b/w display.  Reported by Larry
Rogers.

* Bug fix: Declared fields of TimeMark as signed so that we get signed
instead of unsigned arithmetic.  SubtractTimeMarks was breaking on
Alpha AXP (which has 64-bit longs) with old declarations.  Reported by
Michel van der List.

* Bug fixes:  Keyboard accelerators now work after EditComment window is
popped down.  Iconize keyboard accelerator now works even if xboard
was started with -iconic flag and later deiconized.

* Bug fix:  The routine that tests whether a move is illegal because it
would leave you in check was not handling e.p. captures properly.
Reported by Patrick Surry.

* Bug (?) fix:  Was adding time to clocks at time control even when
loading a game file.  Actually it's not entirely clear how time
controls should be dealt with when some moves are loaded from a file
or clicked in with ForceMoves.  For now ForceMoves mode does add the
time (because it can be used to change moves during a live game), but
LoadGame mode does not.

* Updated usage message.

* Previous attempted fix to matchMode had broken TwoMachines mode and
generally needed more work.  Also simplified command line interface to
matchMode.

3.0, patchlevel 4 -- Thu Aug  5 14:17:18 PDT 1993 -- mann@src.dec.com

* Thanks again to the beta testers listed for 3.0 patchlevel 3, and also
Desnogues, Steve Cariglia, Niklas Engsner, Mark Silver, and Roger Rowe.

* Reorganized man page, splitting OPTIONS into subsections.

* matchMode was very broken; fixed.

* Changed convention for turning off command line options from --opt
to -xopt, to be less inconsistent with GNU standards.  Also changed
the long command line options to take True/False arguments like
resources; seems to make more sense this way.

* Added AlwaysQueen option -- suppresses promotion dialog and always
promotes to a queen if you move a pawn to the last rank.  Has no
effect on gnuchess (or your ICS opponents!) -- they can still
underpromote.

* Subtracted an extra fudge term when determining how wide message and
title widgets should be.  This fixes a problem some beta testers had.
Wish I knew why it's needed.

* Bugfix in parser; symptom was that you couldn't do LoadGame after
observing a game on ICS.

* Bugfix in Forward; didn't work after game ended while Pause was turned on.

* Removed bogus execute bits on .h files.

* Use REMOTE_SHELL and TELNET_PROGRAM definitions.

* MachineWhite and MachineBlack now work from TwoMachines mode.

* Popping down an error message with the [ok] button was not turning off
the errorUp flag, so the next move would cause xboard to try to pop it
down again, resulting in a wild memory reference and sometimes a crash.

3.0, patchlevel 3 -- Tue Aug  3 17:40:27 1993  -- mann@src.dec.com

* Thanks to my beta testers: Patrick Surry, Takuya Kojima, Robert J. Luoma,
Chris L.  Petroff, Richard K. Lloyd, Michel van der List, Craig Metz,
Antoon Frehe, Simon Clift, Shelly, Eric Peterson, Christopher Mitchell,
Martin Koch, Ed Hanway, Steve Booth, Udo, Ken Hobday, and Joseph Duhamel.

* Improved error messages for trying to move the wrong color pieces or
to move when it's not your turn.

* Special code for monoMode on 1-bit displays now understands displays
where 1=white and 0=black.

* Declare getenv() if <stdlib.h> not included; avoids a compiler warning.

* Documented borderXoffset and borderYoffset.

* Added -titleInWindow option for use with X window managers that
don't let us set the title in the window banner.

* Fixed error message printing in WinBoard; system error messages no
longer appear as numeric codes.

* The error message popup is now non-modal; you don't have to press the
[ok] button before you can do something else.  In addition, the popup is
positioned so that it doesn't cover up the board (too much), and making a
move or otherwise clicking on the board pops it down.  (Not implemented in
WinBoard.)

* You can now call your opponent's flag in ICS mode by clicking on his
clock. 

* Fixed minor bugs in -flipView option and documented exactly how xboard
decides which way to flip the view.

3.0, patchlevel 2 -- Fri Jul 30 22:20:23 PDT 1993 -- mann@src.dec.com

* Added Autosave to Options menu.  Would be better to have Save
Options dialog as in WinBoard, but this was quick to do and gives the
most-needed functionality.

* Changed "Reload Game" on menu to "Reload Same Game".

3.0, patchlevel 1 -- Thu Jul  8 21:22:59 PDT 1993 -- mann@src.dec.com

* Sent a copy of patchlevel 1 to Patrick Surry to beta-test.

* Added -cmail option that sets appData.cmailMode.  Currently a no-op.
In the future this may set special modes for use by the cmail script
for playing chess by email.

* Added LoadNextGame, LoadPreviousGame, and ReloadGame to File menu.
ReloadGame suggested by Patrick Surry.

* Added -flipView command-line option.  Suggested by Patrick Surry.

* Fixed bugs in parser.l:  (1) Pattern for "# xboard game file ..."
needed to match to end of line.  (2) Start of a new file was not matching
the ^ start-of-line character.  The fix for this is a kludge.

* Made game counting code in LoadGame more robust, and made LoadGame
able to detect the end of a saved partial game (by noticing the start
of the next game) in game files created by XBoard itself.  We don't
try to find the start of the next game that way in other kinds of game
files, because the only way I can think of to do that is to look for
another move #1, and that technique gets too many false hits.

* Fixed recently introduced bug in LoadGame when game starts with a
position diagram.

3.0, patchlevel 0 -- Fri Jun 25 14:17:17 PDT 1993 -- mann@src.dec.com

* Changes in this patchlevel were too numerous to list.  Larger ones are
listed below.

* Added a popup dialog to enter and edit comments.  Inspired by some
code from Patrick Surry.  Changed the normal read-only comment popup
to the same style.

* Added ICS init script feature from Karl Schwamb.

* Added some ESIX fixes and OMIT_SOCKETS ifdef option, from Kayvan Sylvan.

* Revamped code to allow use of flex instead of lex on parser.l.
Using flex requires adding -DFLEX to defines in Imakefile.

* Source code is split into front end (xboard.c), which knows about X
and Unix, and back end (backend.c), which knows about chess, gnuchess,
and the ICS.  There is also a front end for Windows NT.

* Boolean command line options now use "-foo" to turn on and "--foo"
to turn off instead of "-foo true" and "-foo false".  [Later -xfoo;
see above.] 

* Added menu commands to control autoflag, bell, and coords options.

* User interface has a new look: (1) Menu bar instead of array of
buttons.  A few very commonly used features have small buttons in
addition to being on the menus. (2) Large font for clock.  (3) Pop-up
dialogs for errors.

